<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Dalong&apos;s personal blog</title>
    <description>Record the bits and pieces of the technology big bang.</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Mon, 14 Aug 2023 01:04:02 +0800</pubDate>
    <lastBuildDate>Mon, 14 Aug 2023 01:04:02 +0800</lastBuildDate>
    <generator>Jekyll v3.9.3</generator>
    
      <item>
        <title>Use NestJS Develop Restful API and Web - Part 1</title>
        <description>&lt;p&gt;本课程主要学习内容包括：&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Typescript - 面向 AOP 编程&lt;/li&gt;
  &lt;li&gt;高并发异步非阻塞 IO - Node.js 版的 spring&lt;/li&gt;
  &lt;li&gt;构建微服务应用。 通过学习Nest.js 框架，开发者可以使用Typescript语言进行Node.js服务端应用开发，轻松搭建可扩展、松耦合且易于维护的应用程序.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;nestjs&quot;&gt;Nest.js&lt;/h1&gt;
&lt;p&gt;[TOC]&lt;/p&gt;
&lt;h2 id=&quot;资源&quot;&gt;资源&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://nodejs.org/en/download/&quot;&gt;nodejs 下载&lt;/a&gt;
&lt;a href=&quot;https://classic.yarnpkg.com/en/docs/install/#mac-stable&quot;&gt;yarn 包管理工具安装&lt;/a&gt;
&lt;a href=&quot;https://nestjs.com&quot;&gt;nest.js 官网&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;课程介绍&quot;&gt;课程介绍&lt;/h2&gt;
&lt;p&gt;本课程主要学习内容包括：&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Typescript - 面向 AOP 编程&lt;/li&gt;
  &lt;li&gt;高并发异步非阻塞 IO - Node.js 版的 spring&lt;/li&gt;
  &lt;li&gt;构建微服务应用。 通过学习Nest.js 框架，开发者可以使用Typescript语言进行Node.js服务端应用开发，轻松搭建可扩展、松耦合且易于维护的应用程序.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;命令行安装环境&quot;&gt;命令行安装环境&lt;/h2&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;https://nodejs.org/en/download&quot;&gt;下载&lt;/a&gt; node for mac 并安装&lt;/li&gt;
  &lt;li&gt;安装 yarn 和 nestjs 命令行
    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt; brew install yarn      
 yarn --version
 yarn global add @nestjs/cli
 nest -v
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;vscode-扩展安装&quot;&gt;VSCode 扩展安装&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;vscode-icons&lt;/li&gt;
  &lt;li&gt;prettier-code formatter&lt;/li&gt;
  &lt;li&gt;one dark pro&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;vscode-快捷键&quot;&gt;VSCode 快捷键&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;cmd+shift+p 在输入 format 就可以给代码格式化&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;nestjs-语法总结&quot;&gt;nestjs 语法总结&lt;/h2&gt;

&lt;h3 id=&quot;输出日志&quot;&gt;输出日志&lt;/h3&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&apos;title&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;err&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;将变量&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;放到&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;一个字符串&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;中输出&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;随机数获取&quot;&gt;随机数获取&lt;/h3&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;v4&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;uuid&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;uuid&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;nl&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;uuid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&apos;uuid&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;获取-api-发送过来的-body-中的数据&quot;&gt;获取 API 发送过来的 body 中的数据&lt;/h3&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&apos;title&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 将 body 中的 title 参数放到 title 变量中&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&apos;title&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;获取-api--url中的参数的数据&quot;&gt;获取 API  URL中的参数的数据&lt;/h3&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Param&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&apos;id&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 将 URL 中的 id 参数放到 id 变量中&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&apos;id&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;代码案例--任务管理应用--rest-api&quot;&gt;代码案例:  任务管理应用  (Rest API)&lt;/h2&gt;
&lt;h3 id=&quot;project-overview&quot;&gt;project overview&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/arielweinberger/nestjs-course-task-management/tree/s1-task-management-app&quot;&gt;教学代码&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;项目是一个基于 rest API 的任务管理, 可以创建, 查看, 更新任务&lt;/li&gt;
  &lt;li&gt;任务管理需要有 注册和登录功能&lt;/li&gt;
  &lt;li&gt;学习目标
    &lt;ul&gt;
      &lt;li&gt;objectives: NestS&lt;/li&gt;
      &lt;li&gt;NestJS Modules&lt;/li&gt;
      &lt;li&gt;NestJS Controllers&lt;/li&gt;
      &lt;li&gt;NestJS Services and Providers&lt;/li&gt;
      &lt;li&gt;Controller-to-Service communication&lt;/li&gt;
      &lt;li&gt;Validation using NestS Pipes&lt;/li&gt;
      &lt;li&gt;Develop production-ready REST APIs&lt;/li&gt;
      &lt;li&gt;CRUD operations (Create, Read, Update, Delete)&lt;/li&gt;
      &lt;li&gt;Error handling&lt;/li&gt;
      &lt;li&gt;Data Transfer Objects (DTO)&lt;/li&gt;
      &lt;li&gt;System modularity&lt;/li&gt;
      &lt;li&gt;Back-end development best practices&lt;/li&gt;
      &lt;li&gt;Configuration Management&lt;/li&gt;
      &lt;li&gt;Logging&lt;/li&gt;
      &lt;li&gt;Security best practices&lt;/li&gt;
      &lt;li&gt;Connecting the application to a database&lt;/li&gt;
      &lt;li&gt;Working with relational databases&lt;/li&gt;
      &lt;li&gt;Using TypeORM&lt;/li&gt;
      &lt;li&gt;Writing simple and complex queries using QueryBuilder&lt;/li&gt;
      &lt;li&gt;Performance when working with a database&lt;/li&gt;
      &lt;li&gt;Signing up, signing in&lt;/li&gt;
      &lt;li&gt;Authentication and Authorization&lt;/li&gt;
      &lt;li&gt;Protected resources&lt;/li&gt;
      &lt;li&gt;Ownership of tasks by users&lt;/li&gt;
      &lt;li&gt;Using JWT tokens (JSON Web Tokens).&lt;/li&gt;
      &lt;li&gt;Password hashing, salts and properly storing passwords&lt;/li&gt;
      &lt;li&gt;Polishing the application for Production use&lt;/li&gt;
      &lt;li&gt;Deploying NestJS apps to AWS(Amazon Web Services&lt;/li&gt;
      &lt;li&gt;Deploying front-end applications to Amazon S3&lt;/li&gt;
      &lt;li&gt;Wiring up the front-end and back-end&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;应用模型&lt;br /&gt;
  &lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-07-19-014245.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
  &lt;li&gt;基于 RestAPI 的任务 endpoints
  &lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-07-19-014610.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
  &lt;li&gt;基于 RestAPI 的 注册登录 endpoints
 &lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-07-19-014719.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;nestjs-命令行常用命令&quot;&gt;Nestjs 命令行常用命令&lt;/h3&gt;
&lt;p&gt;创建 NestJS 元素, Generate a Nest element.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;通过命令 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nest g --help&lt;/code&gt; 可以知道有哪些元素 () 可以被创建
```
Schematics available on @nestjs/schematics collection:
  ┌───────────────┬─────────────┬──────────────────────────────────────────────┐
  │ name          │ alias       │ description                                  │
  │ application   │ application │ Generate a new application workspace         │
  │ class         │ cl          │ Generate a new class                         │
  │ configuration │ config      │ Generate a CLI configuration file            │
  │ controller    │ co          │ Generate a controller declaration            │
  │ decorator     │ d           │ Generate a custom decorator                  │
  │ filter        │ f           │ Generate a filter declaration                │
  │ gateway       │ ga          │ Generate a gateway declaration               │
  │ guard         │ gu          │ Generate a guard declaration                 │
  │ interceptor   │ itc         │ Generate an interceptor declaration          │
  │ interface     │ itf         │ Generate an interface                        │
  │ library       │ lib         │ Generate a new library within a monorepo     │
  │ middleware    │ mi          │ Generate a middleware declaration            │
  │ module        │ mo          │ Generate a module declaration                │
  │ pipe          │ pi          │ Generate a pipe declaration                  │
  │ provider      │ pr          │ Generate a provider declaration              │
  │ resolver      │ r           │ Generate a GraphQL resolver declaration      │
  │ resource      │ res         │ Generate a new CRUD resource                 │
  │ service       │ s           │ Generate a service declaration               │
  │ sub-app       │ app         │ Generate a new application within a monorepo │
  └───────────────┴─────────────┴──────────────────────────────────────────────┘&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Options:
  -d, –dry-run                      Report actions that would be taken without writing out results.
  -p, –project [project]            Project in which to generate files.
  –flat                             Enforce flat structure of generated element.
  –no-flat                          Enforce that directories are generated.
  –spec                             Enforce spec files generation. (default: true)
  –spec-file-suffix [suffix]        Use a custom suffix for spec files.
  –skip-import                      Skip importing (default: false)
  –no-spec                          Disable spec files generation.
  -c, –collection [collectionName]  Schematics collection to use.
  -h, –help                         Output usage information.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;
进入项目目录
```bash
nest new nestjs-task-management  # 创建一个新的 nest 项目
yarn start:dev # 启动 nest 服务
nest g module tasks
nest g controller tasks --no-spec
nest g service tasks --no-spec
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;创建项目&quot;&gt;创建项目&lt;/h3&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;nest new nestjs-task-management  &lt;span class=&quot;c&quot;&gt;# 创建一个新的 nest 项目&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 选择 Yarn 作为任务包管理工具&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 项目创建完成后, 目录下会有很多新生成的文件&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 通过 VSCode 打开目录&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;查看目录结构&quot;&gt;查看目录结构&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-07-26-013832.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.eslintrc.js&lt;/code&gt; js 代码 规则文件&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.prettierrc&lt;/code&gt;  VSCode 创建的代码格式文件&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nest-cli&lt;/code&gt;  命令行, 具体使用方法看官方文档&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;package.json&lt;/code&gt; 打包时用的配置信息&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tsconfig.json&lt;/code&gt; 编译时用的配置信息&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tsconfig.build.json&lt;/code&gt; 是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tsconfig.json&lt;/code&gt; 的扩展配置, 要上生产环境的时候才用&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/&lt;/code&gt; 目录下是项目的文件, 也是我们开发代码存放的地方&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/main.ts&lt;/code&gt; 应用主程序, 会创建一个 app, 并监听 3000 端口&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;在开始开发之前, 有三个文件不需要, 可以删掉
    &lt;ul&gt;
      &lt;li&gt;app.controller.spec.ts&lt;/li&gt;
      &lt;li&gt;app.controller.ts&lt;/li&gt;
      &lt;li&gt;app.service.ts&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;修改 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;main.ts&lt;/code&gt; 去掉上面三个文件的 import 和引用&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;启动服务&quot;&gt;启动服务&lt;/h3&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;yarn start:dev
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;nestjs-module&quot;&gt;NestJS Module&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;NestJS Modules
    &lt;ul&gt;
      &lt;li&gt;Each application has at least one module - the root module. That is the starting point of the application.&lt;/li&gt;
      &lt;li&gt;Modules are an effective way to organize components by a closely related set of capabilities (e.g. per feature).&lt;/li&gt;
      &lt;li&gt;It is a good practice to have a folder per module, containing the module’s components.&lt;/li&gt;
      &lt;li&gt;一个 module 可以被其他 多个 module 导入&lt;/li&gt;
      &lt;li&gt;一个 module 通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@Module&lt;/code&gt; 装饰器 来声明&lt;/li&gt;
      &lt;li&gt;装饰器提供了 Nest 需要的基本信息来组织应用结构&lt;/li&gt;
      &lt;li&gt;@Module 的 Properties 参数
        &lt;ul&gt;
          &lt;li&gt;Providers
            &lt;ul&gt;
              &lt;li&gt;Array of providers to be available within the module via dependency injection.&lt;/li&gt;
              &lt;li&gt;是 module 的下游, 可以理解成一组为 module 提供的 services , 比如为task module 提供 创建task, 查询task, 删除task 的一组services&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;controllers
            &lt;ul&gt;
              &lt;li&gt;Array of controllers to be instantiated within the module.&lt;/li&gt;
              &lt;li&gt;是 module 的 上游, 可以理解为 controll 是路由入口, 比如 @Get, @Delete, @Post, @Patch 等&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;exports
            &lt;ul&gt;
              &lt;li&gt;Array of providers to export to other modules&lt;/li&gt;
              &lt;li&gt;可以导出到其他 modules 的 providers&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;imports
            &lt;ul&gt;
              &lt;li&gt;Any exported provider by these modules will now be available in our module via dependency injection.&lt;/li&gt;
              &lt;li&gt;一组这个模型需要导入的其他 module, 要导出的 providers 必须已经在我们的 modules 的&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;一个 论坛的 module 关系的例子
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-07-19-024021.jpg&quot; alt=&quot;&quot; /&gt;
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-08-13-040845.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;创建module 的命令,&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;nest g module tasks
&lt;span class=&quot;c&quot;&gt;# 会创建新的目录 `/src/tasks` &lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 创建 `/src/tasks/tasks.module.ts`&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 并更新 `/src/app.module.ts` 代码, 让新的 module 被 import&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;nestjs-controllers&quot;&gt;NestJS Controllers&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;NestJS Controllers
    &lt;ul&gt;
      &lt;li&gt;Responsible for handling incoming requests and returning responses to the client.&lt;/li&gt;
      &lt;li&gt;Bound to a specific path (for example, “/tasks” for the task resource).&lt;/li&gt;
      &lt;li&gt;Contain handlers, which handle endpoints and request methods 8(GET, POST, DELETE etcetera).&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Defining a controller
    &lt;ul&gt;
      &lt;li&gt;Controllers are defined by decorating a class with the @Controller decorator.&lt;/li&gt;
      &lt;li&gt;The decorator accepts a string, which is the path to be handled by the controller.&lt;/li&gt;
      &lt;li&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-08-13-044358.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Defining a Handler
    &lt;ul&gt;
      &lt;li&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-08-13-044506.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
      &lt;li&gt;Handler 是 controller 中的 method , 用 @Get, @Post, @Delete 这样的声明方式&lt;/li&gt;
      &lt;li&gt;当 http 请求进来后, 请求会路由到 controller, http 的参数会调用 handler.&lt;/li&gt;
      &lt;li&gt;nest js 会解析请求的数据给到 handler&lt;/li&gt;
      &lt;li&gt;handler 会对请求进行处理, 比如读取数据库&lt;/li&gt;
      &lt;li&gt;handler 会返回 value&lt;/li&gt;
      &lt;li&gt;nest js 会把 返回值 包装成 http response 并返回给客户端&lt;/li&gt;
      &lt;li&gt;如果中间报错, 也会返回错误信息
对应的请求信息例子
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-07-19-044611.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;一个 http 请求调用的流程
    &lt;ul&gt;
      &lt;li&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-08-13-044700.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;创建一个 controller 的命令&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;nest g controller tasks --no-spec
&lt;span class=&quot;c&quot;&gt;# --no-spec 参数, 不会创建一个 spec 文件, 这个 spec 文件是用来写 nest.js 的单元测试的. &lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 会创建 `/src/tasks/tasks.controller.ts` &lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 并更新 `/src/app.module.ts` 代码, 让新的 controller 被 import&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;nestjs-providers&quot;&gt;Nestjs Providers&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Nestjs Providers
    &lt;ul&gt;
      &lt;li&gt;Can be injected into constructors if decorated as an @Injectable, via dependency injection.&lt;/li&gt;
      &lt;li&gt;Can be a plain value, a class, sync/async factory etc.&lt;/li&gt;
      &lt;li&gt;Providers must be provided to a module for them to be usable.
        &lt;ul&gt;
          &lt;li&gt;必须通过 module 来使用&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Can be exported from a module - and then be available to other modules that import it.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;nestjs-service&quot;&gt;Nestjs Service&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Nestjs Service
    &lt;ul&gt;
      &lt;li&gt;Defined as providers. Not all providers are services.
        &lt;ul&gt;
          &lt;li&gt;Provider 可以提供 Services, 但不是所有的 provider 都是 Services&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Common concept within software development and are not exclusive NestS, JavaScript or back-end development.&lt;/li&gt;
      &lt;li&gt;Singleton when wrapped with @Injectable) and provided to a module. That means, the same instance will be shared across the application acting as a single source of truth.
        &lt;ul&gt;
          &lt;li&gt;Service 在 module 中 通过 @Injectable 来进行声明, 成为一个单例模式.  这个 Service 可以在应用中被分享使用&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;The main source of business logic. For example, a service will be called from a controller to validate data, create an item in the database and return a response.
        &lt;ul&gt;
          &lt;li&gt;Service 可以被 Controller 调用, 比如验证数据, 创建数据, 返回一个数据库结果&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Module, controller 和 service 的关系
        &lt;ul&gt;
          &lt;li&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-07-19-063141.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
          &lt;li&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-08-13-065114.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;dependency-injection-in-nestjs&quot;&gt;Dependency Injection in NestJS&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;依赖注入 Dependency Injection in NestJS
    &lt;ul&gt;
      &lt;li&gt;Any component within the NestJS ecosystem can inject a provider that is decorated with the @Injectable.
        &lt;ul&gt;
          &lt;li&gt;通过 @Injectable 可以把 NodeJS 的任何内容注入到一个 provider 中&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;We define the dependencies in the constructor of the class. NestS will take care of the injection for us, and it will then be available as class property.
        &lt;ul&gt;
          &lt;li&gt;写好注入代码, NodeJS 会帮我们注入内容, 内容就会成为 类的参数&lt;/li&gt;
          &lt;li&gt;下面的例子是 一个 controller 如何使用 service 中的一个 通过依赖注入的 服务的 (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;getAllTasks()&lt;/code&gt;)&lt;/li&gt;
          &lt;li&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-08-13-065536.jpg&quot; alt=&quot;&quot; /&gt;
            &lt;ul&gt;
              &lt;li&gt;初始化一个 Service 实例&lt;/li&gt;
              &lt;li&gt;调用实例的 getAllTasks() 方法
创建一个叫做 tasks 的 Service
                &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;nest g service tasks --no-spec
&lt;span class=&quot;c&quot;&gt;# 会创建 `/src/tasks/tasks.service.ts` &lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 并更新 `/src/app.module.ts` 代码, 让新的 service 被 import&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
                &lt;/div&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;dto-data-teransfer-object-dto&quot;&gt;DTO Data Teransfer Object (DTO)&lt;/h3&gt;

&lt;p&gt;下面项目的示例代码中, 我们会通过 class 的形式创建两个 DTO 来帮助创建和获取 tasks .&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;dto 预先定义了通过 API 会传递过来的参数,&lt;/li&gt;
  &lt;li&gt;好处是
    &lt;ul&gt;
      &lt;li&gt;可以不用从 @Body 中一个一个的获取所需要的参数, 而是通过预先定义的 Dto 直接验证和获取所需的 API 过来的参数数据&lt;/li&gt;
      &lt;li&gt;当要修改获取的参数的时候, 不需要在多个文件中修改, 而是到 dto 定义文件中修改就可以了&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;目标减少代码中引用参数的次数, 是提高代码的可读性&lt;/li&gt;
  &lt;li&gt;创建 DTO 的最佳实践方式是在一个单独目录中创建单独的 class 文件(手动创建), 文件中定义 DTO 的名字, 以及对应的参数和参数类型&lt;/li&gt;
  &lt;li&gt;比如下面代码例子中 API 传过来的 创建 task 和 搜索参数, 都被定一到了 DTO 的 class 中
    &lt;ul&gt;
      &lt;li&gt;controller 把 API 传递过来的 创建 task 和 搜索 的参数 保存在 Dto 中, 再传递给 service.&lt;/li&gt;
      &lt;li&gt;service 拿到 dto 中的参数后进行处理, 并返回给 controller 所需要返回给 API 的数据&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;为什么要用-dto&quot;&gt;为什么要用 DTO?&lt;/h4&gt;
&lt;p&gt;表现层与应用层之间是通过数据传输对象(DTO)进行交互的，数据传输对象是没有行为的POCO对象，它的目的只是为了对领域对象进行数据封装，实现层与层之间的数据传递。为何不能直接将领域对象用于数据传递？因为领域对象更注重领域，而DTO更注重数据。不仅如此，由于“富领域模型”的特点，这样做会直接将领域对象的行为暴露给表现层。&lt;/p&gt;

&lt;p&gt;需要了解的是，数据传输对象DTO本身并不是业务对象。数据传输对象是根据UI的需求进行设计的，而不 是根据领域对象进行设计的。比如，Customer领域对象可能会包含一些诸如FirstName, LastName, Email, Address等信息。但如果UI上不打算显示Address的信息，那么CustomerDTO中也无需包含这个 Address的数据&lt;/p&gt;

&lt;p&gt;简单来说Model面向业务，我们是通过业务来定义Model的。而DTO是面向界面UI，是通过UI的需求来定义的。通过DTO我们实现了表现层与Model之间的解耦，表现层不引用Model，如果开发过程中我们的模型改变了，而界面没变，我们就只需要改Model而不需要去改表现层中的东西。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Data Teransfer Object (DTO)
    &lt;ul&gt;
      &lt;li&gt;DTO 是一个对象, 用来把数据在流程中传递&lt;/li&gt;
      &lt;li&gt;DTO 是一个对象, 定义了数据如何在网络中传递&lt;/li&gt;
      &lt;li&gt;Common concept in software development that is not specific to Nestjs.&lt;/li&gt;
      &lt;li&gt;Result in more bulletproof code, as it can be used as a TypeScript type.&lt;/li&gt;
      &lt;li&gt;Do not have any behavior except for storage, retrieval, serialization and deserialization of its own data.&lt;/li&gt;
      &lt;li&gt;Result in increased performance (although negligible in small applications)&lt;/li&gt;
      &lt;li&gt;Can be useful for data validation.&lt;/li&gt;
      &lt;li&gt;A DTO is NOT a model definition. It defines the shape of data for a specific case, for example - creating a task.&lt;/li&gt;
      &lt;li&gt;Can be defined using an interface or a class.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;DTOs 用 Class 和 Interface 的区别
    &lt;ul&gt;
      &lt;li&gt;Data Transfer Objects (DTOs) can be defined as classes or interfaces.&lt;/li&gt;
      &lt;li&gt;The recommended approach is to use classes, also clearly documented in the NestJS documentation.&lt;/li&gt;
      &lt;li&gt;The reason is that interfaces are a part of TypeScript and therefore are not preserved post-compilation.&lt;/li&gt;
      &lt;li&gt;classes allow us to do more, and since they are a part of JavaScript, they will be preserved post-compilation.&lt;/li&gt;
      &lt;li&gt;NestS cannot refer to interfaces in run-time, but can refer to classes.&lt;/li&gt;
      &lt;li&gt;DTO 的例子 &lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-07-19-120342.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;DTO 的重要信息
    &lt;ul&gt;
      &lt;li&gt;Data Transfer Objects are NOT mandatory.&lt;/li&gt;
      &lt;li&gt;You can still develop applications without using DTOs.&lt;/li&gt;
      &lt;li&gt;However, the value they add makes it worthwhile to use them when applicable.&lt;/li&gt;
      &lt;li&gt;Applying the DTO pattern as soon as possible will make it easy for you to maintain and refactor your code.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;项目-1-提供-todo-任务管理的-restapi-暂时使用本地内存来保存对象-的-代码片段&quot;&gt;项目 1: 提供 TODO 任务管理的 RestAPI (暂时使用本地内存来保存对象) 的 代码片段&lt;/h3&gt;
&lt;p&gt;这个项目提供的 RestAPI 提供了如下API 接口&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;创建task&lt;/li&gt;
  &lt;li&gt;获取所有 tasks&lt;/li&gt;
  &lt;li&gt;通过 ID 获取 task&lt;/li&gt;
  &lt;li&gt;更新 task 状态&lt;/li&gt;
  &lt;li&gt;删除 task&lt;/li&gt;
  &lt;li&gt;通过关键词 搜索/过滤 tasks&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;/src/tasks/ 目录下的文件如下&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;/src/tasks/task.module.ts         单个 task 模块需要的数据的 schema&lt;/li&gt;
  &lt;li&gt;/src/tasks/tasks.module.ts        tasks 模块定义&lt;/li&gt;
  &lt;li&gt;/src/tasks/tasks.controller.ts    controller 模块定义&lt;/li&gt;
  &lt;li&gt;/src/tasks/tasks.service.ts       service 模块定义&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;/src/tasks/dto/ 目录下文件如下, dto 的说明在上面章节&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;/src/tasks/dto/create-tasks.dto.ts      创建任务&lt;/li&gt;
  &lt;li&gt;/src/tasks/dto/get-tasks-filter.dto.ts  获取搜索结果&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;taskscontrollerts&quot;&gt;tasks.controller.ts&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;controller 把 API 传递过来的 创建 task 和 搜索 的参数 保存在 Dto 中, 再传递给 service.&lt;/li&gt;
  &lt;li&gt;service 拿到 dto 中的参数后进行处理, 并返回给 controller 所需要返回给 API 的数据
```js
import {
Body,
Controller,
Delete,
Get,
Param,
Patch,
Post,
Query,
} from ‘@nestjs/common’;
import { TasksService } from ‘./tasks.service’;
import { Task, TaskStatus } from ‘./task.module’;
import { CreateTaskDto } from ‘./dto/create-task.dto’;
import { GetTasksFilterDto } from ‘./dto/get-tasks-filter.dto’;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;@Controller(‘tasks’)
export class TasksController {
  constructor(private taskService: TasksService) {} //初始化一个 Task Service, 并用 provate 私有化, 这样只有在当前的类中用 this. 才能调用&lt;/p&gt;

&lt;p&gt;@Get()
  getTasks(@Query() filterDto: GetTasksFilterDto): Task[] {
    // 如果有条件, 那就按条件过滤, 返回 getTasksWithFilters()
    // 如果没有条件, 就getAllTasks()
    if (Object.keys(filterDto).length) {
      //如果传递过来的 dto 的 key 的个数不是 0
      //Object.keys 用于检测一个对象的key 的个数
      return this.taskService.getTasksWithFilters(filterDto);
    } else {
      return this.taskService.getAllTasks();
    }
  }
  @Get(‘/:id’)
  getTaskById(@Param(‘id’) id: string): Task {
    return this.taskService.getTaskById(id);
  }&lt;/p&gt;

&lt;p&gt;@Delete(‘/:id’)
  deleteTask(@Param(‘id’) id: string): void {
    return this.taskService.deleteTask(id);
  }&lt;/p&gt;

&lt;p&gt;@Patch(‘/:id/status’)
  updateTaskStatus(
    @Param(‘id’) id: string,
    @Body(‘status’) status: TaskStatus,
  ): Task {
    return this.taskService.updateTaskStatus(id, status);
  }&lt;/p&gt;

&lt;p&gt;@Post()
  createTask(@Body() crateTaskDto: CreateTaskDto): Task {
    return this.taskService.createTask(crateTaskDto);
  }
}&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;

#### tasks.module.ts
```js
import { Module } from &apos;@nestjs/common&apos;;
import { TasksController } from &apos;./tasks.controller&apos;;
import { TasksService } from &apos;./tasks.service&apos;;

@Module({
  controllers: [TasksController],
  providers: [TasksService],
})
export class TasksModule {}

&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h4 id=&quot;tasksservicets&quot;&gt;tasks.service.ts&lt;/h4&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Injectable&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;@nestjs/common&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;TaskStatus&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;./task.module&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;v4&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;uuid&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;uuid&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;CreateTaskDto&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;./dto/create-task.dto&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;GetTasksFilterDto&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;./dto/get-tasks-filter.dto&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Injectable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;TasksService&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;tasks&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[];&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;getAllTasks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tasks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;getTaskById&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tasks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;deleteTask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//void 这里可以防止因为数据不存返回空值而报错&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tasks&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tasks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;updateTaskStatus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;TaskStatus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;task&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getTaskById&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;getTasksWithFilters&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;filterDto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;GetTasksFilterDto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;search&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;filterDto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 定义一个 临时数组 保存结果&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;tasks&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getAllTasks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 按 status 搜索&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;tasks&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;tasks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 按 search 关键字 搜索&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;tasks&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;tasks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;includes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;description&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;includes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// return final result&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;tasks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;createTask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;createTaskDto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;CreateTaskDto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;description&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;createTaskDto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;uuid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;description&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;TaskStatus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;OPEN&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tasks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h4 id=&quot;taskmodulets&quot;&gt;task.module.ts&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;interface: 接口只负责声明成员变量类型，不作具体实现。&lt;/li&gt;
  &lt;li&gt;这里的 interface 侧重于描述数据结构 , 当这个类被实例化之后, 能保证所有的实例都有这几个参数&lt;/li&gt;
  &lt;li&gt;这个文件不像前面几个其他的文件是通过命令行创建的, 这个文件是手动创建的
```js
export interface Task {
id: string;
title: string;
description: string;
status: TaskStatus;
}&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;export enum TaskStatus {
  OPEN = ‘OPEN’,
  IN_PROGRESS = ‘IN_PROGRESS’,
  DONE = ‘DONE’,
}&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;
#### create-tasks.dto.ts
```js
export class CreateTaskDto {
  title: string;
  description: string;
}

&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h4 id=&quot;get-tasks-filterdtots&quot;&gt;get-tasks-filter.dto.ts&lt;/h4&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;TaskStatus&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;../task.module&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kr&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;GetTasksFilterDto&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;TaskStatus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// ? 表示不是必选项&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;项目运行&quot;&gt;项目运行&lt;/h3&gt;

&lt;p&gt;通过命令启动服务后, 可以利用 postman 访问如下地址&lt;/p&gt;

&lt;p&gt;GET&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Get all tasks&lt;/li&gt;
  &lt;li&gt;http://localhost:3000/tasks&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;POST&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Post a new task&lt;/li&gt;
  &lt;li&gt;http://localhost:3000/tasks&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;GET&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Get task by ID&lt;/li&gt;
  &lt;li&gt;http://localhost:3000/tasks/d0136902-10ea-4410-8924-a05643bac5c6&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;DELETE&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Delete Task by ID&lt;/li&gt;
  &lt;li&gt;http://localhost:3000/tasks/8c725454-5ce7-4359-af3d-6205348d4bf0&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;PATCH&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Update task with new status&lt;/li&gt;
  &lt;li&gt;http://localhost:3000/tasks/0c8fcad2-eb42-4d7b-8ed4-04e741aa7dd6/status&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;GET&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Filter or Search Tasks&lt;/li&gt;
  &lt;li&gt;http://localhost:3000/tasks?status=OPEN&amp;amp;search=room&lt;/li&gt;
&lt;/ul&gt;

</description>
        <pubDate>Wed, 02 Aug 2023 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/NestJS-First-Look/</link>
        <guid isPermaLink="true">http://localhost:4000/NestJS-First-Look/</guid>
        
        
        <category>Node.js</category>
        
        <category>Yarn</category>
        
        <category>Nest.JS</category>
        
        <category>Typescript</category>
        
        <category>javascript</category>
        
        <category>Restful API</category>
        
        <category>Postman</category>
        
        <category>Postgresql</category>
        
        <category>TypeORM</category>
        
      </item>
    
      <item>
        <title>How to use Jekyll develop your own Blog</title>
        <description>&lt;p&gt;博客可以让一个人表达他/她的想法，每个人都渴望拥有他/她的博客。截至今天，创建博客非常简单。WordPress，jekyll，hugo等开源软件可以帮助您创建和设置博客。在这篇文章中，我将带领你了解 Jekyll 以及如何在 Github 中免费托管它。&lt;/p&gt;

&lt;h1 id=&quot;github-创建个人-blog&quot;&gt;github 创建个人 Blog&lt;/h1&gt;
&lt;p&gt;[TOC]&lt;/p&gt;

&lt;h2 id=&quot;目的&quot;&gt;目的:&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;使用 github 创建个人主页, 并将自己的学习心得和个人项目代码放到上面&lt;/li&gt;
  &lt;li&gt;使用 Jekyll 的模板来美化 blog&lt;/li&gt;
  &lt;li&gt;使用 Markdown 形式的内容来写 blog&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;资源&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://pages.github.com&quot;&gt;如何创建 github 主页&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://dalongli.github.io&quot;&gt;我的主页地址&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://jekyllrb.com&quot;&gt;Jekyll 主页地址&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.github.com/en/pages/setting-up-a-github-pages-site-with-jekyll&quot;&gt;如何用 Jekyll 创建 github 主页&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/wowthemesnet/mediumish-theme-jekyll&quot;&gt;一个基于 Jekyll 的 blog 模板 - mediumish-theme-jekyll&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;github-上-创建静态网站&quot;&gt;github 上 创建静态网站&lt;/h2&gt;
&lt;p&gt;可以用  user page , 也可以用 project page&lt;/p&gt;

&lt;h3 id=&quot;项目网站&quot;&gt;项目网站&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;用于项目&lt;/li&gt;
  &lt;li&gt;github 每个 repository 都可以有一个网站&lt;/li&gt;
  &lt;li&gt;http://&lt;username&gt;.github.io/&lt;repository-name&gt;&lt;/repository-name&gt;&lt;/username&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;个人网站&quot;&gt;个人网站&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;用于个人或者公司网站&lt;/li&gt;
  &lt;li&gt;一个 github 账号只能有一个网站&lt;/li&gt;
  &lt;li&gt;http://&lt;username&gt;.github.io/&lt;/username&gt;&lt;/li&gt;
  &lt;li&gt;需要用 master branch&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;创建流程&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;在 github 自己的 账户下建立一个 github repository, 名字要是&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dalongli.github.io&lt;/code&gt; 这里的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dalongli&lt;/code&gt; 要和 自己的 github 账号的名字一致&lt;/li&gt;
  &lt;li&gt;方法一 命令行
    &lt;ol&gt;
      &lt;li&gt;选择一个本地目录 我这里的目录是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/Users/lidalong/Desktop/&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;命令
        &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;git clone https://github.com/dalongli/dalongli.github.io
&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;dalongli.github.io
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Hello World&quot;&lt;/span&gt; &amp;gt; index.html
git add --all
git commit -m &lt;span class=&quot;s2&quot;&gt;&quot;Initial commit&quot;&lt;/span&gt;
git push -u origin main -f
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;访问 https://dalongli.github.io. 就可以看到 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hellow world&lt;/code&gt; 了&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;方法二 Github Desktop app
    &lt;ol&gt;
      &lt;li&gt;下载 github desktop app&lt;/li&gt;
      &lt;li&gt;clone dalongli.github.io&lt;/li&gt;
      &lt;li&gt;在提示中 用 VS Code 打开目录&lt;/li&gt;
      &lt;li&gt;在vsc 中修改内容, 并提交&lt;/li&gt;
      &lt;li&gt;刷新 https://dalongli.github.io. 可以看到新的内容了&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;用 vscode 打开创建的项目&lt;/li&gt;
  &lt;li&gt;把用 Jekyll 生成的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_site&lt;/code&gt; 目录中的内容拷贝到 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dalongli.github.io&lt;/code&gt; 目录下, commit 并提交到 github 上&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;jekyll&quot;&gt;Jekyll&lt;/h2&gt;
&lt;p&gt;Jekyll 的工作原理, 分为以下几个步骤&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;读取 configuration file&lt;/li&gt;
  &lt;li&gt;读取 所有的其他文件, 并 YAML 配置文件(front matter)&lt;/li&gt;
  &lt;li&gt;使用 Liquid 模板语言处理内容和模板&lt;/li&gt;
  &lt;li&gt;读取 assets (资产文件, 比如 css, js, image)&lt;/li&gt;
  &lt;li&gt;创建最终的输出到 _site 目录&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;资源&quot;&gt;资源&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=owHfKAbJ6_M&amp;amp;t=255s&quot;&gt;Youtube 用 Docker + VSCode 开发 Jekyll 的 视频&lt;/a&gt;
&lt;a href=&quot;https://jsbin.com/?html,output&quot;&gt;jsbin.com 一个写 html 代码就可以看到效果的 沙箱网站&lt;/a&gt;
&lt;a href=&quot;https://codepen.io/&quot;&gt;codepen.io, 也是一个 所见即所得的 html, css, js 沙箱网站&lt;/a&gt; 
&lt;a href=&quot;https://gyazo.com/download&quot;&gt;截图上传工具, 类似 Pic 这个 app?&lt;/a&gt;
&lt;a href=&quot;https://jekyllrb.com&quot;&gt;jekyll 官网&lt;/a&gt;
&lt;a href=&quot;https://jekyllrb.com/docs/&quot;&gt;Jekyll Doc&lt;/a&gt;
&lt;a href=&quot;https://jekyllrb.com/docs/front-matter/&quot;&gt;Front Matter 语法&lt;/a&gt;
&lt;a href=&quot;https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet&quot;&gt;Markdown 语法&lt;/a&gt;
&lt;a href=&quot;http://jekyllrb.com/docs/structure/&quot;&gt;Jekyll 目录结构&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;在--mac-上直接安装-jekyll&quot;&gt;在  Mac 上直接安装 Jekyll&lt;/h3&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;gem sources -l
gem sources --remove https://rubygems.org/
gem sources -a https://gems.ruby-china.com/
gem install jekyll bundler
&lt;span class=&quot;c&quot;&gt;# 如果成功了&lt;/span&gt;
jekyll -v  &lt;span class=&quot;c&quot;&gt;# jekyll 4.3.2&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;用-docker-安装-jekyll&quot;&gt;用 Docker 安装 Jekyll&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;在 VSCode 中安装两个扩展, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Docker&lt;/code&gt; 和 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Dev Containers&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;重启 VSCode&lt;/li&gt;
  &lt;li&gt;在 github 上创建一个新的 repository
    &lt;ol&gt;
      &lt;li&gt;选中 rademe 和 ignore 和 gitignore (jekyll)&lt;/li&gt;
      &lt;li&gt;进入 repository -&amp;gt; setting -&amp;gt; page&lt;/li&gt;
      &lt;li&gt;点击 github action 按钮, 保存 yml 文件 (什么都不用改)&lt;/li&gt;
      &lt;li&gt;会发现原来的 repository 中多个一个 yaml 文件, 并且在 setting 下面可以看到网站的 url 了&lt;/li&gt;
      &lt;li&gt;url &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://dalongli.github.io/my-jekyll-docker-website/&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;回到 repo 主页, 把 url 复制到 setting 中 的 web url 地址栏中, 方便以后点击进入查看
        &lt;ol&gt;
          &lt;li&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-07-20-082414.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;在vscode 中 clone 刚刚创建的 repo
    &lt;ol&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cmd + shift + p&lt;/code&gt; 输入 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git clone&lt;/code&gt; 然后黏贴 repo 的 url &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://github.com/dalongli/my-jekyll-docker-website&lt;/code&gt;  回车, 打开&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;到 https://jekyllrb.com/docs/ 查看 jekyll 需要的 ruby (2.5.0 或更高版本) 的最低版本 , 还有网站右上角的 jekyll 的版本 (4.3.2)
    &lt;ol&gt;
      &lt;li&gt;看一下 github pages 需要的 &lt;a href=&quot;https://pages.github.com/versions/&quot;&gt;安装的包和依赖版本&lt;/a&gt;
        &lt;ol&gt;
          &lt;li&gt;jekyll 3.9.3&lt;/li&gt;
          &lt;li&gt;ruby 2.5.0 或以上&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;注意:
        &lt;ol&gt;
          &lt;li&gt;For Jekyll 3.9. (also GitHub Pages)
            &lt;ol&gt;
              &lt;li&gt;Ruby 2.x&lt;/li&gt;
              &lt;li&gt;Alpine 3.x&lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
          &lt;li&gt;For Jekyll 4.2. (non-GitHub Pages)
            &lt;ol&gt;
              &lt;li&gt;Ruby 3.0.x&lt;/li&gt;
              &lt;li&gt;Alpine 3.x&lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;在 Docker hub 上找到对应的 Docker 镜像
    &lt;ol&gt;
      &lt;li&gt;我们要找一个 ruby image 然后手动把  jekyll 加进去&lt;/li&gt;
      &lt;li&gt;搜索 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ruby alpine&lt;/code&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;回到 vscode 中 , 创建一个 docker file
    &lt;ol&gt;
      &lt;li&gt;在 repo 的目录下新建一个文件 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dockerfile&lt;/code&gt;
        &lt;ol&gt;
          &lt;li&gt;A dockerfile defines how to build your container from an image
            &lt;pre&gt;&lt;code class=&quot;language-dockerfile&quot;&gt;# Create a Jekyll container from a Ruby Alpine image
# At a minimum, use Ruby 2.5 or later
FROM ruby:2.7-alpine3.15
# Add Jekyll dependencies to Alpine
RUN apk update
RUN apk add --no-cache build-base gcc cmake git
# Update the Ruby bundler and install Jekyll
RUN gem update bundler &amp;amp;&amp;amp; gem install bundler jekyll
&lt;/code&gt;&lt;/pre&gt;
          &lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;保存文件, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cmd + shift + p&lt;/code&gt; 输入 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;commit all&lt;/code&gt;  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cmd + shift + p&lt;/code&gt; 输入 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git push&lt;/code&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;进入到 Docker Desktop app , 并登录&lt;/li&gt;
  &lt;li&gt;VSCode 中 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cmd + shit + p&lt;/code&gt; 输入 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;open folder in container&lt;/code&gt;
    &lt;ol&gt;
      &lt;li&gt;选择 刚刚 克隆下来的那个 repo 的目录&lt;/li&gt;
      &lt;li&gt;弹框出来, 选择 docker file. (这里是要用我们刚刚创建的那个  dockerfile 来创建容器)&lt;/li&gt;
      &lt;li&gt;这里启动开发容器要等一会, 才能完成容器的创建&lt;/li&gt;
      &lt;li&gt;完成后可以在 docker desktop app 中看到新建的 volume, image, docker 容器&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;创建-jekyll-项目&quot;&gt;创建 jekyll 项目&lt;/h3&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c&quot;&gt;# 进入到桌面文件夹内&lt;/span&gt;
jekyll new myblog
&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;myblog
bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;jekyll serve  &lt;span class=&quot;c&quot;&gt;# &lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 访问http://127.0.0.1:4000/&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;执行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bundle&lt;/code&gt; 命令后 jekyll 会自动生成一个 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_site&lt;/code&gt; 的目录&lt;/p&gt;

&lt;h3 id=&quot;修改-默认的模板为新的模板&quot;&gt;修改 默认的模板为新的模板&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;从 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_config.yml&lt;/code&gt; 文件中的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;theme&lt;/code&gt; 可以看到默认模板的名字是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;minima&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;命令 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bundle show minima&lt;/code&gt; 可以看到模板的路径 是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/Users/lidalong/.rvm/gems/ruby-3.1.1/gems/minima-2.5.1&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;关闭 bundle 服务 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;control + c&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;删掉三个文件
    &lt;ul&gt;
      &lt;li&gt;2023-07-20-welcome-to-jekyll.markdown&lt;/li&gt;
      &lt;li&gt;about.markdown&lt;/li&gt;
      &lt;li&gt;index.markdown&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;删掉 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_config.yml&lt;/code&gt; 中 有 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;minima&lt;/code&gt; 的行&lt;/li&gt;
  &lt;li&gt;删掉 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt; 中 有 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;minima&lt;/code&gt; 的行&lt;/li&gt;
  &lt;li&gt;把模板的所有文件拷贝到 项目目录下&lt;/li&gt;
  &lt;li&gt;从新启动服务 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bundle exec jekyll serve &lt;/code&gt;  , 这时新的模板文件会被编译到 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_site&lt;/code&gt; 目录下&lt;/li&gt;
  &lt;li&gt;访问 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http://localhost:4000&lt;/code&gt; 可以看到新的页面了&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;这里 jekyll 背后的逻辑是&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;读取 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_config.yml&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;查看 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_posts&lt;/code&gt; 中的内容&lt;/li&gt;
  &lt;li&gt;在读取目录下所有非 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_&lt;/code&gt; 开头的静态文件&lt;/li&gt;
  &lt;li&gt;在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_site&lt;/code&gt; 中创建对应的静态网站所需的html, css, js&lt;/li&gt;
  &lt;li&gt;在jekyll 运行时, 你对项目目录下的任何已经存在的文件或者目录进行修改, 都会同步更新到 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_site&lt;/code&gt; 文件夹下&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;语法--content---layout--include-变量-if-else-endif&quot;&gt;语法 {{ content }} , layout , include, 变量, if else endif&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;是模板语法&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;{{ content }}&lt;/code&gt; 是一个在 html 中被替换的变量&lt;/li&gt;
  &lt;li&gt;在 项目目录下创建一个 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_layout&lt;/code&gt; 的目录, 目录下创建一个新的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;default.html&lt;/code&gt; , 文件中把 index.html 的 header 和 footer 的代码块放进去, 中间用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;{{ content }}&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;修改其他 html 文件, 去掉 header 和 footer
    &lt;ul&gt;
      &lt;li&gt;再在每个html 文件的头 用下面Front Matter 语法代替. (注意, 必须放在文件的开头位置)
        &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;---
layout: default
title: 很棒的网站, 有创意
---
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;这里的 layout 对应 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_layout&lt;/code&gt; 目录&lt;/li&gt;
      &lt;li&gt;这里的 default 对应 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;default.html&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;每个 html 页面加载的时候都会把自己的 html 内容放到 default.html 的 {{ content }} 中&lt;/li&gt;
      &lt;li&gt;然后把自己的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;page.title&lt;/code&gt; 放到 default.html 的 &lt;title&gt; 标签中&lt;/title&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;用下面的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;if&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;else&lt;/code&gt; 代替 default.html 中的 &lt;title&gt; &lt;/title&gt; 中间的内容
    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;{% if page.title %}
 {{page.title}}
{% else %}
 Greate Web Agency
{% endif %}
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;include&lt;/code&gt; 语法是从 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_include&lt;/code&gt; 文件夹下找到相应的 html 文件 作为子页面嵌入到当前页面中
    &lt;ul&gt;
      &lt;li&gt;这个  html 文件需要放在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_include&lt;/code&gt; 目录下&lt;/li&gt;
      &lt;li&gt;任何需要抽象出来可以被复用的html 代码块都可以单独放到 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_include&lt;/code&gt; 目录下面
        &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;{% include subpage-header.html %}
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;_configyml-配置文件&quot;&gt;_config.yml 配置文件&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://jekyllrb.com/docs/configuration/&quot;&gt;官方配置文件详解&lt;/a&gt;
&lt;a href=&quot;https://kramdown.gettalong.org/&quot;&gt;markdown 解析器, 能把 markdown 转成 HTML?&lt;/a&gt;
&lt;a href=&quot;https://yaml.org/&quot;&gt;YMML 语法&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;这里的配置 在 html 中用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;{{ site.变量名 }}&lt;/code&gt; 替换&lt;/li&gt;
  &lt;li&gt;需要&lt;strong&gt;重启web 服务&lt;/strong&gt;, yaml 中的配置才能生效
```yaml
title: 伟大的网站 # 这里是 site.title, 不是 page.title
email: dalong@example.com&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;description: &amp;gt;- # this means to ignore newlines until “baseurl:”
  Write an awesome description for your new site here. You can edit this
  line in _config.yml. It will appear in your document head meta (for
  Google search results) and in your feed.xml site description.
baseurl: “” # the subpath of your site, e.g. /blog
url: “http://127.0.0.1:4000” # the base hostname &amp;amp; protocol for your site, e.g. http://example.com
twitter_username: jekyllrb
github_username:  jekyll&lt;/p&gt;

&lt;p&gt;plugins:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;jekyll-feed
```&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;yaml-front-matter&quot;&gt;YAML front matter&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Front matter 是 Jekyll 用的 yaml 的一个格式, 用来格式化 页面和页面内容的信息&lt;/li&gt;
  &lt;li&gt;必须在html 页面的头进行定义&lt;/li&gt;
  &lt;li&gt;也是 yaml 格式的, 和 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_config.yml&lt;/code&gt; 中的变量定义格式一样&lt;/li&gt;
  &lt;li&gt;比如
    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;---
layout: default
title: Portfolio
---
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;变量分两种
    &lt;ul&gt;
      &lt;li&gt;Jekyll 预定义变量
        &lt;ul&gt;
          &lt;li&gt;site  - 全局变量
            &lt;ul&gt;
              &lt;li&gt;site.pages&lt;/li&gt;
              &lt;li&gt;site.posts&lt;/li&gt;
              &lt;li&gt;site.data&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;page  - 全局变量, 包含了当前页面的数据信息&lt;/li&gt;
          &lt;li&gt;content&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;自定义变量&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;liquid-模板语言&quot;&gt;Liquid 模板语言&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://shopify.dev/docs/api/liquid&quot;&gt;Liquid 官方文档&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;是 shopify 最早使用的一种模板语言, 后来被shopify 开源了&lt;/li&gt;
  &lt;li&gt;Jekyll 用的模板语言是 Liquid&lt;/li&gt;
  &lt;li&gt;{{}}
    &lt;ul&gt;
      &lt;li&gt;output markup, 放变量的 , 比如 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;page.title&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;site.title&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;{%%}
    &lt;ul&gt;
      &lt;li&gt;tag markup, 放带有逻辑的标签, 比如 if, for&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;是过滤器, 用于对变量进行操作, 比如格式化日期 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;{{ page.date | date: &quot;%Y-%m-%d %H:%M&quot;}}&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;制作-静态-blog&quot;&gt;制作 静态 Blog&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;blog 功能已经被继承到 jekyll 中&lt;/li&gt;
  &lt;li&gt;可以通过在一个文件夹中放置 markdown 文件就可以创作新的 blog&lt;/li&gt;
  &lt;li&gt;所有的 blog markdown 文章都需要使用 YAML Front Matter 语法, jekyll 会把 markdown 转成 html 页面&lt;/li&gt;
  &lt;li&gt;不需要数据库, 不会有读取的performance 问题, 不会有安全问题&lt;/li&gt;
  &lt;li&gt;markdown 文件的格式必须是  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;year-month-day-title.md&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;需要在项目根目录下建立一个 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_posts&lt;/code&gt; 目录, 然后在目录下建立一个文件&lt;/li&gt;
  &lt;li&gt;需要在&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.md&lt;/code&gt; 文件中的 front mater 中提前设置好文章的基础变量, 比如
    &lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nn&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;layout&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;post&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;China MLPS&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;2023-07-22 07:30&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;author&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;dalong&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;http://placehold.it/900x300&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Network Security&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;subtitle&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;MLPS&lt;/span&gt;
&lt;span class=&quot;nn&quot;&gt;---&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;同时, 我们也要去创建 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_layout&lt;/code&gt; 目录下的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;post.html&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;编辑好 post 之后, 访问单个文章的路径是
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http://127.0.0.1:4000/metaverse/2023/07/21/学习元宇宙.html&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;可以通过在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_config.yml&lt;/code&gt; 中设置 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;permalink: none&lt;/code&gt; 来让url 变得简单&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http://127.0.0.1:4000/metaverse/学习元宇宙.html&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;为-blog-做一些-widget&quot;&gt;为 blog 做一些 widget&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;比如&lt;/li&gt;
  &lt;li&gt;blog category list,&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;{% for category_name in page.categories limit:1 %} 
   {{ category_name }} 
{% endfor %}  # 获取当前Post 的所有所属分类
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
  &lt;li&gt;某个 category 中的 blog list&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;{% for post in site.categories[category_name] limit:5 %} 
   &amp;lt;li&amp;gt;
      &amp;lt;a href=&quot;{{ post.url }}&quot;&amp;gt;{{ post.title }}&amp;lt;/a&amp;gt; 
   &amp;lt;/li&amp;gt;
 {% endfor %}
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;列出所有的 post&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;{% for post in site.posts %}
   {{ post.url }}  
   {{ post.title }} 
   {{ post.author }}
   {{ post.date | date: &quot;%Y-%m-%d %H:%M&quot; }}
   {% if post.image %}
      {{post.image}}
   {% endif %}
   {% post.excerpt %} # POST 简介
{% endfor %}
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;设置默认值&quot;&gt;设置默认值&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;很多时候需要在 front matter 中重复设置很多变量信息&lt;/li&gt;
  &lt;li&gt;可以在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_config.yml&lt;/code&gt; 中设置默认值, 这样就不需要在每个页面的 front matter 中重复设置那些值&lt;/li&gt;
  &lt;li&gt;jekyll 是先读取 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_config.yml&lt;/code&gt; 中的默认值作为 front matter, 然后在读取每个页面的 front matter. 如果单独页面没有设置 frontend matter, 就会用默认的值.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;scope&lt;/code&gt; 定义了变量使用的范围, 可以通过路径和类型指定&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;value&lt;/code&gt; 定义默认的变量名和变量值&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;# In _config.yml&lt;/span&gt;
&lt;span class=&quot;nn&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;defaults&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;scope&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;projects&quot;&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;pages&quot;&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;layout&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;project&quot;&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;author&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Mr.&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Hyde&quot;&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;project&quot;&lt;/span&gt;
&lt;span class=&quot;nn&quot;&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;s&quot;&gt;defaults&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;scope&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# an empty string here means all files in the project&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;posts&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# previously `post` in Jekyll 2.2.&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;layout&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;default&quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;我们可以用下面这个
    &lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;s&quot;&gt;defaults&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;scope&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# an empty string here means all files in the project&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;posts&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# previously `post` in Jekyll 2.2.&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;layout&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;post&quot;&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;author&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Dalong&quot;&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;学习&quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;制作-form-提交表单&quot;&gt;制作 form 提交表单&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://jekyllthemes.io/resources/jekyll-contact-forms&quot;&gt;制作 表单的方法&lt;/a&gt;
&lt;a href=&quot;https://formspree.io&quot;&gt;用 formspree.io &lt;/a&gt;创作自定义表单的快速方法&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;可以通过以上方法创造在 jekyll 中用的表单&lt;/li&gt;
  &lt;li&gt;表单可以以邮件的形式发送到我们自己的邮箱中&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;读取-data-数据&quot;&gt;读取 data 数据&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;jekyll 支持从 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_data&lt;/code&gt; 目录读取 YAML, JSON, CSV 等文件的数据&lt;/li&gt;
  &lt;li&gt;创建一个文件 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_data/navigation.yml&lt;/code&gt;, 文件内容可以在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;site.data.navigation&lt;/code&gt; 变量中获取&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Home&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;link&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;About&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;link&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/about.html&lt;/span&gt;

&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
  &lt;li&gt;HTML 页面中读取的方式&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;nav&amp;gt;&lt;/span&gt;
  {% for item in site.data.navigation %}
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;{{ item.link }}&quot;&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;{%&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;url =&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;link&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;%}&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;style=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;color: red;&quot;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;{%&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;endif&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;%}&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
      {{ item.name }}
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
  {% endfor %}
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/nav&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;services.yml&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;icon 可以在 &lt;a href=&quot;https://fontawesome.com/icons&quot;&gt;这里&lt;/a&gt; 找到
```yaml&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;icon: “icon ion-coffee”
title: “Branding”
content: “Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut”&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;icon: “ion-compass”
title: “Web Design”
content: “Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut”&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;icon: “ion-earth”
title: “Brand Identity”
content: “Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut”
```&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;{% for service in site.data.services %}
   {{ service.icon }}
   {{ service.title }}
   {{ service.content }}
{% endfor%}
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;另一个例子
    &lt;ul&gt;
      &lt;li&gt;把 json 文件的 data 展示出来&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;projects.json&lt;/code&gt;
    &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;category&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Branding&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;img&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;img/portfolio/work1.jpg&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Tesla Motors&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Labore et dolore magna aliqua. Ut enim ad&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;category&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Branding&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;img&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;img/portfolio/work4.jpg&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Tesla Motors&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Labore et dolore magna aliqua. Ut enim ad&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;category&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Video&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;img&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;img/portfolio/work1.jpg&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Tesla Motors&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Labore et dolore magna aliqua. Ut enim ad&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;      
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;{% assign filters = site.data.projects | group_by: &apos;category&apos; %}  
{% for filter in filters %}
   {{ filter.name }}
{% endfor %}


{% for project in site.data.projects %}
   {{ project.category }}
   {{ project.img }}
   {{ project.title }}
   {{ project.content }}
{% endfor%}

&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
  &lt;li&gt;这里的 assign 是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;liquid&lt;/code&gt; 语法
    &lt;ul&gt;
      &lt;li&gt;设置一个变量, 这个变量是获取所有 Projects 的 category , 目的是用于为 projects 进行分类&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;为-博客增加-评论-comments-功能&quot;&gt;为 博客增加 评论 (comments) 功能&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://simondosda.github.io/posts/2021-09-17-blog-github-pages-5-comment-1.html&quot;&gt;参考 这篇文章&lt;/a&gt;
视频教学是用 Disqus, 已经被 Jekyll 集成了&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;为 静态 blog 增加 评论功能 的 一个比较常见的方案是用  Disqus
    &lt;ol&gt;
      &lt;li&gt;进入 https://disqus.com 完成注册&lt;/li&gt;
      &lt;li&gt;点击右上角 setting, 点击 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Add Disqus to site&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;半天收到个邮件, 点击&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Complete Installation -&amp;gt;&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;把生成的 html 代码黏贴到 blog post html 页面的下面&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;把本地代码上传到github&quot;&gt;把本地代码上传到github&lt;/h3&gt;
&lt;p&gt;这里展示的是搞一个新的 repository ,然后有这个 repository 作为 静态页面的站&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;在 github 上创建一个新的 repository &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;my-jekyll-docker-website&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;进入 jekyll 项目目录&lt;/li&gt;
  &lt;li&gt;修改 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_config.yml&lt;/code&gt; 中的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;url&lt;/code&gt; 为 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://dalongli.github.io/my-jekyll-docker-website/&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;用 git 初始化项目目录, 提交代码
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c&quot;&gt;# gh repo clone dalongli/dalongli.github.io&lt;/span&gt;
git init
git status
git add .
git status
git commit -m &lt;span class=&quot;s2&quot;&gt;&quot;my first commit&quot;&lt;/span&gt;
git remote add origin https://github.io/dalongli/my-jekyll-docker-website.git
git push -u origin main
git checkout -b gh-pages  &lt;span class=&quot;c&quot;&gt;# 切换成 gh-pages, 因为只有这个 branch 才能作 静态网站&lt;/span&gt;
git branch
git push origin gh-pages
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;访问网站  https://dalongli.github.io/my-jekyll-docker-website&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;为-github-的静态网站做-定制化域名&quot;&gt;为 github 的静态网站做 定制化域名&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;如果想用自己的域名换到 github 的域名, 需要自己购买一个新的域名&lt;/li&gt;
  &lt;li&gt;这里用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dalong.work&lt;/code&gt; 作为例子&lt;/li&gt;
  &lt;li&gt;步骤如下
    &lt;ol&gt;
      &lt;li&gt;进入已经初始化过 github 的项目目录&lt;/li&gt;
      &lt;li&gt;项目根目录下创建一个新的文件叫做 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CNAME&lt;/code&gt;, 内容只有一行: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dalong.work&lt;/code&gt;
        &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;git add .
git commit -m &quot;Add CNAME file for dalong.work&quot;
git push origin gh-pages
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;到域名供应商的网站上, 对域名进行设置 (GoDaddy site or others )
        &lt;ol&gt;
          &lt;li&gt;增加一个 A 记录,  name=@, value = 192.30.252.153?&lt;/li&gt;
          &lt;li&gt;增加一个 CNAME, name=www, value=dalongli.github.io&lt;/li&gt;
          &lt;li&gt;等待一会才能生效&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;Wait for change to propogate&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;安装和调试-新的-jekyll-模板到-github&quot;&gt;安装和调试 新的 Jekyll 模板到 github&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;这里用 &lt;a href=&quot;https://jekyllthemes.io/theme/mediumish&quot;&gt;Mediumish Jekyll theme&lt;/a&gt; 作为例子
    &lt;ul&gt;
      &lt;li&gt;目的是下载模板到本地&lt;/li&gt;
      &lt;li&gt;运行本地网站&lt;/li&gt;
      &lt;li&gt;修改内容为自己的个人blog&lt;/li&gt;
      &lt;li&gt;上传到 github&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;运行模板&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;首先在本地的桌面创建新的目录 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;themes&lt;/code&gt;, 井cd 进去&lt;/li&gt;
  &lt;li&gt;命令行&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git clone https://github.com/wowthemesnet/mediumish-theme-jekyll.git&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;vscode 打开目录&lt;/li&gt;
  &lt;li&gt;vscode 命令行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bundle exec jekyll serve&lt;/code&gt; , 提示需要安装依赖包&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bundle install&lt;/code&gt; 提示 “An error occurred while installing ffi (1.10.0), and Bundler
cannot continue.”&lt;/li&gt;
  &lt;li&gt;网上找答案, 提示运行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bundle update ffi&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;再运行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bundle install &lt;/code&gt; 成功安装所有gem 依赖包&lt;/li&gt;
  &lt;li&gt;提示 “cannot load such file – rexml/parsers/baseparser (LoadError)”
    &lt;ol&gt;
      &lt;li&gt;通过在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt; 文件中增加两行解决.
        &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;gem &quot;jekyll&quot;, &quot;~&amp;gt; 3.9&quot;
gem &quot;kramdown-parser-gfm&quot;, &quot;~&amp;gt; 1.1&quot;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;提示 “cannot load such file – webrick (LoadError)” ,  运行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bundle add webrick&lt;/code&gt; 解决&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bundle exec jekyll serve&lt;/code&gt; 成功启动模板&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;#### 
&lt;a href=&quot;https://app.logo.com/dashboard/logo_3730e647-b43c-4ea9-b90a-624c82715afd/your-logo-files&quot;&gt;logo 制作&lt;/a&gt;
&lt;a href=&quot;https://favicon.io/favicon-converter/&quot;&gt;favicon 制作&lt;/a&gt;&lt;/p&gt;

</description>
        <pubDate>Fri, 21 Jul 2023 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/Jekyll-Static-Website-Development/</link>
        <guid isPermaLink="true">http://localhost:4000/Jekyll-Static-Website-Development/</guid>
        
        
        <category>Jekyll</category>
        
        <category>Github</category>
        
        <category>Liquid</category>
        
        <category>Markdown</category>
        
      </item>
    
      <item>
        <title>Preparing for ITIL Certification</title>
        <description>&lt;p&gt;如果您正在考虑 2023 年的 ITIL 认证，您会在这里找到很多有用的信息和指导。ITIL认证是全球公认的IT服务管理（ITSM）标准。这些认证为个人和组织提供了与ITIL最佳实践相关的能力和知识的明确指示。  让我带你一起探索 ITIL 的理念和如何获得这个认证.&lt;/p&gt;

&lt;h1 id=&quot;itil-4&quot;&gt;ITIL 4&lt;/h1&gt;
&lt;p&gt;[TOC]&lt;/p&gt;
&lt;h2 id=&quot;资源&quot;&gt;资源&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://www.axelos.com/certifications/itil-service-management&quot;&gt;ITIL 官网&lt;/a&gt;
&lt;a href=&quot;https://wiki.en.it-processmaps.com/index.php/ITIL_4&quot;&gt;ITIL WIKI&lt;/a&gt;
&lt;a href=&quot;https://www.itilnews.com/index.php?pagename=ITIL_and_Cloud_Computing_by_Sumit_Kumar_Jha&quot;&gt;ITIL 和云&lt;/a&gt;
&lt;a href=&quot;https://wiki.en.it-processmaps.com/index.php/ITIL-Checklists#ITIL_Service_Strategy_Templates&quot;&gt;ITIL 模板/check list&lt;/a&gt;
&lt;a href=&quot;https://www.diontraining .com/courses&quot;&gt;Udemy 讲课老师的个人网站&lt;/a&gt;
&lt;a href=&quot;https://www.thoughtrock.com/downloadable-templates/&quot;&gt;一个ITIL 讲师的网站, 包含了模板&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;考试准备考试技巧&quot;&gt;考试准备/考试技巧&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.peoplecert.org/overview&quot;&gt;考试入口&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;60 分钟的考试&lt;/li&gt;
  &lt;li&gt;非英语母语可以多 15 分钟 (需要book 考试之前额外申请)&lt;/li&gt;
  &lt;li&gt;40 道题, 都是多选题 ,考你对  ITIL4 的概念和理解
    &lt;ul&gt;
      &lt;li&gt;9 道题考的是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;recall&lt;/code&gt; , 就是概念题, 准确match 官方材料的概念定义&lt;/li&gt;
      &lt;li&gt;31 道题是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;understand&lt;/code&gt;, 就是给你一个场景, 你要理解并运用 ITIL 的知识, 从答案中找到正确的对一个定义/名词/概念的解释和描述&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;26 道题正确就可以通过考试&lt;/li&gt;
  &lt;li&gt;考前建议做 8 套 60 道的模拟题.
    &lt;ul&gt;
      &lt;li&gt;做模拟题的时候, 如果 75%正确率就可以预约考试了.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;考试可以在线考
    &lt;ul&gt;
      &lt;li&gt;400 美元考试费 + optional 的 100 美元的保险 (第一次考不过, 可以考第二次)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;考题类型
    &lt;ul&gt;
      &lt;li&gt;虽然都是单选题, 也有三种类型
        &lt;ul&gt;
          &lt;li&gt;Classic
            &lt;ul&gt;
              &lt;li&gt;迪斯尼发明了什么? 米奇老鼠&lt;/li&gt;
              &lt;li&gt;下面哪个不是车的品牌? Cisco&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Missing Word
            &lt;ul&gt;
              &lt;li&gt;[?] 是水果的一种? Apple&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;List
            &lt;ul&gt;
              &lt;li&gt;三明治中要放什么? 1苹果, 2培根, 3葡萄果冻, 4核桃奶油 - 1 and 4&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;考试技巧
    &lt;ul&gt;
      &lt;li&gt;如果答案都是很短的内容, 可以先扫一眼问题和答案, 再完整的看问题&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;六、重要提示 1.线上考试，遇到任何问题，请第一时间与官方客服建立联系和交流。避免被默认为”缺考 Absent” 2. 7*24 客服联系方式
•E-mail: customerservice@peoplecert.org
•To join us via chat: https://www.peoplecert.org/help-and-support
•Call from China: 400-882-2053 (中文客服周一-周日，早上 9 点-晚上 21 点)&lt;/p&gt;

&lt;h2 id=&quot;需要背的英文&quot;&gt;需要背的英文&lt;/h2&gt;
&lt;p&gt;tangible&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;有型的
intangible 
无形的
inventory
目录
adequately
足够的
personnel
全体员工
malfunctioned
故障
nurturing
培养, 培育(感情/关系)
assembled
(一些人)组合(成一个团队)
competencies
资质
perceived
察觉到的(利益)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;itil-认证路径&quot;&gt;ITIL 认证路径&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-29-153916.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;先拿 ITIL Foundation&lt;/li&gt;
  &lt;li&gt;然后分两条路
    &lt;ul&gt;
      &lt;li&gt;拿4 个证书后 自动获得 MP&lt;/li&gt;
      &lt;li&gt;拿 2 个证书后自动获得 SL&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;拿全 5 个, 获得 Master&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;1-itil-是一个服务管理框架&quot;&gt;1 ITIL 是一个服务管理框架&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;ITIL4 Sutdy Guide
    &lt;ul&gt;
      &lt;li&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-29-030252.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;ITIL认证是从事IT服务管理的人才必备认证。IT服务管理是ITIL框架的核心，它是一套协同流程（Process），并通过服务级别协议（SLA）来保证IT服务的质量。它融合了系统管理、网络管理、系统开发管理等管理活动和变更管理、资产管理、问题管理等许多流程的理论和实践。&lt;/li&gt;
  &lt;li&gt;汽车制造商本质是出行体验的服务商, 为客户提供良好的出行体验
    &lt;ul&gt;
      &lt;li&gt;以用户为核心的服务体验设计&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;2-service-management-概念&quot;&gt;2 Service Management 概念&lt;/h2&gt;
&lt;h3 id=&quot;21价值---需求&quot;&gt;2.1价值 - 需求&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;要先了解企业部分, 最终客户的价值和需求, 了解他们对 IT , 云的需求是什么&lt;/li&gt;
  &lt;li&gt;全面的了解了不同利益方的需求, 才能知道我们如何最好的满足他们的要求&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;22组织和人&quot;&gt;2.2组织和人&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;组织和人包括
    &lt;ul&gt;
      &lt;li&gt;外包公司/供应商人员&lt;/li&gt;
      &lt;li&gt;上下游/生态合作伙伴&lt;/li&gt;
      &lt;li&gt;IT 团队人员&lt;/li&gt;
      &lt;li&gt;企业部门员工&lt;/li&gt;
      &lt;li&gt;最终客户&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;每个组织和人都有自己的价值和需求&lt;/li&gt;
  &lt;li&gt;要梳理清楚不同组织和人之间利益关系, 谁是 supplier, 谁是 comsumer (user, customer, sponsor)
    &lt;ul&gt;
      &lt;li&gt;user 服务的使用者&lt;/li&gt;
      &lt;li&gt;customer/client 服务需求定义者, 服务产出的负责者&lt;/li&gt;
      &lt;li&gt;sponsor 服务消费的资金提供者&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;要梳理清楚不同组织和人之间的冲突/gap和mitigation plan&lt;/li&gt;
  &lt;li&gt;要梳理不同组织和人之间的合作模式, 以便给企业带来最大的价值&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;23-服务和产品&quot;&gt;2.3 服务和产品&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;服务
    &lt;ul&gt;
      &lt;li&gt;服务是合作开启的价值, 是客户想要的产出
        &lt;ul&gt;
          &lt;li&gt;A service enables &lt;strong&gt;value&lt;/strong&gt; co-creation by facilitating &lt;strong&gt;outcomes&lt;/strong&gt; that customers want to achieve.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;由服务提供者提供成本和风险管理, 不需要消费者管
        &lt;ul&gt;
          &lt;li&gt;“A service is a means of enabling value co-creation by facilitating outcomes that customers want to achieve, without the customer having to manage specific costs and risks.”&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;产品
    &lt;ul&gt;
      &lt;li&gt;服务可以基于产品之上&lt;/li&gt;
      &lt;li&gt;产品是组织把可配置的资源打包成一个 offer&lt;/li&gt;
      &lt;li&gt;组织创造的配置的资源会给它的客户带来价值&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;比如
    &lt;ul&gt;
      &lt;li&gt;AWS云服务&lt;/li&gt;
      &lt;li&gt;iphone 14&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;231-service-offering&quot;&gt;2.3.1 Service Offering&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;为客户提供的,可以满足客户需求的服务的描述&lt;/li&gt;
  &lt;li&gt;service action
    &lt;ul&gt;
      &lt;li&gt;服务期间, 合同中规定的行为, 比如免费技术培训,  免费的技术支持, 免费的沙箱试用等&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;比如
    &lt;ul&gt;
      &lt;li&gt;AWS 的 S3 的描述/价格模型/适用场景&lt;/li&gt;
      &lt;li&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;24-service-relationship-management&quot;&gt;2.4 Service relationship management&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;是服务提供者和服务消费者的关系
    &lt;ul&gt;
      &lt;li&gt;Relationship management is the practice of establishing and nurturing links between an organization and its stakeholders at strategic and tactical levels.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;包括了 服务提供, 服务消费, 服务关系管理
    &lt;ul&gt;
      &lt;li&gt;服务提供 - 是一堆活动,
        &lt;ul&gt;
          &lt;li&gt;比如 AWS 提供的 S3 服务的咨询服务活动, 培训活动, 定期会议, 系统升级维护等&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;一个公司内部可以有 service provider 和 consumer&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;25-outcome-cost-and-risk&quot;&gt;2.5 outcome, cost and risk&lt;/h3&gt;
&lt;h4 id=&quot;251-outcome&quot;&gt;2.5.1 Outcome&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;给一个 stakeholder 的一个或者多个output的结果
    &lt;ul&gt;
      &lt;li&gt;影响的结果&lt;/li&gt;
      &lt;li&gt;成本介入&lt;/li&gt;
      &lt;li&gt;风险介入&lt;/li&gt;
      &lt;li&gt;支持输出&lt;/li&gt;
      &lt;li&gt;成本节约&lt;/li&gt;
      &lt;li&gt;风险避免&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;比如, 使用了 AWS 云之后
    &lt;ul&gt;
      &lt;li&gt;不需要自己维护数据中心&lt;/li&gt;
      &lt;li&gt;不需要建立庞大的运维团队&lt;/li&gt;
      &lt;li&gt;需要额外增加  AWS云的管理员角色&lt;/li&gt;
      &lt;li&gt;无需自己开发管理 Portal&lt;/li&gt;
      &lt;li&gt;花费的成本&lt;/li&gt;
      &lt;li&gt;有核心数据上云泄露的风险&lt;/li&gt;
      &lt;li&gt;解约了大笔管理费用&lt;/li&gt;
      &lt;li&gt;避免了因为自己知识不足而可能产生的网络数据泄露风险&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;252-cost&quot;&gt;2.5.2 Cost&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;可以是
    &lt;ul&gt;
      &lt;li&gt;项目成本&lt;/li&gt;
      &lt;li&gt;人天/人时/人头(FTE(Full Time Equivalent))&lt;/li&gt;
      &lt;li&gt;云的初次购买&lt;/li&gt;
      &lt;li&gt;RedHat - SYB(Single Year Booking)&lt;/li&gt;
      &lt;li&gt;AWS - ARR(Annual Recurring Revenue)&lt;/li&gt;
      &lt;li&gt;pay as you use (severless 服务)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;253-risk-风险&quot;&gt;2.5.3 Risk 风险&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;可能发生的, 产生影响, 损失, 让达到目标变得困难的事情&lt;/li&gt;
  &lt;li&gt;风险就等于成本&lt;/li&gt;
  &lt;li&gt;选择云的风险与规避的风险
    &lt;ul&gt;
      &lt;li&gt;降低数据中心的单次投入, 多中心灾备, 硬件设备维护折旧, 运营成本&lt;/li&gt;
      &lt;li&gt;降低了数据安全保障成本&lt;/li&gt;
      &lt;li&gt;降低了硬件知识储备成本&lt;/li&gt;
      &lt;li&gt;增加了云知识储备和运营成本&lt;/li&gt;
      &lt;li&gt;增加了云之间进行切换/多云的成本&lt;/li&gt;
      &lt;li&gt;降低了接触和使用最新的云技术的成本&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;风险应对方法
    &lt;ul&gt;
      &lt;li&gt;Avoid
        &lt;ul&gt;
          &lt;li&gt;用其他解决方案&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;accept
        &lt;ul&gt;
          &lt;li&gt;低风险低成本的&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;transfer
        &lt;ul&gt;
          &lt;li&gt;通过找供应商来承担高风险工作, 或者买保险&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;mitigate
        &lt;ul&gt;
          &lt;li&gt;比如通过云的高可用灾备方案来降低单数据中心地震灾难发生, 通过 replica 的 DB 备份快速恢复数据&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;降低风险的方法
    &lt;ul&gt;
      &lt;li&gt;prehand
        &lt;ul&gt;
          &lt;li&gt;充分沟通, 了解清楚上云的限制和关键成功要素&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Middle
        &lt;ul&gt;
          &lt;li&gt;定期获取风险列表, 定期评估风险, 并对高风险问题执行风险规避行动&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;afterhand
        &lt;ul&gt;
          &lt;li&gt;执行快速应急处置预案, 快速处理发生的风险.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;254-utility-和-warranty&quot;&gt;2.5.4 Utility 和 Warranty&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;Utility
    &lt;ul&gt;
      &lt;li&gt;产品或者服务提供的满足一个特定需求的功能&lt;/li&gt;
      &lt;li&gt;满足需求的功能
        &lt;ul&gt;
          &lt;li&gt;“Utility is the functionality offered by a product or service to meet a particular need.”&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Warranty
    &lt;ul&gt;
      &lt;li&gt;保证产品或服务可以满足这个需求&lt;/li&gt;
      &lt;li&gt;满足需求的执行效率&lt;/li&gt;
      &lt;li&gt;‘how the service performs’&lt;/li&gt;
      &lt;li&gt;‘fit for use’&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;例子:
    &lt;ul&gt;
      &lt;li&gt;Warranty: 一个web 网站可以满足 1 万人同时访问&lt;/li&gt;
      &lt;li&gt;Utility: 这个网站上一个分享产品到社交媒体的功能&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;3-服务管理的四个维度-four-dimensons&quot;&gt;3 服务管理的四个维度 Four Dimensons&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-29-130614.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Orgnizations &amp;amp; People
    &lt;ol&gt;
      &lt;li&gt;focus
        &lt;ol&gt;
          &lt;li&gt;roles and responsibility&lt;/li&gt;
          &lt;li&gt;formal organizational structures&lt;/li&gt;
          &lt;li&gt;culture&lt;/li&gt;
          &lt;li&gt;required staffing and competencies&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;比如:
        &lt;ol&gt;
          &lt;li&gt;组织的扁平化结构&lt;/li&gt;
          &lt;li&gt;侧重于公司如何构建其人力资源&lt;/li&gt;
          &lt;li&gt;&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Information &amp;amp; Technology
    &lt;ol&gt;
      &lt;li&gt;focus
        &lt;ol&gt;
          &lt;li&gt;information&lt;/li&gt;
          &lt;li&gt;knowledge&lt;/li&gt;
          &lt;li&gt;technology required (相关技术)&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;比如:
        &lt;ol&gt;
          &lt;li&gt;通信系统 (communication system)&lt;/li&gt;
          &lt;li&gt;知识库 (knowledge base)&lt;/li&gt;
          &lt;li&gt;是否把web 网站从 on-premise 迁移到 cloud&lt;/li&gt;
          &lt;li&gt;install a Microsoft SharePoint server to serve as the organization’s knowledge base&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Partners &amp;amp; suppliers
    &lt;ol&gt;
      &lt;li&gt;focus
        &lt;ol&gt;
          &lt;li&gt;the organization’s relationships with other organizations that are involved in the design, development, deployment, delivery, support, and/or continual improvement of services. This also incorporates contracts and other agreements between the organization and its partners or suppliers.&lt;/li&gt;
          &lt;li&gt;roles and responsibility ?&lt;/li&gt;
          &lt;li&gt;contract and agreement ?&lt;/li&gt;
          &lt;li&gt;security and compliance ?&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Value streams &amp;amp; processes
    &lt;ol&gt;
      &lt;li&gt;focus
        &lt;ol&gt;
          &lt;li&gt;
            &lt;table&gt;
              &lt;tbody&gt;
                &lt;tr&gt;
                  &lt;td&gt;activities that transform inputs to outputs&lt;/td&gt;
                  &lt;td&gt;价值流就是  将输入转化为输出的活动&lt;/td&gt;
                &lt;/tr&gt;
              &lt;/tbody&gt;
            &lt;/table&gt;
            &lt;ol&gt;
              &lt;li&gt;The ‘value streams and processes’ dimension focuses on what activities the organization undertakes, and how they are organized, as well as how the organization ensures that it is enabling value creation for all stakeholders efficiently and effectively. A key focus of the ‘value streams and processes’ dimension are processes which are activities that transform inputs into outputs.&lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
          &lt;li&gt;比如:
            &lt;ol&gt;
              &lt;li&gt;公司要做一个自动化的系统, 有 9 个步骤来帮助学生高效完成考试券的购买.&lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;ul&gt;
  &lt;li&gt;中间是 Products and Services
    &lt;ul&gt;
      &lt;li&gt;核心是 Value&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;例子: 公司发生了一个云的事故, 那么如何影响这四个维度
    &lt;ul&gt;
      &lt;li&gt;O &amp;amp; P
        &lt;ul&gt;
          &lt;li&gt;技术支持, help desk, 升级到不同的层级, 不同的部门…&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;IT
        &lt;ul&gt;
          &lt;li&gt;注册事故到系统, 事故跟踪, 事故分析, root cause 分析, 知识库&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;P &amp;amp; S
        &lt;ul&gt;
          &lt;li&gt;主要合作伙伴或者外包公司帮忙解决事故&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;V &amp;amp; P
        &lt;ul&gt;
          &lt;li&gt;改变流程来避免事故, 把低价值的步骤去掉&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;4-服务价值系统-service-value-system-svs&quot;&gt;4 服务价值系统 Service Value System (SVS)&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-29-132439.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;描述组织如何可以把各个components 和 activities 有效结合, 开启共创的价值
    &lt;ul&gt;
      &lt;li&gt;The purpose of the service value system is to ensure that the organization continually &lt;strong&gt;co-creates&lt;/strong&gt; value with &lt;strong&gt;all stakeholders&lt;/strong&gt; through the use and management of products and services.
        &lt;ul&gt;
          &lt;li&gt;服务价值体系的目的是确保组织通过对产品和服务的使用和管理，不断地与所有利益相关者共同创造价值。&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;不同的 components 可以有不同的组合&lt;/li&gt;
  &lt;li&gt;说白了就是要团队高效协作, 功能完成一致的目标&lt;/li&gt;
&lt;/ul&gt;

&lt;ol&gt;
  &lt;li&gt;先来个需求/商机&lt;/li&gt;
  &lt;li&gt;中间要做一堆事
    &lt;ol&gt;
      &lt;li&gt;指导原则&lt;/li&gt;
      &lt;li&gt;治理方案&lt;/li&gt;
      &lt;li&gt;服务价值链 (流程制定)&lt;/li&gt;
      &lt;li&gt;实践 (ITIL 4 提供 34 种实践方式)&lt;/li&gt;
      &lt;li&gt;持续改进&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;最后产出价值&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;43-guiding-principles-指导原则&quot;&gt;4.3 Guiding Principles 指导原则&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;一个可以在所有条件下引导组织的一个推荐&lt;/li&gt;
  &lt;li&gt;允许组织把自己通过一个方法整合到服务管理中&lt;/li&gt;
  &lt;li&gt;可以指导各种活动&lt;/li&gt;
  &lt;li&gt;Guiding principles are considered universally applicable and enduring.&lt;/li&gt;
  &lt;li&gt;They should &lt;strong&gt;never be changed&lt;/strong&gt; within the organization, but instead provide the organization with 7 areas to always focus on during their continual improvement efforts.&lt;/li&gt;
  &lt;li&gt;当你遇到问题, 可以在 指导原则中找到方向&lt;/li&gt;
  &lt;li&gt;7 条指导原则
    &lt;ol&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;focus on value&lt;/td&gt;
              &lt;td&gt;专注价值&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
        &lt;ol&gt;
          &lt;li&gt;According to the guiding principle of ‘focus on value’, “Everything that the organization does needs to map, directly or indirectly, to &lt;strong&gt;value&lt;/strong&gt; for the stakeholders.&lt;/li&gt;
          &lt;li&gt;案例
            &lt;ol&gt;
              &lt;li&gt;影响用户体验(CX)&lt;/li&gt;
              &lt;li&gt;了解用户: why the consumer uses the service, what the services help them to do, and how the services help them achieve their own goals&lt;/li&gt;
              &lt;li&gt;也和 cost and financial consequences 相关&lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;start where you are&lt;/td&gt;
              &lt;td&gt;从目前的位置出发&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
        &lt;ol&gt;
          &lt;li&gt;The ‘start where you are’ guiding principle says that the current state should be investigated and observed directly to make sure it is fully understood before you attempt to create a brand new service or process. There is usually something in the existing service or process that can be reused, saving you time, effort, and resources.&lt;/li&gt;
          &lt;li&gt;案例
            &lt;ol&gt;
              &lt;li&gt;有一个老服务, 要建一个新的自动化服务, 要参考老服务的材料和流程是否可以重用&lt;/li&gt;
              &lt;li&gt;邮件服务不好用了, 你一顿调查, 发现邮件服务无法满足 utility and warranty requirements&lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;progress iteratively with feedback&lt;/td&gt;
              &lt;td&gt;迭代前进并不断获取反馈&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
        &lt;ol&gt;
          &lt;li&gt;案例
            &lt;ol&gt;
              &lt;li&gt;做一个应用, 让部分人使用, 通过反馈在进行改进&lt;/li&gt;
              &lt;li&gt;做一个移动应用, 不要一次上 15 个功能, 而是先发布已经完成的4 个功能, 通过用户反馈后, 把没上的 3 个进行了改进, 之后就是每3 周上一个功能&lt;/li&gt;
              &lt;li&gt;开发方式从瀑布改成敏捷, 2 周一次发布, beta 测试人员测试新功能并给出反馈&lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;collaborate and promote visibility&lt;/td&gt;
              &lt;td&gt;注重合作并提升透明度&lt;/td&gt;
              &lt;td&gt;不论在项目内外,都要提升沟通&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
        &lt;ol&gt;
          &lt;li&gt;案例
            &lt;ol&gt;
              &lt;li&gt;为了设计新的服务, 组成一个虚拟小组, 邀请不同部门的人参与进来, 希望让大家未来都可以接受这个服务&lt;/li&gt;
              &lt;li&gt;识别和管理所有利益相关者群体，以便在整个工作人员中建立更有力的沟通。&lt;/li&gt;
              &lt;li&gt;大家把一个项目的 ‘information radiator’(信息宣传纸) 贴在办公室不同部门容易看到的地方, 内容包括了项目的项目工作项, 项目进度, 风险, 整体目标等.&lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;think and work holistically 全面&lt;/td&gt;
              &lt;td&gt;整体思考和工作 (集思广益, 共同协作)&lt;/td&gt;
              &lt;td&gt;了解组织的所有部分如何以集成的方式协同工作&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
        &lt;ol&gt;
          &lt;li&gt;The guiding principle ‘think and work holistically’ recognizes the complexity of a system and seeks to understand the relationships between the various components that make up a service. This is because services are delivered to internal and external service consumers through the coordination and integration of the four dimensions of service management and, therefore, requires you to think about a service from end-to-end by understanding how an organization can work together in an integrated way to achieve the desired objectives.&lt;/li&gt;
          &lt;li&gt;案例
            &lt;ol&gt;
              &lt;li&gt;甲乙分别负责一个服务的两个部分, 两个人密切沟通讨论如何完成工作&lt;/li&gt;
              &lt;li&gt;协调整个组织，以便最好地了解复杂服务的工作原理&lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;keep it simple and practical&lt;/td&gt;
              &lt;td&gt;保持简单实用&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
        &lt;ol&gt;
          &lt;li&gt;案例
            &lt;ol&gt;
              &lt;li&gt;有 15 个步骤的流程, review 发现有 3 个步骤没啥用, 直接删了&lt;/li&gt;
              &lt;li&gt;有 150 个 metrics 需要分析, 但是发现不是都有用, 所以你把那些没价值的删了&lt;/li&gt;
              &lt;li&gt;一个账号创建流程, 先用 3 种账号创建方法cover 99% 的场景, 1% 的特殊情况先手动解决. 几个小时就搞定了&lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;optimize and automate&lt;/td&gt;
              &lt;td&gt;优化和自动化&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
        &lt;ol&gt;
          &lt;li&gt;The guiding principle of ‘optimize and automate’ is used to &lt;strong&gt;maximize&lt;/strong&gt; the value of the work carried out by the &lt;strong&gt;human&lt;/strong&gt; and &lt;strong&gt;technical&lt;/strong&gt; resources within an organization.
            &lt;ol&gt;
              &lt;li&gt;优化和自动化最好的适配场景就是通过&lt;strong&gt;人&lt;/strong&gt; 和 &lt;strong&gt;技术&lt;/strong&gt; 实现的工作内容&lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
          &lt;li&gt;The guiding principle of ‘optimize and automate’ relies heavily on optimization. Optimization is the process of improving and increasing the efficiency of a process or service.&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;45-service-value-chain-svc&quot;&gt;4.5 Service Value Chain (SVC)&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;通过创造和管理产品和服务来满足需求和促进价值实现所需的关键活动
    &lt;ul&gt;
      &lt;li&gt;the key activities required to respond to demand and facilitate value realization through the creation and management of products and services&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Service value chain activities are connected to and interact with one another, with each activity receiving and providing triggers for further actions to be taken.
    &lt;ul&gt;
      &lt;li&gt;服务价值链 的活动是联系在一起的, 互相加护的, 每个活动都会收到或提供 trigger 给其他 活动&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;可以理解为一个流程, 包括如下步骤
    &lt;ul&gt;
      &lt;li&gt;Engage -&amp;gt; ( Design &amp;amp; transition -&amp;gt; Obtain(resources)/build -&amp;gt; Deliver &amp;amp; support ) -&amp;gt; products &amp;amp; Service&lt;/li&gt;
      &lt;li&gt;这个流程的上面和下面是 plan 和 improvement, 就是要不断的计划和改进&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;SVC 的流程结合到一起, 相互作用&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;SVC 可以用到 34 个 practice 的各种组合&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Service Level management (比如 供应商的服务质量经理 ) 对 SVC 几个部分的贡献
    &lt;ul&gt;
      &lt;li&gt;engage
        &lt;ul&gt;
          &lt;li&gt;Collect and process feedback from customer and users&lt;/li&gt;
          &lt;li&gt;收集和处理来自客户和用户的反馈&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;design and transition
        &lt;ul&gt;
          &lt;li&gt;The ‘design and transition’ activity in the service level management practice provides feedback from interactions with customers into new or changed services.&lt;/li&gt;
          &lt;li&gt;将与客户互动的反馈意见纳入新的或改变的服务中。&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Obtain/build
        &lt;ul&gt;
          &lt;li&gt;The ‘obtain/build’ activity in the service level management practice provides objectives for component and service performance for products and services&lt;/li&gt;
          &lt;li&gt;为组件提供目标, 为产品和服务提供服务性能&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;delivery and support
        &lt;ul&gt;
          &lt;li&gt;The ‘deliver and support’ activity in the service level management practice collects feedback during interactions and communicates service performance objectives to the operations and support teams.&lt;/li&gt;
          &lt;li&gt;在交互过程中收集反馈，并将服务绩效目标传达给运营和支持团队&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Service request management employee (比如 help desk 接线员) 对于 SVC 的几个部分的对应的责任
    &lt;ul&gt;
      &lt;li&gt;improve
        &lt;ul&gt;
          &lt;li&gt;提供 trend, quality, feedback info 给 服务需求 ( Improve includes the analysis of data to identify opportunities to provide new service request options.)
            &lt;ul&gt;
              &lt;li&gt;比如: 通过分析飞机晚点的趋势, 质量和客户反馈来帮助客户提供合适的时间点的机票预定&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;engage
        &lt;ul&gt;
          &lt;li&gt;communicate with consumers to understand their requirement
            &lt;ul&gt;
              &lt;li&gt;和消费者沟通了解他们的需求&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;design and transition
        &lt;ul&gt;
          &lt;li&gt;启动 standard 服务 来满足服务需求
            &lt;ul&gt;
              &lt;li&gt;比如: 定机票&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;obtain/build
        &lt;ul&gt;
          &lt;li&gt;获取 pre-approved 服务内容 来满足服务需求
            &lt;ul&gt;
              &lt;li&gt;比如: 改签机票; 换个更大的路由器&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Deliver &amp;amp; support
        &lt;ul&gt;
          &lt;li&gt;当客户需要从服务商那里获得支持的时候, 确保客户一直是 productive 的.
            &lt;ul&gt;
              &lt;li&gt;比如: 客户飞机延期了, 及时与客户联系询问并提供帮助
                &lt;h4 id=&quot;plan&quot;&gt;&lt;strong&gt;Plan&lt;/strong&gt;&lt;/h4&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;服务价值链的 plan 不是一个甘特图, 而是 目标的理解, 当前的状态, 所有 4 个维度与产品和服务的的改进方向
        &lt;ul&gt;
          &lt;li&gt;create a shared understanding of the vision, current status, and improvement direction for all four dimensions and all products and services across the organization.&lt;/li&gt;
          &lt;li&gt;比如: 订机票服务的 vision, current status, improvement direction&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;output
        &lt;ul&gt;
          &lt;li&gt;设计和转换的 组合的描述
            &lt;ul&gt;
              &lt;li&gt;portfolio decisions for design and transition
                &lt;h4 id=&quot;improve&quot;&gt;&lt;strong&gt;Improve&lt;/strong&gt;&lt;/h4&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;The ‘improve’ value chain activity ensures continual improvement of products, services, and practices across all value chain activities and the four dimensions of service management.
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;improve&lt;/code&gt; 确保 产品, 服务, 实践 的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;持续改进&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;The ‘improve’ activity in the service level management practice uses feedback from users about the service and requirements from customers to make recommendations to improve the service.
        &lt;ul&gt;
          &lt;li&gt;服务水平管理实践中的 “改进 “活动利用用户对服务的反馈和客户的要求来提出改进服务的建议。&lt;/li&gt;
          &lt;li&gt;白话: 客户提供反馈, 我们 improve SLA&lt;/li&gt;
          &lt;li&gt;比如: 通过用户反馈提高订机票的 SLA&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;会把 incident record 作为 improve 的 input ,
        &lt;h4 id=&quot;engage&quot;&gt;&lt;strong&gt;Engage&lt;/strong&gt;&lt;/h4&gt;
      &lt;/li&gt;
      &lt;li&gt;Engage focuses on problems that have a significant impact on services will be visible to customers and users. In some cases, customers may wish to be involved in problem prioritization, and the status and plans for managing problems should be communicated. Workarounds are often presented to users via a service portal. The purpose of engage value chain activity is to provide continual engagement with all stakeholders.
        &lt;ul&gt;
          &lt;li&gt;engage 侧重于对服务有重大影响的问题，这些问题需要对客户和用户可见。&lt;/li&gt;
          &lt;li&gt;在某些情况下，客户可能希望参与问题的优先级排序，管理问题的状态和计划&lt;/li&gt;
          &lt;li&gt;engage 的目的是提供与所有利益相关者的持续接触&lt;/li&gt;
          &lt;li&gt;比如: 订票服务没有订到需要的票, 影响客户出行, 客服经理亲自联系客户进行安抚&lt;/li&gt;
          &lt;li&gt;案例:
            &lt;ul&gt;
              &lt;li&gt;有一个 workaround, 把它放到 web portal 上公示给用户的行为, 这就算是一种 engage.&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;design--transition&quot;&gt;&lt;strong&gt;Design &amp;amp; transition&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;The ‘design and transition’ value chain activity ensures that products and services continually meet stakeholder expectations for quality, costs, and time to market.
    &lt;ul&gt;
      &lt;li&gt;设计和转化, 可以理解为 确保产品和服务可以持续的满足 stakeholder 对质量, 成本和时间的期望
        &lt;h4 id=&quot;obtainbuild&quot;&gt;&lt;strong&gt;Obtain/build&lt;/strong&gt;&lt;/h4&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;确保服务的内容无论在何时何地需要, 都可以满足需要
    &lt;ul&gt;
      &lt;li&gt;ensures that service components are available when and where they are needed and meet agreed specifications&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;满足服务请求可能需要获取预先批准的服务组件。&lt;/td&gt;
          &lt;td&gt;比如, 客户需要一些预先批准的内容, 免得和客户交流的时候还要等待审批(比如给客户订机票)&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
    &lt;ul&gt;
      &lt;li&gt;The fulfillment of service requests may require acquisition of pre-approved service components.”&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Obtain/build will manage the solution to the problem once it has been identified by problem management. They will be responsible for the release and deployment of the latest version of the application or service.
    &lt;ul&gt;
      &lt;li&gt;obtain/build 负责更新 patch, 发布和部署最新版本的应用或者服务,&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;比如:
    &lt;ul&gt;
      &lt;li&gt;需要换一个更大的路由器, 你的团队开始对进行配置准备工作.&lt;/li&gt;
      &lt;li&gt;要更新 最新版本的浏览器来避免应用的安全事故.
        &lt;h4 id=&quot;delivery-and-support&quot;&gt;&lt;strong&gt;Delivery and support&lt;/strong&gt;&lt;/h4&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Deliver and support ensures users continue to be productive when they need assistance from the service provider.
    &lt;ul&gt;
      &lt;li&gt;交付和支持可确保用户在需要服务提供商的帮助时继续保持高效。
        &lt;h4 id=&quot;product-and-services&quot;&gt;&lt;strong&gt;Product and Services&lt;/strong&gt;&lt;/h4&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;46-continual-improvement&quot;&gt;4.6 Continual Improvement&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Continual Improvement 是 34 个 Practice 中的一个, 但是因为他很重要, 所以被单独拿出来说&lt;/li&gt;
  &lt;li&gt;说白了就是不断改进产品和服务, 降本增效&lt;/li&gt;
  &lt;li&gt;There are many methods that can be used for improvement initiatives and too many should not be used. It is a good idea to select a few key methods that are appropriate to the types of improvements the organization typically handles and to cultivate those methods.
    &lt;ul&gt;
      &lt;li&gt;不需要都用, 可以先选几个方法(a few key methods)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;7 个循环流程
    &lt;ul&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;What is the vision?&lt;/td&gt;
              &lt;td&gt;未来景象是啥&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
        &lt;ul&gt;
          &lt;li&gt;每个改进行动都要支持组织的目标&lt;/li&gt;
          &lt;li&gt;要确保
            &lt;ul&gt;
              &lt;li&gt;high-level direction of the initiative has been understood&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Where are we now?&lt;/td&gt;
              &lt;td&gt;现在在哪&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
        &lt;ul&gt;
          &lt;li&gt;‘Where are we now’ is focused on determining the current state of the organization, including mapping out existing processes, &lt;strong&gt;conducting objective measurement through metrics&lt;/strong&gt;, and available resources.
            &lt;ul&gt;
              &lt;li&gt;这个阶段会设定一个目标 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objective baseline measurement&lt;/code&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;例子:
            &lt;ul&gt;
              &lt;li&gt;招聘了一个新的流程改进专员, 你给她分享了一些材料, 她开始分析这些材料&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Where do we want to be?&lt;/td&gt;
              &lt;td&gt;想要去哪&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
        &lt;ul&gt;
          &lt;li&gt;这个步骤专注于:
            &lt;ul&gt;
              &lt;li&gt;defining the &lt;strong&gt;goal&lt;/strong&gt; for the organization based on the vision&lt;/li&gt;
              &lt;li&gt;what can be measured and quantified (such as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Critical Success Factors and Key Performance Indicators&lt;/code&gt;).
                &lt;ul&gt;
                  &lt;li&gt;这里定的是 &lt;strong&gt;成功因素&lt;/strong&gt; 和 &lt;strong&gt;KPI&lt;/strong&gt;, 并不是 objective baseline measurement&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;例子:
                &lt;ul&gt;
                  &lt;li&gt;数据中心每年的能耗费用是 1.2 M, CEO 说要减少能耗. IT 总监创建了一个目标(&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;goal&lt;/code&gt;), 明年数据中心的能耗费用要少于 1M. 这时还没有制定计划, 所以是 where do we want to be 阶段&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;How do we get there?&lt;/td&gt;
              &lt;td&gt;如何到那&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
        &lt;ul&gt;
          &lt;li&gt;fucus
            &lt;ul&gt;
              &lt;li&gt;focused on &lt;strong&gt;outlining&lt;/strong&gt; the &lt;strong&gt;plan&lt;/strong&gt; of action to be undertaken to accomplish the goals set forth in the ‘where do we want to be’ &lt;strong&gt;step&lt;/strong&gt; of the model.&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;例子:
            &lt;ul&gt;
              &lt;li&gt;公司设定了减少 10% 物理机的目标, 我们正在做这个计划, 迁移 50%的机器到虚机上, 这个阶段就是how do we get there&lt;/li&gt;
              &lt;li&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Take action&lt;/td&gt;
              &lt;td&gt;做些事情&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
        &lt;ul&gt;
          &lt;li&gt;The ‘take action’ step of the continual improvement model is focused on performing the &lt;strong&gt;actual work&lt;/strong&gt; involved in order to reach the goals set forth in the ‘where do we want to be’ step. To do this, change management is used to implement a change in the environment and release management is used to make new and changed features available for use.&lt;/li&gt;
          &lt;li&gt;包含的一些 practice
            &lt;ul&gt;
              &lt;li&gt;change management 变化管理&lt;/li&gt;
              &lt;li&gt;release management 发布管理&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;例子:
            &lt;ul&gt;
              &lt;li&gt;公司要减少数据中心 50% 的物理机, 你目前正在做把物理机往虚拟机上迁移, 并去掉数据中心的物理机, 目前这个阶段就是 take action.&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Did we get there?&lt;/td&gt;
              &lt;td&gt;到了吗&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
        &lt;ul&gt;
          &lt;li&gt;The ‘did we get there’ step is focused on checking the new state of the improvement initiative and comparing it to the original baseline to determine if the desired goal has been reached.&lt;/li&gt;
          &lt;li&gt;例子
            &lt;ul&gt;
              &lt;li&gt;公司过去 12 个月设定了一个提高用户满意度的改进, 目标是提高 4%, 你在查看现在的满意度状态, 并对比过去 12 个月的满意度.&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;How do we keep the momentum going?&lt;/td&gt;
              &lt;td&gt;如何继续&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
        &lt;ul&gt;
          &lt;li&gt;The ‘how do we keep the momentum going’ step of the continual improvement model is used once the improvement has delivered the expected value and the focus is now shifting to increased improvement or to maintain the gains made by the improvement initiative.&lt;/li&gt;
          &lt;li&gt;例子
            &lt;ul&gt;
              &lt;li&gt;你通过两步验证提高了密码安全度, 并超过了预期的用户接受度, 接下来你希望让所有用户都使用这个服务.&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;这个步骤的下一个步骤就循环回到 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;what is the vision&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-29-142944.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;5-34-个-priactices&quot;&gt;5 34 个 priactices&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;为了达到目的, 组织进行的一些实践方法&lt;/li&gt;
  &lt;li&gt;分 3 类
    &lt;ul&gt;
      &lt;li&gt;General Management (14个)&lt;/li&gt;
      &lt;li&gt;Service Management (17个)&lt;/li&gt;
      &lt;li&gt;Technical Management (3个)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h5 id=&quot;通用管理&quot;&gt;通用管理&lt;/h5&gt;
&lt;ul&gt;
  &lt;li&gt;5.1.1 架构管理 | Architecture management
    &lt;details&gt;

&lt;/details&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.1.2 持续改进&lt;/td&gt;
          &lt;td&gt;Continual improvement&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.1.3 信息安全管理&lt;/td&gt;
          &lt;td&gt;Information security management&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.1.4 知识管理&lt;/td&gt;
          &lt;td&gt;Knowledge management&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.1.5 度量与报告&lt;/td&gt;
          &lt;td&gt;Measurement and reporting&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.1.5.1 KPI 和行为&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.1.6 组织变革管理&lt;/td&gt;
          &lt;td&gt;Organizational change management&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.1.7 组合管理&lt;/td&gt;
          &lt;td&gt;Portfolio management&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.1.8 项目管理&lt;/td&gt;
          &lt;td&gt;Project management&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.1.9 关系管理&lt;/td&gt;
          &lt;td&gt;Relationship management&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.1.10 风險管理&lt;/td&gt;
          &lt;td&gt;Risk management&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.1.11 服务财务管理&lt;/td&gt;
          &lt;td&gt;Service financial management&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.1.12 战路管理&lt;/td&gt;
          &lt;td&gt;Strategy management&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.1.13 供应商管理&lt;/td&gt;
          &lt;td&gt;Supplier management&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
    &lt;ul&gt;
      &lt;li&gt;采购, 供应商战略关系&lt;/li&gt;
      &lt;li&gt;评估和选择供应商&lt;/li&gt;
      &lt;li&gt;活动&lt;/li&gt;
      &lt;li&gt;服务整合&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;5.1.14 人力与人才管理 | Workforce and talent management
    &lt;h5 id=&quot;服务管理&quot;&gt;服务管理&lt;/h5&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.2.1 可用性管理&lt;/td&gt;
          &lt;td&gt;Availability management&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.2.2 业务分析&lt;/td&gt;
          &lt;td&gt;Business analysis&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.2.3 容量和性能管理&lt;/td&gt;
          &lt;td&gt;Capacity and performance management&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.2.4 变更实施&lt;/td&gt;
          &lt;td&gt;Change control&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
    &lt;ul&gt;
      &lt;li&gt;change 按照紧急程度分为
        &lt;ul&gt;
          &lt;li&gt;
            &lt;table&gt;
              &lt;tbody&gt;
                &lt;tr&gt;
                  &lt;td&gt;standard change&lt;/td&gt;
                  &lt;td&gt;低风险, 已经被理解并记入文档的, 不需要额外的授权&lt;/td&gt;
                &lt;/tr&gt;
              &lt;/tbody&gt;
            &lt;/table&gt;
          &lt;/li&gt;
          &lt;li&gt;
            &lt;table&gt;
              &lt;tbody&gt;
                &lt;tr&gt;
                  &lt;td&gt;normal change&lt;/td&gt;
                  &lt;td&gt;需要 scheduled, assessed, and authorized following a standard process&lt;/td&gt;
                &lt;/tr&gt;
              &lt;/tbody&gt;
            &lt;/table&gt;
            &lt;ul&gt;
              &lt;li&gt;比如: 一个正常运转的系统, 需要发布一些新的改进功能, 这种变化就是 normal .&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;
            &lt;table&gt;
              &lt;tbody&gt;
                &lt;tr&gt;
                  &lt;td&gt;emergency change&lt;/td&gt;
                  &lt;td&gt;需要马上报告, 立即处理&lt;/td&gt;
                &lt;/tr&gt;
              &lt;/tbody&gt;
            &lt;/table&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;change authority
        &lt;ul&gt;
          &lt;li&gt;变更委员会, 负责审批变更&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.2.5 事件管理&lt;/td&gt;
          &lt;td&gt;Incident management&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
    &lt;ul&gt;
      &lt;li&gt;通过对 incident 进行分类, 可以让对业务影响大的事件优先被处理&lt;/li&gt;
      &lt;li&gt;所有的 incident 都需要被 loged 和 managed&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.2.6 1姿产答理&lt;/td&gt;
          &lt;td&gt;IT asset management&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.2.7 监视和事态管理&lt;/td&gt;
          &lt;td&gt;Monitoring and event management&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.2.8 问题管理&lt;/td&gt;
          &lt;td&gt;Problem management&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
    &lt;ul&gt;
      &lt;li&gt;问题管理的按个阶段
    - problem identification, 
    - problem control, and 
    - error control.&lt;/li&gt;
      &lt;li&gt;无法立刻解决的问题, 可以用 workaround (临时方案)
        &lt;ul&gt;
          &lt;li&gt;
            &lt;ul&gt;
              &lt;li&gt;Workaround 的方案通常 通过 web portal 展示&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.2.9 发布管理&lt;/td&gt;
          &lt;td&gt;Release management&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.2.10 服务目录管理&lt;/td&gt;
          &lt;td&gt;Service catalogue management&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.2.11 服务配置管理&lt;/td&gt;
          &lt;td&gt;Service configuration management&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.2.12 服务连续性管理&lt;/td&gt;
          &lt;td&gt;Service continuity management&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.2.13 服务设计&lt;/td&gt;
          &lt;td&gt;Service design&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
    &lt;ul&gt;
      &lt;li&gt;设计思维&lt;/li&gt;
      &lt;li&gt;客户和用户体验&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.2.14 服务台&lt;/td&gt;
          &lt;td&gt;Service desk&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
    &lt;ul&gt;
      &lt;li&gt;The Service desk is the entry point for all contact between the service provider and its users&lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;服务台是服务提供者和用户的联系接口&lt;/td&gt;
              &lt;td&gt;手机坏了, 找服务台&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;A good service desk should have a practical understanding of the wider organization, the business processes, and the users.&lt;/li&gt;
      &lt;li&gt;A centralized service desk includes a team of employees working in a single location.&lt;/li&gt;
      &lt;li&gt;A centralized service desk require
        &lt;ul&gt;
          &lt;li&gt;Knowledge bask&lt;/li&gt;
          &lt;li&gt;workflow systems for routing and escalation&lt;/li&gt;
          &lt;li&gt;workforce management and resource planning systems&lt;/li&gt;
          &lt;li&gt;intelligent telephony systems&lt;/li&gt;
          &lt;li&gt;automatic call distribution&lt;/li&gt;
          &lt;li&gt;remote access tools&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.2.15 服务级别管理&lt;/td&gt;
          &lt;td&gt;Service level management&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
    &lt;ul&gt;
      &lt;li&gt;Service level agreements are used to measure the performance of services from a customer’s point of view.&lt;/li&gt;
      &lt;li&gt;They may measure availability and capability, but only from the customer’s point of view.&lt;/li&gt;
      &lt;li&gt;SLA 对于价值链的 “plan” 帮助是: 提供当前服务performance 和trend 的信息, 最终可以计划更好的产品和服务的组合&lt;/li&gt;
      &lt;li&gt;每个 SLA 都要清晰的定义 service outcomes&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.2.16 服务请求管理&lt;/td&gt;
          &lt;td&gt;Service request management&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
    &lt;ul&gt;
      &lt;li&gt;给服务台用的管理方式
        &lt;ul&gt;
          &lt;li&gt;需要标准化和自动化&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;服务请求管理给 SVC 的价值是:
        &lt;ul&gt;
          &lt;li&gt;analysis of data to identify opportunities to provide new service request options.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;5.2.17 服务验证和測试 | Service validation and testing
    &lt;h5 id=&quot;技术管理&quot;&gt;技术管理&lt;/h5&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.3.1 部署管理&lt;/td&gt;
          &lt;td&gt;Deployment management&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.3.2 基础架构和平台管理&lt;/td&gt;
          &lt;td&gt;Intrastructure and plattorm management&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;5.3.3 软件开发与管理&lt;/td&gt;
          &lt;td&gt;Software development and management&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;案例分析-把-svc-串起来&quot;&gt;案例分析 (把 SVC 串起来)&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;亚马逊物流仓库的  WIFI覆盖方案不咋地, 不能让员工及时接收到货物搬运的任务信息, 降低了工作效率
    &lt;ul&gt;
      &lt;li&gt;这是第一步 - demand
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-29-145244.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;实践向上报告给 物流队长, 队长进行分析
    &lt;ul&gt;
      &lt;li&gt;engage&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;队长报告给 help desk, help desk 报告给了 wifi management team
    &lt;ul&gt;
      &lt;li&gt;Delivery &amp;amp;* Support&lt;/li&gt;
      &lt;li&gt;涉及到了多个 practice
        &lt;ul&gt;
          &lt;li&gt;IT Asset management&lt;/li&gt;
          &lt;li&gt;Service configuration management&lt;/li&gt;
          &lt;li&gt;change control&lt;/li&gt;
          &lt;li&gt;incident management&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;wifi management team 计划 1 小时候进行修复
    &lt;ul&gt;
      &lt;li&gt;plan&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;wifi management team 修复了问题
    &lt;ul&gt;
      &lt;li&gt;products &amp;amp; services&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;仓库搬运工提高了工作效率
    &lt;ul&gt;
      &lt;li&gt;Value&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;队长和班运工收到服务 servey 邮件, 提供满意度调查和改进意见
    &lt;ul&gt;
      &lt;li&gt;Improve&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;glossary&quot;&gt;Glossary&lt;/h2&gt;
&lt;h3 id=&quot;a&quot;&gt;A&lt;/h3&gt;
&lt;p&gt;acceptance criteria&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A list of minimum requirements that a service or service component must meet for it to be acceptable to key stakeholders.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Agile&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;An umbrella term for a collection of frameworks and techniques that together enable teams and individuals to work in a way that is typified by collaboration, prioritization, iterative and incremental delivery, and timeboxing. There are several specific methods (or frameworks) that are classed as Agile, such as Scrum, Lean, and Kanban.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;architecture management practice&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of providing an understanding of all the different elements that make up an organization and how those elements relate to one another.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;asset register&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A database or list of assets, capturing key attributes such as ownership and financial value.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;availability&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The ability of an IT service or other configuration item to perform its agreed function when required.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;availability management practice&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of ensuring that services deliver agreed levels of availability to meet the needs of customers and users.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;b&quot;&gt;B&lt;/h3&gt;

&lt;p&gt;baseline&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A report or metric that serves as a starting point against which progress or change can be assessed.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;best practice&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A way of working that has been proven to be successful by multiple organizations.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;big data&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The use of very large volumes of structured and unstructured data from a variety of sources to gain new insights.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;business analysis practice
The practice of analysing a business or some element of a business, defining its needs and recommending solutions to address these needs and/or solve a business problem, and create value for stakeholders.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;business case&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A justification for expenditure of organizational resources, providing information about costs, benefits, options, risks, and issues.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;business impact analysis (BIA)&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A key activity in the practice of service continuity management that identifies vital business functions and their dependencies.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;business relationship manager (BRM)&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A role responsible for maintaining good relationships with one or more customers.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;c&quot;&gt;C&lt;/h3&gt;

&lt;p&gt;call&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;An interaction (e.g. a telephone call) with the service desk. A call could result in an incident or a service request being logged.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;call/contact centre&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;An organization or business unit that handles large numbers of incoming and outgoing calls and other interactions.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;capability&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The ability of an organization, person, process, application, configuration item, or IT service to carry out an activity.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;capacity and performance management practice&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of ensuring that services achieve agreed and expected performance levels, satisfying current and future demand in a cost-effective way.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;capacity planning&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The activity of creating a plan that manages resources to meet demand for services.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;change&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The addition, modification, or removal of anything that could have a direct or indirect effect on services.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;change authority&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A person or group responsible for authorizing a change. 
standard change, 一般提前预授权了, 直接就可以变了 | 改机票
normal chagne, 需要正常的审批流程 | 换岗
emergency chage, 快速审批流程  | DDOS 攻击, 需要紧急审批来在防火墙中 block 一个 IP 地址
the change might be pre-authorized for all future changes of the same type. For an emergency change, this might be the IT director. Regardless of their named position, when they are authorizing a change based on the organization’s defined level of authority, they are the change authority.
change authority is assigned to each type of &lt;strong&gt;change&lt;/strong&gt; and &lt;strong&gt;change models&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;change control practice&lt;/strong&gt; 也叫 &lt;strong&gt;change enablement&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of ensuring that risks are properly assessed, authorizing changes to proceed and managing a change schedule in order to maximize the number of successful service and product changes.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;change model&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A repeatable approach to the management of a particular type of change.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;change schedule&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A calendar that shows planned and historical changes.
A change schedule is used to help plan(计划) changes, assist(辅助) in communication, avoid(避免) conflicts, and assign resources. By publishing the change schedule, everyone in the organization can know when a change is occurring, what people or components will be affected by the change, and when downtime or outages may occur. Change schedules are not used to develop features for a service.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;charging&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The activity that assigns a price for services.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;cloud computing&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A model for enabling on-demand network access to a shared pool of configurable computing resources that can be rapidly provided with minimal management effort or provider interaction.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;compliance&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The act of ensuring that a standard or set of guidelines is followed, or that proper, consistent accounting or other practices are being employed.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;confidentiality&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A security objective that ensures information is not made available or disclosed to unauthorized entities.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;configuration&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;An arrangement of configuration items (CIs) or other resources that work together to deliver a product or service. Can also be used to describe the parameter settings for one or more CIs.
比如一个球队/订票服务的配置, 一堆配置项和资源的组合, 为了拿到总冠军戒指/提供给客户更好的订票服务&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;configuration item (CI)&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Any component that needs to be managed in order to deliver an IT service.
为了提供 IT 服务而需要管理的任何组件。
比如, 给库里的配置项(力量训练分析/睡眠监测), 为了拿到总冠军而使用的 IT 服务 (要有科技感, 要和 IT 服务相关)
比如, 给订票服务的配置项, 耳机, 好的电脑, 知识库..&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;configuration management database (CMDB)&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A database used to store configuration records throughout their lifecycle. The CMDB also maintains the relationships between configuration records.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;configuration management system (CMS)&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A set of tools, data, and information that is used to support service configuration management.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;configuration record&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A record containing the details of a configuration item (CI). Each configuration record documents the lifecycle of a single CI. Configuration records are stored in a configuration 
management database.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;continual improvement practice&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of aligning an organization’s practices and services with changing business needs through the ongoing identification and improvement of all elements involved in the effective management of products and services.
通过不断识别和改进有效管理产品和服务所涉及的所有要素，使组织的实践和服务与不断变化的业务需求保持一致的做法。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;continuous deployment&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;An integrated set of practices and tools used to deploy software changes into the production environment. These software changes have already passed pre-defined automated tests.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;continuous integration/continuous delivery&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;An integrated set of practices and tools used to merge developers’ code, build and test the resulting software, and package it so that it is ready for deployment.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;control&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The means of managing a risk, ensuring that a business objective is achieved, or that a process is followed.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;cost&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The amount of money spent on a specific activity or resource.
成本可以同时从服务消费者身上去除，并强加给服务提供者。 例如，将一项服务外包给服务提供商可能会使消费者不再需要拥有自己的IT基础设施，但这可能需要他们安装更快的互联网连接，以到达服务提供商的服务器。
说白了, 一个服务外包了, 并不代表你这个成本就没了, 而是转移了&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;cost centre&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A business unit or project to which costs are assigned.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;critical success factor (CSF)&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A necessary precondition for the achievement of intended results.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;culture&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A set of values that is shared by a group of people, including expectations about how people should behave, ideas, beliefs, and practices.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;customer&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A person who defines the requirements for a service and takes responsibility for the &lt;strong&gt;outcomes&lt;/strong&gt; of service consumption.
一个人, 定义了服务的需求, 并担任了服务消费产出的责任
user - A person who uses services.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;customer experience (CX)&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The sum of functional and emotional interactions with a service and service provider as perceived by a service consumer.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;d&quot;&gt;D&lt;/h3&gt;

&lt;p&gt;dashboard&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A real-time graphical representation of data.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;deliver and support&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The value chain activity that ensures services are delivered and supported according to agreed specifications and stakeholders’ expectations.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;demand&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Input to the service value system based on opportunities and needs from internal and external stakeholders.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;deployment&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The movement of any service component into any environment.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;deployment management practice&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of moving new or changed hardware, software, documentation, processes, or any other service component to live environments.
把硬件,软件,文档, 流程 等服务内容搬到 live 环境&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;design and transition&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The value chain activity that ensures products and services continually meet stakeholder expectations for quality, costs, and time to market.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;design thinking&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A practical and human-centred approach used by product and service designers to solve complex problems and find practical and creative solutions that meet the needs of an organization and its customers.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;development environment&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;An environment used to create or modify IT services or applications.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;DevOps&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;An organizational culture that aims to improve the flow of value to customers. DevOps focuses on culture, automation, Lean, measurement, and sharing (CALMS).&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;digital transformation&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The evolution of traditional business models to meet the needs of highly empowered customers, with technology playing an enabling role.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;disaster&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A sudden unplanned event that causes great damage or serious loss to an organization. A disaster results in an organization failing to provide critical business functions for some predetermined minimum period of time.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;disaster recovery plans&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A set of clearly defined plans related to how an organization will recover from a disaster as well as return to a pre-disaster condition, considering the four dimensions of service management.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;driver&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Something that influences strategy, objectives, or requirements.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;e&quot;&gt;E&lt;/h3&gt;

&lt;p&gt;effectiveness&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A measure of whether the objectives of a practice, service or activity have been achieved.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;efficiency&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A measure of whether the right amount of resources have been used by a practice, service, or activity.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;emergency change&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A change that must be introduced as soon as possible.
例子:&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;DDOS 攻击, 需要紧急审批来在防火墙上 block 一个 IP 地址&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;engage&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The value chain activity that provides a good understanding of stakeholder needs, transparency, continual engagement, and good relationships with all stakeholders.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;environment&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A subset of the IT infrastructure that is used for a particular purpose, for example a live environment or test environment. Can also mean the external conditions that influence or affect something.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;error&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A flaw or vulnerability that may cause incidents.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;error control&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Problem management activities used to manage known errors.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;escalation&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The act of sharing awareness or transferring ownership of an issue or work item. 
Escalation occurs when an incident is more complicated and needs a higher level of analysis and support to resolve.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;event&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Any change of state that has significance for the management of a service or other configuration item.
对服务或其他配置项目的管理具有重要意义的任何状态更改。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;external customer&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A customer who works for an organization other than the service provider.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;failure&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A loss of ability to operate to specification, or to deliver the required output or outcome.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;four dimensions of service management&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The four perspectives that are critical to the effective and efficient facilitation of value for customers and other stakeholders in the form of products and services.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;goods&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Tangible resources that are transferred or available for transfer from a service provider to a service consumer, together with ownership and associated rights and responsibilities.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;governance&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The means by which an organization is directed and controlled.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;i&quot;&gt;I&lt;/h3&gt;
&lt;p&gt;identity&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A unique name that is used to identify and grant system access rights to a user, person, or role.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;improve&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The value chain activity that ensures continual improvement of products, services, and practices across all value chain activities and the four dimensions of service management.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;incident&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;An unplanned interruption to a service or reduction in the quality of a service.
一个计划外的 服务中断, 或者 服务质量的降低 
比如: 你想通过网络打印机打印文档, 发现失败了. 你的电脑突然连不上公司的wifi 了&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;incident management&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of minimizing the negative impact of incidents by restoring normal service operation as quickly as possible.
通过尽快恢复正常的服务操作来最大程度地减少事件的负面影响的做法。
incident management 会经常包含&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;获取事故信息的日志/脚本, 来帮助后面的分析&lt;/li&gt;
    &lt;li&gt;保持 performance levels&lt;/li&gt;
    &lt;li&gt;监控 services 识别 any change&lt;/li&gt;
    &lt;li&gt;使用 specialized knowledge&lt;/li&gt;
    &lt;li&gt;用来高效的分析和诊断事故 的 技术
但是不会包含具体的过程,比如诊断, 分析, 解决事故.&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;incident management system&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;can provide automated matching of incidents to other incidents, problems, or known errors.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;information and technology&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;One of the four dimensions of service management. It includes the information and knowledge used to deliver services, and the information and technologies used to manage all aspects of the service value system.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;information security management practice&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of protecting an organization by understanding and managing risks to the confidentiality, integrity, and availability of information.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;information security policy&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The policy that governs an organization’s approach to information security management.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;infrastructure and platform management practice&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of overseeing the infrastructure and platforms used by an organization. This enables the monitoring of technology solutions available, including solutions from third parties.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;integrity&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A security objective that ensures information is only modified by authorized personnel and activities.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;feedback loop&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A technique whereby the outputs of one part of a system are used as inputs to the same part of the system.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;internal customer&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A customer who works for the same organization as the service provider.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Internet of Things&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The interconnection of devices via the internet that were not traditionally thought of as IT assets, but now include embedded computing capability and network connectivity.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;IT asset&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Any financially valuable component that can contribute to the delivery of an IT product or service.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;IT asset management practice&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of planning and managing the full lifecycle of all IT assets.
IT 资产管理, 就是 IT 资产的生命周期管理&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;IT infrastructure&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;All of the hardware, software, networks, and facilities that are required to develop, test, deliver, monitor, manage, and support IT services.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;IT service&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A service based on the use of information technology.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ITIL&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Best-practice guidance for IT service management.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ITIL guiding principles&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Recommendations that can guide an organization in all circumstances, regardless of changes in its goals, strategies, type of work, or management structure.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ITIL service value chain&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;An operating model for service providers that covers all the key activities required to effectively manage products and services.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;k&quot;&gt;K&lt;/h3&gt;

&lt;p&gt;Kanban&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A method for visualizing work, identifying potential blockages and resource conflicts, and managing work in progress.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;key performance indicator (KPI)&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;An important metric used to evaluate the success in meeting an objective.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;knowledge management practice&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of maintaining and improving the effective, efficient, and convenient use of information and knowledge across an organization.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;known error&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A &lt;strong&gt;problem&lt;/strong&gt; that has been analysed but has not been resolved.
比如:&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;发现 4 楼的员工都上不了网, 你分析是应为路由器坏了, 但是查了库存发现没有备货, 你估计需要 24 小时候订货到了才能修复, 这时一个已知错误, 但是还没有修复.&lt;/li&gt;
    &lt;li&gt;笔记本硬盘满了, 员工在外地没办法进行在线备份, help desk 建议员工外面买个移动硬盘把大文件copy 上去. 这个问题是 已知错误, 不是 workaround. 因为 随便买个磁盘不符合大部分公司安全规定, 不能那么干. 那么就是一个已知的, 还没办法解决的问题&lt;/li&gt;
    &lt;li&gt;比如: 网络打印机墨没了, 但是暂时还换不了, 要等到2 周后到货了才能换&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;Lean&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;An approach that focuses on improving workflows by maximizing value through the elimination of waste.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;lifecycle&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The full set of stages, transitions, and associated statuses in the life of a service, product, practice, or other entity.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;live&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Refers to a service or other configuration item operating in the live environment.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;live environment&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A controlled environment used in the delivery of IT services to service consumers.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;m&quot;&gt;M&lt;/h3&gt;

&lt;p&gt;maintainability&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The ease with which a service or other entity can be repaired or modified.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;major incident&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;An incident with significant business impact, requiring an immediate coordinated resolution.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;management system&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Interrelated or interacting elements that establish policy and objectives and enable the achievement of those objectives.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;maturity&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A measure of the reliability, efficiency and effectiveness of an organization, practice, or process.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;mean time between failures (MTBF)&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A metric of how frequently a service or other configuration item fails.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;mean time to restore service (MTRS)&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A metric of how quickly a service is restored after a failure.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;measurement and reporting&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of supporting good decision-making and continual improvement by decreasing levels of uncertainty.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;metric&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A measurement or calculation that is monitored or reported for management and improvement.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;minimum viable product (MVP)&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A product with just enough features to satisfy early customers, and to provide feedback for future product development.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;mission statement&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A short but complete description of the overall purpose and intentions of an organization. It states what is to be achieved, but not how this should be done.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;model&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A representation of a system, practice, process, service, or other entity that is used to understand and predict its behaviour and relationships.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;modelling&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The activity of creating, maintaining, and utilizing models.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;monitoring&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Repeated observation of a system, practice, process, service, or other entity to detect events and to ensure that the current status is known.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;monitoring and event management practice&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of systematically observing services and service components, and recording and reporting selected changes of state identified as events.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;n&quot;&gt;N&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;Normal changes&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;are changes which need to be scheduled, assessed, and authorized following a standard process. These changes are not considered routine (like a standard change). They are also not considered urgent and don’t need to be implemented as soon as possible to recover from an incident (like an emergency change).
例子:&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;你在配置一个邮件服务, 需要获得权限来安装一个服务器到公司网络中进行测试.&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;o&quot;&gt;O&lt;/h3&gt;

&lt;p&gt;obtain/build&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The value chain activity that ensures service components are available when and where they are needed, and that they meet agreed specifications.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;operation&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The routine running and management of an activity, product, service, or other configuration item.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;operational technology&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The hardware and software solutions that detect or cause changes in physical processes through direct monitoring and/or control of physical devices such as valves, pumps, etc.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;organization&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A person or a group of people that has its own functions with responsibilities, authorities, and relationships to achieve its objectives.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;organizational change management practice&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of ensuring that changes in an organization are smoothly and successfully implemented and that lasting benefits are achieved by managing the human aspects of the changes.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;organizational resilience&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The ability of an organization to anticipate, prepare for, respond to, and adapt to unplanned external influences.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;organizational velocity&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The speed, effectiveness, and efficiency with which an organization operates. Organizational velocity influences time to market, quality, safety, costs, and risks.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;organizations and people&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;One of the four dimensions of service management. It ensures that the way an organization is structured and managed, as well as its roles, responsibilities, and systems of authority and communication, is well defined and supports its overall strategy and operating model.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;outcome&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A result for a stakeholder enabled by one or more outputs.
由一个或多个 outputs 促成的利益相关者的结果
多个 output 组成 outcome&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;output&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A tangible or intangible deliverable of an activity.
一个活动的 有形的或者无形的 一个交付物
比如: 一个新的财务软件, 生成的 一个 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;P&amp;amp;L&lt;/code&gt; 报告&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;outsourcing&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The process of having external suppliers provide products and services that were previously provided internally.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;p&quot;&gt;P&lt;/h3&gt;

&lt;p&gt;partners and suppliers&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;One of the four dimensions of service management. It encompasses the relationships an organization has with other organizations that are involved in the design, development, deployment, delivery, support, and/or continual improvement of services.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;partnership&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A relationship between two organizations that involves working closely together to achieve common goals and objectives.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;performance&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A measure of what is achieved or delivered by a system, person, team, practice, or service.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;pilot&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A test implementation of a service with a limited scope in a live environment.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;plan&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The value chain activity that ensures a shared understanding of the vision, current status, and improvement direction for all four dimensions and all products and services across an organization.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;policy&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Formally documented management expectations and intentions, used to direct decisions and activities.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;portfolio management practice&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of ensuring that an organization has the right mix of programmes, projects, products, and services to execute its strategy within its funding and resource constraints.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;post-implementation review (PIR)&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A review after the implementation of a change, to evaluate success and identify opportunities for improvement.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;practice&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A set of organizational resources designed for performing work or accomplishing an objective.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;problem&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A cause, or potential cause, of one or more incidents.
一个事故的 原因, 或者潜在原因
比如:&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;你作为 help desk , 连续接到多个用户的无法上网的报告, 你分析是因为域控制器挂了, 这就是潜在的可能原因, 是 problem&lt;/li&gt;
    &lt;li&gt;用户尝试用用户名和密码登录, 收到报错 “认证服务器没有响应”. 因为已经知道了可能得原因, 所以是 problem 
&lt;strong&gt;problem identification&lt;/strong&gt; 的例子:&lt;/li&gt;
    &lt;li&gt;Detecting duplicate and recurring issues  研究重复发生的问题&lt;/li&gt;
    &lt;li&gt;Performing trend analysis of incident records  分析事故发生的趋势&lt;/li&gt;
    &lt;li&gt;Analysis of multiple incidents that may be linked together  分析多个事故之间可能有关联
Logging an incident 不属于 problem identification 也不是 problem management 的步骤&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;problem management practice&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of reducing the likelihood and impact of incidents by identifying actual and potential causes of incidents, and managing workarounds and known errors.
通过识别事故的实际和潜在原因，以及管理变通方法和已知错误，减少事故的可能性和影响的做法。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;procedure&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A documented way to carry out an activity or a process.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;process&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A set of interrelated or interacting activities that transform inputs into outputs. A process takes one or more defined inputs and turns them into defined outputs. Processes define the sequence of actions and their dependencies.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;product&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A configuration of an organization’s resources designed to offer value for a consumer.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;production environment&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;See live environment.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;programme&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A set of related projects and activities, and an organization structure created to direct and oversee them.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;project&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A temporary structure that is created for the purpose of delivering one or more outputs (or products) according to an agreed business case.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;project management practice&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of ensuring that all an organization’s projects are successfully delivered.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;quick win&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;An improvement that is expected to provide a return on investment in a short period of time with relatively small cost and effort.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;r&quot;&gt;R&lt;/h3&gt;

&lt;p&gt;record&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A document stating results achieved and providing evidence of activities performed.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;recovery&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The activity of returning a configuration item to normal operation after a failure.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;recovery point objective (RPO)&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The point to which information used by an activity must be restored to enable the activity to operate on resumption.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;recovery time objective (RTO)&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The maximum acceptable period of time following a service disruption that can elapse before the lack of business functionality severely impacts the organization.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;relationship management practice&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of establishing and nurturing links between an organization and its stakeholders at strategic and tactical levels.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;release&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A version of a service or other configuration item, or a collection of configuration items, that is made available for use.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;release management practice&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of making new and changed services and features available for use.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;reliability&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The ability of a product, service, or other configuration item to perform its intended function for a specified period of time or number of cycles.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;request catalogue&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A view of the service catalogue, providing details on service requests for existing and new services, which is made available for the user.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;request for change (RFC)&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A description of a proposed change used to initiate change control.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;resolution&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The action of solving an incident or problem.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;resource&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A person, or other entity, that is required for the execution of an activity or the achievement of an objective. Resources used by an organization may be owned by the organization or used according to an agreement with the resource owner.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;retire&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The act of permanently withdrawing a product, service, or other configuration item from use.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;risk&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A possible event that could cause harm or loss, or make it more difficult to achieve objectives. Can also be defined as uncertainty of outcome, and can be used in the context of measuring the probability of positive outcomes as well as negative outcomes.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;risk assessment&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;An activity to identify, analyse, and evaluate risks.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;risk management practice&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of ensuring that an organization understands and effectively handles risks.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;s&quot;&gt;S&lt;/h3&gt;

&lt;p&gt;service&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A means of enabling value co-creation by facilitating outcomes that customers want to achieve, without the customer having to manage specific costs and risks.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;service action&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Any action required to deliver a service output to a user. Service actions may be performed by a service provider resource, by service users, or jointly.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;service architecture&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A view of all the services provided by an organization. It includes interactions between the services, and service models that describe the structure and dynamics of each service.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;service catalogue&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Structured information about all the services and service offerings of a service provider, relevant for a specific target audience.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;service catalogue management practice&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of providing a single source of consistent information on all services and service offerings, and ensuring that it is available to the relevant audience.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;service configuration management practice&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of ensuring that accurate and reliable information about the configuration of services, and the configuration items that support them, is available when and where needed.
确保 随时随地 准确可靠的提供 服务配置 和 配置项&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;service consumption&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Activities performed by an organization to consume services. It includes the management of the consumer’s resources needed to use the service, service actions performed by users, and the receiving (acquiring) of goods (if required).
组织为了消费服务而进行的活动 (主语是组织) , 包括 1. 管理消费者使用服务所需的资源、2. 相关的行动，3. 接收的（获取）商品。&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;应该理解成 consumption service , 为了消费而提供的服务
比如:&lt;/li&gt;
    &lt;li&gt;公司把培训视频放在第三方的视频托管平台, 用户可以通过在公司的网站请求直接从第三方平台看视频流, 公司可以管理第三方公司的存储空间, 并决定/决定用户会看什么视频.&lt;/li&gt;
    &lt;li&gt;公司把培训视频应用外包给第三方, 只有付费用户通过支付订阅费才能使用应用, 公司把订阅费的部分给第三方公司作为开发费用.&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;service continuity management practice&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of ensuring that service availability and performance are maintained at a sufficient level in case of a disaster.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;service design practice&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of designing products and services that are fit for purpose, fit for use, and that can be delivered by the organization and its ecosystem.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;service desk&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The point of communication between the service provider and all its users.
The service desk may utilize a&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;
      &lt;table&gt;
        &lt;tbody&gt;
          &lt;tr&gt;
            &lt;td&gt;local,&lt;/td&gt;
            &lt;td&gt;比如全球有 5 个 办公室, 每个办公室配一个服务台&lt;/td&gt;
          &lt;/tr&gt;
        &lt;/tbody&gt;
      &lt;/table&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;table&gt;
        &lt;tbody&gt;
          &lt;tr&gt;
            &lt;td&gt;follow-the-sun&lt;/td&gt;
            &lt;td&gt;多个 service desk, 每个 service desk 接力, 保证 7x24 小时的服务&lt;/td&gt;
          &lt;/tr&gt;
        &lt;/tbody&gt;
      &lt;/table&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;table&gt;
        &lt;tbody&gt;
          &lt;tr&gt;
            &lt;td&gt;centralized, or&lt;/td&gt;
            &lt;td&gt;大家都在一个办公室&lt;/td&gt;
          &lt;/tr&gt;
        &lt;/tbody&gt;
      &lt;/table&gt;
    &lt;/li&gt;
    &lt;li&gt;virtualized model.  |  多个 service deck 虚拟办公或者 work from home
It just depends on your organization, business needs, and user requirements.
 is the main channel for communication and collaboration with users
A centralized service desk requires supporting technologies like&lt;/li&gt;
    &lt;li&gt;
      &lt;table&gt;
        &lt;tbody&gt;
          &lt;tr&gt;
            &lt;td&gt;workflow systems for routing and escalation,&lt;/td&gt;
            &lt;td&gt;方便上报&lt;/td&gt;
          &lt;/tr&gt;
        &lt;/tbody&gt;
      &lt;/table&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;table&gt;
        &lt;tbody&gt;
          &lt;tr&gt;
            &lt;td&gt;workforce management and resource planning systems,&lt;/td&gt;
            &lt;td&gt;管人和资源&lt;/td&gt;
          &lt;/tr&gt;
        &lt;/tbody&gt;
      &lt;/table&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;table&gt;
        &lt;tbody&gt;
          &lt;tr&gt;
            &lt;td&gt;a centralized knowledge base,&lt;/td&gt;
            &lt;td&gt;知识库&lt;/td&gt;
          &lt;/tr&gt;
        &lt;/tbody&gt;
      &lt;/table&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;table&gt;
        &lt;tbody&gt;
          &lt;tr&gt;
            &lt;td&gt;intelligent telephony systems,&lt;/td&gt;
            &lt;td&gt;智能电话系统&lt;/td&gt;
          &lt;/tr&gt;
        &lt;/tbody&gt;
      &lt;/table&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;table&gt;
        &lt;tbody&gt;
          &lt;tr&gt;
            &lt;td&gt;automatic call distribution, and&lt;/td&gt;
            &lt;td&gt;自动电话分发系统&lt;/td&gt;
          &lt;/tr&gt;
        &lt;/tbody&gt;
      &lt;/table&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;table&gt;
        &lt;tbody&gt;
          &lt;tr&gt;
            &lt;td&gt;remote access tools.&lt;/td&gt;
            &lt;td&gt;远程访问&lt;/td&gt;
          &lt;/tr&gt;
        &lt;/tbody&gt;
      &lt;/table&gt;
      &lt;ul&gt;
        &lt;li&gt;But, if you have a centralized service desk, you will need good remote access tools to be able to support users that are not located at your same location.
不一定非要包含的是:&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;Automation is wonderful and can provide efficiencies, but it is not required. Also,&lt;/li&gt;
    &lt;li&gt;24x7 support may not be a business requirement for some organizations. 
A virtual service desk allows agents to work from multiple locations which are geographically dispersed. Often, agents may also be working from home under this model.
好的服务台需要了解 wider organization, the business processes, the users  and their needs.&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;service desk practice&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of capturing demand for incident resolution and service requests.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;service financial management practice&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of supporting an organization’s strategies and plans for service management by ensuring that the organization’s financial resources and investments are being used effectively.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;service level&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;One or more metrics that define expected or achieved service quality.
service level management data&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;service level agreement (SLA)&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A documented agreement between a service provider and a customer that identifies both services required and the expected level of service.
They should be written in an easy-to-understand language, avoid complex legal terminology, and agreed by both parties.
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Clear defined service outcome&lt;/code&gt; shoud be included in every service level agreement
案例: 供应商说他们的 SLA 全是绿的, 你的经理说经常听客户说服务不能用, 可能得原因是: 供应商的数据不是基于 business outcome . 解释, 这说明之前定义的 SLA 可能是技术层面的, 但不是以 business outcome (用户价值为导向)的 metrics, 所以供应商说 应用和数据库的 avaibility 都是绿的, 但是客户却因为其他原因无法访问服务. 
用来分析 SLA 的数据源可以包括&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;customer feedback&lt;/li&gt;
    &lt;li&gt;operational metrics&lt;/li&gt;
    &lt;li&gt;business metrics&lt;/li&gt;
    &lt;li&gt;customer engagement&lt;/li&gt;
    &lt;li&gt;business measures&lt;/li&gt;
    &lt;li&gt;不需要包括竞争对手信息&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;service level management practice&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of setting clear business-based targets for service performance so that the delivery of a service can be properly assessed, monitored, and managed against these targets.
服务级别管理, 需要设定清晰的 target , 可以被 assessd, monitored, managed 
Service level management 使用  measure 和 metrics 是为了 provide representation of the actual customer’s experience&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;service management&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A set of specialized organizational &lt;strong&gt;capabilities&lt;/strong&gt; for enabling value for customers in the form of services.
一套专门的组织的 &lt;strong&gt;能力&lt;/strong&gt;,用服务的形式 为客户提供价值 
服务管理 理解成 能力的服务包&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;service offering&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A formal description of one or more services, designed to address the needs of a target consumer group. A service offering may include goods, access to resources, and service actions.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;service owner&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A role that is accountable for the delivery of a specific service.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;service portfolio&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A complete set of products and services that are managed throughout their lifecycles by an organization.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;service provider&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A role performed by an organization in a service relationship to provide services to consumers.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;service provision&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Activities performed by an organization to provide services. It includes management of the provider’s resources, configured to deliver the service; ensuring access to these resources for users; fulfilment of the agreed service actions; service level management; and continual improvement. It may also include the supply of goods.
组织为提供服务而执行的活动。它包括管理提供商的资源，配置为提供服务;确保用户访问这些资源;履行约定的服务行动;服务水平管理;并持续改进。它还可能包括货物的供应。
比如: 公司为新入职的 3 个员工每人提供 10G 的文件存储空间&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;service relationship&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A cooperation between a service provider and service consumer. Service relationships include service provision, service consumption, and service relationship management.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;service relationship management&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Joint activities performed by a service provider and a service consumer to ensure continual value co-creation based on agreed and available service offerings.
例子:&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;公司提供培训认证课程, 学生要通过认证考试, 公司和学生共创价值, 帮学生通过考试的活动叫做 ~
关系管理与服务关系管理的区别: 关系管理是 组织和 stakeholder 的关系 ; 服务关系管理是 服务提供者 和 服务消费者 的 关系&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;service request&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A request from a user or a user’s authorized representative that initiates a service action which has been agreed as a normal part of service delivery.
Service requests and their fulfillment should be &lt;strong&gt;standardized&lt;/strong&gt; and &lt;strong&gt;automated&lt;/strong&gt; to the greatest degree possible. By using automation, we can decrease the consumer’s wait time for a resolution, and ensure that they get back to productive work as soon as possible.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;service request management practice&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of supporting the agreed quality of a service by handling all &lt;strong&gt;pre-defined&lt;/strong&gt;, &lt;strong&gt;user-initiated&lt;/strong&gt; service requests in an effective and &lt;strong&gt;user-friendly&lt;/strong&gt; manner.
以 有效, &lt;strong&gt;用户友好的&lt;/strong&gt;方式 提供 &lt;strong&gt;预定义的&lt;/strong&gt;, &lt;strong&gt;用户发起的&lt;/strong&gt; 同意质量的 支持服务&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;service validation and testing practice&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of ensuring that new or changed products and services meet defined requirements.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;service value system (SVS)&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A model representing how all the components and activities of an organization work together to facilitate value creation.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;software development and management practice&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of ensuring that applications meet stakeholder needs in terms of functionality, reliability, maintainability, compliance, and auditability.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;sourcing&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The activity of planning and obtaining resources from a particular source type, which could be internal or external, centralized or distributed, and open or proprietary.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;specification&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A documented description of the properties of a product, service, or other configuration item.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;sponsor&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A person who authorizes &lt;strong&gt;budget&lt;/strong&gt; for service consumption. Can also be used to describe an organization or individual that provides financial or other support for an initiative.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;stakeholder&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A person or organization that has an interest or involvement in an organization, product, service, practice, or other entity.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;standard&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A document, established by consensus and approved by a recognized body, that provides for common and repeated use, mandatory requirements, guidelines, or characteristics for its subject.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;standard change&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A low-risk, pre-authorized change that is well understood and fully documented, and which can be implemented without needing additional authorization.
比如: 创建新的用户账号&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;status&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A description of the specific states an entity can have at a given time.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;strategy management practice&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of formulating the goals of an organization and adopting the courses of action and allocation of resources necessary for achieving those goals.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;supplier&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A stakeholder responsible for providing services that are used by an organization.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;supplier management practice&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of ensuring that an organization’s suppliers and their performance levels are managed appropriately to support the provision of seamless quality products and services.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;support team&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A team with the responsibility to maintain normal operations, address users’ requests, and resolve incidents and problems related to specified products, services, or other configuration items.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;system&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A combination of interacting elements organized and maintained to achieve one or more stated purposes.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;systems thinking&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A holistic approach to analysis that focuses on the way that a system’s constituent parts work, interrelate, and interact over time, and within the context of other systems.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;t&quot;&gt;T&lt;/h3&gt;

&lt;p&gt;technical debt&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The total rework backlog accumulated by choosing workarounds instead of system solutions that would take longer.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;test environment&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A controlled environment established to test products, services, and other configuration items.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;third party&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A stakeholder external to an organization.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;throughput&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A measure of the amount of work performed by a product, service, or other system over a given period of time.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;transaction&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A unit of work consisting of an exchange between two or more participants or systems.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;u&quot;&gt;U&lt;/h3&gt;

&lt;p&gt;use case&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A technique using realistic practical scenarios to define functional requirements and to design tests.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;user&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A person who uses services.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;utility&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The functionality offered by a product or service to meet a particular need. Utility can be summarized as ‘what the service does’ and can be used to determine whether a service is ‘&lt;strong&gt;fit for purpose&lt;/strong&gt;’. To have utility, a service must either support the performance of the consumer or remove constraints from the consumer. Many services do both.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;utility requirements&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Functional requirements which have been defined by the customer and are unique to a specific product.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;v&quot;&gt;V&lt;/h3&gt;

&lt;p&gt;validation&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Confirmation that the system, product, service, or other entity meets the agreed specification.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;value&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The perceived benefits, usefulness, and importance of something.
任何有利益的, 有用的, 重要的东西&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;value stream&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A series of steps an organization undertakes to create and deliver products and services to consumers.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;value streams and processes&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;One of the four dimensions of service management. It defines the activities, workflows, controls, and procedures needed to achieve the agreed objectives.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;vision&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A defined aspiration of what an organization would like to become in the future.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;w&quot;&gt;W&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;warranty&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Assurance that a product or service will meet &lt;strong&gt;agreed&lt;/strong&gt; requirements. Warranty can be summarized as &lt;strong&gt;‘how the service performs’&lt;/strong&gt; and can be used to determine whether a service is &lt;strong&gt;‘fit for use’&lt;/strong&gt;. Warranty often relates to service levels aligned with the needs of service consumers. This may be based on a formal agreement, or it may be a marketing message or brand image. Warranty typically addresses such areas as the availability of the service, its capacity, levels of security, and continuity. A service may be said to provide acceptable assurance, or ‘warranty’, if all defined and agreed conditions are met.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;warranty requirements&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Typically non-functional requirements captured as inputs from key stakeholders and other practices.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;waterfall method&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A development approach that is linear and sequential with distinct objectives for each phase of development.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;work instruction&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A detailed description to be followed in order to perform an activity.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;workaround&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;A solution that reduces or eliminates the impact of an incident or problem for which a full resolution is not yet available. Some workarounds reduce the likelihood of incidents.
例子:&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;公司墨盒没墨了, 新的墨盒好几天才能到, 同事把现在的墨盒拿出来晃了晃, 还能用.&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;workforce and talent management practice&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;The practice of ensuring that an organization has the right people with the appropriate skills and knowledge and in the correct roles to support its business objectives.&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Sat, 24 Jun 2023 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/ITIL-Certification-In-Action/</link>
        <guid isPermaLink="true">http://localhost:4000/ITIL-Certification-In-Action/</guid>
        
        
        <category>ITIL</category>
        
        <category>IT</category>
        
      </item>
    
      <item>
        <title>Designing and Implementing Microsoft Azure AI Solution</title>
        <description>&lt;p&gt;随着微软收购了 OpenAI, ChatGPT 的能力也融入到了 微软的 Azure 中. 我将带领大家了解 Microsoft Azure AI 不同服务, 包括 Cognitive Services, Computer Vision, Custom Vision, Video indexer, Natural Language Processing (NLP), Speech Service, Translate Language, OpenAI 等等. 还等什么, 让我们开始吧.&lt;/p&gt;

&lt;h1 id=&quot;az-102-designing-and-implementing-a-microsoft-azure-ai-solution&quot;&gt;AZ-102 Designing and Implementing a Microsoft Azure AI Solution&lt;/h1&gt;

&lt;p&gt;[TOC]&lt;/p&gt;

&lt;h2 id=&quot;资源&quot;&gt;资源&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://learn.microsoft.com/en-us/certifications/exams/ai-102?source=recommendations&quot;&gt;官网考试介绍&lt;/a&gt;
&lt;a href=&quot;https://pts.measureup.com/web/PBS/LMS/index.php?l=1&amp;amp;k=8470033&amp;amp;tam=2239279&amp;amp;role=1&amp;amp;course=at_test202108190737001629358620&quot;&gt;官网提供的练习题&lt;/a&gt;
&lt;a href=&quot;https://esi.microsoft.com/getcertification&quot;&gt;预约考试 + 考试券申请 + 模拟考题练习&lt;/a&gt;  目前只能申请 50% 的折扣 
&lt;a href=&quot;https://learn.microsoft.com/zh-cn/certifications/resources/study-guides/ai-102#skills-measured-as-of-may-2-2023&quot;&gt;2023年 5 月 2 日之后的考试的技能要求&lt;/a&gt;
&lt;a href=&quot;https://learn.microsoft.com/zh-cn/certifications/request-accommodations?source=recommendations&quot;&gt;考试便利相关说明&lt;/a&gt;
&lt;a href=&quot;https://home.pearsonvue.com/getattachment/926b7ba7-a45b-4d50-b8e0-663917554885/English%20as%20a%20Second%20Language%20ESL%20Request%20Form-999930.aspx&quot;&gt;英语作为第二语言考试需要填写的表格, 填写后可以获取额外的考试时间&lt;/a&gt;  要先拿到这个 额外时间的 approval, 再去 schedule 考试时间
&lt;a href=&quot;https://github.com/Azure-Samples&quot;&gt;github 上的 azure sample code repositories&lt;/a&gt;
&lt;a href=&quot;https://github.com/Azure-Samples/cognitive-services-python-sdk-samples&quot;&gt;cognitive-services-python-sdk-samples&lt;/a&gt;
&lt;a href=&quot;https://azure.microsoft.com/en-us/products/cognitive-services/openai-service&quot;&gt;Azure OpenAI 服务&lt;/a&gt;
&lt;a href=&quot;https://azure.microsoft.com/en-us/products/cognitive-services/#api&quot;&gt;Azure cognitive Service API&lt;/a&gt; 
&lt;a href=&quot;https://azure.microsoft.com/en-us/products/cognitive-services/#overview&quot;&gt;Azure Cognitive Service Overview&lt;/a&gt;
&lt;a href=&quot;https://portal.azure.com/#view/Microsoft_Azure_ProjectOxford/CognitiveServicesHub/~/SpeechServices&quot;&gt;Azure Cognitive Service 登录后的服务&lt;/a&gt;
&lt;a href=&quot;https://azure.microsoft.com/zh-cn/pricing/details/cognitive-services/&quot;&gt;认知服务定价&lt;/a&gt;
&lt;a href=&quot;https://learn.microsoft.com/en-us/cli/azure/install-azure-cli-macos&quot;&gt;Mac 上安装 Azure 命令行&lt;/a&gt;
&lt;a href=&quot;https://learn.microsoft.com/en-us/azure/cognitive-services/cognitive-services-apis-create-account-cli?tabs=macos&quot;&gt;Mac 命令行创建 Cognitive Service&lt;/a&gt;
&lt;a href=&quot;https://www.microsoft.com/en-us/ai/responsible-ai?activetab=pivot1%3aprimaryr6&quot;&gt;微软的 AI principles 原则&lt;/a&gt;
&lt;a href=&quot;https://aka.ms/azsdk/python/all&quot;&gt;可用 PIP 安装的 Python 的 Azure library&lt;/a&gt;
&lt;a href=&quot;https://azure.github.io/azure-sdk/releases/latest/all/python.html&quot;&gt;Azure SDK Release for Python&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;考试计划相关&quot;&gt;考试计划相关&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;考试当天：&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;建议考生提前 30 分钟登录帐户开始检录流程，以便留出时间解决任何故障问题。
这将让考生做好充分准备，但并不保证可提前入场或开始考试。
如果考生迟到15分钟以上，将不得参加考试，且不大可能获得退款。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;进入考试页面：&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;在考试确认、改期或提醒邮件中选择签到（Check-in）以开始考试。
&lt;a href=&quot;https://home.pearsonvue.com/microsoft/onvue&quot;&gt;登录&lt;/a&gt;
&lt;a href=&quot;https://wsr.pearsonvue.com/testtaker/registration/Dashboard.htm?conversationId=632646&quot;&gt;修改预约&lt;/a&gt;
&lt;a href=&quot;https://urldefense.proofpoint.com/v2/url?u=https-3A__examlaunchpad.pearsonvue.com_entry-2Dpoint_launch-2Dexam_MICROSOFT_OP-3FregistrationToken-3&amp;lt;your own token&amp;gt;&quot;&gt;考试入口&lt;/a&gt;
查看即将进行的考试预约，
按照屏幕上的提示完成检录流程，
考生须完成检录后方可开始考试。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;考试改期规定&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;如果您需要改期考试预约，请确保至少在您预约的考试时间 24 个小时前改期。如果您没有在考试预约时间 24 个小时前改期，我们将不会退还您的考试费用和/或您所在的公司可能需要付费。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;考试取消规定&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;如果您需要取消考试预约，请确保至少在您预约的考试时间 24 个小时前取消。如果您没有在考试预约时间 24 个小时前取消，我们将不会退还您的考试费用和/或您所在的公司可能需要付费。&lt;/p&gt;

&lt;h3 id=&quot;考试大纲&quot;&gt;考试大纲&lt;/h3&gt;
&lt;p&gt;自 2023 年 5 月 2 日起测试的技能, 基本没啥变化
58 道题, 120 分钟, 可以额外申请 30 分钟? 
总共 1000 分, 700 分通过 , 70% 正确率&lt;/p&gt;

&lt;h3 id=&quot;受众概况&quot;&gt;受众概况&lt;/h3&gt;
&lt;p&gt;Microsoft Azure AI 工程师构建、管理和部署充分利用 Azure 认知服务和 Azure 服务的 AI 解决方案。 他们的职责包括参与 AI 解决方案开发的所有阶段，从需求定义和设计到开发、部署、集成、维护、性能优化和监视。
这些专业人员与解决方案架构师合作将其愿景转化为事实，并与数据科学家、数据工程师、IoT 专家、基础结构管理员和其他软件开发人员合作，以构建完整的端到端 AI 解决方案。
Azure AI 工程师具有开发使用 Python 或 C# 等语言的解决方案的经验，并且应该能够使用基于 REST 的 API 和软件开发工具包 (SDK) 来构建安全的图像处理、视频处理、自然语言处理 (NLP)、知识挖掘和对话式 AI 解决方案。 他们应熟悉实现 AI 解决方案的所有方法。 此外，他们了解构成 Azure AI 产品组合的组件以及可用的数据存储选项。 Azure AI 工程师还需要理解并能够应用负责任 AI 原则。&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;计划和管理 Azure AI 解决方案 (25-30%)&lt;/li&gt;
  &lt;li&gt;实现图像和视频处理解决方案 (15-20%)&lt;/li&gt;
  &lt;li&gt;实现自然语言处理解决方案 (25-30%)&lt;/li&gt;
  &lt;li&gt;实现知识挖掘解决方案 (5-10%)&lt;/li&gt;
  &lt;li&gt;实现对话式 AI 解决方案 (15-20%)&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;计划和管理-azure-ai-解决方案-25-30&quot;&gt;计划和管理 Azure AI 解决方案 (25-30%)&lt;/h3&gt;

&lt;p&gt;选择适当的 Azure AI 服务&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;为视觉解决方案选择适当的服务&lt;/li&gt;
  &lt;li&gt;为语言分析解决方案选择适当的服务&lt;/li&gt;
  &lt;li&gt;为决策支持解决方案选择适当的服务&lt;/li&gt;
  &lt;li&gt;为语音解决方案选择适当的服务
选择适当的应用 AI 服务&lt;/li&gt;
  &lt;li&gt;为 Azure AI 服务计划和配置安全性&lt;/li&gt;
  &lt;li&gt;管理帐户密钥&lt;/li&gt;
  &lt;li&gt;管理资源的身份验证&lt;/li&gt;
  &lt;li&gt;使用 Azure 虚拟网络保护服务&lt;/li&gt;
  &lt;li&gt;计划符合负责任 AI 原则的解决方案
创建和管理 Azure AI 服务&lt;/li&gt;
  &lt;li&gt;创建 Azure AI 资源&lt;/li&gt;
  &lt;li&gt;配置诊断日志记录&lt;/li&gt;
  &lt;li&gt;管理 Azure AI 服务的成本&lt;/li&gt;
  &lt;li&gt;监视 Azure AI 资源
部署 Azure AI 服务&lt;/li&gt;
  &lt;li&gt;确定服务的默认终结点&lt;/li&gt;
  &lt;li&gt;使用 Azure 门户创建资源&lt;/li&gt;
  &lt;li&gt;将 Azure AI 服务集成到持续集成/持续部署 (CI/CD) 管道中&lt;/li&gt;
  &lt;li&gt;计划容器部署&lt;/li&gt;
  &lt;li&gt;在连接的环境中实现预生成容器
创建解决方案以检测异常并改进内容&lt;/li&gt;
  &lt;li&gt;创建使用异常检测器（认知服务的一部分）的解决方案&lt;/li&gt;
  &lt;li&gt;创建使用 Azure 内容审查器（认知服务的一部分）的解决方案&lt;/li&gt;
  &lt;li&gt;创建使用个性化体验创建服务（认知服务的一部分）的解决方案&lt;/li&gt;
  &lt;li&gt;创建使用 Azure 指标顾问（Azure 应用 AI 服务的一部分）的解决方案&lt;/li&gt;
  &lt;li&gt;创建使用 Azure 沉浸式阅读器（Azure 应用 AI 服务的一部分）的解决方案&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;实现图像和视频处理解决方案-15-20&quot;&gt;实现图像和视频处理解决方案 (15-20%)&lt;/h3&gt;

&lt;p&gt;分析图像&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;选择适当的视觉特征以满足图像处理要求&lt;/li&gt;
  &lt;li&gt;创建图像处理请求以包含适当的图像分析功能&lt;/li&gt;
  &lt;li&gt;解释图像处理响应
从图像中提取文本&lt;/li&gt;
  &lt;li&gt;使用计算机视觉服务从图像或 PDF 中提取文本&lt;/li&gt;
  &lt;li&gt;使用计算机视觉服务转换手写文本&lt;/li&gt;
  &lt;li&gt;使用 Azure 表单识别器中的预生成模型提取信息&lt;/li&gt;
  &lt;li&gt;为 Azure 表单识别器生成和优化自定义模型
使用自定义视觉服务（Azure 认知服务的一部分）实现图像分类和物体检测&lt;/li&gt;
  &lt;li&gt;在图像分类和物体检测模型之间选择&lt;/li&gt;
  &lt;li&gt;指定模型配置选项，包括类别、版本和压缩&lt;/li&gt;
  &lt;li&gt;标记图像&lt;/li&gt;
  &lt;li&gt;训练自定义图像模型，包括分类器和检测器&lt;/li&gt;
  &lt;li&gt;管理训练迭代&lt;/li&gt;
  &lt;li&gt;评估模型指标&lt;/li&gt;
  &lt;li&gt;发布已训练的模型迭代&lt;/li&gt;
  &lt;li&gt;导出模型以在特定目标上运行&lt;/li&gt;
  &lt;li&gt;以 Docker 容器形式实现自定义视觉模型&lt;/li&gt;
  &lt;li&gt;解释模型响应
处理视频&lt;/li&gt;
  &lt;li&gt;使用 Azure 视频索引器处理视频&lt;/li&gt;
  &lt;li&gt;使用 Azure 视频索引器从视频或实时流中提取见解&lt;/li&gt;
  &lt;li&gt;使用 Azure 视频索引器实现内容审核&lt;/li&gt;
  &lt;li&gt;将自定义语言模型集成到 Azure 视频索引器中&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;实现自然语言处理解决方案-25-30&quot;&gt;实现自然语言处理解决方案 (25-30%)&lt;/h3&gt;

&lt;p&gt;分析文本&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;检索和处理关键短语&lt;/li&gt;
  &lt;li&gt;检索和处理实体&lt;/li&gt;
  &lt;li&gt;检索和处理情绪&lt;/li&gt;
  &lt;li&gt;检测文本中使用的语言&lt;/li&gt;
  &lt;li&gt;检测个人身份信息 (PII)
处理语音&lt;/li&gt;
  &lt;li&gt;实现和自定义文本转语音&lt;/li&gt;
  &lt;li&gt;实现和自定义语音转文本&lt;/li&gt;
  &lt;li&gt;使用 SSML 和神经网络定制声音改进文本转语音&lt;/li&gt;
  &lt;li&gt;使用短语列表和自定义语音识别改进语音转文本&lt;/li&gt;
  &lt;li&gt;实现意向识别&lt;/li&gt;
  &lt;li&gt;实现关键字识别
转换语言&lt;/li&gt;
  &lt;li&gt;使用转换器服务转换文本和文档&lt;/li&gt;
  &lt;li&gt;实现自定义转换，包括训练、改进和发布自定义模型&lt;/li&gt;
  &lt;li&gt;使用语音服务将语音转换为语音&lt;/li&gt;
  &lt;li&gt;使用语音服务将语音转换为文本&lt;/li&gt;
  &lt;li&gt;同时转换为多种语言
生成和管理语言理解模型&lt;/li&gt;
  &lt;li&gt;创建意向并添加语句&lt;/li&gt;
  &lt;li&gt;创建实体&lt;/li&gt;
  &lt;li&gt;训练、评估、部署和测试语言理解模型&lt;/li&gt;
  &lt;li&gt;优化语言理解 (LUIS) 模型&lt;/li&gt;
  &lt;li&gt;使用 Orchestrator 集成多种语言服务模型&lt;/li&gt;
  &lt;li&gt;导入和导出语言理解模型
创建问题解答解决方案&lt;/li&gt;
  &lt;li&gt;创建问题解答项目&lt;/li&gt;
  &lt;li&gt;手动添加问答对&lt;/li&gt;
  &lt;li&gt;导入源&lt;/li&gt;
  &lt;li&gt;训练和测试知识库&lt;/li&gt;
  &lt;li&gt;发布知识库&lt;/li&gt;
  &lt;li&gt;创建多回合对话&lt;/li&gt;
  &lt;li&gt;添加备用措辞&lt;/li&gt;
  &lt;li&gt;向知识库添加聊天内容&lt;/li&gt;
  &lt;li&gt;导入知识库&lt;/li&gt;
  &lt;li&gt;创建多语言问题解答解决方案&lt;/li&gt;
  &lt;li&gt;创建多域问题解答解决方案&lt;/li&gt;
  &lt;li&gt;对问答对使用元数据&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;实现知识挖掘解决方案-5-10&quot;&gt;实现知识挖掘解决方案 (5-10%)&lt;/h3&gt;

&lt;p&gt;实现认知搜索解决方案&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;预配认知搜索资源&lt;/li&gt;
  &lt;li&gt;创建数据源&lt;/li&gt;
  &lt;li&gt;定义索引&lt;/li&gt;
  &lt;li&gt;创建并运行索引器&lt;/li&gt;
  &lt;li&gt;查询索引，包括语法、排序、筛选和通配符&lt;/li&gt;
  &lt;li&gt;管理知识存储投影，包括文件、对象和表投影
将 AI 扩充技能应用于索引器管道&lt;/li&gt;
  &lt;li&gt;将认知服务帐户附加到技能组&lt;/li&gt;
  &lt;li&gt;选择并包含文档的内置技能&lt;/li&gt;
  &lt;li&gt;实现自定义技能并将其包含在技能组中&lt;/li&gt;
  &lt;li&gt;实现增量扩充&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;实现对话式-ai-解决方案-15-20&quot;&gt;实现对话式 AI 解决方案 (15-20%)&lt;/h3&gt;

&lt;p&gt;设计和实现对话流&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;设计机器人的对话逻辑&lt;/li&gt;
  &lt;li&gt;为机器人选择合适的活动处理程序、对话或主题、触发器和状态处理
生成对话机器人&lt;/li&gt;
  &lt;li&gt;通过模板创建机器人&lt;/li&gt;
  &lt;li&gt;从头开始创建机器人&lt;/li&gt;
  &lt;li&gt;实现活动处理程序、对话或主题和触发器&lt;/li&gt;
  &lt;li&gt;实现特定于通道的逻辑&lt;/li&gt;
  &lt;li&gt;实现自适应卡片&lt;/li&gt;
  &lt;li&gt;在机器人中实现多语言支持&lt;/li&gt;
  &lt;li&gt;实现多步骤对话&lt;/li&gt;
  &lt;li&gt;管理机器人的状态&lt;/li&gt;
  &lt;li&gt;将认知服务集成到机器人中，包括问题解答、语言理解和语音服务
测试、发布和维护对话机器人&lt;/li&gt;
  &lt;li&gt;使用 Bot Framework Emulator 或 Power Virtual Agents Web 应用测试机器人&lt;/li&gt;
  &lt;li&gt;在特定于通道的环境中测试机器人&lt;/li&gt;
  &lt;li&gt;排查对话机器人问题&lt;/li&gt;
  &lt;li&gt;部署机器人逻辑&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;plan-and-manage&quot;&gt;Plan and Manage&lt;/h2&gt;

&lt;p&gt;Azure Cognitive Service 的概念&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;预先训练好的 ML models&lt;/li&gt;
  &lt;li&gt;可以方便的把 AI functions 集成到我们自己的代码中&lt;/li&gt;
  &lt;li&gt;不需要 ML 的经验&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Cognitive API&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;包含了4大类
    &lt;ul&gt;
      &lt;li&gt;Vision Service
        &lt;ul&gt;
          &lt;li&gt;Image analysis
            &lt;ul&gt;
              &lt;li&gt;分析图片和视频中的物体&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Spatial analysis
            &lt;ul&gt;
              &lt;li&gt;空间识别, 实时分析空间中的人和移动&lt;/li&gt;
              &lt;li&gt;比如商店 checkout 区域的排队人数分析&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Optical character recognition (OCR)
            &lt;ul&gt;
              &lt;li&gt;识别图片中的文字&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Facial recognition
            &lt;ul&gt;
              &lt;li&gt;探测面部, 识别人, 识别情感&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;基于我们自己的图片训练 ML model, 来使用我们自己的业务需要&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Speech Service
        &lt;ul&gt;
          &lt;li&gt;speech to text
            &lt;ul&gt;
              &lt;li&gt;语音转文字&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;text to speech
            &lt;ul&gt;
              &lt;li&gt;文字转语音&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;speech translation
            &lt;ul&gt;
              &lt;li&gt;语音翻译&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;speaker recognition (preview)
            &lt;ul&gt;
              &lt;li&gt;语音识别是谁&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Language Service
        &lt;ul&gt;
          &lt;li&gt;Language Understanding(LUIS)
            &lt;ul&gt;
              &lt;li&gt;内容可以用于Bing, 给一个关键词, bing 通过 LUIS 来进行搜索&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;QnA Maker
            &lt;ul&gt;
              &lt;li&gt;和 chatbot 关联&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Text Analytics&lt;/li&gt;
          &lt;li&gt;Translator (90种语言)
            &lt;ul&gt;
              &lt;li&gt;不但可以翻译, 还可以分析被翻译的内容的情感, 链接, PII 等信息&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Decision Service
        &lt;ul&gt;
          &lt;li&gt;Anomaly Detector (异常检测)&lt;/li&gt;
          &lt;li&gt;Content Moderator (内容审查器)
            &lt;ul&gt;
              &lt;li&gt;分析数据趋势, 画图, 预测波峰波谷&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Personalizer  (个性化)
            &lt;ul&gt;
              &lt;li&gt;是一个决策服务, 通过强化学习大规模做出更明智的决策&lt;/li&gt;
              &lt;li&gt;比如商品推荐, 电影推荐, 文章推荐,  广告推荐, 智能消息推送&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;创建认知服务资源&quot;&gt;创建认知服务资源&lt;/h2&gt;

&lt;p&gt;概念&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Subscription
    &lt;ul&gt;
      &lt;li&gt;订阅, 所有在同一个订阅下的资源分享同一个bill (收费订单)&lt;/li&gt;
      &lt;li&gt;目前有的两个 subscription
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Free Tier&lt;/code&gt;&lt;/li&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pay as you go&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Resource Group
    &lt;ul&gt;
      &lt;li&gt;资源组, 同一个资源组下面的资源分享同样的生命周期, 权限和 policy&lt;/li&gt;
      &lt;li&gt;目前创建的 Resource Group
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dl-cogsvs-group&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Region
    &lt;ul&gt;
      &lt;li&gt;国家&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Instance Name
    &lt;ul&gt;
      &lt;li&gt;资源的名字, 只能是字母和中划线&lt;/li&gt;
      &lt;li&gt;目前创建的 Cognitive Service 是
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dl-cogsvs&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Pricing Tier
    &lt;ul&gt;
      &lt;li&gt;定价&lt;/li&gt;
      &lt;li&gt;目前的几种定价
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;s0&lt;/code&gt;&lt;/li&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;s1&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Key
    &lt;ul&gt;
      &lt;li&gt;用来访问认知服务 API 的, 不能分享给别人, 否则别人用了, 我需要付费.&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;your own key&amp;gt;&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;默认有2个key&lt;/li&gt;
      &lt;li&gt;key 可以 regenerate 重建&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Endpoint
    &lt;ul&gt;
      &lt;li&gt;登录点, 访问认知服务 API 的 URL 地址&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://dl-cogsvs.cognitiveservices.azure.com/&lt;/code&gt;
        &lt;ul&gt;
          &lt;li&gt;dl-cogsvs 是我们创建的认知服务资源名字&lt;/li&gt;
          &lt;li&gt;cognitiveservices.azure.com 是官方确认的域名&lt;/li&gt;
          &lt;li&gt;具体的认知服务会拼接到这个域名的后面&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;创建流程&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;进入认知服务 console&lt;/li&gt;
  &lt;li&gt;底部看到 Cognitive Service Multi-service Account&lt;/li&gt;
  &lt;li&gt;点进去, 创建一个认知服务账户&lt;/li&gt;
  &lt;li&gt;完成创建&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;为认知服务创建-alert&quot;&gt;为认知服务创建 Alert&lt;/h3&gt;

&lt;p&gt;概念&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;alert rule
    &lt;ul&gt;
      &lt;li&gt;就是一个 alert 的规则&lt;/li&gt;
      &lt;li&gt;一个 alert rule 可以产生多个 alert&lt;/li&gt;
      &lt;li&gt;这里的alert rule 的名字是
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dl-alert-rule-checking-total-calls&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Signal
    &lt;ul&gt;
      &lt;li&gt;信号, 就是需要监控的目标, 可以是
        &lt;ul&gt;
          &lt;li&gt;Total calls&lt;/li&gt;
          &lt;li&gt;Total errors&lt;/li&gt;
          &lt;li&gt;latency&lt;/li&gt;
          &lt;li&gt;Client errors&lt;/li&gt;
          &lt;li&gt;Server errors&lt;/li&gt;
          &lt;li&gt;…&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Action Group
    &lt;ul&gt;
      &lt;li&gt;一系列的action 可以一起应用到一个 alert rule 中&lt;/li&gt;
      &lt;li&gt;当alert rule 被触发, 可以同时触发 action&lt;/li&gt;
      &lt;li&gt;action 包括
        &lt;ul&gt;
          &lt;li&gt;通过邮件形式发送信息给指定邮件地址&lt;/li&gt;
          &lt;li&gt;发送邮件给指定的当前 cognitive service 的 相关人员&lt;/li&gt;
          &lt;li&gt;调用 function&lt;/li&gt;
          &lt;li&gt;调用某个网址&lt;/li&gt;
          &lt;li&gt;…&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;通过-metrics-来监控-认知服务&quot;&gt;通过 Metrics 来监控 认知服务&lt;/h3&gt;

&lt;p&gt;Metrics 可以通过监控一些指标来 实时通过 chart 方式查看认知服务情况&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Metrics 可监控的指标包括
    &lt;ul&gt;
      &lt;li&gt;http 请求相关
        &lt;ul&gt;
          &lt;li&gt;Avaibility&lt;/li&gt;
          &lt;li&gt;BlockedCalls&lt;/li&gt;
          &lt;li&gt;ClentError&lt;/li&gt;
          &lt;li&gt;Latency&lt;/li&gt;
          &lt;li&gt;ServerError&lt;/li&gt;
          &lt;li&gt;Data in/out&lt;/li&gt;
          &lt;li&gt;Total Calls&lt;/li&gt;
          &lt;li&gt;Total Errors&lt;/li&gt;
          &lt;li&gt;Total Token Calls&lt;/li&gt;
          &lt;li&gt;…&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Usage 相关
        &lt;ul&gt;
          &lt;li&gt;Auto seconds translated&lt;/li&gt;
          &lt;li&gt;Face images trained&lt;/li&gt;
          &lt;li&gt;LUIS Speech Requested&lt;/li&gt;
          &lt;li&gt;Processed Images&lt;/li&gt;
          &lt;li&gt;QA text records&lt;/li&gt;
          &lt;li&gt;Text charactors translated&lt;/li&gt;
          &lt;li&gt;Voice model training minutes&lt;/li&gt;
          &lt;li&gt;还有很多…&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;创建好一个新的 chart 后就可以通过图表实时监控了&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;用-postman-调用-speech-service-api&quot;&gt;用 postman 调用 speech service API&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=bmxtEWFmSPM&quot;&gt;网上的教学&lt;/a&gt;&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;先创建一个 speech service&lt;/li&gt;
  &lt;li&gt;进入postman, 创建一个 post request
    &lt;ol&gt;
      &lt;li&gt;填入 speech service 提供的 url
        &lt;ol&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://eastus.api.cognitive.microsoft.com/sts/v1.0/issuetoken&lt;/code&gt;&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;在 header 中填入 key-value
        &lt;ol&gt;
          &lt;li&gt;key: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;your own key&amp;gt;&lt;/code&gt;&lt;/li&gt;
          &lt;li&gt;value: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;your own key&amp;gt;&lt;/code&gt;&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;点击 send, 之后就返回了一个 token
    &lt;ol&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;your own token&amp;gt;&lt;/code&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;未完成, 后面需要继续&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;设置-诊断-diagnostic-settings&quot;&gt;设置 诊断 Diagnostic settings&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;诊断设置用于配置将资源的平台日志和指标流式导出到所选目标。最多可以创建五个不同的诊断设置，以将不同的日志和指标发送到不同的目标。&lt;/li&gt;
  &lt;li&gt;诊断可以获取的信息
    &lt;ul&gt;
      &lt;li&gt;Audit Logs&lt;/li&gt;
      &lt;li&gt;Request and Response Logs&lt;/li&gt;
      &lt;li&gt;Trace Logs&lt;/li&gt;
      &lt;li&gt;AllMetrics&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;下游
    &lt;ul&gt;
      &lt;li&gt;Send to Log Analytics workspace  分析&lt;/li&gt;
      &lt;li&gt;Archive to a storage account  存储&lt;/li&gt;
      &lt;li&gt;Stream to an event hub&lt;/li&gt;
      &lt;li&gt;Send to partner solution 第三方&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;cognitive-service-security-安全&quot;&gt;Cognitive Service Security 安全&lt;/h3&gt;

&lt;p&gt;Networking&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;创建一个新的Speech 服务后, 进入这个服务的 Networking, 会发现提示”Custom Domain Name is required for VNet”&lt;/li&gt;
  &lt;li&gt;创建一个 custom domian &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dl-work-domain&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;创建后, Speech 的 endpoint URL 就会增加&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dl-work-domain&lt;/code&gt; 这个 domain&lt;/li&gt;
  &lt;li&gt;这样就可以选择 “Selected Network and Private Endpoints”
    &lt;ul&gt;
      &lt;li&gt;增加 Firewall 功能&lt;/li&gt;
      &lt;li&gt;只允许 on-premise 的网络访问这个 Speech 服务.
        &lt;ul&gt;
          &lt;li&gt;要指定 CIDR&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;或者只允许自己本机 IP 访问 Speech 功能&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;或者通过 “Private endpoint connections” 建立一个私有 endpoint 通道, 让其他 AZ 服务访问 Speech 服务&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Identity&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;A system assigned managed identity is restricted to one per resource and is tied to the lifecycle of this resource. You can grant permissions to the managed identity by using Azure role-based access control (Azure RBAC). The managed identity is authenticated with Azure AD, so you don’t have to store any credentials in code.
    &lt;ul&gt;
      &lt;li&gt;系统分配的托管标识限制为每个资源一个，并绑定到此资源的生命周期。可以使用 Azure 基于角色的访问控制 （Azure RBAC） 向托管标识授予权限。托管标识使用 Azure AD 进行身份验证，因此无需在代码中存储任何凭据。&lt;/li&gt;
      &lt;li&gt;使用了 ID, 就不需要使用 key 了.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;分为 System Assigned 和 User Assigned
    &lt;ul&gt;
      &lt;li&gt;System Assigned ID
        &lt;ul&gt;
          &lt;li&gt;一旦开启, 系统会分配一个 ID 给这个资源, 并注册到 Azure AD中&lt;/li&gt;
          &lt;li&gt;一旦注册到 AZ AD 中, 这个资源就可以访问 Az 的其他资源, 比如 Storage 了.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;微软的--ai-policies-policy&quot;&gt;微软的  AI Policies /Policy&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://www.microsoft.com/en-us/ai/responsible-ai?activetab=pivot1%3aprimaryr6&quot;&gt;Azure 官网的 Policy&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://portal.azure.com/#view/Microsoft_Azure_Policy/PolicyMenuBlade/~/Definitions&quot;&gt;Azure console 中 Policy 服务中定义的 Cognitive Service 的policy&lt;/a&gt;
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-12-054549.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul class=&quot;task-list&quot;&gt;
  &lt;li&gt;Policy 是一段 Json 规则, 可以应用到某个创建的 订阅 的 资源组 的 某个资源上
    &lt;ul&gt;
      &lt;li&gt;比如, 选中 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Cognitive Services accounts should restrict network access&lt;/code&gt; 然后assign 给 Free Teir -&amp;gt; dl-cogsvs-group -&amp;gt; dl-cogsvs / dl-speech / dl-alert-rule-checking-total-calls&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;这里的 Policy 包含了
    &lt;ul&gt;
      &lt;li&gt;限制网络访问&lt;/li&gt;
      &lt;li&gt;关闭公共网络访问&lt;/li&gt;
      &lt;li&gt;关闭本地认证方法&lt;/li&gt;
      &lt;li&gt;使用自己定制的存储&lt;/li&gt;
      &lt;li&gt;用 customer managed key 加密数据&lt;/li&gt;
      &lt;li&gt;使用私有 DNS zone&lt;/li&gt;
      &lt;li&gt;使用私有链接&lt;/li&gt;
      &lt;li&gt;使用 private endpoints&lt;/li&gt;
      &lt;li&gt;使用 managed identity&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; /&gt;TODO: 仔细看一下这个链接中的内容, 这是考试中的一部分&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;认知服务-容器-containers&quot;&gt;认知服务 容器 containers&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://learn.microsoft.com/en-us/azure/cognitive-services/cognitive-services-container-support&quot;&gt;官网介绍&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Azure认知服务提供了几个Docker容器，允许您使用本地Azure中可用的相同API。使用这些容器可以灵活地使认知服务更接近您的数据，以符合性、安全性或其他操作原因。容器支持目前可用于Azure认知服务的子集&lt;/li&gt;
  &lt;li&gt;认知容器中包含了
    &lt;ul&gt;
      &lt;li&gt;决策容器 Decision containers&lt;/li&gt;
      &lt;li&gt;语言容器 Language containers&lt;/li&gt;
      &lt;li&gt;语音容器 Speech containers&lt;/li&gt;
      &lt;li&gt;视觉容器 Vision containers&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;好处
    &lt;ul&gt;
      &lt;li&gt;可以把认知服务部署在容器中, 放在客户的 On-premise 环境中&lt;/li&gt;
      &lt;li&gt;提高安全性, 满足合规要求&lt;/li&gt;
      &lt;li&gt;降低网络延迟&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;不需要依赖Cloud&lt;/li&gt;
  &lt;li&gt;可以通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker pull&lt;/code&gt; 命令获取认知服务的容器&lt;/li&gt;
  &lt;li&gt;计费
    &lt;ul&gt;
      &lt;li&gt;对于容器的使用, 会把使用记录(meteringz)发到 Azure.com 进行计费计算&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;implement-computer-vision-soluiton-计算机视觉方案&quot;&gt;Implement Computer Vision Soluiton 计算机视觉方案&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://learn.microsoft.com/zh-cn/azure/cognitive-services/Custom-Vision-Service/quickstarts/image-classification?tabs=visual-studio&amp;amp;pivots=programming-language-python&quot;&gt;官方文档&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;pip install azure-cognitiveservices-vision-customvision
pip install pillow &lt;span class=&quot;c&quot;&gt;# PIL 的图片处理类库&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;获取图片的-tag&quot;&gt;获取图片的 tag&lt;/h3&gt;
&lt;p&gt;提供一张照片, 然后让 AI 给图片中的内容进行标注tag&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;azure.cognitiveservices.vision.computervision&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ComputerVisionClient&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;azure.cognitiveservices.vision.computervision.models&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OperationStatusCodes&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;azure.cognitiveservices.vision.computervision.models&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;VisualFeatureTypes&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;msrest.authentication&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CognitiveServicesCredentials&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;array&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;PIL&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sys&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;time&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;subscription_key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;your own key&amp;gt;&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;endpoint&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;https://dlvision1.cognitiveservices.azure.com/&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;computervision_client&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ComputerVisionClient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endpoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CognitiveServicesCredentials&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subscription_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;remote_image_url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;https://raw.githubusercontent.com/gottagetgit/AI102Files/main/Computer_Vision&quot;&lt;/span&gt; \
                   &lt;span class=&quot;s&quot;&gt;&quot;/Analyze_images_using_Computer_Vision_API/Images/Landmark.jpg &quot;&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;&apos;&apos;&apos;
Tag an Image - remote
This example returns a tag (key word) for each thing in the image.
&apos;&apos;&apos;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;===== Tag an image - remote =====&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Call API with remote image&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;tags_result_remote&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;computervision_client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tag_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remote_image_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Print results with confidence score&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Tags in the remote image: &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tags_result_remote&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tags&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;No tags detected.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tag&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tags_result_remote&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tags&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&apos;{}&apos; with confidence {:.2f}&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tag&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tag&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;confidence&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# &apos;&apos;&apos;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Tag an Image - local&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# This example returns a tag (key word) for each thing in the image.&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# &apos;&apos;&apos;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# print(&quot;===== Tag an Image - local =====&quot;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# # Open local image file&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# local_image_path = &quot;Images/Landmark.jpg&quot;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# local_image = open(local_image_path, &quot;rb&quot;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# # Call API local image&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# tags_result_local = computervision_client.tag_image_in_stream(local_image)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# # Print results with confidence score&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# print(&quot;Tags in the local image: \n&quot;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# if len(tags_result_local.tags) == 0:&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#     print(&quot;No tags detected.&quot;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# else:&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#     for tag in tags_result_local.tags:&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#         print(&quot;&apos;{}&apos; with confidence {:.2f}%&quot;.format(tag.name, tag.confidence * 100))&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# print()&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# &apos;&apos;&apos;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# END - Tag an Image - local&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# &apos;&apos;&apos;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;代码运行结果
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-12-084153.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;获取图片的-描述-description&quot;&gt;获取图片的 描述 Description&lt;/h3&gt;
&lt;p&gt;提供一张照片, 然后让 AI 给图片中的内容进行文字描述&lt;/p&gt;

&lt;p&gt;和 打 tag 一样, 只是调用的方法由 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tag_image&lt;/code&gt; 改为 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;describe_image&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;description_results = computervision_client.tag_image(remote_image_url)&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;代码运行结果
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-12-085058.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;identify-landmarks-and-celebrities-识别地标和名人&quot;&gt;Identify landmarks and Celebrities 识别地标和名人&lt;/h3&gt;

&lt;p&gt;识别地标和名人都属于 domain-specific models&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;celebraties
    &lt;ul&gt;
      &lt;li&gt;使用了图片的人物分类&lt;/li&gt;
      &lt;li&gt;使用了outdoor 和 building 的图片分类&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;和图片描述的代码类似, 区别是使用了 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;analyze_image_by_domain&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;detect_domain_results_landmarks = computervision_client.analyze_image_by_domain(&quot;landmarks&quot;, remote_image_url)&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;这里可以把 “landmarks” 改成 “selebraties” 然后去检测图片中的名人&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;代码运行结果
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-12-090538.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;identify-brands-in-image-品牌检测&quot;&gt;Identify Brands in image, 品牌检测&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;和地标名人检测类似, 区别是使用了 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;analyze_image&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;这里的feature type 是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;brands&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;其他featrue type 还包括
        &lt;ul&gt;
          &lt;li&gt;Faces&lt;/li&gt;
          &lt;li&gt;Brands&lt;/li&gt;
          &lt;li&gt;Adult&lt;/li&gt;
          &lt;li&gt;Objects&lt;/li&gt;
          &lt;li&gt;Color&lt;/li&gt;
          &lt;li&gt;ImageType&lt;/li&gt;
          &lt;li&gt;Description&lt;/li&gt;
          &lt;li&gt;Categories&lt;/li&gt;
          &lt;li&gt;Tags&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;可以获得品牌名称 和 品牌在图片中的像素位置&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;
&lt;span class=&quot;c&quot;&gt;# Select the visual feature(s) you want&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;remote_image_features&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;brands&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Call API with URL and features&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;detect_brands_results_remote&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;computervision_client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;analyze_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remote_image_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;remote_image_features&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;代码运行结果
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-12-093159.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;检测到两个品牌信息
    &lt;ul&gt;
      &lt;li&gt;logo 和位置&lt;/li&gt;
      &lt;li&gt;品牌名称和位置&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;moderate-adult-content-适度中度的成人内容检测&quot;&gt;Moderate Adult Content 适度(中度)的成人内容检测&lt;/h3&gt;

&lt;p&gt;Content flag definitions 内容标注定义 分三类&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Adult image, 成人图片, 内容有展示裸体和性行为的 ( nudity , saxual acts)&lt;/li&gt;
  &lt;li&gt;Racy,  不雅的行为, 有性暗示的, 比 Audit image 稍微好点 (saxually suggestive)&lt;/li&gt;
  &lt;li&gt;Gory, 血腥暴力, (blood, gore )&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;和品牌检测用的是一个API 调用, 也是使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;analyze_image&lt;/code&gt; 方法&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;这里的 feature type 是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;adult&lt;/code&gt;
调用检测 API 后返回的是对应的三个 boolean 值 (true/false) 和对应分数的 JSON 格式&lt;/li&gt;
  &lt;li&gt;isAdultContent and adultScore&lt;/li&gt;
  &lt;li&gt;isRacyContent and racyScore&lt;/li&gt;
  &lt;li&gt;isGoryContent and goryScore&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c&quot;&gt;# Select the visual feature(s) you want&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;remote_image_features&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;adult&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Call API with URL and features&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;detect_adult_results_remote&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;computervision_client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;analyze_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remote_image_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;remote_image_features&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;创建缩略图&quot;&gt;创建缩略图&lt;/h3&gt;

&lt;p&gt;提供一个本地或者网络的图片, 然后提交给 API, 然后保存回到本地
调用了 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;generate_thumbnail_in_stream&lt;/code&gt; 并提供了图片的长宽参数&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;这里用 AI 服务的价值是, 人工智能可以自动的按照图片中物体的位置和空白的比例来更好的做缩略图
    &lt;ul&gt;
      &lt;li&gt;最后一个参数标成 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;true&lt;/code&gt; 就可以使用智能缩略图功能
其他代码和前面的例子一样&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c&quot;&gt;# Generate a thumbnail from a local image&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;local_image_path_thumb&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Images/Faces.jpg&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;local_image_thumb&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;local_image_path_thumb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;rb&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Generating thumbnail from a local image...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Call the API with a local image, set the width/height if desired (pixels)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Returns a Generator object, a thumbnail image binary (list).&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;thumb_local&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;computervision_client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;generate_thumbnail_in_stream&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;local_image_thumb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Write the image binary to file&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;thumb_local.png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;wb&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;chunk&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;thumb_local&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;chunk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;从图片中获取文字---ocr&quot;&gt;从图片中获取文字 - OCR&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;注意: 从 2021 年 7 月 29 日开始, 手写文字识别和 OCR 已经不在考试范围内了&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;有几种技术&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;图片获取打印文字用 OCR API&lt;/li&gt;
  &lt;li&gt;图片或 PDF 中获取文字用 Read API&lt;/li&gt;
  &lt;li&gt;从 图片的表格或者 receipt 收据中获取文字需要 pre-build 一个 收据model,  用 Form Recognizer&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;方法和之前的类似, 用&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;recognize_printed_text_in_stream&lt;/code&gt; 进行流式读取图片中的打印文字&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;recognize_printed_text&lt;/code&gt; 一次性读取图片中的打印文字&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;read&lt;/code&gt; 读取手写文字&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;读取图片中的打印文字的示例代码&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;ocr_result_local&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;computervision_client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;recognize_printed_text_in_stream&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;local_image_printed_text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;region&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ocr_result_local&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;regions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lines&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Bounding box: {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bounding_box&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;word&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;words&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;word&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot; &quot;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;读取图片中的表格信息的示例代码&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;这里没有用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ComputerVisionClient&lt;/code&gt;, 而是用了另一个Python 的类库 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;FormRecognizerClient&lt;/code&gt; 来实现的
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;begin_recognize_content_from_url&lt;/code&gt; 方法用来读取表格&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;begin_recognize_receipts_from_url&lt;/code&gt; 方法用来读取收据&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;azure.core.exceptions&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ResourceNotFoundError&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;azure.ai.formrecognizer&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FormRecognizerClient&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;azure.ai.formrecognizer&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FormTrainingClient&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;azure.core.credentials&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AzureKeyCredential&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;enter your key here&amp;gt;&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;endpoint&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;enter your endpoint URL here&amp;gt;&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;form_recognizer_client&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FormRecognizerClient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endpoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AzureKeyCredential&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;form_training_client&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FormTrainingClient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endpoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AzureKeyCredential&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;formUrl&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;https://raw.githubusercontent.com/Azure/azure-sdk-for-python/master/sdk/formrecognizer/azure-ai&quot;&lt;/span&gt; \
          &lt;span class=&quot;s&quot;&gt;&quot;-formrecognizer/tests/sample_forms/forms/Form_1.jpg &quot;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;--------Recognizing form--------&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;poller&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;form_recognizer_client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;begin_recognize_content_from_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;formUrl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;poller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tables&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# page 1, table 1&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Table found on page {}:&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page_number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cell&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cells&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Cell text: {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cell&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Location: {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cell&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bounding_box&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Confidence score: {}&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cell&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;confidence&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;receiptUrl&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;https://raw.githubusercontent.com/Azure/azure-sdk-for-python/master/sdk/formrecognizer/azure-ai&quot;&lt;/span&gt; \
             &lt;span class=&quot;s&quot;&gt;&quot;-formrecognizer/tests/sample_forms/receipt/contoso-receipt.png &quot;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;--------Recognizing receipt--------&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;poller&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;form_recognizer_client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;begin_recognize_receipts_from_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;receiptUrl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;poller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;receipt&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;receipt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fields&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;items&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Items&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Receipt Items:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;items&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;enumerate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;field&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;...Item #{}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;item_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;item&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;items&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;items&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;......{}: {} has confidence {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;item_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;confidence&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;{}: {} has confidence {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;confidence&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;从图片中获取-面部信息-facial-infomation&quot;&gt;从图片中获取 面部信息 Facial Infomation&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://learn.microsoft.com/zh-cn/azure/cognitive-services/computer-vision/concept-face-detection&quot;&gt;官方文档&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;注意&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;为了支持我们负责任的 AI 原则，基于资格和使用标准对人脸服务访问进行限制。 人脸服务仅适用于 Microsoft 托管客户和合作伙伴。 使用人脸识别引入表单来申请访问。 有关详细信息，请参阅人脸受限访问页面。&lt;/li&gt;
  &lt;li&gt;人脸识别只有微软大客户和合作伙伴才可以用&lt;/li&gt;
  &lt;li&gt;要用还要填表格申请&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;2023 年 6 月 30 日之后，在这些功能被停用。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;要使用 Face API&lt;/li&gt;
  &lt;li&gt;Face detection可以识别
    &lt;ul&gt;
      &lt;li&gt;Age, 年龄&lt;/li&gt;
      &lt;li&gt;Blur, 污渍&lt;/li&gt;
      &lt;li&gt;Emotion, 情感&lt;/li&gt;
      &lt;li&gt;Exposure, 暴露程度&lt;/li&gt;
      &lt;li&gt;Facial hair, 面部毛发&lt;/li&gt;
      &lt;li&gt;Glasses, 眼镜&lt;/li&gt;
      &lt;li&gt;Hair, 头发&lt;/li&gt;
      &lt;li&gt;Head pose, 头部角度(3D)&lt;/li&gt;
      &lt;li&gt;Makeup, 化妆&lt;/li&gt;
      &lt;li&gt;Noise, 噪点&lt;/li&gt;
      &lt;li&gt;Occlusion, 遮挡&lt;/li&gt;
      &lt;li&gt;Smile, 微笑&lt;/li&gt;
      &lt;li&gt;口罩&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;在图片中辨别和匹配一张脸-face-api&quot;&gt;在图片中辨别和匹配一张脸 Face API&lt;/h3&gt;

&lt;p&gt;逻辑&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;先给一张单个脸的照片&lt;/li&gt;
  &lt;li&gt;再给一张多个脸的照片&lt;/li&gt;
  &lt;li&gt;再在多个脸的照片中匹配单个脸&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;使用了 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;FaceClient&lt;/code&gt; 类库&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;包含的方法有
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.face.detect_with_url&lt;/code&gt; 检测图片中的脸, 并把每个脸的数据返回&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.face.find_similar&lt;/code&gt; 在多个脸的数据中匹配某一个脸&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;asyncio&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;io&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;glob&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sys&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;time&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;uuid&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;requests&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib.parse&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urlparse&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;io&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BytesIO&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;PIL&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ImageDraw&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;azure.cognitiveservices.vision.face&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FaceClient&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;msrest.authentication&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CognitiveServicesCredentials&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;azure.cognitiveservices.vision.face.models&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TrainingStatusType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Person&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;subscription_key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;enter your key here&amp;gt;&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;endpoint&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;enter your endpoint URL here&amp;gt;&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Create an authenticated FaceClient.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;face_client&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FaceClient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endpoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CognitiveServicesCredentials&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subscription_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Detect a face in an image that contains a single face&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;single_face_image_url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;https://www.biography.com/.image/t_share/MTQ1MzAyNzYzOTgxNTE0NTEz/john-f-kennedy---mini&apos;&lt;/span&gt; \
                        &lt;span class=&quot;s&quot;&gt;&apos;-biography.jpg &apos;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;single_image_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;basename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;single_face_image_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# We use detection model 3 to get better performance.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;detected_faces&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;face_client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;face&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;detect_with_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;single_face_image_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;detection_model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;detection_03&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;detected_faces&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Exception&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;No face detected from image {}&apos;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;single_image_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Display the detected face ID in the first single-face image.&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Face IDs are used for comparison to faces (their IDs) detected in other images.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;==== Detect faces in an image ===&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;Detected face ID from&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;single_image_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;:&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;face&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;detected_faces&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;face&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;face_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Save this ID for use in Find Similar&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;first_image_face_ID&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;detected_faces&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;face_id&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;&apos;&apos;&apos;
Find a similar face
This example uses detected faces in a group photo to find a similar face using a single-faced image as query.
&apos;&apos;&apos;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;===== Detect the faces in an image that contains multiple faces =====&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Detect the faces in an image that contains multiple faces&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Each detected face gets assigned a new ID&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;multi_face_image_url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;http://www.historyplace.com/kennedy/president-family-portrait-closeup.jpg&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;multi_image_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;basename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;multi_face_image_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# We use detection model 3 to get better performance.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;detected_faces2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;face_client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;face&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;detect_with_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;multi_face_image_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;detection_model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;detection_03&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Search through faces detected in group image for the single face from first image.&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# First, create a list of the face IDs found in the second image.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;second_image_face_IDs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;face_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;detected_faces2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Next, find similar face IDs like the one detected in the first image.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;similar_faces&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;face_client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;face&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;find_similar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;face_id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;first_image_face_ID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;face_ids&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;second_image_face_IDs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;similar_faces&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;No similar faces found in&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;multi_image_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;.&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Print the details of the similar faces detected&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;Similar faces found in&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;multi_image_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;:&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;face&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;similar_faces&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;first_image_face_ID&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;face&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;face_id&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;# The similar face IDs of the single face image and the group image do not need to match,&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;# they are only used for identification purposes in each image.&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;# The similar faces are matched using the Cognitive Services algorithm in find_similar().&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;face_info&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;detected_faces2&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;face_id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;first_image_face_ID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;face_info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;  Face ID: &apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;first_image_face_ID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;  Face rectangle:&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;    Left: &apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;face_info&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;face_rectangle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;    Top: &apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;face_info&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;face_rectangle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;    Width: &apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;face_info&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;face_rectangle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;    Height: &apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;face_info&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;face_rectangle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;代码运行结果
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-13-020835.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;在训练的模型中识别出一张脸&quot;&gt;在训练的模型中识别出一张脸&lt;/h3&gt;

&lt;p&gt;逻辑&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;为三个人创建3 个 person group 的 Face AI 对象, 分别是 man, woman, children&lt;/li&gt;
  &lt;li&gt;为每个对象(每个人)导入 3 张照片进行训练&lt;/li&gt;
  &lt;li&gt;给一张多人照片, 然后分别识别是否有之前训练的三个人&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;使用了 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TrainingStatusType&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Person&lt;/code&gt; 和 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;FaceClient&lt;/code&gt; 类库&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;face_client.person_group.create&lt;/code&gt; 先创建一个组&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;face_client.person_group_person.create(PERSON_GROUP_ID, &quot;Woman&quot;)&lt;/code&gt; 在分别创建三个 person&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;face_client.person_group_person.add_face_from_stream&lt;/code&gt; 给每个person 加入他们的日常照片&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;face_client.person_group.train&lt;/code&gt; 开始训练&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;face_client.person_group.get_training_status&lt;/code&gt; 获取训练状态(成功或者失败)&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;face_client.face.detect_with_stream(image, detection_model=&apos;detection_03&apos;)&lt;/code&gt; 输入多人测试图片, 并检测图片中的人脸, 返回多个脸&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;face_client.face.identify(face_ids, PERSON_GROUP_ID)&lt;/code&gt; 把返回的脸和之前的组中的person 进行匹配&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/gottagetgit/AI102Files/blob/main/Computer_Vision/Extract_facial_information_from_images/Recognize%20faces.py&quot;&gt;源代码地址&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;代码运行结果
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-13-024535.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;获取面部的参数信息&quot;&gt;获取面部的参数信息&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Face detection可以识别
    &lt;ul&gt;
      &lt;li&gt;Age, 年龄&lt;/li&gt;
      &lt;li&gt;Blur, 污渍&lt;/li&gt;
      &lt;li&gt;Emotion, 情感&lt;/li&gt;
      &lt;li&gt;Exposure, 暴露程度&lt;/li&gt;
      &lt;li&gt;Facial hair, 面部毛发&lt;/li&gt;
      &lt;li&gt;Glasses, 眼镜&lt;/li&gt;
      &lt;li&gt;Hair, 头发&lt;/li&gt;
      &lt;li&gt;Head pose, 头部角度(3D)&lt;/li&gt;
      &lt;li&gt;Makeup, 化妆&lt;/li&gt;
      &lt;li&gt;Noise, 噪点&lt;/li&gt;
      &lt;li&gt;Occlusion, 遮挡&lt;/li&gt;
      &lt;li&gt;Smile, 微笑&lt;/li&gt;
      &lt;li&gt;口罩&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;代码通过 http request 的方式请求 Azure Face API
    &lt;ul&gt;
      &lt;li&gt;获取 age,gender,headPose,smile,facialHair,glasses,emotion 信息&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;requests&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;plt&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;PIL&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;matplotlib&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;patches&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;io&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BytesIO&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;json&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Call Config&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;subscription_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;face_api_url&lt;/span&gt;


&lt;span class=&quot;n&quot;&gt;image_path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;r&apos;/Computer_Vision/Extract_facial_information_from_images/CapFrame.jpg&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;image_data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;rb&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;subscription_key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;enter your key&amp;gt;&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;face_api_url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;place the API URL here&amp;gt;&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;Content-Type&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;application/octet-stream&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
           &lt;span class=&quot;s&quot;&gt;&apos;Ocp-Apim-Subscription-Key&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;subscription_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&apos;returnFaceId&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;true&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&apos;returnFaceLandmarks&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;true&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&apos;returnFaceAttributes&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;age,gender,headPose,smile,facialHair,glasses,emotion&apos;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requests&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;face_api_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;raise_for_status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;faces&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;faces&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;faces.json&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;w&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;faces_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dump&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;faces&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;faces_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;indent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sort_keys&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;代码运行结果保存在文件中
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-13-025726.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;用-custom-vision-自定义视觉-进行图片分类&quot;&gt;用 Custom Vision 自定义视觉 进行图片分类&lt;/h2&gt;
&lt;p&gt;使用 Azure 认知服务中的自定义视觉为特定域自定义和嵌入最先进的计算机视觉图像分析。构建顺畅的客户体验、优化制造流程、加速数字营销活动等。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;也是 Cumputer Vision, 只是可以更灵活的进行定制(customize)&lt;/li&gt;
  &lt;li&gt;custom vision 主要是会把标签打到图片上,  而不是从图片获取标签&lt;/li&gt;
  &lt;li&gt;定制场景
    &lt;ul&gt;
      &lt;li&gt;用自己的图片训练和设置自己的模型&lt;/li&gt;
      &lt;li&gt;模型可以部署到 edge 或 cloud&lt;/li&gt;
      &lt;li&gt;可以部署到本地, 有更大的安全和隐私保障&lt;/li&gt;
      &lt;li&gt;可以适用于不同的行业&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;分两个 model&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;trainning model
    &lt;ul&gt;
      &lt;li&gt;训练模型&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;prediction model
    &lt;ul&gt;
      &lt;li&gt;正式使用的模型 (预测模型)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;概念&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;iteration
    &lt;ul&gt;
      &lt;li&gt;一个训练好的模型实例就叫 一个 iteration&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;用-web-portal-训练-视觉分类模型-clasification-model&quot;&gt;用 web portal 训练 视觉分类模型 (Clasification Model)&lt;/h3&gt;

&lt;p&gt;实验场景:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;用两种植物的多张照片对模型进行训练&lt;/li&gt;
  &lt;li&gt;然后上传一种植物的一张图片, 让模型预测是那种植物&lt;/li&gt;
&lt;/ol&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;需要从 custom vision console 中的 overview 中的 Get Started 的连接进入 https://www.customvision.ai 进行配置&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;分为几个步骤&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;创建 project
        &lt;ul&gt;
          &lt;li&gt;project 类型分为
            &lt;ul&gt;
              &lt;li&gt;classification
                &lt;ul&gt;
                  &lt;li&gt;为图像分类 - 打tags
                    &lt;ul&gt;
                      &lt;li&gt;可以分为一个图片多个tag, 或者一个图片一个 tag&lt;/li&gt;
                    &lt;/ul&gt;
                  &lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;object detection
                &lt;ul&gt;
                  &lt;li&gt;检测图像中的对象&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;project 可以指定 domain, 比如 generial, food, landmarks, retail 等等&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;上传已经标注过 tag 的图片
        &lt;ul&gt;
          &lt;li&gt;分别上传 Hemlock 和 Japanese Cherry 的多张图片并打上标签&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;训练
        &lt;ul&gt;
          &lt;li&gt;点击训练按钮&lt;/li&gt;
          &lt;li&gt;训练完成的页面展示
            &lt;ul&gt;
              &lt;li&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-13-054315.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;测试
        &lt;ul&gt;
          &lt;li&gt;点击测试按钮, 上传一张测试照片, 然后让模型预测是哪种植物&lt;/li&gt;
          &lt;li&gt;测试结果
            &lt;ul&gt;
              &lt;li&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-13-054649.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;publish
        &lt;ul&gt;
          &lt;li&gt;点击publish, 让预测模型对外提供服务&lt;/li&gt;
          &lt;li&gt;对外服务的预测模型地址展示
            &lt;ul&gt;
              &lt;li&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-13-054813.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;通过命令行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;curl&lt;/code&gt; 来调用预测模型的 API 来测试
            &lt;ul&gt;
              &lt;li&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-13-060025.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;用-python-训练-视觉分类模型-clasification-model&quot;&gt;用 Python 训练 视觉分类模型 (Clasification Model)&lt;/h3&gt;

&lt;p&gt;流程和 web portal 一样, 只不过是通过代买实现&lt;/p&gt;

&lt;p&gt;代码使用了多个 类库&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CustomVisionTrainingClient&lt;/code&gt;  训练库&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CustomVisionPredictionClient&lt;/code&gt; 预测库&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ImageFileCreateBatch&lt;/code&gt; 批量建图&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ImageFileCreateEntry&lt;/code&gt; 图片实体&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;azure.cognitiveservices.vision.customvision.training&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CustomVisionTrainingClient&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;azure.cognitiveservices.vision.customvision.prediction&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CustomVisionPredictionClient&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;azure.cognitiveservices.vision.customvision.training.models&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ImageFileCreateBatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ImageFileCreateEntry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Region&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;msrest.authentication&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ApiKeyCredentials&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;time&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Replace with valid values&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ENDPOINT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;Your endpoint&amp;gt;&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;training_key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;Your training key&amp;gt;&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;prediction_key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;Your prediction key&amp;gt;&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;prediction_resource_id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;Your prediction resource ID&amp;gt;&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;credentials&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ApiKeyCredentials&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;in_headers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Training-key&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;training_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;trainer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CustomVisionTrainingClient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ENDPOINT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;credentials&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;prediction_credentials&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ApiKeyCredentials&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;in_headers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Prediction-key&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prediction_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;predictor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CustomVisionPredictionClient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ENDPOINT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prediction_credentials&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;publish_iteration_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;classifyModel&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;credentials&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ApiKeyCredentials&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;in_headers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Training-key&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;training_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;trainer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CustomVisionTrainingClient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ENDPOINT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;credentials&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Create a new project&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Creating project...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;project&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trainer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_project&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;My New Project&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Make two tags in the new project&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;hemlock_tag&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trainer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_tag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Hemlock&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cherry_tag&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trainer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_tag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Japanese Cherry&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;base_image_location&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;Your image location&amp;gt;&quot;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Adding images...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;image_list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image_num&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;hemlock_{}.jpg&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image_num&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;base_image_location&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;images/Hemlock/&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;rb&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image_contents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;image_list&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ImageFileCreateEntry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;contents&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image_contents&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tag_ids&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hemlock_tag&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image_num&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;japanese_cherry_{}.jpg&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image_num&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;base_image_location&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;images/Japanese Cherry/&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;rb&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image_contents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;image_list&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ImageFileCreateEntry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;contents&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image_contents&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tag_ids&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cherry_tag&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;upload_result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trainer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_images_from_files&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ImageFileCreateBatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;images&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;upload_result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;is_batch_successful&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Image batch upload failed.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;upload_result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;images&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Image status: &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Training...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;iteration&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trainer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train_project&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;iteration&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Completed&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;iteration&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trainer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_iteration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;iteration&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Training status: &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;iteration&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sleep&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# The iteration is now trained. Publish it to the project endpoint&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;trainer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;publish_iteration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;iteration&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;publish_iteration_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prediction_resource_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Done!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Now there is a trained endpoint that can be used to make a prediction&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;prediction_credentials&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ApiKeyCredentials&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;in_headers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Prediction-key&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prediction_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;predictor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CustomVisionPredictionClient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ENDPOINT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prediction_credentials&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;base_image_location&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;images/Test/test_image.jpg&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;rb&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image_contents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;results&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;predictor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;classify_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;publish_iteration_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image_contents&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# Display the results.&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prediction&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;predictions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prediction&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tag_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
              &lt;span class=&quot;s&quot;&gt;&quot;: {0:.2f}&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prediction&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;probability&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;代码运行结果
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-13-055754.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;用-object-detection-with-custom-version-自定义视觉-进行图片中的对象检测&quot;&gt;用 Object Detection with Custom Version 自定义视觉 进行图片中的对象检测&lt;/h2&gt;

&lt;p&gt;对图片中的内容(特定方框的 4 个像素坐标)打标签&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;可以通过 web Portal 或者 SDK API 对 custom object detection model 进行训练&lt;/li&gt;
  &lt;li&gt;管理模型 iteration&lt;/li&gt;
  &lt;li&gt;把模型发布, 并部署到容器中&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;用-web-portal-来训练和使用-oblect-detection-model&quot;&gt;用 web portal 来训练和使用 Oblect Detection Model&lt;/h3&gt;

&lt;p&gt;实验场景:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;分别用剪子和叉子的多张照片对模型进行训练
    &lt;ol&gt;
      &lt;li&gt;每个照片都会标注照片中的物体的四个点位的坐标&lt;/li&gt;
      &lt;li&gt;并提供一个 tag 名字 fork/scissors&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;然后上传一张叉子的图片, 让模型给出是什么物体, 以及 4 个点位的坐标&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;实验步骤&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;进入 https://www.customvision.ai/projects&lt;/li&gt;
  &lt;li&gt;创建一个新的project
    &lt;ol&gt;
      &lt;li&gt;类型选 “Object Detection”&lt;/li&gt;
      &lt;li&gt;domain 选 “generial”&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;分别上传剪子和叉子的照片, 并给特定区域打上标签&lt;/li&gt;
  &lt;li&gt;点击训练按钮
    &lt;ol&gt;
      &lt;li&gt;训练结果&lt;/li&gt;
      &lt;li&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-14-014926.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;完成后, 点击测试, 上传一个测试的叉子照片, 然后看看结果.
    &lt;ol&gt;
      &lt;li&gt;测试结果&lt;/li&gt;
      &lt;li&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-14-015003.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;发布这个 API, 可以让外部通过 API 访问&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;用-python-来训练和使用-object-detection-model&quot;&gt;用 python 来训练和使用 object detection model&lt;/h3&gt;

&lt;p&gt;python 代码 的流程和 web portal 一样, 只是用 代码来实现&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;azure.cognitiveservices.vision.customvision.training&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CustomVisionTrainingClient&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;azure.cognitiveservices.vision.customvision.prediction&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CustomVisionPredictionClient&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;azure.cognitiveservices.vision.customvision.training.models&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ImageFileCreateBatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ImageFileCreateEntry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; \
    &lt;span class=&quot;n&quot;&gt;Region&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;msrest.authentication&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ApiKeyCredentials&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;time&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Replace with valid values&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ENDPOINT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;your API endpoint&amp;gt;&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;training_key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;your training key&amp;gt;&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;prediction_key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;your prediction key&amp;gt;&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;prediction_resource_id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;your prediction resource id&amp;gt;&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;credentials&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ApiKeyCredentials&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;in_headers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Training-key&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;training_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;trainer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CustomVisionTrainingClient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ENDPOINT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;credentials&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;prediction_credentials&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ApiKeyCredentials&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;in_headers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Prediction-key&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prediction_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;predictor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CustomVisionPredictionClient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ENDPOINT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prediction_credentials&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;publish_iteration_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;detectModel&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Find the object detection domain&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;obj_detection_domain&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;domain&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;domain&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trainer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_domains&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;domain&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;ObjectDetection&quot;&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;domain&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;General&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Create a new project&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Creating project...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;project&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trainer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_project&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;My Detection Project&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;domain_id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj_detection_domain&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Make two tags in the new project&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fork_tag&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trainer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_tag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;fork&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;scissors_tag&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trainer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_tag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;scissors&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;fork_image_regions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;fork_1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.145833328&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.3509314&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5894608&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.238562092&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;fork_2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.294117659&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.216944471&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.534313738&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5980392&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;fork_3&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.09191177&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0682516545&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.757352948&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.6143791&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;fork_4&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.254901975&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.185898721&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5232843&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.594771266&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;fork_5&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.2365196&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.128709182&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5845588&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.71405226&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;fork_6&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.115196079&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.133611143&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.676470637&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.6993464&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;fork_7&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.164215669&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.31008172&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.767156839&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.410130739&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;fork_8&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.118872553&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.318251669&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.817401946&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.225490168&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;fork_9&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.18259804&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.2136765&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.6335784&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.643790841&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;fork_10&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.05269608&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.282303959&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.8088235&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.452614367&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;fork_11&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.05759804&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0894935&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.9007353&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.3251634&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;fork_12&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.3345588&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.07315363&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.375&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.9150327&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;fork_13&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.269607842&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.194068655&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.4093137&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.6732026&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;fork_14&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.143382356&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.218578458&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.7977941&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.295751631&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;fork_15&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.19240196&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0633497&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5710784&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.8398692&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;fork_16&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.140931368&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.480016381&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.6838235&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.240196079&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;fork_17&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.305147052&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.2512582&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.4791667&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5408496&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;fork_18&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.234068632&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.445702642&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.6127451&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.344771236&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;fork_19&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.219362751&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.141781077&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5919118&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.6683006&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;fork_20&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.180147052&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.239820287&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.6887255&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.235294119&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;scissors_image_regions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;scissors_1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.4007353&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.194068655&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.259803921&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.6617647&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;scissors_2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.426470578&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.185898721&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.172794119&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5539216&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;scissors_3&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.289215684&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.259428144&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.403186262&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.421568632&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;scissors_4&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.343137264&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.105833367&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.332107842&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.8055556&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;scissors_5&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.3125&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.09766343&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.435049027&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.71405226&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;scissors_6&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.379901975&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.24308826&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.32107842&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5718954&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;scissors_7&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.341911763&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.20714055&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.3137255&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.6356209&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;scissors_8&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.231617644&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.08459154&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.504901946&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.8480392&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;scissors_9&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.170343131&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.332957536&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.767156839&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.403594762&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;scissors_10&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.204656869&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.120539248&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5245098&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.743464053&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;scissors_11&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.05514706&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.159754932&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.799019635&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.730392158&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;scissors_12&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.265931368&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.169558853&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5061275&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.606209159&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;scissors_13&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.241421565&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.184264734&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.448529422&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.6830065&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;scissors_14&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.05759804&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.05027781&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.75&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.882352948&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;scissors_15&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.191176474&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.169558853&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.6936275&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.6748366&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;scissors_16&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.1004902&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.279036&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.6911765&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.477124184&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;scissors_17&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.2720588&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.131977156&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.4987745&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.6911765&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;scissors_18&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.180147052&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.112369314&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.6262255&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.6666667&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;scissors_19&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.333333343&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0274019931&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.443627447&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.852941155&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;scissors_20&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.158088237&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.04047389&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.6691176&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.843137264&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Update this with the path to where you downloaded the images.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;base_image_location&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;path to directory&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Go through the data table above and create the images&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Adding images...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;tagged_images_with_regions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fork_image_regions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fork_image_regions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;regions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Region&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tag_id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fork_tag&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;base_image_location&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;images/fork/&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;.jpg&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;rb&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image_contents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;tagged_images_with_regions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;ImageFileCreateEntry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;contents&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image_contents&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;regions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;regions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scissors_image_regions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scissors_image_regions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;regions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Region&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tag_id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scissors_tag&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;base_image_location&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;images/scissors/&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;.jpg&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;rb&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image_contents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;tagged_images_with_regions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;ImageFileCreateEntry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;contents&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image_contents&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;regions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;regions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;upload_result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trainer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_images_from_files&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ImageFileCreateBatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;images&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tagged_images_with_regions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;upload_result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;is_batch_successful&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Image batch upload failed.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;upload_result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;images&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Image status: &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Training...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;iteration&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trainer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train_project&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;iteration&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Completed&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;iteration&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trainer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_iteration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;iteration&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Training status: &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;iteration&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sleep&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# The iteration is now trained. Publish it to the project endpoint&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;trainer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;publish_iteration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;iteration&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;publish_iteration_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prediction_resource_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Done!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Now there is a trained endpoint that can be used to make a prediction&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Open the sample image and get back the prediction results.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;base_image_location&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;images/Test/test_od_image.jpg&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;rb&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;results&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;predictor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;detect_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;publish_iteration_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Display the results.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prediction&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;predictions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prediction&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tag_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;: {0:.2f}&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;% &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;bbox.left = {1:.2f}, bbox.top = {2:.2f}, bbox.width = {3:.2f}, bbox.height = {4:.2f}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;prediction&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;probability&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prediction&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bounding_box&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prediction&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bounding_box&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;prediction&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bounding_box&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prediction&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bounding_box&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;用-video-indexer-来分析视频&quot;&gt;用 video indexer 来分析视频&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://vi.microsoft.com/zh-Hans/learn&quot;&gt;官方文档&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;上传一个视频, 然后通过 AI 来获取视频的一些 insight&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Deep search
    &lt;ul&gt;
      &lt;li&gt;可以把视频中说的话, 出现的脸进行索引, 然后通过搜索找到视频中的一个画面&lt;/li&gt;
      &lt;li&gt;可以获取的内容包括
        &lt;ul&gt;
          &lt;li&gt;Face detection  面部&lt;/li&gt;
          &lt;li&gt;celebrity identification  名人&lt;/li&gt;
          &lt;li&gt;品牌&lt;/li&gt;
          &lt;li&gt;物体&lt;/li&gt;
          &lt;li&gt;insight&lt;/li&gt;
          &lt;li&gt;文字&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;辅助功能
    &lt;ul&gt;
      &lt;li&gt;提取视频中人物和他们说的话, 然后把话在视频中叠加到说话人上, 方便听觉障碍的人可以快速理解&lt;/li&gt;
      &lt;li&gt;可以做实时翻译&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;参与度
    &lt;ul&gt;
      &lt;li&gt;一段教育视频前 30 分钟讲解球体，后 30 分钟讲解棱锥。如果从 30 分钟时的标记开始定位视频，那么阅读棱锥的学生会受益更多。同样，视频推荐系统可以利用视频见解来更好地决定应该向用户推荐哪个视频。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;变现
    &lt;ul&gt;
      &lt;li&gt;通过理解视频内容, 然后可以在合适的位置插入对应的广告来获取变现能力&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;video-indexer-in-action&quot;&gt;video indexer in action&lt;/h3&gt;

&lt;p&gt;video indexer 有自己的 &lt;a href=&quot;https://www.videoindexer.ai/media/library&quot;&gt;web portal&lt;/a&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;通过 AAD 账户登录&lt;/li&gt;
  &lt;li&gt;上传视频 (https://aka.ms/responsible-ai-video)
    &lt;ol&gt;
      &lt;li&gt;提供视频名称, 语言种类, 是否是privacy 还是 public&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;提交后, 开始对视频进行 indexing&lt;/li&gt;
  &lt;li&gt;视频index 成功后, 点击该视频
    &lt;ol&gt;
      &lt;li&gt;找到了 26 个人, 和对应的名字(有些事unknow) , 对应在视频中出现的时间点, 视频中的占比&lt;/li&gt;
      &lt;li&gt;找到了8 个topic
        &lt;ol&gt;
          &lt;li&gt;教育&lt;/li&gt;
          &lt;li&gt;科技&lt;/li&gt;
          &lt;li&gt;商业&lt;/li&gt;
          &lt;li&gt;…&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;1 个audoi&lt;/li&gt;
      &lt;li&gt;27 个 keyword&lt;/li&gt;
      &lt;li&gt;55 个 labels&lt;/li&gt;
      &lt;li&gt;2 个 entity (品牌)
        &lt;ol&gt;
          &lt;li&gt;Eric Horvitz&lt;/li&gt;
          &lt;li&gt;Microsoft&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;30 个场景 (拍视频的段场景)
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-14-065921.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;搜索 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Microsoft&lt;/code&gt; 可以找到所有和视频相关的元素&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;视频中出现的文字&lt;/li&gt;
  &lt;li&gt;品牌&lt;/li&gt;
  &lt;li&gt;讨论的话题&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-14-070039.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;附加功能&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;可以把带有insight 的视频内容通过 HTML 源代码的 embed 形式提供
    &lt;ul&gt;
      &lt;li&gt;Share 的地址 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://www.videoindexer.ai/accounts/1771eab4-fb17-463d-97f5-aa30eceaee38/videos/9448d2362b/&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;Enbed 的地址 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://www.videoindexer.ai/embed/insights/1771eab4-fb17-463d-97f5-aa30eceaee38/9448d2362b/?accessToken=&amp;lt;your own token&amp;gt;&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;可以把视频中的insight 以 JSON 的格式下载&lt;/li&gt;
  &lt;li&gt;可以查看整个视频中的按时间顺序的 insight 列表, 并且可以按照不同的分类对内容进行筛选&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;实现自然语言处理-natural-language-processing-nlp&quot;&gt;实现自然语言处理 Natural Language Processing (NLP)&lt;/h2&gt;

&lt;p&gt;实现任何计算机之间的自然语言处理, 包括&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Text Analytics&lt;/li&gt;
  &lt;li&gt;Speech Service&lt;/li&gt;
  &lt;li&gt;Translation&lt;/li&gt;
  &lt;li&gt;创建自己的语言模型  LUIS , 并进行优化和使用&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;文字处理-text-analytics&quot;&gt;文字处理 Text Analytics&lt;/h3&gt;

&lt;p&gt;内容包括了&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;处理 关键字/短语 抽取 (key phrases)&lt;/li&gt;
  &lt;li&gt;处理重要实体 (人, 地址, URL 等等)&lt;/li&gt;
  &lt;li&gt;处理 态度 (sentiment)&lt;/li&gt;
  &lt;li&gt;探测文本中使用的是什么语言&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;key-phrases-extraction-关键字短语-抽取&quot;&gt;Key Phrases extraction 关键字/短语 抽取&lt;/h4&gt;
&lt;p&gt;&lt;a href=&quot;https://learn.microsoft.com/en-us/azure/cognitive-services/language-service/key-phrase-extraction/overview&quot;&gt;官方文档&lt;/a&gt;
&lt;a href=&quot;https://learn.microsoft.com/en-us/rest/api/cognitiveservices-textanalytics/3.0/key-phrases/key-phrases?tabs=HTTP&quot;&gt;API 文档&lt;/a&gt;
&lt;a href=&quot;https://learn.microsoft.com/zh-cn/azure/cognitive-services/language-service/key-phrase-extraction/language-support&quot;&gt;支持的语言类型&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;识别文字中的重要短语&lt;/li&gt;
  &lt;li&gt;使用关键短语提取来快速识别文本中的主要概念。例如，在“食物很美味，工作人员很棒”的文本中，关键短语提取将返回主要主题：“食物”和“很棒的员工”。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;流程&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Portal 中 创建一个Azure Cognitive Service 的 Language Service
    &lt;ul&gt;
      &lt;li&gt;默认的功能包含了
        &lt;ul&gt;
          &lt;li&gt;Sentiment analysis&lt;/li&gt;
          &lt;li&gt;Key phrase extraction&lt;/li&gt;
          &lt;li&gt;Pre-built question answering&lt;/li&gt;
          &lt;li&gt;Conversational language understanding&lt;/li&gt;
          &lt;li&gt;Named entity recognition&lt;/li&gt;
          &lt;li&gt;Text Summarization&lt;/li&gt;
          &lt;li&gt;Text analytics for Health&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;可选的功能包括:
        &lt;ul&gt;
          &lt;li&gt;Custom question answering&lt;/li&gt;
          &lt;li&gt;Custom text classification &amp;amp; Custom named entity recognition&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;使用REST API或C#、Java、JavaScript和Python的客户端库创建请求。您还可以使用批处理请求发送异步调用，将多个功能的API请求合并到单个调用中。&lt;/li&gt;
  &lt;li&gt;将包含您的数据的请求作为原始非结构化文本发送。您的密钥和端点将用于身份验证。&lt;/li&gt;
  &lt;li&gt;在本地流式传输或存储响应。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;代码使用了 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TextAnalyticsClient&lt;/code&gt; 这个类库&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;代码逻辑是把 4 种语言做成一个字典, 发给文字分析服务
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;response = client.key_phrases(documents=documents)&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;然后在把结果展示出来&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;azure.cognitiveservices.language.textanalytics&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TextAnalyticsClient&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;msrest.authentication&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CognitiveServicesCredentials&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# variables to store subscription key and root URL for the Cognitive Service resource&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;subscription_key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;YourKey&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;endpoint&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;YourEndpoint&quot;&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;authenticateclient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;credentials&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CognitiveServicesCredentials&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subscription_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;text_analytics_client&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TextAnalyticsClient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endpoint&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endpoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;credentials&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;credentials&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;text_analytics_client&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;key_phrases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;authenticateclient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;documents&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;language&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;ja&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;猫は幸せ&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;language&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;de&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
             &lt;span class=&quot;s&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Fahrt nach Stuttgart und dann zum Hotel zu Fu.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;3&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;language&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;en&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
             &lt;span class=&quot;s&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;My cat might need to see a veterinarian.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;4&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;language&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;es&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;A mi me encanta el fútbol!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;document&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;documents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
                &lt;span class=&quot;s&quot;&gt;&quot;Asking key-phrases on &apos;{}&apos; (id: {})&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;text&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;id&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key_phrases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;documents&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;documents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;document&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;documents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Document Id: &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Key Phrases:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;phrase&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key_phrases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\t\t&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;phrase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;except&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Encountered exception. {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;


&lt;span class=&quot;n&quot;&gt;key_phrases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;代码运行结果
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-15-012405.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;英文结果
    &lt;ul&gt;
      &lt;li&gt;从 “My cat might need to see a veterinarian.” 提取了&lt;/li&gt;
      &lt;li&gt;cat 猫&lt;/li&gt;
      &lt;li&gt;veterinarian 兽医&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;entity-information-extract-抽取-文字中的实体信息&quot;&gt;Entity information extract 抽取 文字中的实体信息&lt;/h4&gt;

&lt;p&gt;Entity 的概念: 就比如在 wikipedia 中的一段文字, 有些文字有链接, 这些文字往往有更明确的解释, 可以理解为 entity&lt;/p&gt;

&lt;p&gt;这里的代码是用了 Rest API 直接调用&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;将2种语言的句子组成一个字典&lt;/li&gt;
  &lt;li&gt;将字典发送给 endpint , 并获取结果
    &lt;ul&gt;
      &lt;li&gt;endpoint 是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://dl-language-service-1.cognitiveservices.azure.com/text/analytics/v2.1/entities&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;response = requests.post(entities_url, headers=headers, json=documents)&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;将结果打印&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pip._vendor&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requests&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# pprint is used to format the JSON response&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pprint&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pprint&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# variables to store subscription key and root URL for the Cognitive Service resource&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;subscription_key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;a3c9bca3107644108def6f2dd02822d2&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;endpoint&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;https://dl-language-service-1.cognitiveservices.azure.com/&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# append the Text Analytics endpoint information to the URL&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;entities_url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;endpoint&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/text/analytics/v2.1/entities&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# variable to store a JSON formatted document that contains two entries in a JSON array.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;documents&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;documents&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;language&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;en&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
     &lt;span class=&quot;s&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Microsoft was founded by Bill Gates and Paul Allen on April 4, 1975, to develop and sell &quot;&lt;/span&gt;
             &lt;span class=&quot;s&quot;&gt;&quot;BASIC interpreters for the Altair 8800.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;language&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;es&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
     &lt;span class=&quot;s&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;La sede principal de Microsoft se encuentra en la ciudad de Redmond, a 21 kilómetros de &quot;&lt;/span&gt;
             &lt;span class=&quot;s&quot;&gt;&quot;Seattle.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;]}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Setup the header information for the REST request passing in the subscription key&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Ocp-Apim-Subscription-Key&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;subscription_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Build the REST request by passing in the complete URL, header information for authentication, and the JSON document&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requests&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entities_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;documents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Create a variable to store the results that are returned from the REST request&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;entities&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Output the result using pprint.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pprint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entities&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;下面是输出的json结果&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;分析出了以下 entity 的名字, 类型, 和 对应的 wikipedia 的链接
    &lt;ul&gt;
      &lt;li&gt;比尔盖茨&lt;/li&gt;
      &lt;li&gt;微软&lt;/li&gt;
      &lt;li&gt;Paul Allen&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;documents&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;[{&apos;entities&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;[{&apos;bingId&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;a093e9b9-90f5-a3d5-c4b8-5855e1b01f85&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;matches&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;[{&apos;entityTypeScore&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;1.0,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;length&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;9,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;offset&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;text&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Microsoft&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaScore&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.5080587142195991&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;name&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Microsoft&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;type&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Organization&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaId&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Microsoft&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaLanguage&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;en&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaUrl&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;https://en.wikipedia.org/wiki/Microsoft&apos;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                             &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;bingId&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;0d47c987-0042-5576-15e8-97af601614fa&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;matches&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;[{&apos;entityTypeScore&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.67,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;length&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;10,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;offset&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;25,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;text&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Bill&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;Gates&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaScore&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.5601095924849657&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;name&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Bill&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;Gates&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;type&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Person&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaId&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Bill&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;Gates&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaLanguage&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;en&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaUrl&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;https://en.wikipedia.org/wiki/Bill_Gates&apos;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                             &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;bingId&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;df2c4376-9923-6a54-893f-2ee5a5badbc7&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;matches&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;[{&apos;entityTypeScore&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.81,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;length&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;10,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;offset&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;40,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;text&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Paul&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;Allen&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaScore&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.5647133956039234&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;name&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Paul&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;Allen&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;type&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Person&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaId&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Paul&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;Allen&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaLanguage&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;en&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaUrl&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;https://en.wikipedia.org/wiki/Paul_Allen&apos;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                             &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;bingId&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;52535f87-235e-b513-54fe-c03e4233ac6e&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;matches&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;[{&apos;length&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;7,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;offset&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;54,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;text&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;April&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;4&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaScore&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.34538928435757743&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;name&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;April&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;type&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Other&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaId&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;April&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaLanguage&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;en&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaUrl&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;https://en.wikipedia.org/wiki/April_&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                             &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;matches&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;[{&apos;entityTypeScore&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.8,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;length&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;13,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;offset&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;54,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;text&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;April&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;4,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;1975&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;name&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;April&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1975&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;subType&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Date&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;type&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;DateTime&apos;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                             &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;bingId&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;5b16443d-501c-58f3-352e-611bbe75aa6e&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;matches&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;[{&apos;length&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;5,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;offset&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;89,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;text&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;BASIC&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaScore&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.313848923908594&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;name&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;BASIC&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;type&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Other&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaId&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;BASIC&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaLanguage&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;en&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaUrl&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;https://en.wikipedia.org/wiki/BASIC&apos;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                             &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;bingId&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;7216c654-3779-68a2-c7b7-12ff3dad5606&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;matches&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;[{&apos;length&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;11,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;offset&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;116,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;text&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Altair&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;8800&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaScore&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.8690828819485741&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;name&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Altair&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8800&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;type&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Other&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaId&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Altair&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8800&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaLanguage&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;en&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaUrl&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;https://en.wikipedia.org/wiki/Altair_&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8800&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                             &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;matches&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;[{&apos;entityTypeScore&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.8,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;length&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;4,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;offset&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;123,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;text&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;8800&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;name&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8800&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;subType&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Number&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;type&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Quantity&apos;}],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;id&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
               &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;entities&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;[{&apos;bingId&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;a093e9b9-90f5-a3d5-c4b8-5855e1b01f85&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;matches&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;[{&apos;length&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;9,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;offset&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;21,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;text&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Microsoft&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaScore&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.3868553907750074&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;name&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Microsoft&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;type&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Organization&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaId&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Microsoft&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaLanguage&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;es&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaUrl&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;https://es.wikipedia.org/wiki/Microsoft&apos;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                             &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;bingId&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;8769d4c0-b645-70ac-03ec-6eebabf6d26e&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;matches&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;[{&apos;length&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;7,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;offset&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;60,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;text&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Redmond&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaScore&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.4737390069279388&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;name&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Redmond&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;(Washington)&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;type&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Location&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaId&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Redmond&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;(Washington)&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaLanguage&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;es&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaUrl&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;https://es.wikipedia.org/wiki/Redmond_(Washington)&apos;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                             &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;matches&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;[{&apos;entityTypeScore&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.8,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;length&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;13,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;offset&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;71,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;text&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;21&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;kilómetros&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;name&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;kilómetros&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;subType&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Dimension&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;type&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Quantity&apos;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                             &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;bingId&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;5fbba6b8-85e1-4d41-9444-d9055436e473&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;matches&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;[{&apos;length&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;7,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;offset&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;88,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;text&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Seattle&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                           &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaScore&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.34624433748176875&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;name&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Seattle&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;type&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Location&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaId&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Seattle&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaLanguage&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;es&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;wikipediaUrl&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;https://es.wikipedia.org/wiki/Seattle&apos;}],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;id&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;}],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
 &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;errors&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;下面是一段 .Net 代码的类似的输出结果
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-15-015326.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;抽取文字中的-sentiment-观点情感-信息&quot;&gt;抽取文字中的 sentiment (观点/情感) 信息&lt;/h4&gt;

&lt;p&gt;sentiment 主要包含三种结果&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;positive 积极的&lt;/li&gt;
  &lt;li&gt;nagitave 消极的&lt;/li&gt;
  &lt;li&gt;neutral 中等的&lt;/li&gt;
  &lt;li&gt;结果的数字打分是 0-1, 越大越好&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;代码发送2 段不同语言的句子给到 sentiment API 和&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;endpoint &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://dl-language-service-1.cognitiveservices.azure.com/text/analytics/v3.0/sentiment&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;requests&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# pprint is used to format the JSON response&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pprint&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pprint&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;subscription_key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;a3c9bca3107644108def6f2dd02822d2&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;endpoint&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;https://dl-language-service-1.cognitiveservices.azure.com/&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;sentiment_url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;endpoint&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/text/analytics/v3.0/sentiment&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;documents&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;documents&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;language&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;en&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
     &lt;span class=&quot;s&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;I really enjoy the new XBox One S. It has a clean look, it has 4K/HDR resolution and it is affordable.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;language&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;es&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
     &lt;span class=&quot;s&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Este ha sido un dia terrible, llegué tarde al trabajo debido a un accidente automobilistico.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;]}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Ocp-Apim-Subscription-Key&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;subscription_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requests&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sentiment_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;documents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;sentiments&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pprint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sentiments&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;返回的json 内容如下&lt;/p&gt;
&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;documents&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;[{&apos;confidenceScores&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;{&apos;negative&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.0,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                     &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;neutral&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.01,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                     &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;positive&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.99&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;id&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;sentences&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;confidenceScores&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;{&apos;negative&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.0,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                                    &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;neutral&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.01,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                                    &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;positive&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.99&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                               &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;length&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;35&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                               &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;offset&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                               &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;sentiment&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;positive&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                               &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;text&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;I&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;really&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;enjoy&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;the&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;XBox&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;One&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;S.&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;}&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                              &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;confidenceScores&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;{&apos;negative&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.0,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                                    &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;neutral&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.59,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                                    &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;positive&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                               &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;length&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;67&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                               &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;offset&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;35&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                               &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;sentiment&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;neutral&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                               &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;text&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;It&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;has&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;clean&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;look&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;has&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;K/HDR&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                       &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;resolution&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;and&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;is&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;affordable.&apos;}&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;sentiment&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;positive&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;warnings&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
               &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;confidenceScores&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;{&apos;negative&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;1.0,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                     &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;neutral&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.0,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                     &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;positive&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;id&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;sentences&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;confidenceScores&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;{&apos;negative&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;1.0,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                                    &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;neutral&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.0,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                                    &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;positive&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                               &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;length&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;92&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                               &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;offset&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                               &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;sentiment&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;negative&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                               &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;text&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Este&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;ha&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;sido&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;un&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;dia&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;terrible&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;llegué&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                       &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;tarde&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;al&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;trabajo&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;debido&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;un&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;accidente&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                       &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;automobilistico.&apos;}&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;sentiment&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;negative&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;warnings&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;}],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
 &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;errors&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
 &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;modelVersion&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2022-11-01&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h4 id=&quot;detect-the-language-used-in-text-检测文本用了什么语言&quot;&gt;detect the language used in text 检测文本用了什么语言&lt;/h4&gt;

&lt;p&gt;检测语言类型需要发送文字信息到 lanugage API&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;endpoint &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://dl-language-service-1.cognitiveservices.azure.com/text/analytics/v3.0/languages&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;把多段不同语言的文字放到字典中发送给 endpoint&lt;/li&gt;
  &lt;li&gt;打印Json返回结果
    &lt;ul&gt;
      &lt;li&gt;结果是语言的 iso 名称, 名称, 和信任值(0-1)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;requests&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# pprint is used to format the JSON response&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pprint&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pprint&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;subscription_key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;a3c9bca3107644108def6f2dd02822d2&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;endpoint&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;https://dl-language-service-1.cognitiveservices.azure.com/&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;language_api_url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;endpoint&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/text/analytics/v3.0/languages&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;documents&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;documents&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;This is a document written in English.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Este es un document escrito en Español.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;3&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;这是一个用中文写的文件&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;]}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Ocp-Apim-Subscription-Key&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;subscription_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requests&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;language_api_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;documents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;languages&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pprint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;languages&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;返回的json 结果&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;documents&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;[{&apos;detectedLanguage&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;{&apos;confidenceScore&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;0.99,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                     &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;iso6391Name&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;en&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                     &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;name&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;English&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;id&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;warnings&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
               &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;detectedLanguage&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;{&apos;confidenceScore&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;1.0,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                     &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;iso6391Name&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;es&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                     &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;name&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Spanish&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;id&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;warnings&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
               &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;detectedLanguage&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;{&apos;confidenceScore&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;1.0,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                     &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;iso6391Name&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;zh_chs&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                                     &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;name&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;Chinese_Simplified&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;id&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;warnings&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;}],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
 &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;errors&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
 &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;modelVersion&apos;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2022-10-01&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;speech-service-语音---文字互转&quot;&gt;Speech Service (语音 - 文字互转)&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://azure.microsoft.com/en-us/products/cognitive-services/speech-services&quot;&gt;官方介绍&lt;/a&gt;
&lt;a href=&quot;https://learn.microsoft.com/en-us/azure/cognitive-services/speech-service/overview&quot;&gt;说明文档&lt;/a&gt;
&lt;a href=&quot;https://learn.microsoft.com/en-us/azure/cognitive-services/speech-service/language-support?tabs=tts&quot;&gt;支持的语言&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;需要先安装 认知语音库&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c&quot;&gt;# pip install azure-cognitiveservices-speech&lt;/span&gt;
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple azure-cognitiveservices-speech
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;包含的 features&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;speech to text
    &lt;ul&gt;
      &lt;li&gt;说的话转成文字&lt;/li&gt;
      &lt;li&gt;场景:
        &lt;ul&gt;
          &lt;li&gt;会议记录&lt;/li&gt;
          &lt;li&gt;实时翻译&lt;/li&gt;
          &lt;li&gt;语音助手&lt;/li&gt;
          &lt;li&gt;help desk/呼叫中心&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;text to speech
    &lt;ul&gt;
      &lt;li&gt;文字转语音&lt;/li&gt;
      &lt;li&gt;Azure 使用的是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Neural vices&lt;/code&gt;, 是深度神经网络模仿人类的说话语音语调而产生的语音. 更接近人类自然发音.&lt;/li&gt;
      &lt;li&gt;场景:
        &lt;ul&gt;
          &lt;li&gt;小说, 新闻等应用把内容读出来&lt;/li&gt;
          &lt;li&gt;自动外呼广告电话&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;实时翻译/同声传译
    &lt;ul&gt;
      &lt;li&gt;结合speech to text &amp;amp; text to speech&lt;/li&gt;
      &lt;li&gt;把一种语言翻译成另一种语言&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;批量转录
    &lt;ul&gt;
      &lt;li&gt;把一批语音转成其他格式或者语言&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;recognize speaker
    &lt;ul&gt;
      &lt;li&gt;识别说话的人&lt;/li&gt;
      &lt;li&gt;场景
        &lt;ul&gt;
          &lt;li&gt;识别会议/视频中说话的人是谁&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;语音操作的应用
    &lt;ul&gt;
      &lt;li&gt;场景
        &lt;ul&gt;
          &lt;li&gt;开灯&lt;/li&gt;
          &lt;li&gt;关门&lt;/li&gt;
          &lt;li&gt;…&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;声音语言识别 Language identification
    &lt;ul&gt;
      &lt;li&gt;听一下说话人说的是哪国话&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;发音评估 Pronunciation assessment
    &lt;ul&gt;
      &lt;li&gt;评估发音是否准确&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;意图识别 Intent recognition
    &lt;ul&gt;
      &lt;li&gt;识别说话人的意图&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;附加功能&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;可以定制化自己的模型, 语音库&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;中文语音可以识别&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;普通话&lt;/li&gt;
  &lt;li&gt;四川话&lt;/li&gt;
  &lt;li&gt;山东话&lt;/li&gt;
  &lt;li&gt;江浙沪方言 Wu Chinese&lt;/li&gt;
  &lt;li&gt;广东话&lt;/li&gt;
  &lt;li&gt;香港话&lt;/li&gt;
  &lt;li&gt;台湾话
text to speeck 可以说更多的功能, 支持&lt;/li&gt;
  &lt;li&gt;方言
    &lt;ul&gt;
      &lt;li&gt;上海话&lt;/li&gt;
      &lt;li&gt;河南话&lt;/li&gt;
      &lt;li&gt;…&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;男女&lt;/li&gt;
  &lt;li&gt;角色
    &lt;ul&gt;
      &lt;li&gt;Boy&lt;/li&gt;
      &lt;li&gt;Girl&lt;/li&gt;
      &lt;li&gt;Narrator (中性)&lt;/li&gt;
      &lt;li&gt;YoungAdultMale&lt;/li&gt;
      &lt;li&gt;…&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;风格
    &lt;ul&gt;
      &lt;li&gt;生气&lt;/li&gt;
      &lt;li&gt;愉快&lt;/li&gt;
      &lt;li&gt;…&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;使用Speech CLI、Speech SDK、Speech Studio或REST API，语音可以轻松启用您的应用程序、工具和设备&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://learn.microsoft.com/en-us/azure/cognitive-services/speech-service/speech-studio-overview&quot;&gt;Speech Studio&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;Speech Studio是一套基于UI的工具，用于在您的应用程序中构建和集成Azure认知服务语音服务的功能。您使用无代码方法在Speech Studio中创建项目，然后使用Speech SDK、Speech CLI或REST API在应用程序中引用这些资产。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;text-to-speech&quot;&gt;Text to speech&lt;/h3&gt;

&lt;p&gt;python 代码&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;使用了 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;import azure.cognitiveservices.speech as speechsdk&lt;/code&gt; 类库&lt;/li&gt;
  &lt;li&gt;选择一个语言类型, &lt;a href=&quot;https://learn.microsoft.com/en-us/azure/cognitive-services/speech-service/language-support?tabs=tts&quot;&gt;支持的语言&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;输入一段要说的文字, 通过 SDK 发送给Azure  text to Speech 服务, 调用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;speak_text_async&lt;/code&gt; 方法&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;speech_synthesizer = speechsdk.SpeechSynthesizer(speech_config=speech_config, audio_config=audio_output)&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;这行代码初始化一个 speech syntyhesizer (语音合成器)&lt;/li&gt;
      &lt;li&gt;第二个参数 audio_config=audio_output 不给的话就直接朗读, 如果给的话,就会存到文件中&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;result = speech_synthesizer.speak_text_async(text).get()&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;执行这行代码就能听到声音了&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;将另一个语音存到文件中&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;azure.cognitiveservices.speech&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;speechsdk&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Creates an instance of a speech config with specified subscription key and service region.&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Replace with your own subscription key and service region (e.g., &quot;westus&quot;).&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;speech_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;service_region&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;6dc37625b4e04652821d23239f58f33a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;eastus&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;speech_config&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SpeechConfig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subscription&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speech_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;service_region&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# uncomment this line to change the voice used for synthesis&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;speech_config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speech_synthesis_voice_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;zh-CN-YunhaoNeural&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Creates a speech synthesizer using the default speaker as audio output.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;speech_synthesizer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SpeechSynthesizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speech_config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speech_config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Receives a text from console input.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Type some text that you want to speak...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Synthesizes the received text to speech.&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# The synthesized speech is expected to be heard on the speaker with this line executed.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speech_synthesizer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speak_text_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Checks result.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResultReason&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SynthesizingAudioCompleted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Speech synthesized to speaker for text [{}]&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResultReason&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Canceled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Speech synthesis canceled: {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CancellationReason&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error_details&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Error details: {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error_details&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Did you update the subscription info?&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Creates an audio configuration that points to an audio file.&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Replace with your own audio filename.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;audio_filename&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;./text-to-speech-py.wav&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;audio_output&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;audio&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AudioOutputConfig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;audio_filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Creates a synthesizer with the given settings&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;speech_synthesizer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SpeechSynthesizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speech_config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speech_config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;audio_config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;audio_output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Receives a text from console input.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Type some text that you want to speak...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Synthesizes the text to speech.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speech_synthesizer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speak_text_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Checks result.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResultReason&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SynthesizingAudioCompleted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Speech synthesized to [{}] for text [{}]&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;audio_filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResultReason&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Canceled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Speech synthesis canceled: {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CancellationReason&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error_details&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Error details: {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error_details&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Did you update the subscription info?&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;代码执行的输出:
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-15-055304.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;speech-to-text&quot;&gt;Speech to Text&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://learn.microsoft.com/zh-cn/azure/cognitive-services/speech-service/get-started-speech-to-text?pivots=programming-language-python&amp;amp;tabs=macos%2Cterminal&quot;&gt;官方文档&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;将说话的语音内容转换成对应的文字&lt;/p&gt;

&lt;p&gt;既可以从文件中读取语音, 也可以实时获取语音&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;text 2 speech 使用的是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SpeechSynthesizer.speak_text_async(text).get()&lt;/code&gt; 方法&lt;/li&gt;
  &lt;li&gt;speech 2 text 使用的是
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;speech_recognizer = speechsdk.SpeechRecognizer(speech_config=speech_config, audio_config=audio_input)&lt;/code&gt;
        &lt;ul&gt;
          &lt;li&gt;如果不指定 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;audio_config&lt;/code&gt; 参数, 那么就是实时录入信息&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;speech_config.speech_recognition_language=&quot;zh-CN&quot;&lt;/code&gt; 配置成中文语音输入&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SpeechRecognizer.recognize_once()&lt;/code&gt; 方法 执行语音转文字&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;azure.cognitiveservices.speech&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;speechsdk&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;&apos;&apos;&apos;
In this exercise you will see an example of a speech to text translations from a local file.
&apos;&apos;&apos;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;speech_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;service_region&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;6dc37625b4e04652821d23239f58f33a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;eastus&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;speech_config&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SpeechConfig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subscription&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speech_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;service_region&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;audio_input&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AudioConfig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;./Speech_Media_narration.wav&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;speech_recognizer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SpeechRecognizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speech_config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speech_config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;audio_config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;audio_input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Recognizing first result...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speech_recognizer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;recognize_once&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResultReason&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RecognizedSpeech&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Recognized: {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResultReason&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NoMatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;No speech could be recognized: {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;no_match_details&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResultReason&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Canceled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Speech Recognition canceled: {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CancellationReason&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Error details: {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error_details&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;&apos;&apos;&apos;
In this exercise you will see an example of listening for speech from a microphone and translating it to text output.
&apos;&apos;&apos;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;speech_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;service_region&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;6dc37625b4e04652821d23239f58f33a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;eastus&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;speech_config&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SpeechConfig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subscription&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speech_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;service_region&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;speech_config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speech_recognition_language&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;zh-CN&quot;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# 指定中文输入&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;speech_recognizer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SpeechRecognizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speech_config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speech_config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Begin speaking...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speech_recognizer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;recognize_once&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResultReason&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RecognizedSpeech&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Recognized: {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResultReason&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NoMatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;No speech could be recognized: {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;no_match_details&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResultReason&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Canceled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Speech Recognition canceled: {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CancellationReason&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Error details: {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error_details&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;代码输出
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-15-114808.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;translate-language--翻译服务&quot;&gt;Translate Language  翻译服务&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://learn.microsoft.com/en-us/azure/cognitive-services/translator/language-support&quot;&gt;官方文档&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Translator Service是一种基于云的神经机器翻译服务 Neural Machine Translation (NMT)
主要功能包括&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;文本翻译&lt;/li&gt;
  &lt;li&gt;文件翻译
    &lt;ul&gt;
      &lt;li&gt;支持的文件格式包括
        &lt;ul&gt;
          &lt;li&gt;txt&lt;/li&gt;
          &lt;li&gt;pdf&lt;/li&gt;
          &lt;li&gt;csv&lt;/li&gt;
          &lt;li&gt;html&lt;/li&gt;
          &lt;li&gt;markdown&lt;/li&gt;
          &lt;li&gt;xls&lt;/li&gt;
          &lt;li&gt;ppt&lt;/li&gt;
          &lt;li&gt;msg (Microsoft Outlook)&lt;/li&gt;
          &lt;li&gt;doc&lt;/li&gt;
          &lt;li&gt;odt/odp (openDocument)&lt;/li&gt;
          &lt;li&gt;rtf&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;自定义翻译
    &lt;ul&gt;
      &lt;li&gt;构建自定义模型，以翻译特定于领域和行业的语言、术语和风格。&lt;/li&gt;
      &lt;li&gt;可以指定一些术语不翻译, 比如 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Azure&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;AI 102 翻译 考点:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;文本到文本的翻译&lt;/li&gt;
  &lt;li&gt;speech 到 speech 的翻译, 要用speech 服务&lt;/li&gt;
  &lt;li&gt;speach 到 text 的分宜, 要用 speech 服务&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;text-to-text-翻译&quot;&gt;text to text 翻译&lt;/h3&gt;

&lt;p&gt;代码示例 - 文本到文本&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;一段英语翻译成 法语和中文&lt;/li&gt;
  &lt;li&gt;endpoint 是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;endpoint = &quot;https://api.cognitive.microsofttranslator.com/translate&quot;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;requests&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;uuid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;json&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Add your key and endpoint&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;c5aa54650eff4d09a5009198e46a0bcc&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;endpoint&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;https://api.cognitive.microsofttranslator.com&quot;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# location, also known as region.&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# required if you&apos;re using a multi-service or regional (not global) resource. It can be found in the Azure portal on the Keys and Endpoint page.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;location&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;eastus&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;/translate&apos;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;constructed_url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;endpoint&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&apos;api-version&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;3.0&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&apos;from&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;en&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&apos;to&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;fr&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;zh-Hans&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&apos;Ocp-Apim-Subscription-Key&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# location required if you&apos;re using a multi-service or regional (not global) resource.&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&apos;Ocp-Apim-Subscription-Region&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&apos;Content-type&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;application/json&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&apos;X-ClientTraceId&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uuid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uuid4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# You can pass more than one object in body.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;body&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[{&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&apos;text&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;I would really like to drive your car around the block a few times!&apos;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}]&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requests&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;constructed_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dumps&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sort_keys&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ensure_ascii&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;indent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;separators&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;,&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;: &apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;代码执行的结果是输出一段 JSON&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;translations&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;J’aimerais vraiment conduire votre voiture autour du pâté de maisons plusieurs fois!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;to&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;fr&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;我真的很想开你的车绕街区转几次！&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;to&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;zh-Hans&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;speech-to-speech-翻译&quot;&gt;speech to speech 翻译&lt;/h3&gt;

&lt;p&gt;注意, 这里用的是 Azure Cognitive Service 的 speech 的 translation服务, 而不是 translator 服务&lt;/p&gt;

&lt;p&gt;代码目标:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;从英文语音输入翻译成法语和中文&lt;/li&gt;
  &lt;li&gt;把原始英文语音输入的文字打印出来&lt;/li&gt;
  &lt;li&gt;把翻译成的法文和中文输出到屏幕&lt;/li&gt;
  &lt;li&gt;把翻译成的法文和中文朗读出来&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;代码逻辑:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;result = recognizer.recognize_once()&lt;/code&gt; 方法获取输入的英文语音&lt;/li&gt;
  &lt;li&gt;打印输入语音对应的英文文本 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;print(&quot;RECOGNIZED &apos;{}&apos;: {}&quot;.format(fromLanguage, result.text))&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;分别把英文文本翻译成法文和中文文本 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;print(&quot;TRANSLATED into {}: {}&quot;.format(key, result.translations[key]))&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;更新 speech_synthesizer, 将原来的英语改成法语和中文并指定语音&lt;/li&gt;
  &lt;li&gt;用指定的语音把翻译后的文本读出来 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;speech_synthesizer.speak_text_async(result.translations[key]).get()&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;azure.cognitiveservices.speech&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;speechsdk&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;speech_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;service_region&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;6dc37625b4e04652821d23239f58f33a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;eastus&quot;&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;translate_speech_to_speech&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# Creates an instance of a speech translation config with specified subscription key and service region.&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# Replace with your own subscription key and region identifier from here: https://aka.ms/speech/sdkregion&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;translation_config&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;translation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SpeechTranslationConfig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subscription&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speech_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;service_region&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;speech_config&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SpeechConfig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subscription&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speech_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;service_region&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# Creates a speech synthesizer using the configured voice for audio output.&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;speech_synthesizer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SpeechSynthesizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speech_config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speech_config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# Sets source and target languages. In this example, the service will translate a US English spoken input,&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# to French and Indonesian language spoken output Replace with the languages of your choice, from list found&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# here: https://aka.ms/speech/sttt-languages&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fromLanguage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;en-US&apos;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;translation_config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speech_recognition_language&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fromLanguage&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# Add more than one language to the collection.&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# using the add_target_language() method&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;translation_config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_target_language&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;fr&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;translation_config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_target_language&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;zh-Hans&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# Creates a translation recognizer using and audio file as input.&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;recognizer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;translation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TranslationRecognizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;translation_config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;translation_config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# Starts translation, and returns after a single utterance is recognized. The end of a&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# single utterance is determined by listening for silence at the end or until a maximum of 15&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# seconds of audio is processed. It returns the recognized text as well as the translation.&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# Note: Since recognize_once() returns only a single utterance, it is suitable only for single&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# shot recognition like command or query.&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# For long-running multi-utterance recognition, use start_continuous_recognition() instead.&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Say something...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;recognizer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;recognize_once&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# Check the result&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResultReason&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TranslatedSpeech&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;# Output the text for the recognized speech input&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;RECOGNIZED &apos;{}&apos;: {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fromLanguage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

        &lt;span class=&quot;c&quot;&gt;# Loop through the returned translation results&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;translations&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;

            &lt;span class=&quot;c&quot;&gt;# Using the Key and Value components of the returned dictionary for the translated results&lt;/span&gt;
            &lt;span class=&quot;c&quot;&gt;# The first portion gets the key (language code) while the second gets the Value&lt;/span&gt;
            &lt;span class=&quot;c&quot;&gt;# which is the translated text for the language specified&lt;/span&gt;
            &lt;span class=&quot;c&quot;&gt;# Output the language and then the translated text&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;TRANSLATED into {}: {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;translations&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))&lt;/span&gt;

            &lt;span class=&quot;c&quot;&gt;# If the language code is &apos;fr&apos; for French, then use the French voice for Julie&lt;/span&gt;
            &lt;span class=&quot;c&quot;&gt;# If you change the languages in the &apos;AddTargetLanguage&apos; above, ensure you modify this if statement as well&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;fr&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;speech_config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speech_synthesis_voice_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;fr-FR-AlainNeural&quot;&lt;/span&gt;

                &lt;span class=&quot;c&quot;&gt;# Update the speech synthesizer to use the proper voice&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;speech_synthesizer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SpeechSynthesizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speech_config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speech_config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

                &lt;span class=&quot;c&quot;&gt;# Use the proper voice, from the speech synthesizer configuration, to narrate the translated result&lt;/span&gt;
                &lt;span class=&quot;c&quot;&gt;# in the native speaker voice.&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;speech_synthesizer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speak_text_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;translations&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# Otherwise, use the voice for the Indonesian translation&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;speech_config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speech_synthesis_voice_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;zh-CN-XiaochenNeural&quot;&lt;/span&gt;

                &lt;span class=&quot;c&quot;&gt;# Update the speech synthesizer to use the proper voice&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;speech_synthesizer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SpeechSynthesizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speech_config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speech_config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

                &lt;span class=&quot;c&quot;&gt;# Use the proper voice, from the speech synthesizer configuration, to narrate the translated result&lt;/span&gt;
                &lt;span class=&quot;c&quot;&gt;# in the native speaker voice.&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;speech_synthesizer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speak_text_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;translations&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResultReason&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RecognizedSpeech&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;RECOGNIZED: {} (text could not be translated)&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResultReason&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NoMatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;NOMATCH: Speech could not be recognized: {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;no_match_details&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResultReason&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Canceled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;CANCELED: Reason={}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CancellationReason&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;CANCELED: ErrorDetails={}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error_details&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;


&lt;span class=&quot;n&quot;&gt;translate_speech_to_speech&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;代码输出结果:
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-15-151355.jpg&quot; alt=&quot;&quot; /&gt; 
并有语音朗读&lt;/p&gt;

&lt;h3 id=&quot;speech-to-text-翻译&quot;&gt;Speech to text 翻译&lt;/h3&gt;

&lt;p&gt;是 speech to speech 的简化版&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;azure.cognitiveservices.speech&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;speechsdk&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;speech_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;service_region&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;YourKey&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;YourRegion&quot;&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;translate_speech_to_text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# Creates an instance of a speech translation config with specified subscription key and service region.&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# Replace with your own subscription key and region identifier from here: https://aka.ms/speech/sdkregion&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;translation_config&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;translation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SpeechTranslationConfig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subscription&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speech_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;service_region&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# Sets source and target languages.&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# Replace with the languages of your choice, from list found here: https://aka.ms/speech/sttt-languages&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fromLanguage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;en-US&apos;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;toLanguage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;de&apos;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;translation_config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speech_recognition_language&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fromLanguage&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;translation_config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_target_language&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;toLanguage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# Creates a translation recognizer using and audio file as input.&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;recognizer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;translation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TranslationRecognizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;translation_config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;translation_config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# Starts translation, and returns after a single utterance is recognized. The end of a&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# single utterance is determined by listening for silence at the end or until a maximum of 15&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# seconds of audio is processed. It returns the recognized text as well as the translation.&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# Note: Since recognize_once() returns only a single utterance, it is suitable only for single&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# shot recognition like command or query.&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# For long-running multi-utterance recognition, use start_continuous_recognition() instead.&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Say something...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;recognizer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;recognize_once&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# Check the result&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResultReason&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TranslatedSpeech&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;RECOGNIZED &apos;{}&apos;: {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fromLanguage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;TRANSLATED into {}: {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;toLanguage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;translations&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;toLanguage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResultReason&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RecognizedSpeech&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;RECOGNIZED: {} (text could not be translated)&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResultReason&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NoMatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;NOMATCH: Speech could not be recognized: {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;no_match_details&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResultReason&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Canceled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;CANCELED: Reason={}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reason&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speechsdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CancellationReason&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;CANCELED: ErrorDetails={}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cancellation_details&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error_details&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;


&lt;span class=&quot;n&quot;&gt;translate_speech_to_text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;luis-language-understanding-service-语言理解服务&quot;&gt;LUIS Language Understanding Service 语言理解服务&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://learn.microsoft.com/en-us/azure/cognitive-services/luis/what-is-luis&quot;&gt;官方文档&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;注意:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;LUIS 会在 2025 年 10 月就下架了, 以后会使用 &lt;strong&gt;conversational language understanding&lt;/strong&gt; 来代替&lt;/li&gt;
  &lt;li&gt;1 April 2023 开始就不能再创建新的 LUIS 应用了&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;语言理解（LUIS）是一种基于云的对话式人工智能服务，将自定义机器学习智能应用于用户的对话、自然语言文本，以预测整体含义，并提取相关的详细信息。&lt;/p&gt;

&lt;p&gt;LUIS 可以通过以下方式访问&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;自定义 &lt;a href=&quot;https://www.luis.ai/applications&quot;&gt;portal&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;API&lt;/li&gt;
  &lt;li&gt;SDK&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;几个场景&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;构建企业级对话机器人：
    &lt;ul&gt;
      &lt;li&gt;此参考架构描述了如何使用Azure Bot框架构建企业级对话机器人（聊天机器人）。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;商业聊天机器人：
    &lt;ul&gt;
      &lt;li&gt;Azure机器人服务和语言理解服务使开发人员能够为银行、旅行和娱乐等各种场景创建对话界面。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;使用语音助理控制物联网设备：
    &lt;ul&gt;
      &lt;li&gt;与所有可访问互联网的设备创建无缝对话界面——从连接的电视或冰箱到连接的发电厂的设备。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;需要安装 LUIS 的 python 扩展库
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pip install azure-cognitiveservices-language-luis&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;需要在 azure portal 创建一个 LUIS 项目的过程&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;现在 Azure Portal 中创建一个 LUIS 服务&lt;/li&gt;
  &lt;li&gt;然后到 https://www.luis.ai/applications 创建 LUIS 项目&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;通过-luis-portal-使用-luis-ai&quot;&gt;通过 LUIS portal 使用 LUIS AI&lt;/h3&gt;

&lt;p&gt;https://www.luis.ai/applications&lt;/p&gt;

&lt;p&gt;概念:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Intend 是意图 (动作)
    &lt;ul&gt;
      &lt;li&gt;比如:
        &lt;ul&gt;
          &lt;li&gt;add flag&lt;/li&gt;
          &lt;li&gt;cancel&lt;/li&gt;
          &lt;li&gt;delete&lt;/li&gt;
          &lt;li&gt;forward&lt;/li&gt;
          &lt;li&gt;read aloud&lt;/li&gt;
          &lt;li&gt;reply&lt;/li&gt;
          &lt;li&gt;…&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;examples 是 意图下面的一些文字性描述的例子
        &lt;ul&gt;
          &lt;li&gt;比如: “请把这封邮件标记成重要”&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Entities 是实体 (名词/术语),
    &lt;ul&gt;
      &lt;li&gt;让 AI 知道这个领域的一些实体的专有名词&lt;/li&gt;
      &lt;li&gt;相当于数据库的字段&lt;/li&gt;
      &lt;li&gt;比如:
        &lt;ul&gt;
          &lt;li&gt;附件&lt;/li&gt;
          &lt;li&gt;分类&lt;/li&gt;
          &lt;li&gt;…&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Prebuild Domains 预先做好的模板, 直接用就可以自动创建 intend 和 Entities&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;使用流程&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;创建一个应用&lt;/li&gt;
  &lt;li&gt;从 Prebuild domain 那里创建 一个 email 的 entities 和 intentions&lt;/li&gt;
  &lt;li&gt;点击 “train” 对模型进行训练&lt;/li&gt;
  &lt;li&gt;点击 “Test” 对模型进行测试
    &lt;ol&gt;
      &lt;li&gt;给模型输入 “Send email to bob for lunch tomorrow”&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;点击 “Publish” 把模型发布出去, 就可以有endpoint 可以提供给外部进行  Rest API 访问.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Portal 测试结果
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-16-053749.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;luis-代码示例&quot;&gt;LUIS 代码示例&lt;/h3&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c&quot;&gt;# To run this sample, install the following modules.&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# pip install azure-cognitiveservices-language-luis&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;json&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;time&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# &amp;lt;Dependencies&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;azure.cognitiveservices.language.luis.authoring&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LUISAuthoringClient&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;azure.cognitiveservices.language.luis.runtime&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LUISRuntimeClient&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;msrest.authentication&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CognitiveServicesCredentials&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# &amp;lt;/Dependencies&amp;gt;&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;quickstart&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# &amp;lt;VariablesYouChange&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;authoringKey&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;YourAuthoringKey&apos;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;authoringEndpoint&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;YourAuthoringEndpoint&apos;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;predictionKey&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;YourAuthoringKey&apos;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;predictionEndpoint&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;YourPredictionEndpoint&apos;&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# &amp;lt;/VariablesYouChange&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# &amp;lt;VariablesYouDontNeedToChangeChange&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;appName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Contoso Pizza Company&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;versionId&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;0.1&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;intentName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;OrderPizzaIntent&quot;&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# &amp;lt;/VariablesYouDontNeedToChangeChange&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# &amp;lt;AuthoringCreateClient&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LUISAuthoringClient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;authoringEndpoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CognitiveServicesCredentials&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;authoringKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# &amp;lt;/AuthoringCreateClient&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# Create app&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;app_id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;create_app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;appName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# &amp;lt;AddIntent&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_intent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;app_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;intentName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# &amp;lt;/AddIntent&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# Add Entities&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;add_entities&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# Add labeled examples&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;add_labeled_examples&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;intentName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# &amp;lt;TrainAppVersion&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train_version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;app_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;waiting&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;waiting&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;info&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;app_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;c&quot;&gt;# get_status returns a list of training statuses, one for each model. Loop through them and make sure all are&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;# done.&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;waiting&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;Queued&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;details&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;InProgress&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;details&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;waiting&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Waiting 10 seconds for training to complete...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sleep&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;trained&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;waiting&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# &amp;lt;/TrainAppVersion&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# &amp;lt;PublishVersion&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;apps&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;publish&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;app_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;is_staging&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# &amp;lt;/PublishVersion&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# &amp;lt;PredictionCreateClient&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;runtimeCredentials&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CognitiveServicesCredentials&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;predictionKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;clientRuntime&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LUISRuntimeClient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endpoint&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;predictionEndpoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;credentials&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;runtimeCredentials&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# &amp;lt;/PredictionCreateClient&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# &amp;lt;QueryPredictionEndpoint&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# Production == slot name&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;predictionRequest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;query&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;I want two small pepperoni pizzas with more salsa&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;predictionResponse&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;clientRuntime&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prediction&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_slot_prediction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;app_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Production&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;predictionRequest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Top intent: {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;predictionResponse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prediction&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;top_intent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Sentiment: {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;predictionResponse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prediction&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sentiment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Intents: &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;intent&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;predictionResponse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prediction&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;intents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;{}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dumps&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;intent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Entities: {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;predictionResponse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prediction&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entities&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;


&lt;span class=&quot;c&quot;&gt;# &amp;lt;/QueryPredictionEndpoint&amp;gt;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;create_app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;appName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# &amp;lt;AuthoringCreateApplication&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# define app basics&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;appDefinition&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;appName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;initial_version_id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;culture&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;en-us&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# create app&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;app_id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;apps&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;appDefinition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# get app id - necessary for all other changes&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Created LUIS app with ID {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;app_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# &amp;lt;/AuthoringCreateApplication&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app_id&lt;/span&gt;


&lt;span class=&quot;c&quot;&gt;# &amp;lt;/createApp&amp;gt;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;add_entities&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# &amp;lt;AuthoringAddEntities&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# Add Prebuilt entity&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_prebuilt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;app_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prebuilt_extractor_names&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;number&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# define machine-learned entity&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;mlEntityDefinition&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Pizza&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;s&quot;&gt;&quot;children&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Quantity&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Size&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Toppings&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;s&quot;&gt;&quot;children&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Quantity&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}]&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# add entity to app&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;modelId&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;app_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Pizza order&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;children&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mlEntityDefinition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# define phraselist - add phrases as significant vocabulary to app&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;phraseList&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;enabledForAllModels&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;isExchangeable&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;QuantityPhraselist&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;phrases&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;few,more,extra&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# add phrase list to app&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;features&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_phrase_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;app_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;phraseList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# Get entity and subentities&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;modelObject&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;app_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;modelId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;toppingQuantityId&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;get_grandchild_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;modelObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Toppings&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Quantity&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;pizzaQuantityId&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;get_grandchild_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;modelObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Pizza&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Quantity&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# add model as feature to subentity model&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;prebuiltFeatureRequiredDefinition&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;model_name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;number&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;is_required&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;features&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_entity_feature&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;app_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pizzaQuantityId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prebuiltFeatureRequiredDefinition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# add model as feature to subentity model&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;prebuiltFeatureNotRequiredDefinition&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;model_name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;number&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;features&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_entity_feature&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;app_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;toppingQuantityId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prebuiltFeatureNotRequiredDefinition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# add phrase list as feature to subentity model&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;phraseListFeatureDefinition&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;feature_name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;QuantityPhraselist&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;model_name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;features&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_entity_feature&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;app_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;toppingQuantityId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;phraseListFeatureDefinition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;


&lt;span class=&quot;c&quot;&gt;# &amp;lt;/AuthoringAddEntities&amp;gt;&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;add_labeled_examples&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;intentName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# &amp;lt;AuthoringAddLabeledExamples&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# Define labeled example&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;labeledExampleUtteranceWithMLEntity&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;I want two small seafood pizzas with extra cheese.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;intentName&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;intentName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;entityLabels&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;s&quot;&gt;&quot;startCharIndex&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;s&quot;&gt;&quot;endCharIndex&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;48&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;s&quot;&gt;&quot;entityName&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Pizza order&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;s&quot;&gt;&quot;children&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
                    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                        &lt;span class=&quot;s&quot;&gt;&quot;startCharIndex&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                        &lt;span class=&quot;s&quot;&gt;&quot;endCharIndex&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                        &lt;span class=&quot;s&quot;&gt;&quot;entityName&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Pizza&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                        &lt;span class=&quot;s&quot;&gt;&quot;children&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
                            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                                &lt;span class=&quot;s&quot;&gt;&quot;startCharIndex&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                &lt;span class=&quot;s&quot;&gt;&quot;endCharIndex&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                &lt;span class=&quot;s&quot;&gt;&quot;entityName&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Quantity&quot;&lt;/span&gt;
                            &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
                            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                                &lt;span class=&quot;s&quot;&gt;&quot;startCharIndex&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                &lt;span class=&quot;s&quot;&gt;&quot;endCharIndex&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                &lt;span class=&quot;s&quot;&gt;&quot;entityName&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Size&quot;&lt;/span&gt;
                            &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
                            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                                &lt;span class=&quot;s&quot;&gt;&quot;startCharIndex&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                &lt;span class=&quot;s&quot;&gt;&quot;endCharIndex&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                &lt;span class=&quot;s&quot;&gt;&quot;entityName&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Type&quot;&lt;/span&gt;
                            &lt;span class=&quot;p&quot;&gt;}]&lt;/span&gt;
                    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
                    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                        &lt;span class=&quot;s&quot;&gt;&quot;startCharIndex&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;37&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                        &lt;span class=&quot;s&quot;&gt;&quot;endCharIndex&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;48&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                        &lt;span class=&quot;s&quot;&gt;&quot;entityName&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Toppings&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                        &lt;span class=&quot;s&quot;&gt;&quot;children&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
                            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                                &lt;span class=&quot;s&quot;&gt;&quot;startCharIndex&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;37&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                &lt;span class=&quot;s&quot;&gt;&quot;endCharIndex&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;41&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                &lt;span class=&quot;s&quot;&gt;&quot;entityName&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Quantity&quot;&lt;/span&gt;
                            &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
                            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                                &lt;span class=&quot;s&quot;&gt;&quot;startCharIndex&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                &lt;span class=&quot;s&quot;&gt;&quot;endCharIndex&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;48&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                &lt;span class=&quot;s&quot;&gt;&quot;entityName&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Type&quot;&lt;/span&gt;
                            &lt;span class=&quot;p&quot;&gt;}]&lt;/span&gt;
                    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Labeled Example Utterance:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;labeledExampleUtteranceWithMLEntity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# Add an example for the entity.&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# Enable nested children to allow using multiple models with the same name.&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# The quantity subentity and the phraselist could have the same exact name if this is set to True&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;examples&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;app_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;labeledExampleUtteranceWithMLEntity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;enableNestedChildren&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;


&lt;span class=&quot;c&quot;&gt;# &amp;lt;/AuthoringAddLabeledExamples&amp;gt;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# &amp;lt;AuthoringSortModelObject&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get_grandchild_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;childName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;grandChildName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;theseChildren&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;child&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;child&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;childName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;children&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;theseGrandchildren&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;child&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;child&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;grandChildName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;theseChildren&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;children&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;grandChildId&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;theseGrandchildren&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;grandChildId&lt;/span&gt;


&lt;span class=&quot;c&quot;&gt;# &amp;lt;/AuthoringSortModelObject&amp;gt;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;quickstart&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;cognitive-search&quot;&gt;Cognitive Search&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://learn.microsoft.com/en-us/azure/search/search-what-is-azure-search&quot;&gt;官方文档&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;通过用户提供数据, 文档, 图片等信息创建一个认知搜索引擎&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;创建数据源&lt;/li&gt;
  &lt;li&gt;定义索引&lt;/li&gt;
  &lt;li&gt;query 索引&lt;/li&gt;
  &lt;li&gt;配置所以提供 autocomplete (自动完成)和 autosuggest (自动推荐)&lt;/li&gt;
  &lt;li&gt;根据相关性提供更多结果&lt;/li&gt;
  &lt;li&gt;实现同义词&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;在 Azure 中创建了 Cognitive Search 的截图
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-16-123714.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;导入数据的步骤&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;import data
    &lt;ol&gt;
      &lt;li&gt;导入一个 hotel 酒店的 sample&lt;/li&gt;
      &lt;li&gt;导入完成后, 就可以看到有
        &lt;ol&gt;
          &lt;li&gt;data source&lt;/li&gt;
          &lt;li&gt;indexers
            &lt;ol&gt;
              &lt;li&gt;index 创建器&lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
          &lt;li&gt;indexes
            &lt;ol&gt;
              &lt;li&gt;50 个 document&lt;/li&gt;
              &lt;li&gt;进入 index 页面就可以搜索了&lt;/li&gt;
              &lt;li&gt;搜索 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pool&lt;/code&gt; 的结果如下&lt;/li&gt;
              &lt;li&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-16-125456.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
          &lt;li&gt;页面提供了 app 如果需要整合搜索所需要的 URL 地址.&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;创建新的 data source 可以从以下数据源来创建&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Azure Blob Storage&lt;/li&gt;
  &lt;li&gt;Azure Data Lake Storage Gen2&lt;/li&gt;
  &lt;li&gt;Azure SQL Database&lt;/li&gt;
  &lt;li&gt;Azure Table Storage&lt;/li&gt;
  &lt;li&gt;Cosmos DB&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;qna-maker&quot;&gt;QnA Maker&lt;/h2&gt;
&lt;p&gt;QnA maker 是一个 NLP 服务, 是用来从一个知识库(knowledge) 中获取合适的答案.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;问答机器人&lt;/li&gt;
  &lt;li&gt;需要先创建一个 knowledge base&lt;/li&gt;
  &lt;li&gt;knowledge base 来源是客户自己通过的内容, 比如 PDF 等文档&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;注意:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;QnA Maker 服务将于 2025 年 3 月 31 日停用。&lt;/li&gt;
  &lt;li&gt;新的功能将转到 &lt;a href=&quot;https://learn.microsoft.com/zh-cn/azure/cognitive-services/language-service/question-answering/quickstart/sdk?pivots=rest&quot;&gt;Azure Cognitive Service for Language&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;现在已经无法创建新的 QnA 服务&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;https://azurefaq.ca 这个网站就是用 QnA 做的&lt;/p&gt;

&lt;p&gt;生命周期&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;创建 knowledge base&lt;/li&gt;
  &lt;li&gt;设置&lt;/li&gt;
  &lt;li&gt;训练&lt;/li&gt;
  &lt;li&gt;测试&lt;/li&gt;
  &lt;li&gt;发布&lt;/li&gt;
  &lt;li&gt;创建Web App Bot&lt;/li&gt;
  &lt;li&gt;测试和 Bot 聊天
    &lt;ul&gt;
      &lt;li&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-16-232355.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
      &lt;li&gt;可以下载 web app bot 的源代码 (.net). 源代码可以部署到任何云上. 源代码会调用 Azure 的 chat bot API&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;发布 QnA Bot
    &lt;ul&gt;
      &lt;li&gt;QnA Bot 可以发布到很多 Channel, 包括
        &lt;ul&gt;
          &lt;li&gt;Slack&lt;/li&gt;
          &lt;li&gt;Microsoft Teams&lt;/li&gt;
          &lt;li&gt;Skype&lt;/li&gt;
          &lt;li&gt;Facebook&lt;/li&gt;
          &lt;li&gt;Email&lt;/li&gt;
          &lt;li&gt;…&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;QnA Bot 可以生成一段 enbeded 的 ifrmae html 代码, 直接嵌入到网站代码中&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;bot-service---framework-sdk&quot;&gt;Bot Service - Framework SDK&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://learn.microsoft.com/en-us/azure/bot-service/bot-service-overview?wt.md_id=searchAPI_azureportal_inproduct_rmskilling&amp;amp;sessionId=d9db68498be549e89cc0d1d358ec9d41&amp;amp;view=azure-bot-service-4.0&quot;&gt;官方文档&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/microsoft/BotBuilder-Samples&quot;&gt;官方的 github 的例子&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;注意:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;The Bot Framework Python SDK is being retired with final long-term support ending in November 2023&lt;/li&gt;
  &lt;li&gt;Bot Framework Python SDK 2023 年 11 月开始就不在更新了&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Microsoft Bot Framework和Azure Bot Service是库、工具和服务的集合，可让您构建、测试、部署和管理智能机器人。机器人框架包括一个模块化和可扩展的SDK，用于构建机器人和连接到人工智能服务。使用此框架，开发人员可以创建使用语音、理解自然语言、回答问题等的机器人。
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-16-234516.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;对比 QnA Bot, Bot framework (Bot service) 更加高级&lt;/li&gt;
  &lt;li&gt;这里做的 Bot , 主要还是聊天机器人&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;流程(定披萨为例子):&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;计划
    &lt;ul&gt;
      &lt;li&gt;设计沟通逻辑&lt;/li&gt;
      &lt;li&gt;创建 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.chat&lt;/code&gt; 配置文件&lt;/li&gt;
      &lt;li&gt;增加response 语言&lt;/li&gt;
      &lt;li&gt;adaptive cards&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;构建&lt;/li&gt;
  &lt;li&gt;测试&lt;/li&gt;
  &lt;li&gt;发布&lt;/li&gt;
  &lt;li&gt;连接&lt;/li&gt;
  &lt;li&gt;评估&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;echo-bot-聊天机器人&quot;&gt;Echo Bot 聊天机器人&lt;/h3&gt;
&lt;p&gt;echo bot 就是你发什么给他, 他就回什么给你&lt;/p&gt;

&lt;p&gt;下面用 官方提供的 &lt;a href=&quot;https://github.com/microsoft/BotBuilder-Samples/tree/main/samples/python/02.echo-bot&quot;&gt;Echo Bot Github&lt;/a&gt; 的例子来构建一个可以聊天的机器人&lt;/p&gt;

&lt;p&gt;注意:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Bot Framework Python SDK 2023 年 11 月开始就不在更新了&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Echo Bot 安装步骤&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;github 代码下载到本地&lt;/li&gt;
  &lt;li&gt;安装并运行 python 代码&lt;/li&gt;
  &lt;li&gt;安装一个 Bot Framework 的 emulator (模拟器) 的 Mac 版本到本地
    &lt;ol&gt;
      &lt;li&gt;模拟器的作用是模拟Bot 所需要的 云端的 Azure 服务, 比如计算, 存储等.&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;在 bot 模拟器中打开python 提示的&lt;a href=&quot;http://localhost:3978&quot;&gt;地址&lt;/a&gt;就可以和 Echo bot 聊天了
    &lt;ol&gt;
      &lt;li&gt;echo bot 就是你发什么给他, 他就回什么给你&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;welcome-bot&quot;&gt;Welcome Bot&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Bot 会有一段欢迎词给你, 后面还是 Echo 你说的话
&lt;a href=&quot;https://github.com/microsoft/BotBuilder-Samples/tree/main/samples/python/03.welcome-user&quot;&gt;github 代码&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;和 Echo Bot 安装流程一样&lt;/p&gt;

&lt;h3 id=&quot;bot-dialogs&quot;&gt;Bot Dialogs&lt;/h3&gt;
&lt;p&gt;和机器人对话&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;给 bot 预先设定好问题和答案选项的内容&lt;/li&gt;
  &lt;li&gt;当你进入聊天之后, 机器人会先问你问题, 你都答好了之后, 机器人会把你的回答记下来. 作为后续对话的基础.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/microsoft/BotBuilder-Samples/tree/main/samples/python/05.multi-turn-prompt&quot;&gt;github 代码&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-17-011453.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;adaptive-cards-适应卡&quot;&gt;Adaptive Cards 适应卡&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/microsoft/BotBuilder-Samples/tree/main/samples/python/07.using-adaptive-cards&quot;&gt;github 代码&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;自适应卡片 - 根据聊天框/web 页面大小自适应的一些卡片&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;包括
    &lt;ul&gt;
      &lt;li&gt;航班信息&lt;/li&gt;
      &lt;li&gt;天气信息&lt;/li&gt;
      &lt;li&gt;pizza 点评&lt;/li&gt;
      &lt;li&gt;…&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;卡片信息是 JSON 格式的文件, 可以编辑&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;聊天截图
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-04-17-014924.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;tracking-events-with-application-insights&quot;&gt;Tracking Events with Application Insights&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/microsoft/BotBuilder-Samples/tree/main/samples/python/21.corebot-app-insights&quot;&gt;github 地址&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;功能: 把 IOT 的遥感数据( telemetry )加到 bot 中, 然后让 Bot 给出一些见解&lt;/p&gt;

&lt;h3 id=&quot;把-bot-和其他-cognitive-服务整合&quot;&gt;把 Bot 和其他 cognitive 服务整合&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/microsoft/BotBuilder-Samples/tree/main/samples/python/21.corebot-app-insights&quot;&gt;github 地址&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;比如&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;QnA&lt;/li&gt;
  &lt;li&gt;LUIS
    &lt;ul&gt;
      &lt;li&gt;使用LUIS 来判断了用户说的话的intension (意图)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Speech&lt;/li&gt;
  &lt;li&gt;…&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;用-botframework-composer-来创建机器人&quot;&gt;用 BotFramework-Composer 来创建机器人&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/microsoft/BotFramework-Composer&quot;&gt;guthub&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Bot Framework Composer是一个开源的视觉创作画布，供开发人员和多学科团队使用语言理解和QnA Maker设计和构建对话体验，以及机器人回复的复杂组合（语言生成）。在这个工具中，您将拥有构建复杂的对话体验所需的一切。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;用于对话流的可视化编辑画布&lt;/li&gt;
  &lt;li&gt;语言理解上下文编辑（NLU）&lt;/li&gt;
  &lt;li&gt;培训、测试和管理语言理解（NLU）和QnA组件的工具&lt;/li&gt;
  &lt;li&gt;语言生成和模板系统&lt;/li&gt;
  &lt;li&gt;现成的机器人运行时可执行文件&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;使用界面
https://github.com/microsoft/BotFramework-Composer/blob/main/docs/Assets/Screenshot-ComposerV2-overview.png&lt;/p&gt;

&lt;p&gt;有web 和 desktop 两种模式&lt;/p&gt;

&lt;p&gt;步骤&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/microsoft/BotFramework-Composer#get-started&quot;&gt;下载&lt;/a&gt;bot framework composer  for mac&lt;/li&gt;
  &lt;li&gt;创建一个 Empty bot (C#)&lt;/li&gt;
  &lt;li&gt;设置 dialog, trigger&lt;/li&gt;
  &lt;li&gt;用 bot emulator 进行测试&lt;/li&gt;
  &lt;li&gt;发布 bot 到 Azure
    &lt;ol&gt;
      &lt;li&gt;会创建必要的 Azure 资源来为 bot 提供服务&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;可以转到 Azure Bot Service 查看bot 和管理.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;练习题总结&quot;&gt;练习题总结&lt;/h2&gt;

&lt;h3 id=&quot;bot-framework&quot;&gt;Bot Framework&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;对接其他认知服务/第三方服务
    &lt;ul&gt;
      &lt;li&gt;接 speech
        &lt;ul&gt;
          &lt;li&gt;Direct line speech
            &lt;ul&gt;
              &lt;li&gt;其他几种 Direct Line
                &lt;ol&gt;
                  &lt;li&gt;Direct Line Channel 是用来开启 bot 和 一个客户端通过 https 进行通信&lt;/li&gt;
                  &lt;li&gt;Direct Line Speech 是用来开启 Bot 的语音交互能力 ( voice in/out)&lt;/li&gt;
                  &lt;li&gt;Direct Line App Service 可以让 bot 和 客户端的通信只在 Azure 内网进行&lt;/li&gt;
                &lt;/ol&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;三个步骤
            &lt;ol&gt;
              &lt;li&gt;在 Azure Portal 中开启一个 Cognitive Service Speech resource&lt;/li&gt;
              &lt;li&gt;到现有的 Azure Bot 中, 在 channel 中选 Direct Line Speech&lt;/li&gt;
              &lt;li&gt;在 Azure Bot 的配置页 开启 Streaming Endpoint&lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;接 Luis
        &lt;ul&gt;
          &lt;li&gt;C# 用 appsetting.json&lt;/li&gt;
          &lt;li&gt;date entity 可以给机器人设置时间提醒功能 (应用于医疗机器人)&lt;/li&gt;
          &lt;li&gt;C# 需要安装 Microsoft.Bot.Builder.AI.Luis NuGet 包&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;接 其他bot
        &lt;ul&gt;
          &lt;li&gt;Orchestrator&lt;/li&gt;
          &lt;li&gt;防止欢迎信息发给其他 Bot 的方法
            &lt;ul&gt;
              &lt;li&gt;检查 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;turnContext&lt;/code&gt; 查看来的人是否是个机器人&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;多个 bot 的关系
            &lt;ol&gt;
              &lt;li&gt;能为其他 bot 执行任务的 bot 叫做 skill&lt;/li&gt;
              &lt;li&gt;调用其他 bot 的 bot 叫做 skill consumer&lt;/li&gt;
              &lt;li&gt;skill manifest 是一个 json 文件, 由 skill 这边暴露给 consumer 有哪些命令可以被调用.&lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;接 middleware
        &lt;ul&gt;
          &lt;li&gt;多语言翻译&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;接 Facebook
        &lt;ul&gt;
          &lt;li&gt;attachement 负责设置 logo&lt;/li&gt;
          &lt;li&gt;notyification-type 负责通知类型&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;创建一个 Echo bot 的步骤
    &lt;ol&gt;
      &lt;li&gt;从github 下载代码&lt;/li&gt;
      &lt;li&gt;pip install -r requirements.txt&lt;/li&gt;
      &lt;li&gt;python app.py&lt;/li&gt;
      &lt;li&gt;Run Azure Bot Framework Emulator&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Bot Composer
    &lt;ul&gt;
      &lt;li&gt;Composer 需要用 Node.js 来创建一个新的 bot&lt;/li&gt;
      &lt;li&gt;Composer 会为你的 bot 创建一个默认的 dialog (会话)&lt;/li&gt;
      &lt;li&gt;但 Composer 不需要一开始就有 child dialog. 可以后面创建&lt;/li&gt;
      &lt;li&gt;验证 输入数字限制 (比如请假天数)
        &lt;ul&gt;
          &lt;li&gt;Validation Rule&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;抽取 报销金额
        &lt;ul&gt;
          &lt;li&gt;Regular Expression&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;卡片
    &lt;ul&gt;
      &lt;li&gt;HeroCard
        &lt;ul&gt;
          &lt;li&gt;一个图和少量文字, 适合欢迎信息&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Thumbnail card
        &lt;ul&gt;
          &lt;li&gt;缩略图卡, 只能包含一张缩略提, 一个按钮和少量文字&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Receipt card
        &lt;ul&gt;
          &lt;li&gt;收据卡, 包含收据&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Adaptive Card
        &lt;ul&gt;
          &lt;li&gt;适配卡, 可以定制包含图片, 文字, 按钮, 语音, 视频等各种类型的内容同&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;按钮
    &lt;ul&gt;
      &lt;li&gt;ImBack
        &lt;ul&gt;
          &lt;li&gt;展示文字, 比如: 包含隐私条款的信息&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;OpenURL
        &lt;ul&gt;
          &lt;li&gt;点击跳转到指定 URL&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;TTL
    &lt;ul&gt;
      &lt;li&gt;默认 20 分钟, 可设置更久&lt;/li&gt;
      &lt;li&gt;可以把会话信息保存在 cosmos DB&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;状态管理
    &lt;ul&gt;
      &lt;li&gt;private conversation 私有对话
        &lt;ul&gt;
          &lt;li&gt;比如 投票&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;conversation 普通对话
        &lt;ul&gt;
          &lt;li&gt;比如 审批流程&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;user
        &lt;ul&gt;
          &lt;li&gt;比如 用户工作title&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;通过测试文本对 bot 测试
    &lt;ul&gt;
      &lt;li&gt;Bot Framework emulator&lt;/li&gt;
      &lt;li&gt;Chatdown&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;对话模型
    &lt;ul&gt;
      &lt;li&gt;activity handler 活动处理
        &lt;ul&gt;
          &lt;li&gt;比如, 用户进来了就发欢迎信息&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;component dialog 内容对话
        &lt;ul&gt;
          &lt;li&gt;steps 的集合&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;waterfall dialog 瀑布对话
        &lt;ul&gt;
          &lt;li&gt;顺序的对话集合&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;关于和机器人的对话
    &lt;ol&gt;
      &lt;li&gt;Chat files 是 markdown 格式的文件 - 正确&lt;/li&gt;
      &lt;li&gt;展示的 avatar 是 水平的&lt;/li&gt;
      &lt;li&gt;bot 可以配置成和多个用户进行交互 - 正确&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;可以发布 bot 的 Azure 资源
    &lt;ul&gt;
      &lt;li&gt;Azure Function&lt;/li&gt;
      &lt;li&gt;Azure App Service&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Debug
    &lt;ul&gt;
      &lt;li&gt;Bot Emulator
        &lt;ul&gt;
          &lt;li&gt;是一个桌面应用, 用于给 chat bot 进行debug 的工具&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;ngrok
        &lt;ul&gt;
          &lt;li&gt;是一个开源的跨平台应用监控工具&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;qna-和-knowledge-base-知识库&quot;&gt;QnA 和 Knowledge Base 知识库&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;关于发布一个 QnA 的新的 knowledge base
    &lt;ol&gt;
      &lt;li&gt;可以再 portal 上通过 点击 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;publish&lt;/code&gt; 按钮发布&lt;/li&gt;
      &lt;li&gt;还可以通过 Rest API 发布新的 QnA knowledge base&lt;/li&gt;
      &lt;li&gt;发布后的 knowledge base 的内容保存在 Azure Search 的索引中 (a prod index of Azure Search)&lt;/li&gt;
      &lt;li&gt;每次发布新的 Knowledge base 之后, 不需要重新连接 bot 和知识库, 他们是自动重新连接的&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Role / 最小权限&lt;/li&gt;
  &lt;li&gt;Read
    &lt;ul&gt;
      &lt;li&gt;测试知识库&lt;/li&gt;
      &lt;li&gt;导出知识库&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Editor
    &lt;ul&gt;
      &lt;li&gt;更新知识库&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Contributer
    &lt;ul&gt;
      &lt;li&gt;除了给用户分配权限之外, 其他都可以&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Owner
    &lt;ul&gt;
      &lt;li&gt;什么都可以&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Active learning
    &lt;ul&gt;
      &lt;li&gt;让 QnA 可以在和客户交流的时候提供一些额外的建议问题让用户问&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;开启 QnA 的 active learning 的 3个步骤
    &lt;ol&gt;
      &lt;li&gt;导航到 https://www.qnamaker.ai/&lt;/li&gt;
      &lt;li&gt;导航页面右上角的服务设置&lt;/li&gt;
      &lt;li&gt;开启 active learning&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;QnA knowledge base 支持的导出格式
    &lt;ul&gt;
      &lt;li&gt;Excel&lt;/li&gt;
      &lt;li&gt;TSV
        &lt;ul&gt;
          &lt;li&gt;TSV 是 tab separrated value&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Knowledge base 启动方法
    &lt;ul&gt;
      &lt;li&gt;LUDown
        &lt;ul&gt;
          &lt;li&gt;会调用 .lu 文件中的 question/answer 列表在&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;当你创建一个 QnA Maker 的时候, 还会自动创建 2 个服务
    &lt;ol&gt;
      &lt;li&gt;认知搜索
        &lt;ol&gt;
          &lt;li&gt;会搜索 knowledge base&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;Azure App Service
        &lt;ol&gt;
          &lt;li&gt;运行 bot web 页面&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;认知搜索的请求数在稳定增长, 已经达到最高上限了(阈值throttled) , 解决方案是
    &lt;ol&gt;
      &lt;li&gt;使用 higher tier&lt;/li&gt;
      &lt;li&gt;增加 replicas&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;luis&quot;&gt;LUIS&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;即可以和用户进行自然语言交流, 又可以从会话中&lt;strong&gt;获取相关的详细信息 ( revelant 和 detailed )&lt;/strong&gt;,&lt;/li&gt;
  &lt;li&gt;最快创建一个LUIS 聊天机器人模型的步骤
    &lt;ol&gt;
      &lt;li&gt;Add a new app, 增加一个新的应用&lt;/li&gt;
      &lt;li&gt;add sample utterances, 增加用户发送的信息的例子&lt;/li&gt;
      &lt;li&gt;train the app, 训练app&lt;/li&gt;
      &lt;li&gt;publish the app, 发布app&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;utterance
    &lt;ul&gt;
      &lt;li&gt;翻译成其他语言
        &lt;ul&gt;
          &lt;li&gt;把模型导出为 LU 格式&lt;/li&gt;
          &lt;li&gt;运行 Ludown 翻译命令&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;用户输入的语句可以在 utterance page 找到&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;容器
    &lt;ul&gt;
      &lt;li&gt;要用 GZIP 格式导出 LUIS 模型到容器&lt;/li&gt;
      &lt;li&gt;可以使用 trained 或者 published LUIS 模型导出到容器&lt;/li&gt;
      &lt;li&gt;把 LUIS 应用通过 Azure Container Instance (ACI)运行到容器中的三个步骤
        &lt;ol&gt;
          &lt;li&gt;把 LUIS 应用 export 成 .gz (GZIP) model 文件
            &lt;ol&gt;
              &lt;li&gt;容器需要读取 .gz 文件&lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
          &lt;li&gt;upload model file 到 Azue File Shard
            &lt;ol&gt;
              &lt;li&gt;Azure file shard 可以被容器 mount 上&lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
          &lt;li&gt;用 Azure CLI 和 YAML 部署容器
            &lt;ol&gt;
              &lt;li&gt;YAML 中包含了  .gz 文件所在的 shard 的 mount 点&lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
          &lt;li&gt;注意: 因为用了 ACI, 所以不需要 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker run&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker pull&lt;/code&gt; 这样的命令&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ducker run&lt;/code&gt; 命令启动容器的话, 需要保证 增加 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Eula=accept&lt;/code&gt; 这个参数&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;训练好的模型不会自动发布到endpoint, 需要手动 publish&lt;/li&gt;
  &lt;li&gt;你可以有选择的发布模型到生产还是 stagging slot&lt;/li&gt;
  &lt;li&gt;生产和staging 环境是彼此独立的, 他们可以有相同的版本, 也可以有不同的版本.&lt;/li&gt;
  &lt;li&gt;无法识别 multi-words 的解决方案
    &lt;ul&gt;
      &lt;li&gt;
        &lt;ol&gt;
          &lt;li&gt;Clone a new version&lt;/li&gt;
          &lt;li&gt;add Patten.Any 实体 (用大括号把 multi-words 括起来 )&lt;/li&gt;
          &lt;li&gt;Train the model&lt;/li&gt;
          &lt;li&gt;publish to the staging slot&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Entity
    &lt;ul&gt;
      &lt;li&gt;ML entity
        &lt;ul&gt;
          &lt;li&gt;基于 labeled 例子, 从上下文中抽取实体&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Regex entity
        &lt;ul&gt;
          &lt;li&gt;基于你提供的特定的模式来抽取实体 (正则表达式)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;List entity
        &lt;ul&gt;
          &lt;li&gt;基于一组固定的同义词&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;date entity
        &lt;ul&gt;
          &lt;li&gt;可以给LUIS 对应的 bot 增加时间提醒功能 (比如对病人吃药提醒)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Intent
    &lt;ul&gt;
      &lt;li&gt;无法准确通过 utterance 判断用户意图
        &lt;ul&gt;
          &lt;li&gt;enable active learning&lt;/li&gt;
          &lt;li&gt;correct prediction&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;intend for location 的 例子 :
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Find contacts in London&lt;/code&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Who do I know in Seattle?&lt;/code&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Search for contacts in Ukraine&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;给 LUIS 设置 schema 的四个步骤
    &lt;ul&gt;
      &lt;li&gt;
        &lt;ol&gt;
          &lt;li&gt;identify your domain (定义你的域)&lt;/li&gt;
          &lt;li&gt;identify your intends (定义你的意图)&lt;/li&gt;
          &lt;li&gt;create sample utterance for your intends (给每个意图创建用户提的问题的例子)&lt;/li&gt;
          &lt;li&gt;identify your entities (定义你的实体)&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;geographyV2 预测模型
    &lt;ul&gt;
      &lt;li&gt;ROLE
        &lt;ul&gt;
          &lt;li&gt;可以对行盘出发和到达进行区分&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;重新训练 LUIS 获取状态的方法
    &lt;ul&gt;
      &lt;li&gt;
        &lt;ol&gt;
          &lt;li&gt;request trainning with http POST&lt;/li&gt;
          &lt;li&gt;request trainning status with http GET&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;LUIS 做的多语言模型有口音问题, 解决方法
    &lt;ol&gt;
      &lt;li&gt;通过 API endpoint 把 NormalizeDiacritics 设置成 True&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;要限制, 只有 虚拟网络 vnet1 内的资源可以访问 LUIS ta1 的服务, 怎么做?
    &lt;ol&gt;
      &lt;li&gt;the virtual network settings for ta1&lt;/li&gt;
      &lt;li&gt;说明: 为 LUIS 服务 ta1 设置 virtual network&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;LUIS 的 bot, 获取 账单地址, 用
    &lt;ol&gt;
      &lt;li&gt;ML&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;想要开启 LUIS 的 active learning, 需要:
    &lt;ol&gt;
      &lt;li&gt;Add log=true to the prediction endpoint query.&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;你已经做了一个 LUIS , 用于查找联系人, 现在需要增加一些 intend, 比如 Find contacts in London., Who do I know in Seattle? , Search for contacts in Ukraine. .  方案是:
    &lt;ol&gt;
      &lt;li&gt;You create a new entity for the domain.&lt;/li&gt;
      &lt;li&gt;说明:
        &lt;ol&gt;
          &lt;li&gt;原来是找人, 现在是在一个地方找人, 这个地方就是 domain entity&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;认知搜索&quot;&gt;认知搜索&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;概念
    &lt;ol&gt;
      &lt;li&gt;Search Unit: 认知搜索的一个计费标准单位&lt;/li&gt;
      &lt;li&gt;Replica: 分担请求负载的一个 实例&lt;/li&gt;
      &lt;li&gt;Partition: 读/写操作的一个物理存储和 I/O 的单元&lt;/li&gt;
      &lt;li&gt;Shard: 是组成 Index 的更小的单位,&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;创建 认知搜索 indexer 的 4 个步骤
    &lt;ol&gt;
      &lt;li&gt;Create a data source&lt;/li&gt;
      &lt;li&gt;Define an index&lt;/li&gt;
      &lt;li&gt;Create a indexer&lt;/li&gt;
      &lt;li&gt;Schedule a indexer&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;使用认知搜索的步骤
    &lt;ol&gt;
      &lt;li&gt;Provision service 提供服务&lt;/li&gt;
      &lt;li&gt;Create index 创建索引&lt;/li&gt;
      &lt;li&gt;Load Data 读取数据&lt;/li&gt;
      &lt;li&gt;Send query  and handle response 发送请求, 处理返回&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;pull 数据 的 Azure 数据源
    &lt;ul&gt;
      &lt;li&gt;Azure Table Storage&lt;/li&gt;
      &lt;li&gt;Azure Data Lake Gen2&lt;/li&gt;
      &lt;li&gt;Azure Cosmos DB&lt;/li&gt;
      &lt;li&gt;Azure Blob Storage ?&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Index
    &lt;ul&gt;
      &lt;li&gt;为 index (knowledge base) 增加酒店名字的步骤
        &lt;ol&gt;
          &lt;li&gt;Drop existing index&lt;/li&gt;
          &lt;li&gt;Create a revised index&lt;/li&gt;
          &lt;li&gt;Load the index with document&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;为索引追加(房屋)数据 并重新索引 的 代码
        &lt;ul&gt;
          &lt;li&gt;上传新的房屋数据用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;IndexDocumentsAction.Upload()&lt;/code&gt; 方法&lt;/li&gt;
          &lt;li&gt;上传后要重新创建索引用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;searchClient.indexDocument(entry)&lt;/code&gt; 方法&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Index 类型
        &lt;ul&gt;
          &lt;li&gt;filter
            &lt;ul&gt;
              &lt;li&gt;过滤的情景&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;sortable - 设置成true 就可排序&lt;/li&gt;
          &lt;li&gt;retrievable - 设置成true 就可搜索 (可返回该字段信息)&lt;/li&gt;
          &lt;li&gt;facetable - 设置成true, 就返回分类的点击数&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;为了确保新的测试结果可以满足定义的需求, 你需要用哪个 REST API ?
        &lt;ol&gt;
          &lt;li&gt;Run Indexer&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;扫描图片中的文字进行索引
        &lt;ul&gt;
          &lt;li&gt;把这些数据放到多个 virtual folders (虚拟目录).&lt;/li&gt;
          &lt;li&gt;为每个目录创建一个 indexer.&lt;/li&gt;
          &lt;li&gt;增加 search units (搜索单元).&lt;/li&gt;
          &lt;li&gt;在每个 indexer 定义中, 都执行同样的 runtime execution 模式&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Indixer
    &lt;ul&gt;
      &lt;li&gt;需要创建一个 indexer才能把数据源中的数据值与索引字段关联起来&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;安全
    1. 每个folder 需要有自己的 data source
    2. 可以使用 Azure AD 安全组来过滤搜索结果, 让不同领域的人可搜索自己领域的内容. 
    3. 不需要 access control&lt;/li&gt;
  &lt;li&gt;为认知搜索使用了 CMK 加密后的影响
    &lt;ol&gt;
      &lt;li&gt;索引变大&lt;/li&gt;
      &lt;li&gt;搜索返回时间变长&lt;/li&gt;
      &lt;li&gt;Azure Key 是需要提供的&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Porperty
    &lt;ul&gt;
      &lt;li&gt;把增强的数据存到 knowledge store 中 需要的 property
    1. source
    2. tableName&lt;/li&gt;
      &lt;li&gt;把skillset (skillset1) 的增强的数据包含到索引中, 需要的 proeperties
        &lt;ol&gt;
          &lt;li&gt;skillSetName&lt;/li&gt;
          &lt;li&gt;outputFieldMap&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;query 慢
    &lt;ul&gt;
      &lt;li&gt;增加 partition (增加读写速度)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;增加 HA (SLA)
    &lt;ul&gt;
      &lt;li&gt;Click Scale in Azure portal&lt;/li&gt;
      &lt;li&gt;把 replica 设置成 3 个&lt;/li&gt;
      &lt;li&gt;点击保存按钮&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;应对高负载
    &lt;ul&gt;
      &lt;li&gt;Provision and attach 认知搜索到一个 skillset 中&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Pricing tier
    &lt;ul&gt;
      &lt;li&gt;一旦创建认知服务, 不能修改 pricing tier&lt;/li&gt;
      &lt;li&gt;basic 比 standard 差&lt;/li&gt;
      &lt;li&gt;pricing tier 类型在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sku&lt;/code&gt; 中设置&lt;/li&gt;
      &lt;li&gt;文档的 Text extraction 是免费的&lt;/li&gt;
      &lt;li&gt;Image extraction (图片抽取)是付费的, 1000 张图片 1 美元.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Projection 类型
    &lt;ul&gt;
      &lt;li&gt;Table Projection
        &lt;ul&gt;
          &lt;li&gt;存文本&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Objection Projection
        &lt;ul&gt;
          &lt;li&gt;存 JSON&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;File Projection
        &lt;ul&gt;
          &lt;li&gt;存图片&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Build-in skills
    &lt;ul&gt;
      &lt;li&gt;文本分析
        &lt;ul&gt;
          &lt;li&gt;搜索扫描过的图片中的文字&lt;/li&gt;
          &lt;li&gt;对多语言的文档进行翻译 (再搜索)&lt;/li&gt;
          &lt;li&gt;从 PDF 格式的内容中抽取文本&lt;/li&gt;
          &lt;li&gt;检测语言&lt;/li&gt;
          &lt;li&gt;分析 sentiment&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Computer Vision
        &lt;ul&gt;
          &lt;li&gt;OCR&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;不提供的服务
        &lt;ul&gt;
          &lt;li&gt;Bing 搜索&lt;/li&gt;
          &lt;li&gt;Form Recognizer&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;搜索结果排名
    &lt;ul&gt;
      &lt;li&gt;Scoring profile
        &lt;ul&gt;
          &lt;li&gt;让新加的产品想排名靠前 (date)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Endpoint URL
    &lt;ul&gt;
      &lt;li&gt;https://csearch1.search.windows.net/index/index1/docs/autocomplete?api-verison=20200630&lt;/li&gt;
      &lt;li&gt;认知服务名字放最前面&lt;/li&gt;
      &lt;li&gt;index1 放在 index 后面&lt;/li&gt;
      &lt;li&gt;doc 是 autocomplete&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;给一个搜索服务创建 key 的 API URL
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://management.azure.com/subscriptions/{订阅号}/resourceGroups/{GroupName}/providers/Microsoft.Search/searchService/Search1/createQueryKey/Clientapp1?api-version=2020-08-01&lt;/code&gt;
        &lt;ol&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;management.azure.com&lt;/code&gt; 是管理服务, 创建key 用这个服务&lt;/li&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Microsoft.Search&lt;/code&gt; 是搜索服务, 包含了认知搜索&lt;/li&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;createQueryKey&lt;/code&gt; 用来创建 key&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;同义词 synonym Map
    &lt;ul&gt;
      &lt;li&gt;synonym map 用的 explicit mapping rule , 不是 equivalency rule&lt;/li&gt;
      &lt;li&gt;大小写不敏感, 所有同义词在匹配前都会变成小写&lt;/li&gt;
      &lt;li&gt;只能通过 认识搜索的 RestAPI 来定义 synonym map, 不能通过 Azure portal 来定义.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;认知搜索的table project 是存文本的, 可以有效的和
    &lt;ol&gt;
      &lt;li&gt;Power BI 结合, 方便索引&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;要让认知搜索可以对 某个字段进行索引, 并可以搜索到, 可以返回, 可以过滤, 那么:
    &lt;ol&gt;
      &lt;li&gt;retrievable - 设置成true 就可搜索 指定字段&lt;/li&gt;
      &lt;li&gt;facetable - 设置成true, 可以提供过滤 (filter)&lt;/li&gt;
      &lt;li&gt;Searchable - 设置成true 就可以返回指定的 字段&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;speech&quot;&gt;Speech&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;API
    &lt;ul&gt;
      &lt;li&gt;SDK 连接 speech 服务需要 Location 和 Key
        &lt;ul&gt;
          &lt;li&gt;不需要 endpoint URL&lt;/li&gt;
          &lt;li&gt;Location 也是 Region, 比如 eastus&lt;/li&gt;
          &lt;li&gt;Speech Service 不需要 endpoint, 就可以使用 , 因为 endpoint 只是一个 token&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Speech to Speech
    &lt;ul&gt;
      &lt;li&gt;初始化的顺序
        &lt;ul&gt;
          &lt;li&gt;
            &lt;ol&gt;
              &lt;li&gt;SpeechTranslationConfig&lt;/li&gt;
              &lt;li&gt;SpeechRecognizer&lt;/li&gt;
              &lt;li&gt;SpeechSynthesizer&lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;语音文件的位置
        &lt;ul&gt;
          &lt;li&gt;AudoOutputConfig&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;speech to text
    &lt;ul&gt;
      &lt;li&gt;如果没有特殊指定, 就是用电脑麦克风作为默认输入&lt;/li&gt;
      &lt;li&gt;获取用户 intention
        &lt;ul&gt;
          &lt;li&gt;LUIS&lt;/li&gt;
          &lt;li&gt;Patten Matching&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;长时间的录入语音, 并识别某个文字
        &lt;ol&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;speechsdk.SpeechRecognizer&lt;/code&gt;&lt;/li&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;productlist.addPhase(&quot;productA&quot;)&lt;/code&gt;&lt;/li&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;speech_recgonizer.start_continues_recognition()&lt;/code&gt;&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;短暂录入
        &lt;ul&gt;
          &lt;li&gt;once recognition&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;提高转化能正确率
        &lt;ol&gt;
          &lt;li&gt;Additional marketing text document&lt;/li&gt;
          &lt;li&gt;Calls transcribed by human (人工转录的通话)&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;获取容器资源的命令
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker pull mcr.microsoft.com/azure-cognitive-service/speechservices/speech-to-text&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;代码中指定Speech to text 的翻译的 目标语言都是:
        &lt;ol&gt;
          &lt;li&gt;2 个字母的简称, 比如 fr, de, es&lt;/li&gt;
          &lt;li&gt;都会用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TranslationRecognizer&lt;/code&gt; 方法&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;text to speech
    &lt;ul&gt;
      &lt;li&gt;步骤
        &lt;ol&gt;
          &lt;li&gt;Text input&lt;/li&gt;
          &lt;li&gt;Text Analyzer&lt;/li&gt;
          &lt;li&gt;Neural acoustic model&lt;/li&gt;
          &lt;li&gt;Neural Vocoder&lt;/li&gt;
          &lt;li&gt;Audio output&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;提高语调
        &lt;ul&gt;
          &lt;li&gt;SSML&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;指定语音名字
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SpeechSynthesisVioceName&lt;/code&gt; , 比如林志玲&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;加快翻译速度
        &lt;ul&gt;
          &lt;li&gt;AudioDataStream&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;提高语音质量
        &lt;ul&gt;
          &lt;li&gt;Tunning File (在线工具)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;获取容器资源的 URL
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mcr.microsoft.com/azure-cognitive-service/speechservices/text-to-speech&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;语音翻译成的语言 的 SDK
    &lt;ul&gt;
      &lt;li&gt;SpeechTranslationConfig&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;想要给 speech 模型做训练, 要:
    &lt;ol&gt;
      &lt;li&gt;上传一个 .zip 包, 包含 .wav 文件和对应的 文本 transcript&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;translator&quot;&gt;Translator&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;API
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&amp;amp;from=zh-hans&amp;amp;to=en&amp;amp;toscript=Latn&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;说明: 
    1.  源语言 - From
    2.  目标语言 - to
    3.  记录成的文本类型 - toScript&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;文本翻译, 要求文本内容需要保留在美国, 那么 API 调用就是:
    &lt;ol&gt;
      &lt;li&gt;https://api-nam.cognitive.microsofttranslator.com/translate&lt;/li&gt;
      &lt;li&gt;说明:
        &lt;ol&gt;
          &lt;li&gt;nam 表示美国&lt;/li&gt;
          &lt;li&gt;apc 表示亚洲&lt;/li&gt;
          &lt;li&gt;eur 表示欧洲&lt;/li&gt;
          &lt;li&gt;api 表示 global&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;参数
    &lt;ul&gt;
      &lt;li&gt;profanityAction
        &lt;ul&gt;
          &lt;li&gt;delete, 可以去掉翻译中的攻击性文字&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;includeAlignment
        &lt;ul&gt;
          &lt;li&gt;对齐翻译前和翻译后的文字格式&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;dynamic dictionary
        &lt;ul&gt;
          &lt;li&gt;翻译转悠名词&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;notranslate tag
        &lt;ul&gt;
          &lt;li&gt;某些单词不用翻译&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;text-analytics&quot;&gt;Text Analytics&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;减少 API 请求次数的方法
    &lt;ul&gt;
      &lt;li&gt;用 /analyze 这个 endpoint&lt;/li&gt;
      &lt;li&gt;异步请求 API&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;语言检测
    &lt;ul&gt;
      &lt;li&gt;confidenceScore 是从 0-1, 不0-100&lt;/li&gt;
      &lt;li&gt;如果无法分辨文本中的语言, 有默认的语言, 是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;us&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;不储存检测结果&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Sentiment
    &lt;ul&gt;
      &lt;li&gt;API
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eastus.api.congitive.microsoft.com/text/analytics/v2.0/sentiment&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;部署了一个 sentiment 分析的容器, 那么:
        &lt;ol&gt;
          &lt;li&gt;http://localhost:5000/status 可以验证 API key 是否好用&lt;/li&gt;
          &lt;li&gt;The container logging provider will write log data.&lt;/li&gt;
          &lt;li&gt;http://localhost:5000/swagger 可以查看访问 API 的详情&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Key phrases
    &lt;ul&gt;
      &lt;li&gt;抽取 key phrases 的步骤
        &lt;ol&gt;
          &lt;li&gt;组织 POST 请求&lt;/li&gt;
          &lt;li&gt;Call https://ta1.cognitiveservices.azure.com/text/analytics/V3.1-preview.5/analyze endpoint.&lt;/li&gt;
          &lt;li&gt;在 app 中处理 JSON 反馈&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;返回结果不会包含 confidence level&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Sentiment
    &lt;ul&gt;
      &lt;li&gt;可以获得人们的态度的认知服务
        &lt;ol&gt;
          &lt;li&gt;Key phrase extraction&lt;/li&gt;
          &lt;li&gt;Sentiment analysis&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;运行容器的命令
        &lt;ol&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker run -rm -it -p 8080:5000 --memory 2g --cpus 1 mcr.microsoft.com/azure-cognitiveservices/textanalytics/sentiment Eula=accept Billing=https://sentiment1.cognitiveservices.azure.com ApiKey=xxxyyyzzz123&lt;/code&gt;&lt;/li&gt;
          &lt;li&gt;Docker 命令参数说明:
            &lt;ol&gt;
              &lt;li&gt;8080 是 VM 端口, 5000 是容器端口&lt;/li&gt;
              &lt;li&gt;Billing 是 Endpoint&lt;/li&gt;
              &lt;li&gt;Eula 是 end user 同意了 license&lt;/li&gt;
              &lt;li&gt;-p 端口&lt;/li&gt;
              &lt;li&gt;-rm 选项，在容器退出时就能够自动清理容器内部的文件系统。&lt;/li&gt;
              &lt;li&gt;-it 以交互模式运行 Docker&lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;分析结果
        &lt;ul&gt;
          &lt;li&gt;如果 结果是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mixed with a confidence score 0.9&lt;/code&gt; 那么 sentiments 组合是
            &lt;ul&gt;
              &lt;li&gt;至少有一个是 positive , 其他是 negative&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;video-analyzer&quot;&gt;Video analyzer&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;几个概念
    &lt;ol&gt;
      &lt;li&gt;Shots - 镜头
        &lt;ol&gt;
          &lt;li&gt;同一个摄像机在同一个时间连续的拍摄帧&lt;/li&gt;
          &lt;li&gt;视频索引器将视频拆分为的临时区段&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;Keyframes - 关键帧
        &lt;ol&gt;
          &lt;li&gt;Keyframe 一个shot 中最有代表性的帧 ，根据对比度和稳定性等属性进行选择。&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;Scenes - 场景
        &lt;ol&gt;
          &lt;li&gt;几个连续的镜头(shots) 组成的一个语义关联的单个事件&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;几种模型
    &lt;ol&gt;
      &lt;li&gt;Brands Model
        &lt;ol&gt;
          &lt;li&gt;识别产品, 服务和公司&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;Person Model
        &lt;ol&gt;
          &lt;li&gt;识别名人&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;Language Model
        &lt;ol&gt;
          &lt;li&gt;识别行业术语和特定单词&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;找人步骤
    &lt;ol&gt;
      &lt;li&gt;在现有的员工 Person 模型中增加一个Person, 并包含名字&lt;/li&gt;
      &lt;li&gt;上传一张面部照片给这个 员工&lt;/li&gt;
      &lt;li&gt;reindex employee model&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;根据视频中出现者搜索视频
    &lt;ul&gt;
      &lt;li&gt;创建一个 person model&lt;/li&gt;
      &lt;li&gt;把这个 model 和视频进行关联&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;找品牌
    &lt;ul&gt;
      &lt;li&gt;让一个品牌可以/不可以被找到
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;enable: false/true&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;搜索结果
    &lt;ul&gt;
      &lt;li&gt;会返回匹配到的内容在视频里的时间点&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;测试一个检测人的样例视频三个步骤
    &lt;ol&gt;
      &lt;li&gt;sign in 视频分析网站 (www.videoindexer.ai)&lt;/li&gt;
      &lt;li&gt;点击上传按钮 (上传视频)&lt;/li&gt;
      &lt;li&gt;检查邮箱并点击链接 (因为这里要花的视频分析时间可能会长, 等分析完了会发邮件给你)&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;通过 API 分析视频的正确流程是:
    &lt;ol&gt;
      &lt;li&gt;上传视频到 blob storage&lt;/li&gt;
      &lt;li&gt;用 Video Indexer APi 对视频进行索引&lt;/li&gt;
      &lt;li&gt;从 Video Indexer API 抽取 transcript&lt;/li&gt;
      &lt;li&gt;通过 translator API 对脚本进行翻译&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;custom-vision&quot;&gt;Custom Vision&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;概念
    &lt;ul&gt;
      &lt;li&gt;Precision 精度
        &lt;ul&gt;
          &lt;li&gt;识别了 100 个鸟, 正确识别了 56 个&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Recall 回忆
        &lt;ul&gt;
          &lt;li&gt;有 100 个鸟, 识别了 56 个是鸟&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;domain 的区别
    &lt;ul&gt;
      &lt;li&gt;food
        &lt;ul&gt;
          &lt;li&gt;食品&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;product on shelves
        &lt;ul&gt;
          &lt;li&gt;货架上的商品, 适合超市&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Retail
        &lt;ul&gt;
          &lt;li&gt;适合衣服类的日用品&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;(compact)
        &lt;ul&gt;
          &lt;li&gt;边缘侧的, 放容器的方案&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;目标检测
    &lt;ul&gt;
      &lt;li&gt;步骤:
        &lt;ol&gt;
          &lt;li&gt;创建一个 custom vision resource&lt;/li&gt;
          &lt;li&gt;创建一个 Object Detection Project&lt;/li&gt;
          &lt;li&gt;上传图片并给图片打标签&lt;/li&gt;
          &lt;li&gt;训练模型&lt;/li&gt;
          &lt;li&gt;获取 预测模型的 URL 和 key 给应用使用.&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;提高检测准确率方法
        &lt;ol&gt;
          &lt;li&gt;增加一些带有不同背景的对象的图片, 可以改进 model 的 performance - 正确&lt;/li&gt;
          &lt;li&gt;使用提交到生产的新图片对模型进行训练 - 正确&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;训练效果不佳 的解决办法
        &lt;ol&gt;
          &lt;li&gt;上传新的多个图片,&lt;/li&gt;
          &lt;li&gt;使用 smart labeler,&lt;/li&gt;
          &lt;li&gt;重新训练模型,&lt;/li&gt;
          &lt;li&gt;发布最后的 iteration&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;分类
    &lt;ul&gt;
      &lt;li&gt;步骤:
        &lt;ol&gt;
          &lt;li&gt;创建项目&lt;/li&gt;
          &lt;li&gt;上传照片&lt;/li&gt;
          &lt;li&gt;给图片打tag&lt;/li&gt;
          &lt;li&gt;训练项目&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;容器 / 边缘侧 /edge
    &lt;ul&gt;
      &lt;li&gt;domain 中带有 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;compact&lt;/code&gt; (紧密) 的就是支持容器的&lt;/li&gt;
      &lt;li&gt;一个 custom vision 的 训练好的检测模型用了 General domain, 无法连接外网的情况下, 想要导出模型, 怎么办?
        &lt;ol&gt;
          &lt;li&gt;把 domain 改成 General(compact)&lt;/li&gt;
          &lt;li&gt;重新训练模型&lt;/li&gt;
          &lt;li&gt;导出模型&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;API
    &lt;ul&gt;
      &lt;li&gt;GetIterationPerformance
        &lt;ul&gt;
          &lt;li&gt;获得模型的准确率&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;GetImagePerformance
        &lt;ul&gt;
          &lt;li&gt;获取的是被标记了某个tag 的所有图片&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;GetProject
        &lt;ul&gt;
          &lt;li&gt;返回的是 project 的名字&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;ExportIteration
        &lt;ul&gt;
          &lt;li&gt;只是返回了一个模型, 不包含 metrics&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;和 TensorFlow 整合
    &lt;ul&gt;
      &lt;li&gt;需要两个文件
        &lt;ul&gt;
          &lt;li&gt;lable.txt&lt;/li&gt;
          &lt;li&gt;model.pb&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;要把一个 Custom Vision 模型放到手机端, 需要做成容器化(compact) , 就需要:
    &lt;ol&gt;
      &lt;li&gt;change the model domain&lt;/li&gt;
      &lt;li&gt;retrain the model&lt;/li&gt;
      &lt;li&gt;Test (optional)&lt;/li&gt;
      &lt;li&gt;export the model&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;如果想把一个 Custom Vision 模型 要从开发环境 导入到 生产环境, 那么
    &lt;ol&gt;
      &lt;li&gt;GetProjects on acvDEV&lt;/li&gt;
      &lt;li&gt;ExportProjects on acvDEV&lt;/li&gt;
      &lt;li&gt;ImportProjects on avcPROD&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;要识别生产线上的产品内容的失败, 用 Custom Vision 的三个步骤:
    &lt;ol&gt;
      &lt;li&gt;创建项目&lt;/li&gt;
      &lt;li&gt;上传照片和tag&lt;/li&gt;
      &lt;li&gt;训练 classifier 模型&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;给花的分类模型新增加一种新的花, 不需要重新建一个模型, 只需要 在现有模型上
    &lt;ol&gt;
      &lt;li&gt;上传图片, 并给图片标注新的tag 名字&lt;/li&gt;
      &lt;li&gt;训练&lt;/li&gt;
      &lt;li&gt;发布&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;要用 1000 张没有任何相关信息的照片 做一个 custom vision 模型, 最短时间可以完成的方法:
    &lt;ol&gt;
      &lt;li&gt;Upload all images&lt;/li&gt;
      &lt;li&gt;Get suggested tags&lt;/li&gt;
      &lt;li&gt;Review the suggestion and confirm tags&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;computer-vision&quot;&gt;Computer Vision&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;API
    &lt;ul&gt;
      &lt;li&gt;识别品牌和名人
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://cv1.cognitiveservices.azure.com/vision/v3.2/alanyze?visualFeature=Brands&amp;amp;detail=Celebrities&amp;amp;Language=en&amp;amp;model-version=latest&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Read 和 OCR
    &lt;ul&gt;
      &lt;li&gt;可识别的图片类型, 大小及分辨率
        &lt;ol&gt;
          &lt;li&gt;&lt;strong&gt;JPEG&lt;/strong&gt; 和 &lt;strong&gt;PNG&lt;/strong&gt; 类型图片, 不超过 30M&lt;/li&gt;
          &lt;li&gt;&lt;strong&gt;GIF&lt;/strong&gt; 类型 的 2M 文件, 分辨率在 200 x 300&lt;/li&gt;
          &lt;li&gt;&lt;strong&gt;BMP&lt;/strong&gt; 类型图片 分别率大于 100x100 像素&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;API
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eastus.api.cognitive.microsoft.com/version/v2.0/ocr&lt;/code&gt;&lt;/li&gt;
          &lt;li&gt;其他Computer Vision API 请求地址
            &lt;ol&gt;
              &lt;li&gt;图片分析: https://{endpoint}/vision/v3.2/analyze[?visualFeatures][&amp;amp;details][&amp;amp;language][&amp;amp;model-version]&lt;/li&gt;
              &lt;li&gt;图片描述: https://{endpoint}/vision/v3.2/describe[?maxCandidates][&amp;amp;language][&amp;amp;model-version]&lt;/li&gt;
              &lt;li&gt;对象检测: https://{endpoint}/vision/v3.2/detect[?model-version]&lt;/li&gt;
              &lt;li&gt;获取兴趣点: https://{endpoint}/vision/v3.2/areaOfInterest[?model-version]&lt;/li&gt;
              &lt;li&gt;获取分析结果: https://{endpoint}/vision/v3.2/read/analyzeResults/{operationId}&lt;/li&gt;
              &lt;li&gt;创建缩略图: https://{endpoint}/vision/v3.2/generateThumbnail[?width][&amp;amp;height][&amp;amp;smartCropping][&amp;amp;model-version]&lt;/li&gt;
              &lt;li&gt;获取模型列表: https://{endpoint}/vision/v3.2/models&lt;/li&gt;
              &lt;li&gt;密集复杂多页文本读取(高级 OCR): https://{endpoint}/vision/v3.2/read/analyze[?language][&amp;amp;pages][&amp;amp;readingOrder][&amp;amp;model-version]&lt;/li&gt;
              &lt;li&gt;识别特定域中的图像内容: https://{endpoint}/vision/v3.2/models/{model}/analyze[?language][&amp;amp;model-version]&lt;/li&gt;
              &lt;li&gt;根据图像中的对象、生物、风景或操作返回标记: https://{endpoint}/vision/v3.2/tag[?language][&amp;amp;model-version]&lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;C# 代码
        &lt;ol&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GetReadResultAsync&lt;/code&gt; 是要通过异步的获取图片中读到的结果信息&lt;/li&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;while&lt;/code&gt; 循环的逻辑是 如果状态还是在 运行中或者是还没开始, 那么就继续循环的打印输出读到的信息, 所以判断逻辑是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;running&lt;/code&gt; 和 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NotStarted&lt;/code&gt;&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;场景
    &lt;ul&gt;
      &lt;li&gt;识别商场排队结账人数
        &lt;ul&gt;
          &lt;li&gt;Spatial Analysis&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;上传照片, 防止 offensive
        &lt;ul&gt;
          &lt;li&gt;Content Moderator
            &lt;ul&gt;
              &lt;li&gt;属于 Decision API&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Form Recognizer
    &lt;ul&gt;
      &lt;li&gt;分析结果不能导出为 XML 格式. 可以支持的格式是 JSON 和 CSV&lt;/li&gt;
      &lt;li&gt;Form recognizer 可以 从 web URL 中获取 发票&lt;/li&gt;
      &lt;li&gt;Form recognizer 可以使用 F0 免费处理 2 页的发票&lt;/li&gt;
      &lt;li&gt;S0 可以处理 2000 页的 PDF 或 TIFF 的文档&lt;/li&gt;
      &lt;li&gt;Form Recognizer 可接受的文件格式和大小分别是
        &lt;ol&gt;
          &lt;li&gt;JPG, PDF, PNG, TIFF&lt;/li&gt;
          &lt;li&gt;文件大小小于 50M&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;定制化表格识别模型用  Blob stroage 上的文件进行训练的步骤
        &lt;ol&gt;
          &lt;li&gt;用Shared Access Signature 来连接到 Azure 存储&lt;/li&gt;
          &lt;li&gt;创建一个项目, 输入 endpoint 和 key&lt;/li&gt;
          &lt;li&gt;run layout&lt;/li&gt;
          &lt;li&gt;apply tags to the forms&lt;/li&gt;
          &lt;li&gt;train the model&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;创建一个定制化模型的步骤
        &lt;ol&gt;
          &lt;li&gt;assemble a training dataset with PDF document
            &lt;ol&gt;
              &lt;li&gt;收集需要被训练的 PDF 文档&lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
          &lt;li&gt;upload training dataset to Azure Blob storage
            &lt;ol&gt;
              &lt;li&gt;上传训练数据集到 blob&lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
          &lt;li&gt;train the model using the sample labeling tool
            &lt;ol&gt;
              &lt;li&gt;用 labeling tool 训练模型&lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;获取容器的 URL
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mcr.microsoft.com/azure-cognitive-services/custom-form/labeltool&lt;/code&gt;
说明:
            &lt;ol&gt;
              &lt;li&gt;mcr: microsoft container repository&lt;/li&gt;
              &lt;li&gt;custom form: Custom Vision Form Recognizer&lt;/li&gt;
              &lt;li&gt;labeltool 是 表格识别器的 镜像名字&lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Form Recognizer 要读取收据, 要用
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;begin_recognize_receipts_from_url&lt;/code&gt; 方法用来读取收据&lt;/li&gt;
          &lt;li&gt;其他: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;begin_recognize_content_from_url&lt;/code&gt; 方法用来读取表格&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;VisualFeature 参数 包含了
    &lt;ol&gt;
      &lt;li&gt;Tags :
        &lt;ol&gt;
          &lt;li&gt;to generate a list of words for the recognizable objects in the image&lt;/li&gt;
          &lt;li&gt;为图片中识别出来的对象创建一个文字列表&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;Categories:
        &lt;ol&gt;
          &lt;li&gt;使用分类学来描述图片建筑, 食品, 室外 和动物&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;Adult
        &lt;ol&gt;
          &lt;li&gt;detect if the content violent scenes&lt;/li&gt;
          &lt;li&gt;检测是否有暴力内容场景&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;Brand
        &lt;ol&gt;
          &lt;li&gt;检测图片中知名的品牌和 logo&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;Description:
        &lt;ol&gt;
          &lt;li&gt;generate a complete sentence that describes the image&lt;/li&gt;
          &lt;li&gt;完整的句子描述图片&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;Object
        &lt;ol&gt;
          &lt;li&gt;detect objects within the image and their location&lt;/li&gt;
          &lt;li&gt;检测图片中的对象和他们的位置&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;其他:
        &lt;ol&gt;
          &lt;li&gt;名人和地标不是 visural feature, 而是 detail 参数的值&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Detail 参数包含了
    &lt;ul&gt;
      &lt;li&gt;landmark 地标&lt;/li&gt;
      &lt;li&gt;celebrity 名人&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;通过 Rest API 获取图片信息的步骤
    &lt;ol&gt;
      &lt;li&gt;创建一个 computer vision 资源, 并获取key&lt;/li&gt;
      &lt;li&gt;在 quick start 下面进入 API console&lt;/li&gt;
      &lt;li&gt;使用 Detect Object API创建和运行 CURL 命令&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;API
    &lt;ul&gt;
      &lt;li&gt;创建缩略图
        &lt;ol&gt;
          &lt;li&gt;https:cv1.cognitiveservices.azure.com/vision/v3.1/generateThubmail&lt;/li&gt;
          &lt;li&gt;https:uksouth.api.cognitive.microsoft.com/vision/v3.1/generateThubmail
            &lt;ol&gt;
              &lt;li&gt;说明:
                &lt;ol&gt;
                  &lt;li&gt;如果指定了服务的名字(cv1) , 后面要接 cognitiveservices.azure.com&lt;/li&gt;
                  &lt;li&gt;如果制定了 region, 后面要接 api.cognitive.microsoft.com&lt;/li&gt;
                &lt;/ol&gt;
              &lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;获取图片的描述和 landmark
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;curl https://westus.api.cognitive.microsoft.com/vision/v2.0/analyze?visualFeature=Description&amp;amp;detail=Landmark -H &quot;Ocp-apim-subscription-key:abcdefg12345hijklmnop67890&quot; -H &quot;content-type:applicaiton/json&quot; -d &quot;{&apos;url&apos;:&apos;https://images.com/travel_picture.jpeg&apos;}&quot;&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;图片分析中的 captions 就是 tag 的意思
    &lt;ol&gt;
      &lt;li&gt;C# 的语法 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;results.Description.Captions&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;Python 的语法: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tags_result_remote.tags&lt;/code&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;脸部识别-face-api&quot;&gt;脸部识别 Face API&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;概念
    &lt;ul&gt;
      &lt;li&gt;Person
        &lt;ul&gt;
          &lt;li&gt;一个人的模型, 包含这个人的多张照片&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;PersonGroup
        &lt;ul&gt;
          &lt;li&gt;所有人的照片, 最多支持 1000 人, 需要额外训练时间&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;LargePersonGroup
        &lt;ul&gt;
          &lt;li&gt;所有人的照片, 最多支持 100 万人, 需要额外训练时间&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;PersonDirectory
        &lt;ul&gt;
          &lt;li&gt;所有人的照片, 可以支持 7500 万人, 不需要训练新的脸&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;DynamicPersonGroup
        &lt;ul&gt;
          &lt;li&gt;按条件过滤后的脸部信息&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Location
        &lt;ul&gt;
          &lt;li&gt;在图片中识别到的面部的方形坐标,  包含了 top, left, height, width (方形脸部在距离图片顶部, 左侧的距离, 方形的高度, 宽度)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;场景
    &lt;ul&gt;
      &lt;li&gt;Face Verification (Verify API)
        &lt;ul&gt;
          &lt;li&gt;大门刷脸&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Face identification  (Identify API)
        &lt;ul&gt;
          &lt;li&gt;识别一张图片中的多个脸 , 比如谁参加了第一堂课&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Detect API
        &lt;ul&gt;
          &lt;li&gt;是检测, 检测上课的同学的面部表情参数信息来了解学生的参与度(engagement)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Find similar face
        &lt;ul&gt;
          &lt;li&gt;找到和目标脸相似的脸&lt;/li&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.face.detect_with_url&lt;/code&gt; 检测图片中的脸, 并把每个脸的数据返回&lt;/li&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.face.find_similar&lt;/code&gt; 在多个脸的数据中匹配某一个脸&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;瞳孔跟踪
        &lt;ul&gt;
          &lt;li&gt;通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;DetectWithStreamAsync&lt;/code&gt; 方法获取瞳孔信息&lt;/li&gt;
          &lt;li&gt;把 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;returnFaceLandmarks&lt;/code&gt; 参数设置成 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;true&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;.net 识别人脸的代码步骤
    &lt;ol&gt;
      &lt;li&gt;Initialize variables and helper functions&lt;/li&gt;
      &lt;li&gt;Authorize API call&lt;/li&gt;
      &lt;li&gt;Create Marketing PersonGroup&lt;/li&gt;
      &lt;li&gt;Create person&lt;/li&gt;
      &lt;li&gt;Add faces&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;面部匹配,
    &lt;ol&gt;
      &lt;li&gt;如果小于 1000 张图片, 用 faceListId,&lt;/li&gt;
      &lt;li&gt;如果 1000 - 100,000, 用 largeFaceListId&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;通过一个人的样例照片找到这个人的所有照片
    &lt;ol&gt;
      &lt;li&gt;API 用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;findSimilars&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;mode 用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;matchPerson&lt;/code&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Face API 的 detection 模型用了 detection_01 发现多模糊的照片或侧脸无法识别, 那么方法是:
    &lt;ol&gt;
      &lt;li&gt;用其他模型
        &lt;ol&gt;
          &lt;li&gt;detection_02&lt;/li&gt;
          &lt;li&gt;detection_03&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;用 Face API 查看摄像头前面的人是否是真人, 最好的方式:
    &lt;ol&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;FaceAttributes.HeadPose&lt;/code&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;认知服务-policy--日志--principle&quot;&gt;认知服务 Policy / 日志 / Principle&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;关于认知服务的 privacy policy (隐私政策) , 下面的说法:
    &lt;ol&gt;
      &lt;li&gt;用文本分析服务分析的文本会被自动删除&lt;/li&gt;
      &lt;li&gt;面部识别服务识别的数据可以删除&lt;/li&gt;
      &lt;li&gt;发送给 LUIS 的 Utterance (用户的提问) 默认不会保存, 如果日志打开了, utterance 可以保存 30 天.&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;你在给认知服务配置诊断日志, 几个场景匹配如下:
    &lt;ol&gt;
      &lt;li&gt;发送日志到一个 repository, 可以通过 log query 访问
        &lt;ol&gt;
          &lt;li&gt;Log Analytics workspace&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;把数据以流的方式发送到外部的日志分析方案.
        &lt;ol&gt;
          &lt;li&gt;Event Hub&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;归档日志, 用来审计, 静态分析, 备份. 以 JSON 文件形式保存
        &lt;ol&gt;
          &lt;li&gt;Azure Blob storage&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;关于给学生在社区大学进行工作推荐要使用 认知服务, 会牵扯到几个 AI principle. 下面的匹配关系是:
    &lt;ol&gt;
      &lt;li&gt;工作推荐不会受到学生社会背景的影响 - Fairness 公平&lt;/li&gt;
      &lt;li&gt;学生的学术数据, 兴趣爱好等信息不会被学校外部访问 - Privacy and Security 隐私与安全&lt;/li&gt;
      &lt;li&gt;AI的行为会通过 guideline 解释给学生, 让他们找到更好的工作 - Transparency 透明&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;您正在开发一个新的销售系统，该系统将处理来自面向公众的网站的视频和文本。 您计划监视销售系统，以确保无论用户的位置或背景如何，它都能提供公平的结果。 哪两个负责任的 AI 原则提供指导以满足监视要求？每个正确答案都表示解决方案的一部分。 注意：每个正确的选择都值一分。
    &lt;ol&gt;
      &lt;li&gt;fairness 公平&lt;/li&gt;
      &lt;li&gt;inclusiveness 包容&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;如果要让对话机器人更加 包容 (inclusiveness) , 那么就要增加:
    &lt;ol&gt;
      &lt;li&gt;Direct line speech&lt;/li&gt;
      &lt;li&gt;说明:
        &lt;ol&gt;
          &lt;li&gt;包容就是让残疾人也能用, 比如不能打字的人, 小孩等, 靠说话也可以和机器人对话, 这就是包容.&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;要用情感分析来决定客服人员的奖金, 怎么做可以满足 responsible AI 的 principles?
    &lt;ol&gt;
      &lt;li&gt;再决定财务奖金之前, 增加一个人工review.&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;安全&quot;&gt;安全&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;为了让多个医疗扫描中心使用 Custom Vision 服务并防止数据泄露, 你需要配置 Azure Policy. 三个步骤
    &lt;ol&gt;
      &lt;li&gt;导航到 Azure Policy , 点击 Assign Policy&lt;/li&gt;
      &lt;li&gt;选择你的 Custom Vision 对应的 subscription 和 resource group&lt;/li&gt;
      &lt;li&gt;选择认知服务账号, 关闭 public network access policy.&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;认知服务和其他 Azure 服务整合, 需要确保只能内网访问, 只能接受来自 vnet 的请求, 那么:
    &lt;ol&gt;
      &lt;li&gt;在 Firewall and virtual networks 下面把 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Allow&lt;/code&gt; 设置成 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Disable&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;创建一个 private endpoint&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Key 1 泄露了
    &lt;ol&gt;
      &lt;li&gt;update your app to use key2&lt;/li&gt;
      &lt;li&gt;reset your key1&lt;/li&gt;
      &lt;li&gt;update your app to use key1&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;重置key2 的 API
    &lt;ol&gt;
      &lt;li&gt;POST &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://management.azure.com/subscriptions/18c51a87-3a69-47a8-aedc-a54745f708a1/resourceGroups/RG1/providers/Microsoft.CognitiveServices/accounts/contoso1/regenerateKey?api-version=2017-04-18&lt;/code&gt; Body{“keyName”: “Key2”}&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;要收集大量的 sensor 的 IOT 数据, 并需要 检测异常, 定义root cause, 发送 incident alert, 那么方案是
    &lt;ol&gt;
      &lt;li&gt;Azure Metrics Advisor&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;您正在开发一个监控系统，该系统将分析发动机传感器数据，例如转速、角度、温度和压力。系统必须生成警报以响应非典型值。
    &lt;ol&gt;
      &lt;li&gt;Multivariate Anomaly Detection&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;devops&quot;&gt;DevOps&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;ARM
    &lt;ul&gt;
      &lt;li&gt;你想要用 ARM (Azure Resource Manager) template 来重复批量的部署多个 认知服务, ARM 模板文件是什么格式的?
        &lt;ol&gt;
          &lt;li&gt;JSON&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;通过 API call 创建资源, 要用 PUT
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PUT https://management.azure.com/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{parentResourcePath}/{resourceType}/{resourceName}?api-version=2021-04-01&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;要做一个异常检测的容器版模型, 并且要保证容器的历史命令行数据不会泄露, 并且要使用 Azure 的 RBAC, 所以建容器的步骤是:
    &lt;ol&gt;
      &lt;li&gt;Pull the Anomaly Detector container image.&lt;/li&gt;
      &lt;li&gt;Create a custom Dockerfile.&lt;/li&gt;
      &lt;li&gt;Push the image to an Azure container registry.&lt;/li&gt;
      &lt;li&gt;Distribute a docker run script.&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;cost&quot;&gt;Cost&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;budget alert
    &lt;ul&gt;
      &lt;li&gt;如果 设置了 600美金 是 Actural 类型的阈值, 那么如果某个月真的花超了 600 才会收到报警&lt;/li&gt;
      &lt;li&gt;如果 设置了 900 是 Forecase 类型的阈值, 还没到 900, 就会收到报警邮件了, 会提前发送报警.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;5 万张图片要做 OCR 和 文本分析, 需要用什么服务最省钱:
    &lt;ol&gt;
      &lt;li&gt;S0 的认知服务资源(容纳多种服务的)&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Tue, 30 May 2023 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/Microsoft-Azure-AI-Solution/</link>
        <guid isPermaLink="true">http://localhost:4000/Microsoft-Azure-AI-Solution/</guid>
        
        
        <category>Azure</category>
        
        <category>AI</category>
        
        <category>ML</category>
        
        <category>Python</category>
        
        <category>LLM</category>
        
        <category>Data Science</category>
        
        <category>OpenAI</category>
        
        <category>OCR</category>
        
        <category>Face API</category>
        
        <category>Chat Bot</category>
        
        <category>Speech Service</category>
        
        <category>Computer Vision</category>
        
        <category>Custom Vision</category>
        
        <category>Video indexer</category>
        
        <category>NLP</category>
        
        <category>Translator</category>
        
        <category>Cognitive Search</category>
        
        <category>Knowledge Base</category>
        
      </item>
    
      <item>
        <title>Use ChatGPT in Python</title>
        <description>&lt;p&gt;ChatGPT API 是一个应用程序编程接口（API），由 OpenAI 提供，使开发人员能够将强大的 ChatGPT 模型无缝集成到他们的应用程序中。 这种大型语言模型(LLM)拥有能够理解自然语言并生成类似人类的回应。要在 Python 中使用 ChatGPT API，必须遵循一系列一般步骤。 我将带您了解如何在应用程序中使用 ChatGPT API Python，从在 OpenAl 网站注册到 Python 编程语言。&lt;/p&gt;

&lt;h1 id=&quot;use-chatgpt-in-python&quot;&gt;Use ChatGPT in Python&lt;/h1&gt;
&lt;p&gt;[TOC]&lt;/p&gt;

&lt;h2 id=&quot;资源&quot;&gt;资源&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;copy.ai - 类似 ChatGPT 的一个 AI&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://tome.app/invite/li-dalong-clf9kb1mt7s9q4459d0ndaqw6&quot;&gt;tome.ai&lt;/a&gt; - 写 ppt 比较好用&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;I want to create several slides to present how DevOps can help a luxury company and bring values.&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://openai.com/waitlist/gpt-4-api&quot;&gt;GPT-4 API Wating List&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kvm.yunserver.com/cart.php?gid=9&quot;&gt;极光 KVM 美国服务器购买&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;主机名: JG2303163OOB&lt;/li&gt;
      &lt;li&gt;IP: 154.40.40.31&lt;/li&gt;
      &lt;li&gt;端口: 3000&lt;/li&gt;
      &lt;li&gt;用户名: root&lt;/li&gt;
      &lt;li&gt;主机密码: &lt;your own=&quot;&quot; password=&quot;&quot;&gt;&lt;/your&gt;&lt;/li&gt;
      &lt;li&gt;面板密码:  xxxxxx&lt;/li&gt;
      &lt;li&gt;账号: xxx_xxx@hotmail.com&lt;/li&gt;
      &lt;li&gt;密码: xxxxxxxxxxxx&lt;/li&gt;
      &lt;li&gt;您的订单号是： 9110312237&lt;/li&gt;
      &lt;li&gt;API 访问: http://154.40.40.31:3000/v1/chat/completions&lt;/li&gt;
      &lt;li&gt;API Key: &lt;your own=&quot;&quot; key=&quot;&quot;&gt;&lt;/your&gt;&lt;/li&gt;
      &lt;li&gt;Orgnization Name: Personal&lt;/li&gt;
      &lt;li&gt;Orginization ID: org-W592UZabrT97qTd9rqSIZFO3&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://medium.com/apis-with-valentine/getting-started-with-the-openai-api-with-postman-52fea7f8131a&quot;&gt;如何设置 Postman &lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;telegram bot 的名字: t.me/longerlibot
    &lt;ul&gt;
      &lt;li&gt;用户名是手机号码&lt;/li&gt;
      &lt;li&gt;Token: &lt;your own=&quot;&quot; token=&quot;&quot;&gt;&lt;/your&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;chatgpt-提问技巧&quot;&gt;ChatGPT 提问技巧&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;问问题的时候如果能给出问问题的人, 以及听众, 答案会更有针对性&lt;/li&gt;
  &lt;li&gt;大段文章, 可以让 ChatGPT 帮你总结&lt;/li&gt;
  &lt;li&gt;可以给一个 有文字的 URL, 然后让 GPT 帮你翻译或者总结&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;想要了解某个不熟悉的领域&quot;&gt;想要了解某个不熟悉的领域&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ChatGPT, what are 15 questions that I could ask ChatGPT to help me build a online reselling business?&lt;/code&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;How can I use ChatGPT to help me build my landscaping business&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&quot;面试&quot;&gt;面试&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;I have an interview tomorrow for a software sales position. Can you give me ten questions I am likely to be asked.&lt;/code&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;I have an interview tomorrow for Imperial College Undergraduate entrance interview for chemistry. Can you give me ten questions I am likely to be asked, and give each question a good response?&lt;/code&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Give me a good example of a good response of the following queztions&lt;/code&gt; 把问题考过来
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Chatgpt, 你可以模拟一个DevOps 工程师的面试吗? 面试官会问相关的问题, 而面试者会进行良好的回答.&lt;/code&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ChatGPT, can you emulate an roleplay of a Imperial College interview for a student who love chemistry?&lt;/code&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Can you pretent to be a interviewer interviering me foa an account executive position for a marketing agency?&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&quot;找工作&quot;&gt;找工作&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;把工作经历(不包括总结部分)拷贝到 GPT , 让  GPT 帮你写 summary&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;based on the resume I provided you, what kinds of job be good for me to look for&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;list 10 companys that hire xxx job&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;保持身体健康&quot;&gt;保持身体健康&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;我 身高 183cm, 体重 80 公斤, 年龄 46 岁, 希望能够在 1 个月内减掉 5 斤, 请给我提供一个月的减重 calendar&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&quot;开发&quot;&gt;开发&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;how can chatgpt be used to help programmers&lt;/code&gt;
代码生成
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;write me a python funciton that will allow a user to play rock paper scissors against the computer. Have the function prompt the user for an input, randomly generate a response and let them know if they won or lost.&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;debug
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;can you identify the error in this code?&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&quot;openai-开发教程&quot;&gt;OpenAI 开发教程&lt;/h2&gt;

&lt;h3 id=&quot;基本概念&quot;&gt;基本概念&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;word - 一个单词&lt;/li&gt;
  &lt;li&gt;token
    &lt;ul&gt;
      &lt;li&gt;我们输入文字给 GPT ,  GPT把文字转成 token, 再转成 victor&lt;/li&gt;
      &lt;li&gt;因为空格, 分隔符, 长文字分割等情况, 750 个 word 大概等于 1000 个 token (一个文字大概等于 1.33 个 token)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;vactor
    &lt;ul&gt;
      &lt;li&gt;在神经网络中token 会被 encode 成 victors 被使用&lt;/li&gt;
      &lt;li&gt;GPT3 大概有12288 个向量&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Context Windows
    &lt;ul&gt;
      &lt;li&gt;上下文越大, 记忆力越好&lt;/li&gt;
      &lt;li&gt;GPT 3 有 2048 个 上下文 token&lt;/li&gt;
      &lt;li&gt;GPT3.5 有 4000 个上下文token&lt;/li&gt;
      &lt;li&gt;GPT4 有 8192 个上下文token&lt;/li&gt;
      &lt;li&gt;GPT4-32k 版本有 32768个上下文&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;GPT3 的运行模式
    &lt;ul&gt;
      &lt;li&gt;Word text is converted to token set.&lt;/li&gt;
      &lt;li&gt;Tokens are converted to vectors.&lt;/li&gt;
      &lt;li&gt;Vectors are passed into GPT-3 and the model returns a probability distribution across the vocabulary of vectors.&lt;/li&gt;
      &lt;li&gt;We can then specify via “temperature” which vector should appear next (which can then be reversed back into text).&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;DALL-E&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://openai.com/pricing&quot;&gt;定价&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;API 中常用的一些参数&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Model
    &lt;ul&gt;
      &lt;li&gt;不同的模型, 功能不一样, 价格不一样&lt;/li&gt;
      &lt;li&gt;比如 GPT3, 3.5, 4 的模型, 比如 聊天模型和 completion 模型, 比如 图片生成模型等&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Prompt
    &lt;ul&gt;
      &lt;li&gt;问 API 的问题&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Temperature
    &lt;ul&gt;
      &lt;li&gt;温度&lt;/li&gt;
      &lt;li&gt;越高, 回答的答案越有创意&lt;/li&gt;
      &lt;li&gt;越低, 回答的越保守, 越倾向于正确答案&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Top P
    &lt;ul&gt;
      &lt;li&gt;P 是 posibility 概率&lt;/li&gt;
      &lt;li&gt;和温度类似, 越高, 回答越发散&lt;/li&gt;
      &lt;li&gt;越低越趋于保守的答案&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;N
    &lt;ul&gt;
      &lt;li&gt;默认是 1&lt;/li&gt;
      &lt;li&gt;和同一个问题问 N 次是一个概念, 可能会带来更多的 token 消耗, 花更多的钱&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Frequency Penalty
    &lt;ul&gt;
      &lt;li&gt;-2 到 +2&lt;/li&gt;
      &lt;li&gt;越高结果越多样化, 越低, 多个答案可能会越有重复的感觉&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Presence Penalty
    &lt;ul&gt;
      &lt;li&gt;-2 到 +2&lt;/li&gt;
      &lt;li&gt;越高越愿意讨论新的话题, 越愿意根据之前的话题进行回顾和讨论
        &lt;h3 id=&quot;python-的-openai-库用法&quot;&gt;Python 的 openai 库用法&lt;/h3&gt;
        &lt;p&gt;安装
```bash
pip install –upgrade openai
vi ~/.zshrc       # 把这行加入到文件最下面  export OPENAI_API_KEY=’&lt;your own=&quot;&quot; key=&quot;&quot;&gt;&apos;
source ~/.zshrc  # 让变量永久生效&lt;/your&gt;&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;
使用
```python
import openai
import os
# os.environ[&quot;OPENAI_API_KEY&quot;] = &apos;&amp;lt;your own key&amp;gt;&apos;
openai.api_key = os.getenv(&quot;OPENAI_API_KEY&quot;)
openai.api_base=&apos;http://154.40.40.31:3000/v1&apos;  # 改成代理服务器

# 下面代码按具体需要来调整
# list models
models = openai.Model.list()

# print the first model&apos;s id
print(models.data[0].id)

# create a completion
completion = openai.Completion.create(model=&quot;ada&quot;, prompt=&quot;Hello world&quot;)

# print the completion
print(completion.choices[0].text)



&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;nlp-to-sql-项目一&quot;&gt;NLP to SQL (项目一)&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;需求:
    &lt;ul&gt;
      &lt;li&gt;通过 penda 把一个 CSV 文件读到内存中转化昵称 SQL database, 可以通过SQL读取数据&lt;/li&gt;
      &lt;li&gt;通过OpenAPI 把自然语言翻译成 SQL 查询语句, 然后再把 SQL 发给数据库查询数据&lt;/li&gt;
      &lt;li&gt;目标是把每个月的销售总额翻译成 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Select POSTALCODE, SUM(SALES) FROM Sales GROUP BY POSTALCODE&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;一共三个文件&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;db_utils.py
```python
from sqlalchemy import create_engine
from sqlalchemy import text&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;def dataframe_to_database(df, table_name):
    “&quot;”Convert a pandas dataframe to a database.
        Args:
            df (dataframe): pd.DataFrame which is to be converted to a database
            table_name (string): Name of the table within the database
        Returns:
            engine: SQLAlchemy engine object
    “””
    engine = create_engine(f’sqlite:///:memory:’, echo=False)
    df.to_sql(name=table_name, con=engine, index=False)
    return engine&lt;/p&gt;

&lt;p&gt;def handle_response(response):
    “&quot;”Handles the response from OpenAI.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;Args:
    response (openAi response): Response json from OpenAI

Returns:
    string: Proposed SQL query
&quot;&quot;&quot;
query = response[&quot;choices&quot;][0][&quot;text&quot;]
if query.startswith(&quot; &quot;):
    query = &quot;Select&quot;+ query
return query
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;def execute_query(engine, query):
    “&quot;”Execute a query on a database.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;Args:
    engine (SQLAlchemy engine object): database engine
    query (string): SQL query

Returns:
    list: List of tuples containing the result of the query
&quot;&quot;&quot;
with engine.connect() as conn:
    result = conn.execute(text(query))
    return result.fetchall() ``` - 第二个文件 openai_utils.py ```python import openai
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;def create_table_definition_prompt(df, table_name):
    “&quot;”This function creates a prompt for the OpenAI API to generate SQL queries.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;Args:
    df (dataframe): pd.DataFrame object to automtically extract the table columns
    table_name (string): Name of the table within the database

    Returns: string containing the prompt for OpenAI
&quot;&quot;&quot;

prompt = &apos;&apos;&apos;### sqlite table, with its properties: # # {}({}) # &apos;&apos;&apos;.format(table_name, &quot;,&quot;.join(str(x) for x in df.columns))

return prompt
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;def user_query_input():
    “&quot;”Ask the user what they want to know about the data.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;Returns:
    string: User input
&quot;&quot;&quot;
user_input = input(&quot;Tell OpenAi what you want to know about the data: &quot;)
return user_input
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;def combine_prompts(fixed_sql_prompt, user_query):
    “&quot;”Combine the fixed SQL prompt with the user query.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;Args:
    fixed_sql_prompt (string): Fixed SQL prompt
    user_query (string): User query

Returns:
    string: Combined prompt
&quot;&quot;&quot;
final_user_input = f&quot;### A query to answer: {user_query}\nSELECT&quot;
return fixed_sql_prompt + final_user_input
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;def send_to_openai(prompt):
    “&quot;”Send the prompt to OpenAI&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;Args:
    prompt (string): Prompt to send to OpenAI

Returns:
    string: Response from OpenAI
&quot;&quot;&quot;
response = openai.Completion.create(
    engine=&quot;code-davinci-002&quot;,
    prompt=prompt,
    temperature=0,
    max_tokens=150,
    top_p=1.0,
    frequency_penalty=0.0,
    presence_penalty=0.0,
    stop=[&quot;#&quot;, &quot;;&quot;]
)
return response
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;- 第三个文件 main.py

```python
# Dataset based on #https://www.kaggle.com/datasets/kyanyoga/sample-sales-data

import os
import logging

import pandas as pd
import openai

import db_utils
import openai_utils

logging.basicConfig(format=&apos;%(asctime)s - %(message)s&apos;, level=logging.INFO)
openai.api_key = os.environ[&quot;OPENAI_API_KEY&quot;]

if __name__ == &quot;__main__&quot;:
    logging.info(&quot;Loading data...&quot;)
    df = pd.read_csv(&quot;data/sales_data_sample.csv&quot;)
    logging.info(f&quot;Data Format: {df.shape}&quot;)

    logging.info(&quot;Converting to database...&quot;)
    database = db_utils.dataframe_to_database(df, &quot;Sales&quot;)
    
    fixed_sql_prompt = openai_utils.create_table_definition_prompt(df, &quot;Sales&quot;)
    logging.info(f&quot;Fixed SQL Prompt: {fixed_sql_prompt}&quot;)

    logging.info(&quot;Waiting for user input...&quot;)
    user_input = openai_utils.user_query_input()
    final_prompt = openai_utils.combine_prompts(fixed_sql_prompt, user_input)
    logging.info(f&quot;Final Prompt: {final_prompt}&quot;)

    logging.info(&quot;Sending to OpenAI...&quot;)
    response = openai_utils.send_to_openai(final_prompt)
    proposed_query = response[&quot;choices&quot;][0][&quot;text&quot;]
    proposed_query_postprocessed = db_utils.handle_response(response)
    logging.info(f&quot;Response obtained. Proposed sql query: {proposed_query_postprocessed}&quot;)
    result = db_utils.execute_query(database, proposed_query_postprocessed)
    logging.info(f&quot;Result: {result}&quot;)
    print(result)
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;auto-exam-creator-项目二&quot;&gt;Auto Exam Creator (项目二)&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;需求:
    &lt;ul&gt;
      &lt;li&gt;做一个模板, 我们要为学校的老师要考试的主题, 单选还是多选题,  问题个数, 答案个数, 以及指出来哪一个是正确答案&lt;/li&gt;
      &lt;li&gt;还要开发一个考试交互界面, 让学生可以进行答题. 要循环出来每一道题, 然后让学生输入选择的答案&lt;/li&gt;
      &lt;li&gt;应用通过对比正确答案和学生输入的答案给学生一个分数&lt;/li&gt;
      &lt;li&gt;把最后的得分记录下来&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;一共 4 个文件&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;main.py&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;teacher&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Teacher&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;exam_simulator&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Exam&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;### Create an instance of the Teacher class which asks the user about the topic, number of possible answers per question, and number of questions.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;teacher&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Teacher&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;student_view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;answers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;teacher&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_full_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;### Create an instance of the Exam class which runs the exam simulation and grades the exam.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;exam&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Exam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student_view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;answers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;store_test&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;topic&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teacher&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test_creator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;topic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;student_answers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exam&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;take&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student_answers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;grade&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exam&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;grade&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student_answers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;grade&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;teacher.py&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;logging&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;test_creator&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TestGenerator&lt;/span&gt;


&lt;span class=&quot;n&quot;&gt;logging&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;basicConfig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%(asctime)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s - &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%(message)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;level&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;logging&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;INFO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;dummy_test&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Q1. What is the syntax for declaring a variable in Python?&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;A. #variable&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;B. var variable&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;C. !variable&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;D. var = variable&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Correct Answer: D. var = variable&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Q2. What type of language is Python?&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;A. Interpreted&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;B. Compiled&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;C. Assembly&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;D. Machine&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Correct Answer: A. Interpreted&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Q3. What type of loop is used when a set of instructions need to be repeated until a condition is met?&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;A. For loop&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;B. While loop&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;C. Do-while loop&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;D. If-else loop&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Correct Answer: B. While loop&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Q4. What is the result of the following expression?&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;2 + 5 * 3&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;A. 23&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;B. 17&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;C. 11&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;D. 25&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Correct Answer: B. 17&apos;&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Teacher&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Welcome! Run create_full_test() to create a test.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;


    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;create_full_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;topic&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;What topic would you like to create a test on? &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;num_possible_answers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;How many possible answers would you like to have? &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;num_questions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;How many possible answers per question would you like to have? &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test_creator&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TestGenerator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;topic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_possible_answers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_questions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test_creator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;#test = dummy_test&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;#logging.info(test)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;student_view&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_student_view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_questions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;answers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extract_answers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_questions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;student_view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;answers&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;create_student_view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_questions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;student_view&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;question_number&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;startswith&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Correct Answer:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;student_view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;question_number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                
                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;question_number&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_questions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;question_number&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;student_view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;question_number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;student_view&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;extract_answers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_questions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;answers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;question_number&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;startswith&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Correct Answer:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;answers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;question_number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;

                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;question_number&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_questions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;question_number&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;answers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;question_number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;answers&lt;/span&gt;

        

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__name__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;__main__&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;teacher&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Teacher&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;student_view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;answers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;teacher&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_full_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student_view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;answers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;exam_simulator.py&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;datetime&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;teacher&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Teacher&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Exam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;student_view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;answers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;store_test&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;topic&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student_view&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;student_view&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;answers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;answers&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;store_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;store_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;topic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;take&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;answers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;question&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;question_view&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student_view&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;items&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;question_view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;answer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Enter your answer: &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;answers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;question&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;answer&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;answers&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;grade&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;answers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;correct_answers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;question&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;answer&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;answers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;items&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;answer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;upper&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;answers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;question&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;upper&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;correct_answers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;grade&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;correct_answers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;answers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;grade&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;60&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;passed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Not passed!&quot;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;passed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Passed!&quot;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;{correct_answers} out of {len(answers)} correct! You achieved: {grade} &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;% &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;: {passed}&quot;&lt;/span&gt;


    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;store_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;topic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;Test_{topic}_{datetime.datetime.now().strftime(&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Y-&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;m-&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;d_&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;H-&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;M-&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;S&quot;)}.txt&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;w&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;question&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;question_view&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student_view&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;items&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
                &lt;span class=&quot;nb&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;question_view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;nb&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;nb&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;answers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;question&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
                &lt;span class=&quot;nb&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__name__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;__main__&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;teacher&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Teacher&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;student_view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;answers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;teacher&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_full_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;exam&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Exam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student_view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;answers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;store_test&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;topic&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;teacher&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test_creator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;topic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;student_answers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exam&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;take&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student_answers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;grade&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exam&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;grade&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;student_answers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;grade&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;test_creator.py&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;openai&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;openai&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;api_key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;environ&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;OPENAI_API_KEY&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestGenerator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;topic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_possible_answers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_questions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;topic&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;topic&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;num_possible_answers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_possible_answers&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;num_questions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_questions&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;num_questions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;ValueError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Attention! Generation of many questions might be expensive!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;num_possible_answers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;ValueError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;More than 5 possible answers is not supported!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TestGenerator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_verify_prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;generate_quiz&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;choices&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        
        &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;ValueError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Prompt not accepted.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;


    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;generate_quiz&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;openai&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Completion&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;engine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text-davinci-003&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                            &lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                            &lt;span class=&quot;n&quot;&gt;max_tokens&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;256&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                            &lt;span class=&quot;n&quot;&gt;temperature&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;
        

    &lt;span class=&quot;nd&quot;&gt;@staticmethod&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;_verify_prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Are you happy with the prompt? (y/n)&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;upper&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Y&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;


    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;create_prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Create a multiple choice quiz on the topic of {self.topic} consisting of {self.num_questions} questions. &quot;&lt;/span&gt; \
                 &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Each question should have {self.num_possible_answers} options. &quot;&lt;/span&gt;\
                 &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Also include the correct answer for each question using the starting string &apos;Correct Answer: &apos;.&quot;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt;
        

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__name__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;__main__&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;gen&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TestGenerator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Python&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;auto-recipt-creator-项目三&quot;&gt;Auto Recipt Creator (项目三)&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;需求: 回家看到冰箱里有一堆菜和原料, 想要根据现有食材做个食谱, 并生成一个做好的菜的图片
    &lt;ul&gt;
      &lt;li&gt;提供一个原料列表, 先请求  GPT 获取带有标题的一个食谱, 然后在把标题发给  Dall-E 获取食谱照片&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;三个文件&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;main.py
```python
from recipe import RecipeGenerator
from dalle import Dish2Image&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;create-an-instance-of-the-recipegenerator-class&quot;&gt;Create an instance of the RecipeGenerator class&lt;/h3&gt;
&lt;p&gt;gen = RecipeGenerator()&lt;/p&gt;
&lt;h3 id=&quot;ask-the-user-for-input-and-create-the-recipe&quot;&gt;Ask the user for input and create the recipe&lt;/h3&gt;
&lt;p&gt;recipe = gen.generate_recipe()&lt;/p&gt;
&lt;h3 id=&quot;print-the-recipe&quot;&gt;Print the recipe&lt;/h3&gt;
&lt;p&gt;print(recipe)&lt;/p&gt;
&lt;h3 id=&quot;create-an-instance-of-the-dish2image-class&quot;&gt;Create an instance of the Dish2Image class&lt;/h3&gt;
&lt;p&gt;dalle = Dish2Image(recipe)&lt;/p&gt;
&lt;h3 id=&quot;visualize-the-dish&quot;&gt;Visualize the dish&lt;/h3&gt;
&lt;p&gt;dalle.generate_image()&lt;/p&gt;
&lt;h3 id=&quot;store-the-recipe-in-a-text-file&quot;&gt;Store the recipe in a text file&lt;/h3&gt;
&lt;p&gt;gen.store_recipe(recipe, f”{dalle.title}.txt”)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;
2. dalle.py

```python
import re
import requests
import shutil

import openai

class Dish2Image:

    def __init__(self, recipe):
        self.recipe = recipe
        self.title = Dish2Image._extract_title(recipe)

    def generate_image(self):
        prompt = self.dalle2_prompt()
        if Dish2Image._verify_prompt(prompt):
            response = Dish2Image.generate(prompt)
            image_url = response[&apos;data&apos;][0][&apos;url&apos;]
            return Dish2Image.save_image(image_url, f&quot;{self.title}.jpg&quot;)
        raise ValueError(&quot;Prompt not accepted.&quot;)


    def dalle2_prompt(self):
        prompt = f&quot;&apos;{self.title}&apos;, professional food photography, 15mm, studio lighting&quot;
        return prompt

    @staticmethod
    def _verify_prompt(prompt):
        print(prompt)
        response = input(&quot;Are you happy with the prompt? (y/n)&quot;)

        if response.upper() == &quot;Y&quot;:
            return True
        return False


    @staticmethod
    def _extract_title(recipe):
        return re.findall(&quot;^.*Recipe Title: .*$&quot;, recipe, re.MULTILINE)[0].strip().split(&quot;Recipe Title: &quot;)[1]

    @staticmethod
    def generate(image_prompt):
        response = openai.Image.create(prompt=image_prompt,
                                        n=1,
                                        size=&quot;1024x1024&quot;
                                        )
        return response

    @staticmethod
    def save_image(image_url, file_name):
        image_res = requests.get(image_url, stream = True)
        
        if image_res.status_code == 200:
            with open(file_name,&apos;wb&apos;) as f:
                shutil.copyfileobj(image_res.raw, f)
        else:
            print(&quot;Error downloading image!&quot;)
        return image_res.status_code

if __name__ == &quot;__main__&quot;:
    &quot;&quot;&quot;
    Test Dish2Image class based on the Recipe Title: Savory Tomato Apple Spaghetti
    &quot;&quot;&quot;
    dalle = Dish2Image(&quot;Recipe Title: Savory Tomato Apple Spaghetti&quot;)
    dalle.generate_image()
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;recipe.py&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;openai&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;openai&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;api_key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getenv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;OPENAI_API_KEY&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RecipeGenerator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            
        
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;list_of_ingredients&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ask_for_ingredients&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;nd&quot;&gt;@staticmethod&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ask_for_ingredients&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;list_of_ingredients&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;ingredient&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Enter an ingredient (or type &apos;done&apos; to finish): &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ingredient&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lower&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;done&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;list_of_ingredients&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ingredient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Your ingredients are: {&apos;, &apos;.join(list_of_ingredients)}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;list_of_ingredients&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;generate_recipe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RecipeGenerator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_recipe_prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;list_of_ingredients&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RecipeGenerator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_verify_prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RecipeGenerator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;generate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;choices&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;ValueError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Prompt not accepted.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;nd&quot;&gt;@staticmethod&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;create_recipe_prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;list_of_ingredients&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Create a detailed recipe based on only the following ingredients: {&apos;, &apos;.join(list_of_ingredients)}.&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt; \
                &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Additionally, assign a title starting with &apos;Recipe Title: &apos; to this dish, which can be used to create a photorealistic image of it.&quot;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt;

    &lt;span class=&quot;nd&quot;&gt;@staticmethod&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;_verify_prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Are you happy with the prompt? (y/n)&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;upper&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Y&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;

    &lt;span class=&quot;nd&quot;&gt;@staticmethod&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;generate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;openai&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Completion&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;engine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text-davinci-003&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                                    &lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                                    &lt;span class=&quot;n&quot;&gt;max_tokens&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;256&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                                    &lt;span class=&quot;n&quot;&gt;temperature&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;store_recipe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;recipe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;w&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;recipe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__name__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;__main__&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;
    Test RecipeGenerator class without creating an image of the dish.
    &quot;&quot;&quot;&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;gen&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RecipeGenerator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;recipe&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;generate_recipe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;recipe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;sentiment-analysis-项目五&quot;&gt;Sentiment Analysis (项目五)&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;需求: 从一个社交网站(reddit.com)上抓取某个公司/人物/分类相关的文章, 然后通过 GPT 对文章的评论进行 sentiment 分析, 给出结果
    &lt;ul&gt;
      &lt;li&gt;中国可以用头条, 抖音代替 ,查看新闻和视频的用户评论, 分析评论情况&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;结果包括正面, 一般, 负面&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;三个文件&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;main.py&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pathlib&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Path&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;blog_utils&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;openai_utils&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;### Define your paths here&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#PATH_TO_BLOG_REPO = Path(&apos;C/path/to/.git&apos;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;PATH_TO_BLOG&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PATH_TO_BLOG_REPO&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;PATH_TO_CONTENT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PATH_TO_BLOG&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;content&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;PATH_TO_CONTENT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mkdir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exist_ok&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parents&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;###&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Define a title and get the blog content from OpenAI&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Why AI will never replace the radiologist&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;openai_utils&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;blog_content&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;openai_utils&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_blog_from_openai&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Get the cover image and create the blog&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cover_image_save_path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;openai_utils&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_cover_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;cover_image.png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;path_to_new_content&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blog_utils&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_new_blog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PATH_TO_CONTENT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blog_content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cover_image_save_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;blog_utils&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write_to_index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PATH_TO_BLOG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path_to_new_content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Update the blog&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;blog_utils&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;update_blog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PATH_TO_BLOG_REPO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;blog_utils.py&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pathlib&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Path&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;shutil&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;bs4&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BeautifulSoup&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Soup&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;git&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Repo&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;create_new_blog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path_to_content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cover_image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;../PT Centered Purple.png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)):&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;cover_image&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cover_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;files&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path_to_content&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;glob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;*.html&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;new_title&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;{files+1}.html&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;path_to_new_content&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path_to_content&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new_title&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;shutil&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cover_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path_to_content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exists&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path_to_new_content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path_to_new_content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;w&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;html&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;head&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;title&amp;gt; {title} &amp;lt;/title&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;/head&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            
            &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;body&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;img src=&apos;{cover_image.name}&apos; alt=&apos;Cover Image&apos;&amp;gt; &amp;lt;br /&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;h1&amp;gt; {title} &amp;lt;/h1&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;br /&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;/body&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;/html&amp;gt;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Blog created&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path_to_new_content&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FileExistsError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;File already exist! Abort&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;check_for_duplicate_links&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path_to_new_content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;links&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;urls&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;link&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;href&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;link&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;links&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;content_path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path_to_new_content&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:]))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;content_path&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urls&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;write_to_index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path_to_blog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path_to_new_content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path_to_blog&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;index.html&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;soup&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Soup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;links&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;soup&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;find_all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;last_link&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;links&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;check_for_duplicate_links&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path_to_new_content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;links&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;ValueError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Link does already exist!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        
    &lt;span class=&quot;n&quot;&gt;link_to_new_blog&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;soup&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new_tag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;href&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path_to_new_content&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:]))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;link_to_new_blog&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path_to_new_content&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;last_link&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;insert_after&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;link_to_new_blog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path_to_blog&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;index.html&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;w&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;soup&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prettify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;formatter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;html&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;update_blog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path_to_blog_repo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;commit_message&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Updated blog&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;repo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Repo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path_to_blog_repo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;repo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;git&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;repo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;commit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;commit_message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;origin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;repo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remote&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;origin&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;origin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;openai_utils.py&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;requests&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;shutil&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;openai&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;openai&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;api_key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getenv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;OPENAI_API_KEY&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;create_prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;Jose&apos;s Website
 
 Biography
 I am a Python instructor teaching people machine learning!


 Blog

 Jan 31, 2023
 Title: Why AI will never replace the radiologist
 tags: tech, machine-learning, radiology
 Summary:  I talk about the cons of machine learning in radiology. I explain why I think that AI will never replace the radiologist.
 Full text:&quot;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get_blog_from_openai&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blog_title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;openai&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Completion&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;engine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text-davinci-003&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                            &lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blog_title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
                                            &lt;span class=&quot;n&quot;&gt;max_tokens&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;512&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# we increased the tokens to get a longer blog post&lt;/span&gt;
                                            &lt;span class=&quot;n&quot;&gt;temperature&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;choices&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;dalle2_prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Pixel art showing &apos;{title}&apos;.&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;save_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;image_res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requests&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stream&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image_res&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;wb&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;shutil&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;copyfileobj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image_res&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;raw&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Error downloading image!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image_res&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get_cover_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;save_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;openai&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dalle2_prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;1024x1024&quot;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;image_url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;data&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;url&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;save_image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;save_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt;

&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;为代码添加注释-项目六&quot;&gt;为代码添加注释 (项目六)&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;需求:
    &lt;ul&gt;
      &lt;li&gt;把python 代码 以 .py 的文件形式输入给 GPT, 让它们我们把注释描述出来, 然后以同一个文件在返回给我们&lt;/li&gt;
      &lt;li&gt;我们在 GPT 外面包装了文件上传下载功能, 和文件展示功能&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

</description>
        <pubDate>Tue, 09 May 2023 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/ChatGPT-and-OpenAI-Python-API-Bootcamp/</link>
        <guid isPermaLink="true">http://localhost:4000/ChatGPT-and-OpenAI-Python-API-Bootcamp/</guid>
        
        
        <category>ChatGPT</category>
        
        <category>OpenAI</category>
        
        <category>Python</category>
        
        <category>LLM</category>
        
        <category>Prompt</category>
        
        <category>DALL-E</category>
        
      </item>
    
      <item>
        <title>Prepare TOGAF, The Open Group Architecture Framework Certification</title>
        <description>&lt;p&gt;TOGAF® 基本上是一套清晰的组织发展规则和实践，旨在帮助组织。它指导企业如何在单一战略中创建、解释、分析和利用不同的要素。该框架还使用了明确定义的术语。这样可以简化部门之间的沟通，并大大减少浪费错误的可能性。就让我带领你揭开他的面纱。&lt;/p&gt;

&lt;h1 id=&quot;togaf&quot;&gt;TOGAF&lt;/h1&gt;
&lt;p&gt;[TOC]&lt;/p&gt;

&lt;h2 id=&quot;资源&quot;&gt;资源&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://pubs.opengroup.org/architecture/togaf9-doc/arch/&quot;&gt;TOGIF 9.2标准&lt;/a&gt;
&lt;a href=&quot;https://publications.opengroup.org/togaf-library?_ga=2.13000052.237257023.1685593249-50990242.1685593249&quot;&gt;Togaf library&lt;/a&gt;
&lt;a href=&quot;https://publications.opengroup.org/more-categories/templates/i093&quot;&gt;sample deliverables&lt;/a&gt;
&lt;a href=&quot;https://www.opengrooup.org&quot;&gt;TOGAF 官网&lt;/a&gt;
&lt;a href=&quot;https://pubs.opengroup.org/architecture/togaf92-doc/arch/&quot;&gt;在线的 Togaf 9.2 标准文档&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;题库&quot;&gt;题库&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://www.techbolo.com/questions/index.php/942419/lang-en&quot;&gt;1&lt;/a&gt;
&lt;a href=&quot;https://www.webagesolutions.com/wp-content/uploads/2020/09/TOGAF-Part-1-Practice-Test.pdf&quot;&gt;2&lt;/a&gt;
&lt;a href=&quot;https://www.udemy.com/course/5-practice-exams-92-foundation-part-1-og0-091/&quot;&gt;5 套练习题, 需要 16 美元, 已购买&lt;/a&gt;
&lt;a href=&quot;https://download.csdn.net/download/guanggonglangzi/10970291&quot;&gt;CSDN 上的一些题, 要付费&lt;/a&gt;
&lt;a href=&quot;https://www.examtopics.com/exams/the-open-group/og0-091/view/&quot;&gt;在线的 part1 307 道题&lt;/a&gt;
&lt;a href=&quot;https://www.examtopics.com/exams/the-open-group/og0-092/&quot;&gt;在线的 part2 80 道题&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;考试入口&quot;&gt;考试入口&lt;/h2&gt;
&lt;p&gt;https://www.opengroup.org/certifications/take-exam
https://home.pearsonvue.com/theopengroup
&lt;a href=&quot;https://www.opengroup.org/certifications/online-proctored-exams&quot;&gt;在线考试介绍&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;重要的英文单词&quot;&gt;重要的英文单词&lt;/h2&gt;
&lt;p&gt;acronym - 首字母缩写&lt;/p&gt;

&lt;h2 id=&quot;学习技巧&quot;&gt;学习技巧&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;跟着视频学一章, 然后回头去手册对应章节讲的内容.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;架构概念&quot;&gt;架构概念&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;一个企业架构的架构框架&lt;/li&gt;
  &lt;li&gt;框架: 方法工具和定义&lt;/li&gt;
  &lt;li&gt;ADM Architecture Development Method (ADM)&lt;/li&gt;
  &lt;li&gt;架构的ISO/IEC/IEEE 42010: 2011定义
    &lt;ul&gt;
      &lt;li&gt;ISO/IEC/IEEE 42010: 2011
“The fundamental concepts or properties of a system in its environment embodied in its elements, relationships, and in the principles of its design and evolution.”&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;架构的 TOGAF 定义
    &lt;ul&gt;
      &lt;li&gt;“The structure of components, their inter-relationships, and the principles and guidelines governing their design and evolution over time.”&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;架构的 大白话 解释
    &lt;ul&gt;
      &lt;li&gt;一个系统的多个部分和他们的关系, 以及他们的治理原则, 设计和进化&lt;/li&gt;
      &lt;li&gt;TOGAF 是一个架构框架&lt;/li&gt;
      &lt;li&gt;我们通过架构框架来指导我们进行架构工作&lt;/li&gt;
      &lt;li&gt;工作中要用 togaf , 还需要购买 togaf 的 license&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;togag-认证-与-考试&quot;&gt;TOGAG 认证 与 考试&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;有两个级别的考试&lt;/li&gt;
  &lt;li&gt;Level 1 and Level 2 Or Part 1 and Part 2
    &lt;ul&gt;
      &lt;li&gt;level 1 过了可以拿到 TOGAF Foundation 认证&lt;/li&gt;
      &lt;li&gt;level 1 和 level 2 都过了, 才能拿到完整的 TOGAF 认证&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;TOGAF Part 1
  ● A test of core knowledge of the standard
      标准的核心概念
  ● A multiple-choice test, only 1 correct answer 
      多选题, 一个正确答案
  ● 40 questions over 60 minutes 
      40 道题 60分钟的考试
  ● Need 55% to pass, or 22 correct out of 40
      答对 22 道题算过
  ● Each correct answer is worth 1 point
      每个题算一分
    &lt;ul&gt;
      &lt;li&gt;中英文都有&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;TOGAF Part 2
  ● A test of how you apply the TOGAF Standard
      考灵活运用
  ● A scenario based test, scored using gradient scoring
      基于场景的测试
  ● Open book exam
      开卷考试, 可以访问考试提供的标准信息
  ● 8 questions over 90 minutes
      90 分钟, 8 个问题
  ● Need 60% to pass
  ● Must have passed Part 1 to take Part 2
      考过了 part1 才能考 part2&lt;/li&gt;
  &lt;li&gt;可以两个考试合并到一个, 一起考, 费用如下
    &lt;ul&gt;
      &lt;li&gt;part1 or part2 - 考试费用 US$360 per test&lt;/li&gt;
      &lt;li&gt;part1 + part2 一起考 - 考试费用 US$550 for the combined test&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;考试语言 中英文&lt;/li&gt;
  &lt;li&gt;考试版本, 还是以 9.2 为考试基础, togaf 10 还没有考试&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;togaf-92-的标准&quot;&gt;togaf 9.2 的标准&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;标准分成 6 个部分
    &lt;ol&gt;
      &lt;li&gt;Introduction
        &lt;ul&gt;
          &lt;li&gt;介绍核心概念和定义&lt;/li&gt;
          &lt;li&gt;学习的时候要对照中英文手册, 确保概念理解&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;ADM
        &lt;ul&gt;
          &lt;li&gt;架构开发方法&lt;/li&gt;
          &lt;li&gt;是 togaf 的核心&lt;/li&gt;
          &lt;li&gt;架构师做架构的流程和迭代方式&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Guidelines and techniques
        &lt;ul&gt;
          &lt;li&gt;指导方针和技术&lt;/li&gt;
          &lt;li&gt;应用架构的标准一些材料, 把这些材料为我们自己的场景进行定制化&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Architect content framework
        &lt;ul&gt;
          &lt;li&gt;结构化的原始模型, 为最终的架构交付物作为原型和基础&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Enterprise Continuum
        &lt;ul&gt;
          &lt;li&gt;企业连续性&lt;/li&gt;
          &lt;li&gt;是一个目录编辑模型&lt;/li&gt;
          &lt;li&gt;当我们把架构设计放到 架构的 repository中, 进行分类管理和版本管理?&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Architecture Capability Framework
        &lt;ul&gt;
          &lt;li&gt;架构能力框架&lt;/li&gt;
          &lt;li&gt;为了定义一个企业架构, 我们需要告诉大家这个架构的能力&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;togaf library
    &lt;ul&gt;
      &lt;li&gt;是一个图书馆, 或者叫做材料库&lt;/li&gt;
      &lt;li&gt;当我们做架构项目, 可以在 library 中找到一些文档材料&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;生成版本的版本号
    &lt;ul&gt;
      &lt;li&gt;0.1 表示 draft 的第一个版本&lt;/li&gt;
      &lt;li&gt;1.0 表示已经被 同意和签字了的版本&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;part-1-togaf-介绍---核心和基础概念&quot;&gt;Part 1 togaf 介绍 - 核心和基础概念&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://pubs.opengroup.org/architecture/togaf9-doc/arch/&quot;&gt;官网的togaf 9.2 标准&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;7 个核心概念
  ● The definition of enterprise
  ● The architecture domains, or BDAT
  ● The architecture development method, or ADM
  ● Deliverables, artifacts and building blocks
  ● The enterprise continuum
  ● The architecture repository
  ● And, defining architecture capability&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;企业的定义&quot;&gt;企业的定义&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;“Highest level of description for an organization”
    &lt;ul&gt;
      &lt;li&gt;可能是一个 组织, 或者是多个组织的组合
        &lt;ul&gt;
          &lt;li&gt;比如麦当劳和他们的生态伙伴,也可以理解为一个大的企业&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;架构师的工作范围
    &lt;ul&gt;
      &lt;li&gt;可能是企业的某个部分的架构设计, 也可能是负责企业和生态的所有架构&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;四个架构域-bdat&quot;&gt;四个架构域 BDAT&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;企业架构可以分四层
    &lt;ul&gt;
      &lt;li&gt;Business, Data, Application, Technology&lt;/li&gt;
      &lt;li&gt;Business Domain 是一层, 主要是业务架构&lt;/li&gt;
      &lt;li&gt;DAT 是剩下的一大层, 是技术架构&lt;/li&gt;
      &lt;li&gt;技术架构再分层 Data, Applicaiton, Technology&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Business Domain
    &lt;ul&gt;
      &lt;li&gt;由企业执行层来决定的业务单元&lt;/li&gt;
      &lt;li&gt;定义现在和未来的 business capability&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Data Domain
    &lt;ul&gt;
      &lt;li&gt;数据域处理逻辑/物理数据资产&lt;/li&gt;
      &lt;li&gt;处理现在和未来企业数据的主要类型和资源的交互与结构&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Application Domain
    &lt;ul&gt;
      &lt;li&gt;处理每个应用的开发和部署的方式&lt;/li&gt;
      &lt;li&gt;每个应用和核心业务流程的关系&lt;/li&gt;
      &lt;li&gt;处理现在和未来一组应用提供的业务功能的交互与结构的能力&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Technology Domain
    &lt;ul&gt;
      &lt;li&gt;技术域包括了计算, 网络, 中间件, 第三方应用等&lt;/li&gt;
      &lt;li&gt;是业务的支撑系统&lt;/li&gt;
      &lt;li&gt;处理现在和未来技术服务与技术内容的交互与结构&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;adm-架构开发方法&quot;&gt;ADM 架构开发方法&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;是 togaf 的核心&lt;/li&gt;
  &lt;li&gt;adm 是定义企业架构的流程&lt;/li&gt;
  &lt;li&gt;可以被测试, 可以重复使用&lt;/li&gt;
  &lt;li&gt;分成几个阶段
    &lt;ul&gt;
      &lt;li&gt;Preliminary Phase
        &lt;ul&gt;
          &lt;li&gt;发布基本的 principles, setup 架构能力, 对任务进行指导, 让决策更容易&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;ADM cycle
        &lt;ul&gt;
          &lt;li&gt;是一个循环, 包括了 8 个阶段, 从 A 到 H&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;A:
        &lt;ul&gt;
          &lt;li&gt;Vision&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;B, C, D:
        &lt;ul&gt;
          &lt;li&gt;定义架构&lt;/li&gt;
          &lt;li&gt;定义 BDAT 四个域&lt;/li&gt;
          &lt;li&gt;需要管理层 Sign off&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;E, F:
        &lt;ul&gt;
          &lt;li&gt;定义工作计划&lt;/li&gt;
          &lt;li&gt;定义实现架构的流程&lt;/li&gt;
          &lt;li&gt;一系列的 transition architectures&lt;/li&gt;
          &lt;li&gt;帮助我们从目前的阶段到未来要达到的阶段&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;G:
        &lt;ul&gt;
          &lt;li&gt;实施&lt;/li&gt;
          &lt;li&gt;和开发团队一起实现这个架构&lt;/li&gt;
          &lt;li&gt;发布架构合同 ?&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;H:
        &lt;ul&gt;
          &lt;li&gt;变化管理&lt;/li&gt;
          &lt;li&gt;架构实现之后的变化管理&lt;/li&gt;
          &lt;li&gt;变化需要再走一遍这个 ADM cycle&lt;/li&gt;
          &lt;li&gt;变化包括新的业务需求,&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Requriement Management Phase
    &lt;ul&gt;
      &lt;li&gt;是上面的多个阶段中心的一个阶段&lt;/li&gt;
      &lt;li&gt;对需求进行管理的流程&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;一共 10 个 phases
    &lt;ul&gt;
      &lt;li&gt;有 Preliminary Phase 和 A-H 的 cycle, 中间还有一个 requirement management phase&lt;/li&gt;
      &lt;li&gt;每个阶段都有自己对应的 Objective, Inpute, Steps, Outputs (目标, 输入, 步骤, 输出)
        &lt;ul&gt;
          &lt;li&gt;输入来自 repository 中的现有资产, 或者自己创建新的资产, 需要和stakeholders 进行合作
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-06-02-141047.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;phases 可以被暂停, 可以返回和修改一个过去的phase&lt;/li&gt;
      &lt;li&gt;Iteration 是 cycle 中的某些流程可以进行循环的迭代
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-06-02-145228.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
      &lt;li&gt;ADM 可以按照我们的需要就行定制和调整&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;part-2-adm&quot;&gt;Part 2 ADM&lt;/h2&gt;

&lt;h3 id=&quot;preliminary-phase-预备阶段&quot;&gt;Preliminary Phase 预备阶段&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;描述打造架构能力所需的准备工作和启 动工作，包括客制化 TOGAF 框架和定 义架构原则。&lt;/li&gt;
  &lt;li&gt;定义组织&lt;strong&gt;期望&lt;/strong&gt;的架构能力的级别, 包含了架构的 principles&lt;/li&gt;
  &lt;li&gt;Where, what, why, who, and how we do architecture&lt;/li&gt;
  &lt;li&gt;包括 收集和发布 架构能力&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Business imperative (业务的势在必行) 会在 预备阶段, scoping 企业架构工作的时候, 驱动 需求和性能 metrics&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Objectives
    &lt;ul&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Determine the Architecture &lt;strong&gt;Capability&lt;/strong&gt; desired by the organization:&lt;/td&gt;
              &lt;td&gt;组织期待的决定的架构能力&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
        &lt;ul&gt;
          &lt;li&gt;Review the organizational context for conducting Enterprise Architecture&lt;/li&gt;
          &lt;li&gt;Identify and scope the elements of the enterprise organizations affected by the Architecture Capability&lt;/li&gt;
          &lt;li&gt;Identify the established frameworks, methods, and processes that intersect with the Architecture Capability&lt;/li&gt;
          &lt;li&gt;Establish Capability Maturity target&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Establish the Architecture Capability:&lt;/td&gt;
              &lt;td&gt;发布架构能力&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
        &lt;ul&gt;
          &lt;li&gt;Define and establish the Organizational Model for Enterprise Architecture&lt;/li&gt;
          &lt;li&gt;Define and establish the detailed process and resources for Architecture Governance&lt;/li&gt;
          &lt;li&gt;Select and implement tools that support the Architecture Capability&lt;/li&gt;
          &lt;li&gt;Define the Architecture &lt;strong&gt;Principles&lt;/strong&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Preliminary phase 的输入
    &lt;ol&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;The TOGAF Library&lt;/td&gt;
              &lt;td&gt;togaf 官方的图书馆&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Other architecture frameworks&lt;/td&gt;
              &lt;td&gt;其他架构框架, 比如 PMP, ITIL&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Board strategies and board business plans, business strategy, IT strategy,business principles, business goals, and business drivers&lt;/td&gt;
              &lt;td&gt;公司的战略, 原则, 商业目标, 驱动力等&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Major frameworks operating in the business (e.g. SCRUM)&lt;/td&gt;
              &lt;td&gt;业务的运营框架, 比如敏捷 scrume&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Governance and legal frameworks, including Architecture Governance strategy&lt;/td&gt;
              &lt;td&gt;公司的治理和法律框架, 比如架构治理&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Architecture capability&lt;/td&gt;
              &lt;td&gt;架构能力&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Partnership and contract agreements&lt;/td&gt;
              &lt;td&gt;合作伙伴关系和合同&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Existing documents relating to architecture capability&lt;/td&gt;
              &lt;td&gt;关于架构能力的现有文档&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Organizational Model for Enterprise Architecture&lt;/td&gt;
              &lt;td&gt;企业架构的组织模型&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Existing Architecture Framework&lt;/td&gt;
              &lt;td&gt;现有的架构框架&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Preliminary Phase 的步骤 (不是 part 1 的考试范围, 是 part2 的考试范围)
    &lt;ol&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Scope the enterprise organizations impacted&lt;/td&gt;
              &lt;td&gt;划定架构对企业组织的影响&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Confirm governance and support frameworks&lt;/td&gt;
              &lt;td&gt;确认治理和支持的框架&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Define and establish architecture team&lt;/td&gt;
              &lt;td&gt;定义和建立架构团队&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Identify and establish architecture principles&lt;/td&gt;
              &lt;td&gt;定义和建立架构原则&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Tailor TOGAF and other frameworks&lt;/td&gt;
              &lt;td&gt;量身定制 Togaf 和其他框架&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Implement architecture tools&lt;/td&gt;
              &lt;td&gt;使用架构工具&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Outputs from Preliminary Phase
    &lt;ol&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Organizational Model for Enterprise Architecture&lt;/td&gt;
              &lt;td&gt;组织模型&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Tailored Architecture Framework&lt;/td&gt;
              &lt;td&gt;量身定制的 架构框架&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Initial Architecture Repository&lt;/td&gt;
              &lt;td&gt;架构 repository&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Business principles, business goals, and business drivers&lt;/td&gt;
              &lt;td&gt;业务目标, 原则, 驱动因素&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Request for Architecture Work (optional)&lt;/td&gt;
              &lt;td&gt;架构需求&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Architecture Governance Framework&lt;/td&gt;
              &lt;td&gt;架构治理框架&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Artifacts Produced
    &lt;ol&gt;
      &lt;li&gt;Principles catalog&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;a---vision-架构愿景&quot;&gt;A - Vision 架构愿景&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;“A succinct description of the Target Architecture that describes its business value and the changes to the enterprise that will result from its successful deployment. It serves as an aspirational vision and a boundary for detailed architecture development.”&lt;/li&gt;
  &lt;li&gt;描述架构搭建的初始阶段;包括定义架构开发举措的范围信息、识别利益攸关者、确立架构愿景、和获得可启动开发架构的许可。&lt;/li&gt;
  &lt;li&gt;Vision 中的输入大部分是 preliminary phase 的输出&lt;/li&gt;
  &lt;li&gt;考试经常会被考到: 下面哪个阶段有 xxx activity 发生. 答案是 phase A, phase B, …&lt;/li&gt;
  &lt;li&gt;phase A 的目的:
    &lt;ul&gt;
      &lt;li&gt;开发一个 high-level 的, 可以交付的, aspirational(有抱负的), 业务价值的 愿景&lt;/li&gt;
      &lt;li&gt;获取架构 SOW 的 approval&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Inputs to Phase A
    &lt;ol&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Architecture reference materials&lt;/td&gt;
              &lt;td&gt;架构参考材料&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Request for Architecture Work&lt;/td&gt;
              &lt;td&gt;架构需求&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Business principles, business goals, and business drivers&lt;/td&gt;
              &lt;td&gt;业务目标, 原则, 驱动因素&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Organizational Model for Enterprise Architecture&lt;/td&gt;
              &lt;td&gt;企业架构的组织模型&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Tailored Architecture Framework&lt;/td&gt;
              &lt;td&gt;量身定制的架构框架&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Populated Architecture Repository&lt;/td&gt;
              &lt;td&gt;放架构文档的 repository&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Steps to Phase A  (不是 part 1 的考试范围, 是 part2 的考试范围)
    &lt;ol&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Establish architecture project&lt;/td&gt;
              &lt;td&gt;架构项目立项&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Identify stakeholders, concerns and business requirements&lt;/td&gt;
              &lt;td&gt;识别 Stakeholders, 业务需求 和 担忧的地方&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Confirm business goals, drivers and constraints&lt;/td&gt;
              &lt;td&gt;确定业务目标, 驱动力和限制&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Evaluate capabilities (updated for TOGAF 9.2)&lt;/td&gt;
              &lt;td&gt;验证能力&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Assess readiness for transformation&lt;/td&gt;
              &lt;td&gt;评估转型的准备程度 有的公司比较容易接受新的变化, 有的比较难, 如果太难, 就多分几步&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Define scope&lt;/td&gt;
              &lt;td&gt;定义范围&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Confirm architecture principles, including business principles&lt;/td&gt;
              &lt;td&gt;确认架构原则, 包括业务原则&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Develop architecture vision&lt;/td&gt;
              &lt;td&gt;开发架构 vision , 比如&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Define the target architecture value and KPIs&lt;/td&gt;
              &lt;td&gt;定义目标架构价值和 KPIs&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Identify transformation risks and mitigation activities&lt;/td&gt;
              &lt;td&gt;定义转型风险和 降低风险的活动&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Develop Statement of Architecture Work, secure approval&lt;/td&gt;
              &lt;td&gt;开发 架构 SOW, 获得批准&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Outputs from Phase A
    &lt;ol&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Approved Statement of Architecture Work&lt;/td&gt;
              &lt;td&gt;批准的 架构 SOW&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Refined statements of business principles, goals and drivers&lt;/td&gt;
              &lt;td&gt;优化过的 业务原则, 目标和驱动力&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Architecture principles&lt;/td&gt;
              &lt;td&gt;架构原则&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Capability assessment&lt;/td&gt;
              &lt;td&gt;能力评估&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Tailored architecture framework&lt;/td&gt;
              &lt;td&gt;定制的架构框架&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Architecture vision&lt;/td&gt;
              &lt;td&gt;架构 vision&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Draft architecture definition document (version 0.1 of all baseline and target BDAT documents)&lt;/td&gt;
              &lt;td&gt;起草架构定义文档&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Communications plan&lt;/td&gt;
              &lt;td&gt;沟通计划&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Additional content in the Architecture Repository&lt;/td&gt;
              &lt;td&gt;额外的内容放在 架构 repository 中&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Artifacts Produced
  ● Matrices: Stakeholder map matrix | 干系人地图
  ● Diagrams: Business model diagram, Business capability map, Value stream map, Value chain diagram, Solution concept diagram | 业务模型图, 业务能力图, 价值流图, 价值链图, 方案概念图&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;b---业务架构&quot;&gt;B - 业务架构&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;A - Vison 定义了 high-level 的 愿景, 那么B 及时定义如何达到这个愿景&lt;/li&gt;
  &lt;li&gt;&lt;/li&gt;
  &lt;li&gt;Business Architecture 是用来定义 未来要达到的业务架构
    &lt;ul&gt;
      &lt;li&gt;要先了解目前的业务架构&lt;/li&gt;
      &lt;li&gt;再设计未来的目标业务架构&lt;/li&gt;
      &lt;li&gt;定义 一个 填补 gap 的 架构 roadmap, 和相应的 work items&lt;/li&gt;
      &lt;li&gt;需要基于A 中定义的 vision&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Preliminary 和 A 的输出作为 B 的输入&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Inputs to Phase B
    &lt;ol&gt;
      &lt;li&gt;External reference materials&lt;/li&gt;
      &lt;li&gt;Request for Architecture Work (optional) (Preliminary Phase)&lt;/li&gt;
      &lt;li&gt;Business principles, goals, and drivers (Phase A)&lt;/li&gt;
      &lt;li&gt;Capability assessment (Phase A)&lt;/li&gt;
      &lt;li&gt;Communications plan (Phase A)&lt;/li&gt;
      &lt;li&gt;Organization Model for Enterprise Architecture (Prelim Phase)&lt;/li&gt;
      &lt;li&gt;Tailored Architecture Framework (Prelim Phase)&lt;/li&gt;
      &lt;li&gt;Approved Statement of Architecture Work (Phase A)&lt;/li&gt;
      &lt;li&gt;Architecture principles (Phase A)&lt;/li&gt;
      &lt;li&gt;Enterprise continuum&lt;/li&gt;
      &lt;li&gt;Architecture Repository&lt;/li&gt;
      &lt;li&gt;Architecture vision (Phase A)&lt;/li&gt;
      &lt;li&gt;Draft architecture definition document (version 0.1 of all baseline and target BDAT documents) (Phase A)&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Steps for Phase B (不是 part 1 的考试范围, 是 part2 的考试范围)
    &lt;ol&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Select reference models, viewpoints, and tools&lt;/td&gt;
              &lt;td&gt;参考的模型, 观点和工具&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Develop baseline business architecture description&lt;/td&gt;
              &lt;td&gt;对当前的/现有的 业务架构进行描述&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Develop target business architecture description&lt;/td&gt;
              &lt;td&gt;对未来的业务架构进行描述&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Perform gap analysis&lt;/td&gt;
              &lt;td&gt;gap 分析&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Define candidate roadmap components&lt;/td&gt;
              &lt;td&gt;定义 roadmap 和其中的候选步骤&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Resolve impacts across the architecture landscape&lt;/td&gt;
              &lt;td&gt;实现 gap 过程中的一些影响&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Conduct formal stakeholder review&lt;/td&gt;
              &lt;td&gt;让 stakeholder review 并认可&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Finalize business architecture&lt;/td&gt;
              &lt;td&gt;敲定 业务架构&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Create architecture definition document&lt;/td&gt;
              &lt;td&gt;创建架构定义文档&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Outputs from Phase B
    &lt;ol&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Refined Phase A deliverables&lt;/td&gt;
              &lt;td&gt;对 A 中的交付物进行修正&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Draft architecture definition document&lt;/td&gt;
              &lt;td&gt;起草的架构定义文档&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
              &lt;td&gt;a. Baseline business architecture, v1.0 (detailed)&lt;/td&gt;
              &lt;td&gt;当前业务架构&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
              &lt;td&gt;b. Target business architecture, v1.0 (detailed)&lt;/td&gt;
              &lt;td&gt;未来目标的业务架构&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Draft architecture requirements specification – gap analysis&lt;/td&gt;
              &lt;td&gt;起草的架构需求文档&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Business architecture components of an architecture roadmap&lt;/td&gt;
              &lt;td&gt;实现业务架构的 roadmap 和 内容&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Artifacts Produced
    &lt;ul&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Catalogs: Value Stream catalog, Business Capabilities catalog, Value Stream Stages catalog, Organization/actor catalog, Driver/goal/objective catalog, role catalog, business service/function catalog, location catalog, process/event/control/product catalog, contract/measure catalog&lt;/td&gt;
              &lt;td&gt;一堆目录&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Matrices: Value Stream/Capability matrix, Strategy/Capability matrix, Capability/Organization matrix, Business interaction matrix, actor/role matrix&lt;/td&gt;
              &lt;td&gt;一堆二维表格/矩阵&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Diagrams: Business Model diagram, Business Capability Map, Value Stream Map, Organization Map, Business footprint diagram, business service/information diagram, function decomposition diagram, product lifecycle diagram, goal/objective/service diagram, business use-case diagram, organization decomposition diagram, process flow diagram,&lt;/td&gt;
              &lt;td&gt;一堆图形&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;c---信息系统架构&quot;&gt;C - 信息系统架构&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Information System Arcuitecture 包含了 Data 和 Application, 是 BDAT 中的 &lt;strong&gt;data 和 application&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;Data
    &lt;ul&gt;
      &lt;li&gt;目的:
        &lt;ul&gt;
          &lt;li&gt;开发想要的数据架构&lt;/li&gt;
          &lt;li&gt;识别要填补进 gap 的 和数据架构相关的 roadmap items&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;数据架构的输入包含了 preliminary 阶段, Vison 阶段, 业务架构阶段的输出&lt;/li&gt;
      &lt;li&gt;Inputs to Phase C, Data Architecture
        &lt;ol&gt;
          &lt;li&gt;External reference materials&lt;/li&gt;
          &lt;li&gt;Request for Architecture Work (optional) (Preliminary Phase)&lt;/li&gt;
          &lt;li&gt;Capability assessment (Phase A)&lt;/li&gt;
          &lt;li&gt;Communications plan (Phase A)&lt;/li&gt;
          &lt;li&gt;Organization Model for Enterprise Architecture (Prelim Phase)&lt;/li&gt;
          &lt;li&gt;Tailored Architecture Framework (Prelim Phase)&lt;/li&gt;
          &lt;li&gt;Data principles (TOGAF Specification Chapter 20)&lt;/li&gt;
          &lt;li&gt;Approved Statement of Architecture Work (Phase A)&lt;/li&gt;
          &lt;li&gt;Architecture vision (Phase A)&lt;/li&gt;
          &lt;li&gt;Architecture Repository&lt;/li&gt;
          &lt;li&gt;Draft architecture documents and draft requirements (Phase B)&lt;/li&gt;
          &lt;li&gt;Business related architecture roadmap (Phase B)&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;Steps for Phase C, Data Architecture (不是 part 1 的考试范围, 是 part2 的考试范围)
        &lt;ol&gt;
          &lt;li&gt;Select reference models, viewpoints, and tools&lt;/li&gt;
          &lt;li&gt;
            &lt;table&gt;
              &lt;tbody&gt;
                &lt;tr&gt;
                  &lt;td&gt;Develop baseline data architecture description&lt;/td&gt;
                  &lt;td&gt;开发数据架构的当前的基准描述&lt;/td&gt;
                &lt;/tr&gt;
              &lt;/tbody&gt;
            &lt;/table&gt;
          &lt;/li&gt;
          &lt;li&gt;
            &lt;table&gt;
              &lt;tbody&gt;
                &lt;tr&gt;
                  &lt;td&gt;Develop target data architecture description&lt;/td&gt;
                  &lt;td&gt;开发未来目标的数据架构描述&lt;/td&gt;
                &lt;/tr&gt;
              &lt;/tbody&gt;
            &lt;/table&gt;
          &lt;/li&gt;
          &lt;li&gt;
            &lt;table&gt;
              &lt;tbody&gt;
                &lt;tr&gt;
                  &lt;td&gt;Perform gap analysis&lt;/td&gt;
                  &lt;td&gt;分析 gap&lt;/td&gt;
                &lt;/tr&gt;
              &lt;/tbody&gt;
            &lt;/table&gt;
          &lt;/li&gt;
          &lt;li&gt;
            &lt;table&gt;
              &lt;tbody&gt;
                &lt;tr&gt;
                  &lt;td&gt;Define candidate roadmap components&lt;/td&gt;
                  &lt;td&gt;定义 gap 中要填补的 items&lt;/td&gt;
                &lt;/tr&gt;
              &lt;/tbody&gt;
            &lt;/table&gt;
          &lt;/li&gt;
          &lt;li&gt;
            &lt;table&gt;
              &lt;tbody&gt;
                &lt;tr&gt;
                  &lt;td&gt;Resolve impacts across the architecture landscape&lt;/td&gt;
                  &lt;td&gt;找到相关的 impact (比如影响了应用, 流程, 部门, 人等)和对应方案&lt;/td&gt;
                &lt;/tr&gt;
              &lt;/tbody&gt;
            &lt;/table&gt;
          &lt;/li&gt;
          &lt;li&gt;
            &lt;table&gt;
              &lt;tbody&gt;
                &lt;tr&gt;
                  &lt;td&gt;Conduct formal stakeholder review&lt;/td&gt;
                  &lt;td&gt;让 stakeholder review 数据架构&lt;/td&gt;
                &lt;/tr&gt;
              &lt;/tbody&gt;
            &lt;/table&gt;
          &lt;/li&gt;
          &lt;li&gt;
            &lt;table&gt;
              &lt;tbody&gt;
                &lt;tr&gt;
                  &lt;td&gt;Finalize data architecture&lt;/td&gt;
                  &lt;td&gt;把数据架构定下来&lt;/td&gt;
                &lt;/tr&gt;
              &lt;/tbody&gt;
            &lt;/table&gt;
          &lt;/li&gt;
          &lt;li&gt;
            &lt;table&gt;
              &lt;tbody&gt;
                &lt;tr&gt;
                  &lt;td&gt;Create architecture definition document&lt;/td&gt;
                  &lt;td&gt;创建数据架构定义文档&lt;/td&gt;
                &lt;/tr&gt;
              &lt;/tbody&gt;
            &lt;/table&gt;
          &lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;Outputs from Phase C, Data Architecture
        &lt;ol&gt;
          &lt;li&gt;Refined Phase A deliverables&lt;/li&gt;
          &lt;li&gt;Draft architecture definition document
  a. Baseline data architecture, v1.0
  b. Target data architecture, v1.0&lt;/li&gt;
          &lt;li&gt;Draft architecture requirements specification – gap analysis&lt;/li&gt;
          &lt;li&gt;Data architecture components of an architecture roadmap&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;Artifacts Produced
        &lt;ul&gt;
          &lt;li&gt;
            &lt;table&gt;
              &lt;tbody&gt;
                &lt;tr&gt;
                  &lt;td&gt;Catalogs: Data entity/data component catalog&lt;/td&gt;
                  &lt;td&gt;数据实体和数据内容的目录&lt;/td&gt;
                &lt;/tr&gt;
              &lt;/tbody&gt;
            &lt;/table&gt;
          &lt;/li&gt;
          &lt;li&gt;
            &lt;table&gt;
              &lt;tbody&gt;
                &lt;tr&gt;
                  &lt;td&gt;Matrices: Data entity/business function matrix, Application/Data matrix&lt;/td&gt;
                  &lt;td&gt;数据实体和业务功能的二维表格&lt;/td&gt;
                &lt;/tr&gt;
              &lt;/tbody&gt;
            &lt;/table&gt;
          &lt;/li&gt;
          &lt;li&gt;
            &lt;table&gt;
              &lt;tbody&gt;
                &lt;tr&gt;
                  &lt;td&gt;Diagrams: Conceptual data diagram, logical data diagram, data dissemination diagram, data security diagram, data migration diagram, data lifecycle diagram&lt;/td&gt;
                  &lt;td&gt;数据概念图, 逻辑数据图, 数据散播图, 数据安全图, 数据迁移图, 数据生命周期图&lt;/td&gt;
                &lt;/tr&gt;
              &lt;/tbody&gt;
            &lt;/table&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;应用
    &lt;ul&gt;
      &lt;li&gt;目的:
        &lt;ul&gt;
          &lt;li&gt;开发想要的数据架构&lt;/li&gt;
          &lt;li&gt;识别要填补进 gap 的 和应用架构相关的 roadmap items&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Inputs to Phase C, Application Architecture
        &lt;ol&gt;
          &lt;li&gt;External reference materials&lt;/li&gt;
          &lt;li&gt;Request for Architecture Work (optional) (Preliminary Phase)&lt;/li&gt;
          &lt;li&gt;Capability assessment (Phase A)&lt;/li&gt;
          &lt;li&gt;Communications plan (Phase A)&lt;/li&gt;
          &lt;li&gt;Organization Model for Enterprise Architecture (Prelim Phase)&lt;/li&gt;
          &lt;li&gt;Tailored Architecture Framework (Prelim Phase)&lt;/li&gt;
          &lt;li&gt;Application principles (TOGAF Specification Chapter 20)&lt;/li&gt;
          &lt;li&gt;Approved Statement of Architecture Work (Phase A)&lt;/li&gt;
          &lt;li&gt;Architecture vision (Phase A)&lt;/li&gt;
          &lt;li&gt;Architecture Repository&lt;/li&gt;
          &lt;li&gt;Draft architecture documents and draft requirements (Phase B)&lt;/li&gt;
          &lt;li&gt;Business and data related architecture roadmap (Phase B)&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;Steps for Phase C, Application Architecture (不是 part 1 的考试范围, 是 part2 的考试范围)
        &lt;ol&gt;
          &lt;li&gt;Select reference models, viewpoints, and tools&lt;/li&gt;
          &lt;li&gt;Develop baseline application architecture description&lt;/li&gt;
          &lt;li&gt;Develop target application architecture description&lt;/li&gt;
          &lt;li&gt;Perform gap analysis&lt;/li&gt;
          &lt;li&gt;Define candidate roadmap components&lt;/li&gt;
          &lt;li&gt;Resolve impacts across the architecture landscape&lt;/li&gt;
          &lt;li&gt;Conduct formal stakeholder review&lt;/li&gt;
          &lt;li&gt;Finalize application architecture&lt;/li&gt;
          &lt;li&gt;Create architecture definition document&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;Outputs from Phase C, Application Architecture
        &lt;ol&gt;
          &lt;li&gt;Refined Phase A deliverables&lt;/li&gt;
          &lt;li&gt;Draft architecture definition document
  a. Baseline application architecture, v1.0
  b. Target application architecture, v1.0&lt;/li&gt;
          &lt;li&gt;Draft architecture requirements specification – gap analysis&lt;/li&gt;
          &lt;li&gt;Application architecture components of an architecture roadmap&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;Artifacts Produced
        &lt;ul&gt;
          &lt;li&gt;
            &lt;table&gt;
              &lt;tbody&gt;
                &lt;tr&gt;
                  &lt;td&gt;Catalogs: Application portfolio catalog, interface catalog&lt;/td&gt;
                  &lt;td&gt;应用组合目录, 接口目录&lt;/td&gt;
                &lt;/tr&gt;
              &lt;/tbody&gt;
            &lt;/table&gt;
          &lt;/li&gt;
          &lt;li&gt;
            &lt;table&gt;
              &lt;tbody&gt;
                &lt;tr&gt;
                  &lt;td&gt;Matrices: Application/organization matrix, role/application matrix, application function matrix, application interaction matrix&lt;/td&gt;
                  &lt;td&gt;应用/组织 , 角色/应用, 应用/功能, 应用/交互的二维表&lt;/td&gt;
                &lt;/tr&gt;
              &lt;/tbody&gt;
            &lt;/table&gt;
          &lt;/li&gt;
          &lt;li&gt;
            &lt;table&gt;
              &lt;tbody&gt;
                &lt;tr&gt;
                  &lt;td&gt;Diagrams: Application Communication diagram, Application and User Location diagram, Application Use-Case diagram, Enterprise Manageability diagram, Process/Application Realization diagram, Software Engineering diagram, Application Migration diagram, Software Distribution diagram&lt;/td&gt;
                  &lt;td&gt;应用通信图, 应用和用户位置图, 应用用例图, 企业管理图, 流程和应用关系图, 软件工程图, 应用迁移图, 软件分发图&lt;/td&gt;
                &lt;/tr&gt;
              &lt;/tbody&gt;
            &lt;/table&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;d---technology-architecture-技术架构&quot;&gt;D - Technology Architecture 技术架构&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;目的:
    &lt;ul&gt;
      &lt;li&gt;开发想要的技术架构&lt;/li&gt;
      &lt;li&gt;识别要填补进 gap 的 和技术架构相关的 roadmap items&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;知道了应用和数据需要什么架构, 就需要推演出所需要的技术用什么
    &lt;ul&gt;
      &lt;li&gt;我的理解包括了移动端, 微信端, 前端,后端, 数据库, 云, 微服务, 容器化, 虚拟化, AI, IOT, 网络, 安全, 硬件, 操作系统, devops 等等&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Inputs to Phase D
    &lt;ol&gt;
      &lt;li&gt;External reference materials&lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Product information on candidate products&lt;/td&gt;
              &lt;td&gt;备选产品的产品信息&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;Request for Architecture Work (optional) (Prelim Phase)&lt;/li&gt;
      &lt;li&gt;Capability assessment (Phase A)&lt;/li&gt;
      &lt;li&gt;Communications plan (Phase A)&lt;/li&gt;
      &lt;li&gt;Organization Model for Enterprise Architecture (Prelim Phase)&lt;/li&gt;
      &lt;li&gt;Tailored Architecture Framework (Prelim Phase)&lt;/li&gt;
      &lt;li&gt;Technology principles (TOGAF Specification Chapter 20)&lt;/li&gt;
      &lt;li&gt;Approved Statement of Architecture Work (Phase A)&lt;/li&gt;
      &lt;li&gt;Architecture vision (Phase A)&lt;/li&gt;
      &lt;li&gt;Architecture Repository&lt;/li&gt;
      &lt;li&gt;Draft architecture documents and draft requirements (Phase B and C)&lt;/li&gt;
      &lt;li&gt;Business, data and application components of an architecture roadmap (Phase B and C)&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Steps for Phase D (不是 part 1 的考试范围, 是 part2 的考试范围)
    &lt;ol&gt;
      &lt;li&gt;Select reference models, viewpoints, and tools&lt;/li&gt;
      &lt;li&gt;Develop baseline technology architecture description&lt;/li&gt;
      &lt;li&gt;Develop target technology architecture description&lt;/li&gt;
      &lt;li&gt;Perform gap analysis&lt;/li&gt;
      &lt;li&gt;Define candidate roadmap components&lt;/li&gt;
      &lt;li&gt;Resolve impacts across the architecture landscape&lt;/li&gt;
      &lt;li&gt;Conduct formal stakeholder review&lt;/li&gt;
      &lt;li&gt;Finalize technology architecture&lt;/li&gt;
      &lt;li&gt;Create architecture definition document&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Outputs from Phase D
    &lt;ol&gt;
      &lt;li&gt;Refined Phase A deliverables&lt;/li&gt;
      &lt;li&gt;Draft architecture definition document
  a. Baseline technology architecture, v1.0
  b. Target technology architecture, v1.0&lt;/li&gt;
      &lt;li&gt;Draft architecture requirements specification – gap analysis&lt;/li&gt;
      &lt;li&gt;Technology architecture components of an architecture roadmap&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Artifacts Produced
    &lt;ul&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Catalogs: Technology Standards catalog, Technology Portfolio catalog Matrices: Application/Technology matrix&lt;/td&gt;
              &lt;td&gt;技术标准, 技术组合分类二维表, 应用/技术二维表&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Diagrams: Environments and Locations diagram, Platform Decomposition diagram, Processing diagram, Networked Computing/Hardware diagram, Communications Engineering diagram&lt;/td&gt;
              &lt;td&gt;环境和位置图, 平台分解图, 流程图, 网络计算/硬件图, 通信工程图&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;e---opportunity-and-solution-机会与方案&quot;&gt;E - Opportunity and Solution 机会与方案&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;E 和 F 是 8 个 phase 的中间2个, 是承上启下的作用&lt;/li&gt;
  &lt;li&gt;要把前面 ABCD 中要输出的文档都最终定下来&lt;/li&gt;
  &lt;li&gt;要把最终的架构设计完成掉&lt;/li&gt;
  &lt;li&gt;要把后面的实施计划定义出来&lt;/li&gt;
  &lt;li&gt;后面就要开始真正的架构项目迁移和实施了&lt;/li&gt;
  &lt;li&gt;用新兴技术来找新的机会&lt;/li&gt;
  &lt;li&gt;目的:
    &lt;ul&gt;
      &lt;li&gt;generate the initial architecture roadmap
        &lt;ul&gt;
          &lt;li&gt;B, C, D 是用来找 candidate roadmap items 的.&lt;/li&gt;
          &lt;li&gt;E 是要把  BCD 这些 candidate 弄到一款, 最终做出来这个 架构 roadmap&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;identify if transition architecture are required
        &lt;ul&gt;
          &lt;li&gt;如果从现有架构到未来 roadmap 有很大的gap, 那么可能还需要有 transition architecture (中间阶段的架构)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;define solution building blocks ( SBBs )
        &lt;ul&gt;
          &lt;li&gt;SBB - 描述在不同的架构图之间&lt;strong&gt;可以被重用的技术方案&lt;/strong&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Inputs to Phase E
    &lt;ol&gt;
      &lt;li&gt;External reference materials&lt;/li&gt;
      &lt;li&gt;Product information&lt;/li&gt;
      &lt;li&gt;Request for Architecture Work (optional) (Prelim Phase)&lt;/li&gt;
      &lt;li&gt;Capability assessment (Phase A)&lt;/li&gt;
      &lt;li&gt;Communications plan (Phase A)&lt;/li&gt;
      &lt;li&gt;Planning methodologies&lt;/li&gt;
      &lt;li&gt;Organization Model for Enterprise Architecture (Prelim Phase)&lt;/li&gt;
      &lt;li&gt;Tailored Architecture Framework (Prelim Phase)&lt;/li&gt;
      &lt;li&gt;Approved Statement of Architecture Work (Phase A)&lt;/li&gt;
      &lt;li&gt;Architecture vision (Phase A)&lt;/li&gt;
      &lt;li&gt;Architecture Repository&lt;/li&gt;
      &lt;li&gt;Draft architecture documents and draft requirements (BDAT)&lt;/li&gt;
      &lt;li&gt;Change requests for existing business programs and projects&lt;/li&gt;
      &lt;li&gt;Candidate architecture roadmap components&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Steps for Phase E (不是 part 1 的考试范围, 是 part2 的考试范围)
    &lt;ol&gt;
      &lt;li&gt;Determine key corporate change attributes&lt;/li&gt;
      &lt;li&gt;Determine business constraints&lt;/li&gt;
      &lt;li&gt;Review and consolidate gap analysis from Phases B to D&lt;/li&gt;
      &lt;li&gt;Review consolidated requirements across business functions&lt;/li&gt;
      &lt;li&gt;Consolidate and reconcile interoperability requirements&lt;/li&gt;
      &lt;li&gt;Refine and validate dependencies&lt;/li&gt;
      &lt;li&gt;Confirm readiness and risk for business transformation&lt;/li&gt;
      &lt;li&gt;Formulate implementation and migration strategy&lt;/li&gt;
      &lt;li&gt;Identify and group major work packages&lt;/li&gt;
      &lt;li&gt;Identify transition architectures&lt;/li&gt;
      &lt;li&gt;Create the architecture roadmap &amp;amp; implementation and migration plan&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Outputs from Phase E
    &lt;ol&gt;
      &lt;li&gt;Refined Phase A deliverables&lt;/li&gt;
      &lt;li&gt;Draft architecture definition document – incl. baseline and target, v1.0&lt;/li&gt;
      &lt;li&gt;Draft architecture requirements specification – incl. gap analysis&lt;/li&gt;
      &lt;li&gt;Capability assessments&lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Architecture roadmap, version 0.1&lt;/td&gt;
              &lt;td&gt;架构线路图&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Implementation and migration plan, version 0.1&lt;/td&gt;
              &lt;td&gt;实施和迁移计划&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Artifacts Produced
    &lt;ul&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Diagrams: Product context diagram, benefits diagram&lt;/td&gt;
              &lt;td&gt;产品上下文图, 利益图&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;f---migration-planning&quot;&gt;F - Migration Planning&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;这个阶段, 要把架构设计的工作彻底完成掉
    &lt;ul&gt;
      &lt;li&gt;会有一堆的 finalized 文档&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;要把之前的架构包转交给实施团队
    &lt;ul&gt;
      &lt;li&gt;会有实施计划&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;要总结之前完成的架构工作, 以此提高之后的架构工作&lt;/li&gt;
  &lt;li&gt;目的:
    &lt;ul&gt;
      &lt;li&gt;finalize the architecture roadmap and migration plan&lt;/li&gt;
      &lt;li&gt;ensure migration plan is aligned with enterprise approach to change&lt;/li&gt;
      &lt;li&gt;ensure business value and cost of work packages is understood
        &lt;ul&gt;
          &lt;li&gt;work package 就是具体的甘特图中的每个工作项, 把业务价值放到 work package 中就是迁移计划要做的事情&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Inputs to Phase F
    &lt;ol&gt;
      &lt;li&gt;External reference materials&lt;/li&gt;
      &lt;li&gt;Request for Architecture Work (optional) (Prelim Phase)&lt;/li&gt;
      &lt;li&gt;Capability assessment (Phase A)&lt;/li&gt;
      &lt;li&gt;Communications plan (Phase A)&lt;/li&gt;
      &lt;li&gt;Organization Model for Enterprise Architecture (Prelim Phase)&lt;/li&gt;
      &lt;li&gt;Governance Models and Frameworks&lt;/li&gt;
      &lt;li&gt;Tailored Architecture Framework (Prelim Phase)&lt;/li&gt;
      &lt;li&gt;Approved Statement of Architecture Work (Phase A)&lt;/li&gt;
      &lt;li&gt;Architecture vision (Phase A)&lt;/li&gt;
      &lt;li&gt;Architecture Repository&lt;/li&gt;
      &lt;li&gt;Draft architecture documents and draft requirements (BDAT)&lt;/li&gt;
      &lt;li&gt;Change requests for existing business programs and projects&lt;/li&gt;
      &lt;li&gt;Architecture roadmap, version 0.1 (Phase E)&lt;/li&gt;
      &lt;li&gt;Capability Assessment&lt;/li&gt;
      &lt;li&gt;Implementation and migration plan , version 0.1 (Phase E)&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Steps for Phase F (不是 part 1 的考试范围, 是 part2 的考试范围)
    &lt;ol&gt;
      &lt;li&gt;Confirm management framework interactions&lt;/li&gt;
      &lt;li&gt;Assign a business value to each work package&lt;/li&gt;
      &lt;li&gt;Estimate resource requirements, project timings, etc&lt;/li&gt;
      &lt;li&gt;Prioritize the migration projects&lt;/li&gt;
      &lt;li&gt;Confirm architecture roadmap and update architecture definition document&lt;/li&gt;
      &lt;li&gt;Generate implementation and migration plan&lt;/li&gt;
      &lt;li&gt;Complete the architecture development cycle, lessons learned&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Outputs from Phase F
    &lt;ol&gt;
      &lt;li&gt;Implementation and Migration Plan, version 1.0&lt;/li&gt;
      &lt;li&gt;Finalized architecture definition document&lt;/li&gt;
      &lt;li&gt;Finalized architecture requirements&lt;/li&gt;
      &lt;li&gt;Finalized architecture roadmap&lt;/li&gt;
      &lt;li&gt;Reusable Architecture Building Blocks (ABBs)&lt;/li&gt;
      &lt;li&gt;Requests for Architecture Work for next ADM cycle (if any)&lt;/li&gt;
      &lt;li&gt;Implementation of governance model&lt;/li&gt;
      &lt;li&gt;Change requests for architecture capability from lessons learned&lt;/li&gt;
      &lt;li&gt;输出一个架构合同 Architecture Contract ?
        &lt;ol&gt;
          &lt;li&gt;It’s a contract between the implementation team and the architecture team that the architecture work that has been defined will be implemented as defined, and that the architecture governance process will be followed for any changes.&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Artifacts Produced
    &lt;ul&gt;
      &lt;li&gt;None
        &lt;ul&gt;
          &lt;li&gt;之前的文档都写好了, 这个 phase 不产出任何图表&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;g---implementation-governance--实施和治理&quot;&gt;G - Implementation Governance  实施和治理&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;目的:
    &lt;ul&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;ensure conformance&lt;/td&gt;
              &lt;td&gt;确保实施和架构设计保持一致&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
        &lt;ul&gt;
          &lt;li&gt;架构师并不是实施者, 实施部分架构师的职责是帮助实施者有效的按照架构设计进行实施, 并保持一致&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;perform architecture governance
        &lt;ul&gt;
          &lt;li&gt;实施过程中如果出现一些变化, 比如开发人员觉得有更合适,更节约成本的方案可以代替原来的架构方案, 那么必须要和架构师一起沟通, 并且通过 architecture governance 来进行处理 change request&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Inputs to Phase G
    &lt;ol&gt;
      &lt;li&gt;External reference materials&lt;/li&gt;
      &lt;li&gt;Request for Architecture Work (optional) (Prelim Phase)&lt;/li&gt;
      &lt;li&gt;Capability assessment (Phase A)&lt;/li&gt;
      &lt;li&gt;Organization Model for Enterprise Architecture (Prelim Phase)&lt;/li&gt;
      &lt;li&gt;Tailored Architecture Framework (Prelim Phase)&lt;/li&gt;
      &lt;li&gt;Approved Statement of Architecture Work (Phase A)&lt;/li&gt;
      &lt;li&gt;Architecture vision (Phase A)&lt;/li&gt;
      &lt;li&gt;Architecture Repository&lt;/li&gt;
      &lt;li&gt;Architecture definition documents and requirements (BDAT)&lt;/li&gt;
      &lt;li&gt;Architecture roadmap, version 1.0 (Phase F)&lt;/li&gt;
      &lt;li&gt;Implementation governance model&lt;/li&gt;
      &lt;li&gt;Architecture contract&lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Request for architecture work for next ADM cycle (Phase F)&lt;/td&gt;
              &lt;td&gt;有些工作这次不能实施, 可以下次来做?&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;Implementation and migration plan , version 1.0 (Phase F)&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Steps for Phase G (不是 part 1 的考试范围, 是 part2 的考试范围)
    &lt;ol&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Confirm Scope and Priorities for Deployment&lt;/td&gt;
              &lt;td&gt;确认部署的范围和优先级&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Identify Deployment Resources and Skills&lt;/td&gt;
              &lt;td&gt;识别开发资源和技能&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Guide Development of Solutions Deployment&lt;/td&gt;
              &lt;td&gt;指导方案部署的开发过程&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Perform Enterprise Architecture Compliance Reviews&lt;/td&gt;
              &lt;td&gt;执行企业架构合规的 reivew&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Implement Business and IT Operations&lt;/td&gt;
              &lt;td&gt;实现业务和 IT运营&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Perform Post-Implementation Review and Close the Implementation&lt;/td&gt;
              &lt;td&gt;执行实施后的 review 并关闭实施&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Outputs from Phase G
    &lt;ol&gt;
      &lt;li&gt;Architecture contract  | 架构合同
  “…joint agreements between &lt;strong&gt;development partners and sponsors&lt;/strong&gt; on the deliverables, quality, and fitness-for-purpose of an architecture”
  &lt;strong&gt;Read Chapter 43 of the TOGAF 9.2 specification&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Compliance assessments&lt;/td&gt;
              &lt;td&gt;合规评估&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Change requests&lt;/td&gt;
              &lt;td&gt;需求变更&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Architecture-compliant solutions deployed&lt;/td&gt;
              &lt;td&gt;符合规定的架构的方案部署完成&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Artifacts Produced
    &lt;ul&gt;
      &lt;li&gt;None&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;h---architecture-change-management&quot;&gt;H - Architecture Change Management&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;架构变化管理, 就像一个一直定在那里的阶段, 我们完成了所有的架构设计, 完成了所有的实施工作之后, 就是在这里等待变化的发生&lt;/li&gt;
  &lt;li&gt;当积累一些变化之后, 我们就要考虑是否要开启新的一轮 ADM cycle 了
    &lt;ul&gt;
      &lt;li&gt;大的变化, 需要改变架构逻辑的变化也许需要新的 cycle&lt;/li&gt;
      &lt;li&gt;小的变化, 也许不需要启动 cycle ,而是在现有架构中就可以容纳&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;目的:
    &lt;ul&gt;
      &lt;li&gt;maintain architecture lifecycle&lt;/li&gt;
      &lt;li&gt;execute architecture governance&lt;/li&gt;
      &lt;li&gt;maintain architecture capability&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Inputs to Phase H
    &lt;ol&gt;
      &lt;li&gt;External reference materials&lt;/li&gt;
      &lt;li&gt;Request for Architecture Work (optional) (Prelim Phase)&lt;/li&gt;
      &lt;li&gt;Organization Model for Enterprise Architecture (Prelim Phase)&lt;/li&gt;
      &lt;li&gt;Tailored Architecture Framework (Prelim Phase)&lt;/li&gt;
      &lt;li&gt;Statement of Architecture Work (Phase A)&lt;/li&gt;
      &lt;li&gt;Architecture vision (Phase A)&lt;/li&gt;
      &lt;li&gt;Architecture Repository&lt;/li&gt;
      &lt;li&gt;Architecture definition documents and requirements (BDAT)&lt;/li&gt;
      &lt;li&gt;Architecture roadmap (Phase F)&lt;/li&gt;
      &lt;li&gt;Change requests – technology changes, business changes, lessons learned&lt;/li&gt;
      &lt;li&gt;Implementation governance model&lt;/li&gt;
      &lt;li&gt;Architecture contract (Phase G)&lt;/li&gt;
      &lt;li&gt;Compliance assessments (Phase G)&lt;/li&gt;
      &lt;li&gt;Implementation and migration plan , version 1.0 (Phase F)&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Steps for Phase H (不是 part 1 的考试范围, 是 part2 的考试范围)
    &lt;ol&gt;
      &lt;li&gt;Establish Value Realization Process&lt;/li&gt;
      &lt;li&gt;Deploy Monitoring Tools&lt;/li&gt;
      &lt;li&gt;Manage Risks&lt;/li&gt;
      &lt;li&gt;Provide Analysis for Architecture Change Management&lt;/li&gt;
      &lt;li&gt;Develop Change Requirements to Meet Performance Targets&lt;/li&gt;
      &lt;li&gt;Manage Governance Process&lt;/li&gt;
      &lt;li&gt;Activate the Process to Implement Change&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Outputs from Phase H
    &lt;ol&gt;
      &lt;li&gt;Architecture updates (maintenance)&lt;/li&gt;
      &lt;li&gt;Change to architecture framework and principles (maintenance)&lt;/li&gt;
      &lt;li&gt;New Request for Architecture Work (for major changes)&lt;/li&gt;
      &lt;li&gt;Statement of architecture work (updated if necessary)&lt;/li&gt;
      &lt;li&gt;Architecture contract (updated if necessary)&lt;/li&gt;
      &lt;li&gt;Compliance assessments (updated if necessary)&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Artifacts Produced
    &lt;ul&gt;
      &lt;li&gt;None&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;requirement-management--需求管理&quot;&gt;Requirement Management  需求管理&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;RM 位于 ADM 图的中心,  RM 在ADM 图中和 A -&amp;gt; H 的每个阶段都有互动&lt;/li&gt;
  &lt;li&gt;技术上来说, 他是一个 phase, 但是是一个静态的阶段&lt;/li&gt;
  &lt;li&gt;RM 管理需求的流程
    &lt;ul&gt;
      &lt;li&gt;收集, 确认, 排序, 过滤, …&lt;/li&gt;
      &lt;li&gt;来个新的 业务需求, 就要回到 B 阶段, 然后再推出 C, D&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;RM 是管理 repository 的流程&lt;/li&gt;
  &lt;li&gt;在 ADM 的各个阶段都要持续的处理需求
    &lt;ul&gt;
      &lt;li&gt;Being able to handle change at any time is crucial for the ADM to succeed.&lt;/li&gt;
      &lt;li&gt;在 ADM cycle 中处理需求要有节奏, 比如按敏捷的理念, 需求要有一个 backlog 来处理, 开发前期制定需求. 或者尽量在 ADM 的 ABCD 阶段收集需求, EF 阶段按需求制定方案和计划,  G 实施阶段按需求进行实施
        &lt;ul&gt;
          &lt;li&gt;所以  EFG 阶段的新需求尽量累积到下一个 ADM cycle 再去做&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;/li&gt;
  &lt;li&gt;Requirements Management is the process that manages the repository&lt;/li&gt;
  &lt;li&gt;目标:
    &lt;ul&gt;
      &lt;li&gt;ensure the process is sustained through all phases&lt;/li&gt;
      &lt;li&gt;manage change while the ADM cycle is in progress&lt;/li&gt;
      &lt;li&gt;provide the requirements to each ADM phase&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;part-3-adm-guideline-and-techniques&quot;&gt;Part 3 ADM Guideline and techniques&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;要执行 ADM 的 cycle , 需要一些 指南和工具如下:&lt;/li&gt;
  &lt;li&gt;ADM Guidelines and Techniques
● Using the TOGAF ADM in the context of a specific Architectural Style 
● Architecture Principles
● Stakeholder Management
● Architecture Patterns
● Business Scenarios
● Gap Analysis
● Migration Planning Techniques
● Interoperability Requirements
● Business Transformation Readiness Assessment
● Risk Management
● Capability-Based Planning&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;adm-and-architectural-styles-92-新加的&quot;&gt;ADM and architectural styles (9.2 新加的)&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;架构开发管理和架构风格&lt;/li&gt;
  &lt;li&gt;应用架构有不同的风格&lt;/li&gt;
  &lt;li&gt;Togaf 不需要我们改变我们的风格&lt;/li&gt;
  &lt;li&gt;但是可能我们需要改变那我们的文档的内容&lt;/li&gt;
  &lt;li&gt;采用不同的 views, models, tools 来创建文档, 图, 表格等&lt;/li&gt;
  &lt;li&gt;togaf 在使用一个 Service Oriented Architecture 的 style&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;architecture-principles&quot;&gt;Architecture principles&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;An enduring set of general rules and guidelines about architecture&lt;/li&gt;
  &lt;li&gt;是架构的一般规则和指南&lt;/li&gt;
  &lt;li&gt;不会经常变化&lt;/li&gt;
  &lt;li&gt;Defined during the Preliminary Phase&lt;/li&gt;
  &lt;li&gt;在需要做决策的时候可以用到&lt;/li&gt;
  &lt;li&gt;例子:
    &lt;ul&gt;
      &lt;li&gt;Data Architecture Principle
        &lt;ul&gt;
          &lt;li&gt;Data Trustee
            &lt;ul&gt;
              &lt;li&gt;“Each data element has a trustee accountable for data quality.”&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Five Elements of a Good Principle
● Understandability | 容易理解
● Robustness | 不要有漏洞
● Completeness | 涵盖各种情况
● Consistency | 一致性, 不要有前后矛盾
● Stability | 稳固&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;stakeholder-management-干系人管理&quot;&gt;Stakeholder Management 干系人管理&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;stakeholder 的定义
    &lt;ul&gt;
      &lt;li&gt;“An individual, team, organization, or class thereof, having an interest in a system.”&lt;/li&gt;
      &lt;li&gt;对一个系统感兴趣的个人, 团队, 组织或者他们其中的一种形式&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;As an architect, being able to win support for your plans is a skill.&lt;/li&gt;
  &lt;li&gt;Knowing who the most powerful stakeholders are…&lt;/li&gt;
  &lt;li&gt;Makes things easier for approval and budgets.&lt;/li&gt;
  &lt;li&gt;Can establish a communication plan to keep them informed&lt;/li&gt;
  &lt;li&gt;Identify problems and conflicts early in order to avoid them.
    &lt;ul&gt;
      &lt;li&gt;避免 stakeholder 之间的问题和冲突.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;通过下图, 了解哪些 stakeholder 和对他们的定位 
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-06-05-051824.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;architecture-patterns-架构模式&quot;&gt;Architecture Patterns 架构模式&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;和设计模式有点像&lt;/li&gt;
  &lt;li&gt;“an idea that has been useful in one practical context and will probably be useful in others” - M. Fowler&lt;/li&gt;
  &lt;li&gt;togaf 的 building block 说的是 : what you use&lt;/li&gt;
  &lt;li&gt;架构模式是: when, why, how you use&lt;/li&gt;
  &lt;li&gt;一旦我们创建了一些 building blocks, 我们就要去为他们定义 patterns&lt;/li&gt;
  &lt;li&gt;例子:
    &lt;ul&gt;
      &lt;li&gt;设计模式中有代理模式, 监听模式等, 是不是也可以用于架构模式?&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;business-scenarios-业务场景&quot;&gt;Business Scenarios 业务场景&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;业务场景的定义
    &lt;ul&gt;
      &lt;li&gt;
        &lt;ol&gt;
          &lt;li&gt;A business process, application, or set of applications&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;ol&gt;
          &lt;li&gt;The business and technology environment&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;ol&gt;
          &lt;li&gt;The people and software systems (“actors”) involved&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;ol&gt;
          &lt;li&gt;The desired outcome&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Anyone should be able to understand a business problem and solution by reading the business scenario.&lt;/li&gt;
  &lt;li&gt;一个精心设计的商业案例。
    &lt;ul&gt;
      &lt;li&gt;A neatly laid out business case.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;gap-analysis&quot;&gt;Gap Analysis&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Key step in the BDAT Phases and Migration Planning (Phases B-E)&lt;/li&gt;
  &lt;li&gt;分析 Baseline architecture 和 Target architecture 之间的 gap&lt;/li&gt;
  &lt;li&gt;Gaps are anything added, changed or intentionally omitted
    &lt;ul&gt;
      &lt;li&gt;Gaps 是任何新增, 修改, 故意删除掉的, 意外删掉的内容&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;目的是要让大家清晰的知道为什么增加或者删除了一些内容
    &lt;ul&gt;
      &lt;li&gt;It should be clear and easy to explain why things were added or removed&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;migration-planning&quot;&gt;Migration Planning&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;togaf 提供了一些迁移计划需要用到的工具
    &lt;ul&gt;
      &lt;li&gt;Migration Planning, Phase F
        &lt;ul&gt;
          &lt;li&gt;Implementation Factor Assessment &amp;amp; Deduction Matrix
实施因素评估和扣减矩阵&lt;/li&gt;
          &lt;li&gt;Consolidated Gaps, Solutions, &amp;amp; Dependencies Matrix
综合的差距、解决方案和依赖性矩阵&lt;/li&gt;
          &lt;li&gt;Architecture Definition Increments Table
架构定义增量表&lt;/li&gt;
          &lt;li&gt;Transition Architecture State Evolution Table
过渡结构状态演变表&lt;/li&gt;
          &lt;li&gt;Business Value Assessment Technique
商业价值评估技术&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;interoperability-协同工作的能力&quot;&gt;Interoperability 协同工作的能力&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;“the ability to share information and services”&lt;/li&gt;
  &lt;li&gt;Business Interoperability: how business teams work together&lt;/li&gt;
  &lt;li&gt;Information Interoperability: how data is shared&lt;/li&gt;
  &lt;li&gt;Technical Interoperability: how technical services connect to one another&lt;/li&gt;
  &lt;li&gt;Each of the architecture definition phases has elements of interoperability.&lt;/li&gt;
  &lt;li&gt;Architects think about how what they do interacts with the “outside world” during the process&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;business-transformation-readiness-assessment-btra&quot;&gt;Business Transformation Readiness Assessment (BTRA)&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;“evaluating and quantifying an organization’s readiness to undergo change”
    &lt;ul&gt;
      &lt;li&gt;评估和定量分析一个企业是否准备好了迎接变化&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;No point creating architecture if it’ll be ignored.
    &lt;ul&gt;
      &lt;li&gt;如果大家不想接受变化, 就没必要做架构&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Understanding how to get your organization to change is a key to success.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;推荐的 BTRA 的活动
    &lt;ul&gt;
      &lt;li&gt;Determine the readiness factors that will impact the organization&lt;/li&gt;
      &lt;li&gt;Present the readiness factors using maturity models&lt;/li&gt;
      &lt;li&gt;Assess the readiness factors, including determination of readiness factor ratings&lt;/li&gt;
      &lt;li&gt;Assess the risks for each readiness factor and identify improvement actions to mitigate the risk&lt;/li&gt;
      &lt;li&gt;Work these actions into Phase E and F Implementation and Migration Plan&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Example Factors
    &lt;ul&gt;
      &lt;li&gt;Vision&lt;/li&gt;
      &lt;li&gt;Desire, Willingness, Resolve&lt;/li&gt;
      &lt;li&gt;Need
        &lt;ul&gt;
          &lt;li&gt;How strong is the business need for enterprise architecture?&lt;/li&gt;
          &lt;li&gt;Does every part of the business recognize this as being required?&lt;/li&gt;
          &lt;li&gt;How committed is the senior leadership to this?&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Business Case&lt;/li&gt;
      &lt;li&gt;Funding&lt;/li&gt;
      &lt;li&gt;Leadership, Sponsor, Champion&lt;/li&gt;
      &lt;li&gt;Governance&lt;/li&gt;
      &lt;li&gt;Accountability&lt;/li&gt;
      &lt;li&gt;IT Capacity to Execute&lt;/li&gt;
      &lt;li&gt;Enterprise Capacity to Execute&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;risk-management&quot;&gt;Risk Management&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;What are the risks of migrating to the target architecture?&lt;/li&gt;
  &lt;li&gt;Identify them, and track them&lt;/li&gt;
  &lt;li&gt;TOGAF has the concept of Initial Level of Risk and Residual Level of Risk
    &lt;ul&gt;
      &lt;li&gt;Initial Level of Risk is the risk that exists if you do nothing to mitigate them&lt;/li&gt;
      &lt;li&gt;Residual Level of Risk is the risk that remains after you have mitigated them&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;例子: Example: Client acceptance risk
    &lt;ul&gt;
      &lt;li&gt;How do you measure it?&lt;/li&gt;
      &lt;li&gt;How do you mitigate it?&lt;/li&gt;
      &lt;li&gt;And what would the cost to the business be if it comes true?&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;capability-based-planning-基于能力的规划&quot;&gt;Capability-Based Planning 基于能力的规划&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;是一个规划, 一个跨部门的, 需要多部门通力协作的规划&lt;/li&gt;
  &lt;li&gt;“a business planning technique that focuses on business outcomes”
    &lt;ul&gt;
      &lt;li&gt;一种专注于商业成果的商业规划技术&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Capabilities are business-driven and ideally business-led.
    &lt;ul&gt;
      &lt;li&gt;能力是由业务驱动的，最好是由业务主导的。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Designed to combat the fact that organizations are split along functions
    &lt;ul&gt;
      &lt;li&gt;旨在消除组织按职能分裂的事实&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Many business functions work together to deliver one capability&lt;/li&gt;
  &lt;li&gt;例子: Example: 创建一个完美的产品
    &lt;ul&gt;
      &lt;li&gt;会涉及到多个部门, 产品设计, 软件开发, 工厂制造, 零售/销售&lt;/li&gt;
      &lt;li&gt;公司计划的是生产一个 “完美产品”, 而不是 “最佳销售团队”&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;part-4-architecture-content-framework&quot;&gt;Part 4 Architecture Content Framework&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;在架构设计过程中, 会产生一些输出/交付物, 我们不需要重新发明轮子, 而是可以利用 Architect content framework 帮助我们生产出架构来&lt;/li&gt;
  &lt;li&gt;Architect content framework
    &lt;ul&gt;
      &lt;li&gt;提供结构化的原始模型, 为最终的架构交付物作为原型和基础&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Artifacts 工件
    &lt;ul&gt;
      &lt;li&gt;工件是在架构工作期间生成的, 用于描述架构的某一个方面的, 工作成果 (work product)&lt;/li&gt;
      &lt;li&gt;ADM 的 8 个阶段中, 每个阶段都定义了一系列的 artifacts 工件
        &lt;ul&gt;
          &lt;li&gt;&lt;strong&gt;记住每个阶段和对应的工件对考试很重要&lt;/strong&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;工件可以被分成三类
        &lt;ul&gt;
          &lt;li&gt;Lists&lt;/li&gt;
          &lt;li&gt;Matrices (母体/子宫)&lt;/li&gt;
          &lt;li&gt;Diagrams&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Deliverables
    &lt;ul&gt;
      &lt;li&gt;“contractually specified and in turn formally reviewed, agreed, and signed off by the stakeholders”
        &lt;ul&gt;
          &lt;li&gt;“合同规定，并由利益相关者正式审查、同意和签署”&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;说白了就是合同规定的架构交付内容&lt;/li&gt;
      &lt;li&gt;不是一个图, 而是完整的文档&lt;/li&gt;
      &lt;li&gt;需要被 stakeholders 进行 review, agree and signed off&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Building Blocks
    &lt;ul&gt;
      &lt;li&gt;架构中可以被创造和重用的部分&lt;/li&gt;
      &lt;li&gt;分为两种
        &lt;ul&gt;
          &lt;li&gt;Architecture building blocks (ABBs)&lt;/li&gt;
          &lt;li&gt;Solution building blocks (SBBs)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;ABBs
        &lt;ul&gt;
          &lt;li&gt;描述在不同的架构图之间&lt;strong&gt;可以被重用的业务流程&lt;/strong&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;SBBs
        &lt;ul&gt;
          &lt;li&gt;描述在不同的架构图之间&lt;strong&gt;可以被重用的技术方案&lt;/strong&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;案例:
        &lt;ul&gt;
          &lt;li&gt;查询消费者的 profile&lt;/li&gt;
          &lt;li&gt;因为组织内多个部门都有这个需求, 所以把 customer profile lookup 做成一个 ABB, 可以在不同业务部门的需求和 架构 dragram 中进行拷贝&lt;/li&gt;
          &lt;li&gt;背后的逻辑是, 需要一个 CRM 的用户搜索模块, 是技术实现的方式, 做成一个 SBB&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;part-5-enterprise-continuum-and-tools&quot;&gt;Part 5 Enterprise Continuum and Tools&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;企业连续体&lt;/li&gt;
  &lt;li&gt;” a way of classifying architectural work products according to their specificity - from extremely generic to extremely specific”&lt;/li&gt;
  &lt;li&gt;一种对架构 repository 中的项目进行分类的方法&lt;/li&gt;
  &lt;li&gt;分为极常规架构, 极特殊架构, 或者中间的架构, 大体分为如下从左到右的架构
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-06-02-045902.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;ul&gt;
      &lt;li&gt;Foundation Architectures
        &lt;ul&gt;
          &lt;li&gt;最基础的架构, 所有公司都通用的基础架构&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Common System Architectures
        &lt;ul&gt;
          &lt;li&gt;普通系统架构, 一般公司都可以通用&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Industry Architectures
        &lt;ul&gt;
          &lt;li&gt;针对于某个行业的架构, 多个同行业的公司可以通用&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Organization-specific architectures
        &lt;ul&gt;
          &lt;li&gt;针对于某个企业定制的专门的架构
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-06-02-052846.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;黄色为 Abbs&lt;/li&gt;
      &lt;li&gt;绿色为 Sbbs&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;architecture-repository&quot;&gt;Architecture Repository&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;放置架构文档的 storage 存储/repository&lt;/li&gt;
  &lt;li&gt;可以是一个 file sercer, 或者 git, Jira, Confluence, wiki 等, 具体形式考试不考&lt;/li&gt;
  &lt;li&gt;有统一的命名规则和目录&lt;/li&gt;
  &lt;li&gt;大家都可以访问, 进行文档写作&lt;/li&gt;
  &lt;li&gt;The Architecture Repository contains…
    &lt;ul&gt;
      &lt;li&gt;● Architecture Metamodel
        &lt;ul&gt;
          &lt;li&gt;为企业定制的架构模型&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;● Architecture Capability
        &lt;ul&gt;
          &lt;li&gt;架构治理规则&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;● Architecture Landscape
        &lt;ul&gt;
          &lt;li&gt;已经部署了的架构资产, 系统和流程&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;● Standards Information Base (SIB)
        &lt;ul&gt;
          &lt;li&gt;做架构的时候需要用的一些信息数据, 比如 隐私信息标准 (GDPR, HIPPA&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;● Reference Library
        &lt;ul&gt;
          &lt;li&gt;引用库的材料&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;● Governance Log
        &lt;ul&gt;
          &lt;li&gt;记录了架构治理的活动日志, 比如记录了谁做了架构的创建, 调整, 谁进行了审批和 review , 相关的会议记录等&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;● Architecture Requirements Repository (*new in 9.2)
        &lt;ul&gt;
          &lt;li&gt;需求文档的 repository, 相当于 backlog&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;● Solutions Landscape (*new in 9.2)
        &lt;ul&gt;
          &lt;li&gt;一些被审批过, 签过字的解决方案的文档内容, 可以用来支持架构设计&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;part-6-architecture-capability-framework&quot;&gt;Part 6 Architecture Capability Framework&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;企业的架构能力根据企业中是否有架构师人员, 是否有相应的培训, 是否有治理方法, 是否已经发布了架构框架等综合因素构成&lt;/li&gt;
  &lt;li&gt;通过 ADM 的 Preliminary Phase 和 cycle (A-&amp;gt; H)可以提升架构能力
    &lt;ul&gt;
      &lt;li&gt;A-F 和组织内部的 leaders 定义架构, 制定计划&lt;/li&gt;
      &lt;li&gt;G 签订架构合同, 大家都约定遵守这个架构, 实施团队按照架构进行实施, 架构师在实施阶段监控实施团队的工作, 确保实施的内容按照架构设计执行.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;需要有资金来支持架构能力的提升,  花钱买人, 买知识, 搭建治理模型等等
    &lt;ul&gt;
      &lt;li&gt;就像管理一个项目一样对架构能力进行提升, 要有 ,SOW, budget, 时间节点, 里程碑, 和定期的报告&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;治理 和 repository 和 架构能力有直接的关系&lt;/li&gt;
  &lt;li&gt;治理在上面&lt;/li&gt;
  &lt;li&gt;任何流程在中间&lt;/li&gt;
  &lt;li&gt;repository 在下面&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;其他-重要度-togaf-概念&quot;&gt;其他 重要度 TOGAF 概念&lt;/h2&gt;

&lt;h3 id=&quot;architecture-governance&quot;&gt;Architecture Governance&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;A system of controls over architecture&lt;/li&gt;
  &lt;li&gt;A system to ensure compliance with architecture&lt;/li&gt;
  &lt;li&gt;Effective management of those systems&lt;/li&gt;
  &lt;li&gt;Accountability to the business for that&lt;/li&gt;
  &lt;li&gt;Governance is layered within most organizations
    &lt;ul&gt;
      &lt;li&gt;Corporate governance&lt;/li&gt;
      &lt;li&gt;Technology governance&lt;/li&gt;
      &lt;li&gt;IT governance&lt;/li&gt;
      &lt;li&gt;Architecture governance&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Principles of Good Governance
● Discipline
● Transparency 
● Independence 
● Accountability 
● Responsibility 
● Fairness&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;architecture-board&quot;&gt;Architecture Board&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;一个跨组织的 委员会, 帮我们进行架构治理工作, 需要能够代表所有的 key stakeholders&lt;/li&gt;
  &lt;li&gt;需要是一些 来组不同部门的 senior members , 每月开一次会, 做一些架构决策, key principles 等&lt;/li&gt;
  &lt;li&gt;Representative of all the key stakeholders in the architecture&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;architecture-contracts&quot;&gt;Architecture Contracts&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;“joint agreements between development partners and sponsors on the deliverables, quality, and fitness-for-purpose of an architecture”&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;architecture-compliance&quot;&gt;Architecture Compliance&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;包含了
    &lt;ul&gt;
      &lt;li&gt;Irrelevant&lt;/li&gt;
      &lt;li&gt;Consistent&lt;/li&gt;
      &lt;li&gt;Compliant&lt;/li&gt;
      &lt;li&gt;Conformant&lt;/li&gt;
      &lt;li&gt;Fullyconformant ● Non-conformant&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Compliance Reviews&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Wed, 05 Apr 2023 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/Prepare-for-TOGAF-Certification/</link>
        <guid isPermaLink="true">http://localhost:4000/Prepare-for-TOGAF-Certification/</guid>
        
        
        <category>Togaf</category>
        
        <category>Architecture</category>
        
        <category>Architecture Thinking</category>
        
      </item>
    
      <item>
        <title>Metaverse research</title>
        <description>&lt;p&gt;“元宇宙（Metaverse）是一个虚拟时空间的集合，由一系列的增强现实（AR）、虚拟现实（VR）和互联网（Internet）所组成。表示“超越宇宙”的概念：一个平行于现实世界运行的虚拟空间。随着 Apple Vision Pro 的发布, 接下来的元宇宙生态和应用场景将会更加的丰富. 让我们一起来了解元宇宙和它的生态吧.&lt;/p&gt;

&lt;h1 id=&quot;元宇宙&quot;&gt;元宇宙&lt;/h1&gt;
&lt;p&gt;[TOC]&lt;/p&gt;

&lt;h2 id=&quot;元宇宙相关公司&quot;&gt;元宇宙相关公司&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;meta&lt;/li&gt;
  &lt;li&gt;Every realm 元宇宙地产开发团队
    &lt;ul&gt;
      &lt;li&gt;推出了一个地产元宇宙项目 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;The Row&lt;/code&gt; , 是和纽约地产Alexander 团队合作的.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;主流--vr-设备&quot;&gt;主流  VR 设备&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Oculus Quest 2
    &lt;ul&gt;
      &lt;li&gt;Meta 推出的&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Pico Neo 3&lt;/li&gt;
  &lt;li&gt;HTC VR&lt;/li&gt;
  &lt;li&gt;Hololens
    &lt;ul&gt;
      &lt;li&gt;微软的&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Vision Pro
    &lt;ul&gt;
      &lt;li&gt;苹果的&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;元宇宙相关技术&quot;&gt;元宇宙相关技术&lt;/h2&gt;

&lt;h3 id=&quot;可实现数字孪生的-3d-技术&quot;&gt;可实现数字孪生的 3D 技术&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Unity / Unreal
    &lt;ul&gt;
      &lt;li&gt;游戏引擎&lt;/li&gt;
      &lt;li&gt;逼真度高, 效果佳&lt;/li&gt;
      &lt;li&gt;资源消耗高&lt;/li&gt;
      &lt;li&gt;也可以通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;像素流&lt;/code&gt; 技术, 编译出 web assembly 版本的项目在 web 端使用
        &lt;ul&gt;
          &lt;li&gt;技术复杂&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;webGL
    &lt;ul&gt;
      &lt;li&gt;web 3D 引擎&lt;/li&gt;
      &lt;li&gt;逼真度低&lt;/li&gt;
      &lt;li&gt;资源消耗低&lt;/li&gt;
      &lt;li&gt;方便实现, 方便共享&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Blender
    &lt;ul&gt;
      &lt;li&gt;免费的 3D 模型创作工具&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;MAYA
    &lt;ul&gt;
      &lt;li&gt;3D MAX&lt;/li&gt;
      &lt;li&gt;出了 VR 版本&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;A-Frame
    &lt;ul&gt;
      &lt;li&gt;用于构建 VR 的 Web 框架&lt;/li&gt;
      &lt;li&gt;是基于 three.js 的组件框架&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;OpenVR
    &lt;ul&gt;
      &lt;li&gt;元域智辰的模拟体验应用 好像用的就是这个&lt;/li&gt;
      &lt;li&gt;图表和游戏的 StreamVR 是密切相关的&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;VRTK
    &lt;ul&gt;
      &lt;li&gt;创建 VR 程序的工具包&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;文本生成-3d-模型技术-text-to-3d&quot;&gt;文本生成 3D 模型技术 (text-to-3D)&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://research.nvidia.com/labs/dir/magic3d/&quot;&gt;英伟达的 Magic 3D&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://dreamfusion3d.github.io&quot;&gt;谷歌的 DreamFusion&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://nv-tlabs.github.io/GET3D/&quot;&gt;英伟达的 Get 3D&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://opus.ai&quot;&gt;OPUS&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://unity.com/ai&quot;&gt;UNITY AI&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;数字孪生的创建流程&quot;&gt;数字孪生的创建流程&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;数字孪生建模流程
    &lt;ul&gt;
      &lt;li&gt;产品原型&lt;/li&gt;
      &lt;li&gt;场景建模&lt;/li&gt;
      &lt;li&gt;界面设计&lt;/li&gt;
      &lt;li&gt;数据融合&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;元宇宙开发流程&quot;&gt;元宇宙开发流程&lt;/h2&gt;
&lt;ol&gt;
  &lt;li&gt;空间原画设计&lt;/li&gt;
  &lt;li&gt;建模&lt;/li&gt;
  &lt;li&gt;材质&lt;/li&gt;
  &lt;li&gt;动画&lt;/li&gt;
  &lt;li&gt;界面设计&lt;/li&gt;
  &lt;li&gt;前端页面设计&lt;/li&gt;
  &lt;li&gt;3D引擎开发&lt;/li&gt;
  &lt;li&gt;服务器开发&lt;/li&gt;
&lt;/ol&gt;
</description>
        <pubDate>Tue, 21 Mar 2023 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/%E5%AD%A6%E4%B9%A0%E5%85%83%E5%AE%87%E5%AE%99/</link>
        <guid isPermaLink="true">http://localhost:4000/%E5%AD%A6%E4%B9%A0%E5%85%83%E5%AE%87%E5%AE%99/</guid>
        
        
        <category>Metaverse</category>
        
        <category>VR</category>
        
        <category>AR</category>
        
        <category>XR</category>
        
      </item>
    
      <item>
        <title>Interpretation of New China MLPS 2.0</title>
        <description>&lt;p&gt;MLPS 2.0: 等级保护是对信息和信息载体按照重要性等级分级别进行保护的一种工作，指对国家重要信息、法人和其他组织及公民的专有信息以及公开信息和存储、传输、处理这些信息的信息系统分等级实行安全保护，对信息系统中使用的信息安全产品实行按等级管理，对信息系统中发生的信息安全事件分等级响应、处置。&lt;/p&gt;

&lt;h1 id=&quot;网络安全知识体系&quot;&gt;网络安全知识体系&lt;/h1&gt;

&lt;p&gt;[TOC]&lt;/p&gt;

&lt;h2 id=&quot;资源&quot;&gt;资源&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;http://www.zgyq.gov.cn/zwzxrdzt/xfzl/202208/t20220819_76128304.html&quot;&gt;中华人民共和国网络安全法（全文）&lt;/a&gt;
&lt;a href=&quot;http://www.zgyq.gov.cn/zwzxrdzt/xfzl/202303/t20230307_78388851.html&quot;&gt;中华人民共和国个人信息保护法&lt;/a&gt;
&lt;a href=&quot;http://www.zgyq.gov.cn/zwzxrdzt/xfzl/202208/t20220819_76128281.html&quot;&gt;中华人民共和国数据安全法（全文）&lt;/a&gt;
&lt;a href=&quot;https://zhuanlan.zhihu.com/p/536960693&quot;&gt;网络安全等级保护 MLSP Multiple-level Protection Scheme&lt;/a&gt;
&lt;a href=&quot;https://www.protiviti.com/hk-en/whitepaper/chinas-cybersecurity-law-multiple-level-protection-scheme&quot;&gt;MLPS 英文解读&lt;/a&gt;
&lt;a href=&quot;https://baike.baidu.com/item/信息安全等级保护/2149325&quot;&gt;信息安全等级保护&lt;/a&gt;
&lt;a href=&quot;https://www.youtube.com/watch?v=RhSiP85cFgs&quot;&gt;网络安全法 Yutube 视频&lt;/a&gt;
&lt;a href=&quot;https://www.youtube.com/playlist?list=PLZxxGu3cF3-6SUIZFQNDxD9AgVNAczCce&quot;&gt;网络安全等级保护 Youtube 视频系列课程&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://ibm-learning.udemy.com/course/iso-27001-2013/&quot;&gt;ISO 27001&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://ibm-learning.udemy.com/course/isosae-21434-automotive-cybersecurity-standards/&quot;&gt;ISO 21434 Automotive Cybersecurity Standards&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;课程介绍--企业级网络安全与等保-20&quot;&gt;课程介绍 -企业级网络安全与等保 2.0&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/playlist?list=PLZxxGu3cF3-6SUIZFQNDxD9AgVNAczCce&quot;&gt;网络安全等级保护 Youtube 视频系列课程&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;课程大纲:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;网络安全概述&lt;/li&gt;
  &lt;li&gt;网络安全大事件&lt;/li&gt;
  &lt;li&gt;网络安全厂商&lt;/li&gt;
  &lt;li&gt;网络安全产品&lt;/li&gt;
  &lt;li&gt;网络安全法律法规&lt;/li&gt;
  &lt;li&gt;等级保护政策规范解读&lt;/li&gt;
  &lt;li&gt;等保解决方案&lt;/li&gt;
  &lt;li&gt;等保实战案例&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;网络安全岗位&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;安全专家/研究员&lt;/li&gt;
  &lt;li&gt;安全运维/安全工程师&lt;/li&gt;
  &lt;li&gt;安全厂商工程师&lt;/li&gt;
  &lt;li&gt;系统集成安全工程师&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;网络安全厂商&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;网络兼容安全厂商
    &lt;ul&gt;
      &lt;li&gt;思科&lt;/li&gt;
      &lt;li&gt;华为&lt;/li&gt;
      &lt;li&gt;华三&lt;/li&gt;
      &lt;li&gt;锐捷&lt;/li&gt;
      &lt;li&gt;迈普&lt;/li&gt;
      &lt;li&gt;迪普&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;传统网络安全厂商
    &lt;ul&gt;
      &lt;li&gt;奇安信&lt;/li&gt;
      &lt;li&gt;深信服&lt;/li&gt;
      &lt;li&gt;启明星辰&lt;/li&gt;
      &lt;li&gt;天融信&lt;/li&gt;
      &lt;li&gt;绿盟&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;细分领域安全厂商
    &lt;ul&gt;
      &lt;li&gt;堡垒机: 齐治&lt;/li&gt;
      &lt;li&gt;终端安全: 北信源&lt;/li&gt;
      &lt;li&gt;云安全: 亚信安全&lt;/li&gt;
      &lt;li&gt;移动安全: 梆梆安全&lt;/li&gt;
      &lt;li&gt;其他&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;互联网安全厂商
    &lt;ul&gt;
      &lt;li&gt;360&lt;/li&gt;
      &lt;li&gt;腾讯&lt;/li&gt;
      &lt;li&gt;阿里&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;网络安全部门&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;公安部
    &lt;ul&gt;
      &lt;li&gt;网络安全保卫局 (网安)&lt;/li&gt;
      &lt;li&gt;技侦/刑侦/经侦&lt;/li&gt;
      &lt;li&gt;下属单位
        &lt;ul&gt;
          &lt;li&gt;公安部一所/三所&lt;/li&gt;
          &lt;li&gt;中电 30 所&lt;/li&gt;
          &lt;li&gt;信息安全评测/认证中心
            &lt;ul&gt;
              &lt;li&gt;国家信息安全漏洞库 (CNNVD)&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;网信办
    &lt;ul&gt;
      &lt;li&gt;CNCERT 国家互联网应急中心&lt;/li&gt;
      &lt;li&gt;CNNIC 中国互联网络信息中心&lt;/li&gt;
      &lt;li&gt;国家计算机网络与信息安全管理中心&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;工信部
    &lt;ul&gt;
      &lt;li&gt;网络安全管理局&lt;/li&gt;
      &lt;li&gt;通管局/无委会&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;国安
    &lt;ul&gt;
      &lt;li&gt;南京 841 研究所&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;军队
    &lt;ul&gt;
      &lt;li&gt;56 所 无锡江南所&lt;/li&gt;
      &lt;li&gt;30 所 卫士通&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;机要和保密局
    &lt;ul&gt;
      &lt;li&gt;国家保密局, 保密科技评测中心&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;什么是等保&quot;&gt;什么是等保&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-02-132120.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;全称:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;网络安全等级保护&lt;/li&gt;
  &lt;li&gt;MLPS&lt;/li&gt;
  &lt;li&gt;指对国家重要信息,法人和其他组织及公民的转悠信息以及公开信息和存储, 传输, 处理这些信息的信息系统分等级实施安全保护, 对信息系统中使用的信息安全产品实行按等级管理, 对信息系统重发生的安全事件分等级响应和处置.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;为什么:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;国家信息形势严峻&lt;/li&gt;
  &lt;li&gt;维护国家安全需求&lt;/li&gt;
  &lt;li&gt;建立国家信息安全的基本制度&lt;/li&gt;
  &lt;li&gt;开展信息安全基本方法&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;目的:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;明确信息安全重点&lt;/li&gt;
  &lt;li&gt;优化信息安全资源配置&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;执法部门 - 公安部门&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;警察法规定: 监督, 管理计算信息系统的安全保护工作&lt;/li&gt;
  &lt;li&gt;公安部门的网络安全保卫局会进行监督, 管理, 不符合要求的需要整改, 罚款等措施.&lt;/li&gt;
  &lt;li&gt;网络安全保卫局 11 局, 省网络总队, 市支队&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;相关部门和职责&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;公安牵头, 领导, 对全国这项工作开展监督指导&lt;/li&gt;
  &lt;li&gt;保密局: 负责有关保密工作的监督, 检查, 指导, 并设计国家秘密信息系统的分析保护工作 (只针对国家秘密的信息系统)&lt;/li&gt;
  &lt;li&gt;密码局: 负责有关密码工作的监督, 检查, 指导&lt;/li&gt;
  &lt;li&gt;工业和信息化部: 负责各个部门之间的协调&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;等保发展历史&quot;&gt;等保发展历史&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;04 年出台了等级保护规范标准&lt;/li&gt;
  &lt;li&gt;05 年开展了等级保护调查工作&lt;/li&gt;
  &lt;li&gt;06 年开展了等级保护试点工作&lt;/li&gt;
  &lt;li&gt;07 年部署开展定级工作&lt;/li&gt;
  &lt;li&gt;08 年出正式标准&lt;/li&gt;
  &lt;li&gt;19 年 2.0 出来了 , 8 则, 看文件包&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;等保级别标准&quot;&gt;等保级别标准&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-03-002203.jpg&quot; alt=&quot;&quot; /&gt;
参考: &lt;GB17859-1999 计算机信息系统=&quot;&quot; 安全保护等级划分准则=&quot;&quot;&gt;&lt;/GB17859-1999&gt;&lt;/p&gt;

&lt;p&gt;信息系统按照&lt;strong&gt;重要性&lt;/strong&gt;和受破坏的&lt;strong&gt;危害性&lt;/strong&gt;进行分级 (1-5 级, 数字越大级别越高)&lt;/p&gt;

&lt;p&gt;第一级: 自主安全保护级&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;信息系统受到破坏后, 对公民, 法人和其他组织权益造成损害, 但不损害 社会秩序和公共利益 和 国家安全
第二级: 审计安全保护级&lt;/li&gt;
  &lt;li&gt;信息系统受到破坏后, 对公民, 法人和其他组织权益造成&lt;strong&gt;严重&lt;/strong&gt;损害, &lt;strong&gt;或者&lt;/strong&gt;对社会秩序和公共利益造成损害, 但不损害国家安全.
&lt;strong&gt;第三极&lt;/strong&gt;: 强制安全保护级&lt;/li&gt;
  &lt;li&gt;信息系统受到破坏后, 对社会秩序和公共利益造成&lt;strong&gt;严重&lt;/strong&gt;损害, &lt;strong&gt;或者&lt;/strong&gt;损害国家安全.
第四级: 结构化保护级&lt;/li&gt;
  &lt;li&gt;信息系统受到破坏后, 对社会秩序和公共利益造成&lt;strong&gt;特别严重&lt;/strong&gt;损害, &lt;strong&gt;或者严重&lt;/strong&gt;损害国家安全.
第五级: 访问验证保护级&lt;/li&gt;
  &lt;li&gt;信息系统受到破坏后, &lt;strong&gt;特别严重&lt;/strong&gt;损害国家安全.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;目的:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;对信息系统安全防护体系能力的分析和确认&lt;/li&gt;
  &lt;li&gt;帮助运营单位发现存在的安全隐患,&lt;/li&gt;
  &lt;li&gt;帮助运营单位认识不足, 及时改进, 有效提升其信息安全防护水平&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;说明:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;第一级和第五级基本上接触到的时候比较少
    &lt;ol&gt;
      &lt;li&gt;第一级可做可不做&lt;/li&gt;
      &lt;li&gt;第五级是国家机密, 一般间谍才会碰到&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;第四级也很少碰到, 危害等级也很高了&lt;/li&gt;
  &lt;li&gt;日常见到的基本都是第三极 (98%)
    &lt;ol&gt;
      &lt;li&gt;一般企事业单位&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;二级以前一般常见于区县级政府单位, 现在也基本上是做三级了.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;实际落地定级参考
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-03-011941.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;等级保护项目过程&quot;&gt;等级保护项目过程&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-03-005546.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;一般来说过程分为 5 个步骤&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;系统定级
    &lt;ol&gt;
      &lt;li&gt;企业带着材料去公安局进行定级, 备案&lt;/li&gt;
      &lt;li&gt;公安给出定级要求, 企业要回去按照要求进行等级相关安全整改工作的规划和实施&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;规划设计
    &lt;ol&gt;
      &lt;li&gt;企业要找专业咨询公司进行规划设计, 咨询公司给出建议和规划设计&lt;/li&gt;
      &lt;li&gt;企业需要采购设备, 比如网络设备, 防火墙设备等 (硬件厂商可能会把规划服务免费卖给企业)&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;建设实施
    &lt;ol&gt;
      &lt;li&gt;一般由设备厂商/集成商进行实施&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;等级测评
    &lt;ol&gt;
      &lt;li&gt;每个地区/省份都有专业的测评机构, 比如四川有 5 家&lt;/li&gt;
      &lt;li&gt;企业要额外花钱请测评人员来测评&lt;/li&gt;
      &lt;li&gt;评测通过后要再到公安备案&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;运维管理
    &lt;ol&gt;
      &lt;li&gt;公安进行定期监控, 检查, 持续改进&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;系统废止&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;定级流程:
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-03-011629.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;2.0 的流程&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;定级&lt;/li&gt;
  &lt;li&gt;备案&lt;/li&gt;
  &lt;li&gt;系统建设,整改&lt;/li&gt;
  &lt;li&gt;开展等级评测&lt;/li&gt;
  &lt;li&gt;信息安全监管部门定期开展监督检查&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;等保基本要求&quot;&gt;等保基本要求&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-03-013751.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-03-014528.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;基本要求
    &lt;ul&gt;
      &lt;li&gt;技术基本要求
        &lt;ul&gt;
          &lt;li&gt;物理安全&lt;/li&gt;
          &lt;li&gt;网络安全&lt;/li&gt;
          &lt;li&gt;主机系统安全&lt;/li&gt;
          &lt;li&gt;应用安全&lt;/li&gt;
          &lt;li&gt;数据安全&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;管理基本要求
        &lt;ul&gt;
          &lt;li&gt;安全管理机构&lt;/li&gt;
          &lt;li&gt;安全管理制度&lt;/li&gt;
          &lt;li&gt;人员安全管理&lt;/li&gt;
          &lt;li&gt;系统建设管理&lt;/li&gt;
          &lt;li&gt;系统运维管理&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-03-020213.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;比如:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;三级等保需要的指标是 73 类, 288 项&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;网络安全风险&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-03-020430.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;2.0 标准内容变化
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-03-132116.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;等保安全产品解析&quot;&gt;等保安全产品解析&lt;/h2&gt;
&lt;p&gt;等保二级和三级需要的安全产品&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-03-020539.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;等保涉及到的硬件 安全产品要求&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-03-064930.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;等保涉及到的服务/咨询产品&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-03-065210.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
  &lt;li&gt;往往都是买设备送服务&lt;/li&gt;
  &lt;li&gt;最主要的服务
    &lt;ul&gt;
      &lt;li&gt;差距分析&lt;/li&gt;
      &lt;li&gt;等保合规审计&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;等保管理要求和建设整改-三级为例子&quot;&gt;等保管理要求和建设整改 (三级为例子)&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-03-065636.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;安全管理制度&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;总体方针, 策略, 规范&lt;/li&gt;
  &lt;li&gt;管理制度&lt;/li&gt;
  &lt;li&gt;操作规程&lt;/li&gt;
  &lt;li&gt;整改要点
    &lt;ul&gt;
      &lt;li&gt;形成信息安全管理制度体系, 统一发布, 定期修订等.
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-03-070011.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;安全管理机构&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;从管理层到执行层到业务层的管理结构,&lt;/li&gt;
  &lt;li&gt;整改要点
    &lt;ul&gt;
      &lt;li&gt;信息安全领导小组于职能部门, 专职安全员, 定期全面安全检查, 定期协调会议, 外部沟通与合作等
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-03-070442.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;人员安全管理&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;内部和外部人员的安全管理&lt;/li&gt;
  &lt;li&gt;整改要点
    &lt;ul&gt;
      &lt;li&gt;安全保密协议, 关键岗位人员管理, 针对不同岗位的培训计划, 外部人员访问管理
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-03-070602.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;系统建设管理&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;分别从定级, 设计建设实施, 验收交付, 评测等方面考虑, 关注各项安全管理活动
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-03-070714.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;系统运维管理&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;涉及日常管理, 变更管理, 制度化管理, 安全事件处置, 应急预案管理和安管中心
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-03-070813.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;等保20-标准解读&quot;&gt;等保2.0 标准解读&lt;/h2&gt;

&lt;p&gt;1.0 和 2.0 的对比&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;2.0 在技术部分的基础上做了蹄奥正, 做了一些合并和删减
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-03-132637.jpg&quot; alt=&quot;&quot; /&gt;
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-03-132906.jpg&quot; alt=&quot;&quot; /&gt;
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-03-132957.jpg&quot; alt=&quot;&quot; /&gt;
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-03-134028.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;关键信息基础设施认定标准&quot;&gt;关键信息基础设施认定标准&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;关键信息系统和基础设施不能低于 三级
    &lt;ul&gt;
      &lt;li&gt;网站类
        &lt;ul&gt;
          &lt;li&gt;比如 lecake.com&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;平台类
        &lt;ul&gt;
          &lt;li&gt;比如阿里云&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;生产业务类
        &lt;ul&gt;
          &lt;li&gt;比如交警 12123.com
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-04-042919.jpg&quot; alt=&quot;&quot; /&gt;
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-05-04-043228.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

</description>
        <pubDate>Wed, 15 Mar 2023 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB/</link>
        <guid isPermaLink="true">http://localhost:4000/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB/</guid>
        
        
        <category>MLPS</category>
        
        <category>PIPL</category>
        
        <category>PII</category>
        
        <category>GDPR</category>
        
      </item>
    
      <item>
        <title>Prepare for Google CLoud Platform Professional Architect Certification</title>
        <description>&lt;p&gt;我一直以来都是谷歌的忠实粉丝, 从 08 年开始就开始使用谷歌的各种产品和服务. 因为项目需要, 我花了 2 个多月的时间筹备谷歌专业认证架构师的认证并一次性通过了考试. 这里我把一些学习心得总结了下来跟大家一起分享. 如果你也在准备这门考试, 看这篇文章就足够了.&lt;/p&gt;

&lt;h1 id=&quot;google-cloud-platform-professional-architect-certification&quot;&gt;Google CLoud Platform Professional Architect Certification&lt;/h1&gt;

&lt;p&gt;[TOC]&lt;/p&gt;

&lt;h2 id=&quot;考试准备&quot;&gt;考试准备&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;考试名称: GCP - PCA&lt;/li&gt;
  &lt;li&gt;200 美金&lt;/li&gt;
  &lt;li&gt;120分钟(2 小时)&lt;/li&gt;
  &lt;li&gt;50 - 60 道题, 65 道 (答对 70% 算及格)
    &lt;ul&gt;
      &lt;li&gt;单选题, 4 选 1&lt;/li&gt;
      &lt;li&gt;多选题, 5 选 2&lt;/li&gt;
      &lt;li&gt;考试里面有大概10-12题案例分析题，这些案例都摘自于Google官网上面的案例分析，所以请你一定要提早熟悉这些案例，了解一下这些案例中想要通过云服务达到的业务目标和技术目标是什么&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;考完马上知道结果&lt;/li&gt;
  &lt;li&gt;考试技巧
    &lt;ul&gt;
      &lt;li&gt;如果答案的文字少, 先扫一眼答案&lt;/li&gt;
      &lt;li&gt;读完整的题目&lt;/li&gt;
      &lt;li&gt;注意看 “you want to”&lt;/li&gt;
      &lt;li&gt;识别和记录问题的关键部分
        &lt;ul&gt;
          &lt;li&gt;比如:
            &lt;ul&gt;
              &lt;li&gt;题目希望 Most cost-effective way&lt;/li&gt;
              &lt;li&gt;那么就应该优先考虑 regional 而不是 multi-regional&lt;/li&gt;
              &lt;li&gt;题目如果说希望 HA, 那么就应该是 multi-regional&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;排除法&lt;/li&gt;
      &lt;li&gt;不确定的, 先打个flag, 提交前再review 一下&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;第一次没通过, 14 天后再考, 第二次没通过 60 天后再考, 还没通过 365 天后再考&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.webassessor.com/wa.do?page=CANDIDATE&amp;amp;tabs=10&quot;&gt;考试网址&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;重新schedule 需要提前 3 天 (72 小时)&lt;/li&gt;
  &lt;li&gt;提前15 分钟进入网页&lt;/li&gt;
  &lt;li&gt;考试考试按钮会在预约时间的前 10 分钟出现&lt;/li&gt;
  &lt;li&gt;考官可能会因为当时的忙碌情况, 迟到 15-20 分钟&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kryterion.my.site.com/support/s/article/How-to-Prepare-for-an-Online-Exam-Pre-check?language=en_US&quot;&gt;考前准备&lt;/a&gt;, 包括, 准备好身份证, 护照 , 桌面要整齐, 不能有双屏幕等.&lt;/li&gt;
  &lt;li&gt;关掉所有无关软件&lt;/li&gt;
  &lt;li&gt;用chrome 浏览器进入 考试网址&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;gcp-服务&quot;&gt;GCP 服务&lt;/h2&gt;

&lt;h3 id=&quot;compute&quot;&gt;Compute&lt;/h3&gt;

&lt;h4 id=&quot;compute-engine---gce&quot;&gt;Compute Engine - GCE&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;GCP 的 VM的服务&lt;/li&gt;
  &lt;li&gt;按秒计费, 虚机release 掉了就不计费了&lt;/li&gt;
  &lt;li&gt;VM 就是一个虚机, 也称作实例
    &lt;ul&gt;
      &lt;li&gt;VM 只能属于某一个 zone&lt;/li&gt;
      &lt;li&gt;可以跨 zone 迁移 VM
        &lt;ul&gt;
          &lt;li&gt;用命令 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gcloud compute instances move my-instance --zone us- central1-a --destination-zone us-central1-b&lt;/code&gt; 进行迁移&lt;/li&gt;
          &lt;li&gt;如下情况, vm 无法跨zone 移动
            &lt;ul&gt;
              &lt;li&gt;Instances that are part of a MIG&lt;/li&gt;
              &lt;li&gt;Instances attached with local SSDs&lt;/li&gt;
              &lt;li&gt;Instances in TERMINATED status&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;跨 Region 迁移 vm 只能通过 手动方式
            &lt;ul&gt;
              &lt;li&gt;
                &lt;ol&gt;
                  &lt;li&gt;为 vm 的 persistent disk 创建一个快照 snapshot , 把 snapshot 拷贝到另一个 region (的一个zone)
                    &lt;ul&gt;
                      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gcloud compute disks snapshot my-disk-a --snapshot-names my-pd-snapshot --zone ZONE&lt;/code&gt;&lt;/li&gt;
                    &lt;/ul&gt;
                  &lt;/li&gt;
                &lt;/ol&gt;
              &lt;/li&gt;
              &lt;li&gt;
                &lt;ol&gt;
                  &lt;li&gt;用快照 创建 persistent disk
                    &lt;ul&gt;
                      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gcloud compute disks create my-disk-b --source-snapshot my-pd-snapshot --zone ZONE&lt;/code&gt;&lt;/li&gt;
                    &lt;/ul&gt;
                  &lt;/li&gt;
                &lt;/ol&gt;
              &lt;/li&gt;
              &lt;li&gt;
                &lt;ol&gt;
                  &lt;li&gt;在新的region (的一个zone)创建一个 instance , 然后 attach 上 persistent disk&lt;/li&gt;
                &lt;/ol&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;创建GCE的前置条件
    &lt;ol&gt;
      &lt;li&gt;Project&lt;/li&gt;
      &lt;li&gt;Billing Account&lt;/li&gt;
      &lt;li&gt;Compute Engines Admin APIs should be enabled&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;GCE Machine Family机器家族 有三种, 每种里面有有不同的机器类型
    &lt;ul&gt;
      &lt;li&gt;General Purpose (E2, N2, N2D, N1)&lt;/li&gt;
      &lt;li&gt;Memory Optimized (M2, M1)&lt;/li&gt;
      &lt;li&gt;Compute Optimized (C2)&lt;/li&gt;
      &lt;li&gt;GPU
        &lt;ul&gt;
          &lt;li&gt;图形计算或者数学计算, AI/ML 会用到&lt;/li&gt;
          &lt;li&gt;很贵&lt;/li&gt;
          &lt;li&gt;不是所有机器类型都支持&lt;/li&gt;
          &lt;li&gt;需要再 VM 上安装 GPU Libraries 软件
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-02-08-084918.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;GCE Machine Type机器类型
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;e2-standard-2&lt;/code&gt; 例子
        &lt;ul&gt;
          &lt;li&gt;e2 表示family 名字&lt;/li&gt;
          &lt;li&gt;standard 表示性能(workload )&lt;/li&gt;
          &lt;li&gt;2 表示vCPU个数,&lt;/li&gt;
          &lt;li&gt;vCPU个数越大的机器类型, 内存,网络, 磁盘的大小也会更大&lt;/li&gt;
          &lt;li&gt;实例停止后, 可以修改及其类型&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Image
    &lt;ul&gt;
      &lt;li&gt;用来放各种类型的操作系统镜像
        &lt;ul&gt;
          &lt;li&gt;可以是public的(google 或 开源组织, 或第三方社区)&lt;/li&gt;
          &lt;li&gt;也可以是 custom 的(用户自建的)
            &lt;ul&gt;
              &lt;li&gt;创建custom image 的主要目的是把一个已经安装和配置了很多内容的实例做成定制的镜像, 以后再创建这个镜像的实例的时候, 无需重新安装配置, 大大减少实例第一次安装启动时间.&lt;/li&gt;
              &lt;li&gt;custom image 可以通过以下内容创建
                &lt;ul&gt;
                  &lt;li&gt;vm实例&lt;/li&gt;
                  &lt;li&gt;a disk&lt;/li&gt;
                  &lt;li&gt;a snapshot&lt;/li&gt;
                  &lt;li&gt;另一个image&lt;/li&gt;
                  &lt;li&gt;一个文件&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;比 startup script 好用&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;通过 Image 生成 Instance 的操作系统, 存在 disk上&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;disk
    &lt;ul&gt;
      &lt;li&gt;image 会安装操作系统到磁盘&lt;/li&gt;
      &lt;li&gt;可以被单独用来做成 custom image, 让 instance template 用&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;把 VM 拷贝到另一个 project 的方法
    &lt;ol&gt;
      &lt;li&gt;给 VM 的 boot disk创建一个 snapshot&lt;/li&gt;
      &lt;li&gt;通过 snapshot 创建一个 image&lt;/li&gt;
      &lt;li&gt;把 image 分享到其他 project&lt;/li&gt;
      &lt;li&gt;通过 image 创建新的 VM&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;IP 地址
    &lt;ul&gt;
      &lt;li&gt;一个instance 可以有一个external IP(可选), 和一个internal IP (必须有)&lt;/li&gt;
      &lt;li&gt;external IP 是临时的, 实例停了, external IP 就丢了&lt;/li&gt;
      &lt;li&gt;static IP 是单独申请的(VPC 管理界面里面) , 创建后可以attach 到一个虚机上, 就替换掉了原来的external IP
        &lt;ul&gt;
          &lt;li&gt;static IP 单独收费, 不attach 更贵,&lt;/li&gt;
          &lt;li&gt;虚机删了, static IP 还在, 要单独删掉&lt;/li&gt;
          &lt;li&gt;static IP 可以从一个虚机换到两一个虚机上&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Startup script
    &lt;ul&gt;
      &lt;li&gt;将脚本写到 startup script 中, 可以让虚机第一次启动的时候就把我们需要执行的ssh命令做好, 比如安装apache2并启动&lt;/li&gt;
      &lt;li&gt;脚本一般是安装操作系统补丁或者安装软件&lt;/li&gt;
      &lt;li&gt;也可以编辑一个存在的实例的startup script&lt;/li&gt;
      &lt;li&gt;startup script 的一个例子: 部署新的应用版本到 compute engine
        &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c&quot;&gt;# Setup logging agent&lt;/span&gt;
curl -sSO https://dl.google.com/cloudagents/install-logging-agent.sh
sudo bash install-logging-agent.sh
&lt;span class=&quot;c&quot;&gt;# Install GIT&lt;/span&gt;
apt-get update
apt-get install -yq git
&lt;span class=&quot;c&quot;&gt;# Clone Repo&lt;/span&gt;
git clone https://github.com/in28minutes/your-app.git /opt/app
&lt;span class=&quot;c&quot;&gt;# Build and Run app&lt;/span&gt;
//...
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;troubleshootting  vm 启动失败的步骤
    &lt;ul&gt;
      &lt;li&gt;
        &lt;ol&gt;
          &lt;li&gt;看看 Quota 是否有报错.
            &lt;ul&gt;
              &lt;li&gt;比如实例个数限制&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;ol&gt;
          &lt;li&gt;检查boot disk 是否满了
            &lt;ul&gt;
              &lt;li&gt;超过了 95% 可能就启动不起来了&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;ol&gt;
          &lt;li&gt;检查串行端口输出 Serial port output
            &lt;ul&gt;
              &lt;li&gt;每个 vm 有4 个 串行端口&lt;/li&gt;
              &lt;li&gt;OS, BIOS 和其他系统级别的服务都往 串行端口写数据&lt;/li&gt;
              &lt;li&gt;可以通过 Cloud console, gcloud 命令, Compute Engine API 访问 串行端口&lt;/li&gt;
              &lt;li&gt;可以把串行端口的信息输出到 cloud logging 中, 方便查询
                &lt;ul&gt;
                  &lt;li&gt;Serial console logs&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;ol&gt;
          &lt;li&gt;检查 file system 是否除了问题
            &lt;ul&gt;
              &lt;li&gt;把boot disk 挂载到其他虚机上试试 是否可以正常启动.&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;shutdown script
    &lt;ul&gt;
      &lt;li&gt;在 vm stop, restart, terminate 之前执行的命令脚本.
        &lt;ul&gt;
          &lt;li&gt;比如脚本内容是 清除或者导出日志&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;任何 VM 都可以用&lt;/li&gt;
      &lt;li&gt;和 startup script 很像
        &lt;ul&gt;
          &lt;li&gt;Linux 系统 中是 root 用户来执行脚本&lt;/li&gt;
          &lt;li&gt;Windows 系统是 System account 执行脚本&lt;/li&gt;
          &lt;li&gt;作为 metadata 来存储
            &lt;ul&gt;
              &lt;li&gt;创建 VM 的时候在 startup script 下面的metadata 那里设置 shutdown script
                &lt;ul&gt;
                  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-metadata-from-file shutdown-script=script.sh&lt;/code&gt;&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;也可以把脚本放在 cloud storage 中, 然后在 metadata 中设置key valuae时指向存贮的bucket
                &lt;ul&gt;
                  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-metadata shutdown-script-url=gs://bucket-in-cloud-storage/file&lt;/code&gt;&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;例外, 不会执行 shutdown script 的情况
        &lt;ul&gt;
          &lt;li&gt;如果 vm 是 硬重置(比如断电), hard reset(instances.reset)&lt;/li&gt;
          &lt;li&gt;如果 vm 是 preemptible 实例(临时用的那种便宜的), 且过了 grace period , 就不能执行了.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Instance template
    &lt;ul&gt;
      &lt;li&gt;把常用配置虚机的参数放到 instance template 中, 省去每次创建虚机都要在console 选一遍的麻烦&lt;/li&gt;
      &lt;li&gt;包括机器家族, 机器类型, 镜像选择, startup 脚本等&lt;/li&gt;
      &lt;li&gt;一旦创建不能更新&lt;/li&gt;
      &lt;li&gt;Instance template 配合 rolling update 可以快速给 MIG 部署新版本, 也可以快速给 MIG 降版本&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;GCE 的使用场景
    &lt;ul&gt;
      &lt;li&gt;客户希望用独占的服务器(or BYOL)硬件来运行实例 (公司合规, 证书, 管理等需要)
        &lt;ul&gt;
          &lt;li&gt;方案: Sole tenant nodes
            &lt;ul&gt;
              &lt;li&gt;一个物理机, 专门给你用的, 上面有 VMs&lt;/li&gt;
              &lt;li&gt;创建 VM 实例, 基于 node name 来给每个node 做 node affinity labels. 确保每个客户有自己专属的 host.&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;客户有1000个 vm ,需要能够自动给OS 打补丁, OS 版本管理, OS 安装软件管理
        &lt;ul&gt;
          &lt;li&gt;方案: VM manager&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;ssh 进虚机的方法
    &lt;ul&gt;
      &lt;li&gt;option1: GCP console 中的 ssh 界面直接登录 vm
        &lt;ul&gt;
          &lt;li&gt;compute engine 自动创建了 sshk key pair&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;option2: Gcloud 命令
        &lt;ul&gt;
          &lt;li&gt;用命令 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gcloud compute ssh&lt;/code&gt;&lt;/li&gt;
          &lt;li&gt;compute engine VM  自动创建了 sshk key pair 和用户名&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;option3: Customized ssh key (用户自建的ssh key 登录vm)
        &lt;ul&gt;
          &lt;li&gt;madadata managed 和 OS login 都可以用&lt;/li&gt;
          &lt;li&gt;上传自己的key 到 VM 的 metadata 中&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;可以设置 project 禁止某些instance 使用 ssh key
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gcloud compute instances add-metadata [INSTANCE_NAME] --metadata block-project-ssh-keys=TRUE&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;自建 ssh key 连接GCE 的虚机的方法
    &lt;ul&gt;
      &lt;li&gt;两种方法&lt;/li&gt;
      &lt;li&gt;
        &lt;ol&gt;
          &lt;li&gt;Meta managed ssh key (Mac 的 ssh 可以用)
```bash
ssh-keygen -t rsa -f ~/.ssh/gc_rsa -C dalongco  //会生成叫做 gc-rsa 的一对公钥和私钥
cd ~/.ssh 
cat gc_rsa.pub   // 这里把输出的公钥内容复制, 黏贴到GCE 的 VM虚机的 metadata 中, 方法是编辑一下VM, 找到SSH 那里, 新建一条, 把这个黏贴进去
chmod 400 gc_rsa   // 修改私钥的可执行权限
ssh -i gc_rsa dalongco@34.125.210.83   //尝试登录&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;  - 2. OS Login 的方法
      - 这个方法不需要自己生成  SSK key
      - 可以在需要多个用户访问项目或者实例的时候使用
      - 方法: 
        - 在 instance 中 的 metadata 中开启 OS login, 让 linux 操作系统中的用户直接访问 instance. 
          - 可以用命令 `gcloud compute project-info/instances add-metadata --metadata enable-oslogin=TRUE`
        - 也可以把 Linux OS 中的已有的  AD 和 LDAP account 导入到google cloud 中
        - 需要有 roles/compute.osLogin or roles/compute.osAdminLogin 权限
  - Windows 的实例, 用户可以用 用户名密码登录
    - 用户名和密码在 console 中 或者 gcloud 命令生成 
      - `gcloud compute reset-windows-password`


##### Instance Group 
- 把多个VM 当做一个实体进行统一管理
- 一个 MIG 只能在一个regional , 但MIG 中的 VMs 可以跨zones 
- 两种IG
  - MIG - managed instance group
    - 用一个instance template 创建的 IG 叫 MIG
    - 可以进行 auto scaling, auto healing 和 管理版本升级(release managemeng)
    - Auto scaling
      - 可以维持固定个数的实例, 如果有一个挂了, 会自动创建另一个一样的实例
      - 可以用 Load balance 分布流量
      - 跨zone 的
      - 可设置最多和最少实例个数
      - 可以根据设定指标自动增减实例个数
        - CPU 使用率
        - LB 的流量负载
        - Stack Driver (一个 google 的监控软件)
      - cool down period
        - 为了防止过于频繁的增减实例, 通过cool down 来设置每次实例变化后要冷静的时间
      - scale in control 
        - 防止实例掉的太猛
        - 比如, 5 分钟内不能掉 10% 或 3 个实例  
      
    - Health check
      - 可以检测实例的健康
      - auto healing
        - 设置个时间段, 让实例启动一会, 应用跑起来了再进行第一次健康检查, 否则以为实例挂了
      - 确保 firewall rule 正常配置了, LB 可以 对 MIG/VM 进行 health check

    - 版本升级 - Release manage 
      - rolling update - 滚动升级
        - 通过给 MIG 原来的 instance template 增加一个新的instance template 来升级实例
        - 给同一个MIG下面的实例升级, 不会有downtime.
        - 升级是可以设置成按批更换, 按百分比或者是个数
        - 可以设置几个几个更新(max surge), 最少保留几个活的实例(max unavailable)
        - Rolling Update for MIG 有两种模式
          - Proactive Update Mode 主动模式
            - 如果希望自动部署更新, 可以选择主动模式
            - 适合关键更新
          - Opportunistic Update Mode 机会模式
            - 如果怕自动更新破坏力太大, 可以选用机会模式
            - 应用的更新需要人工的启动, 并选择哪些实例要被更新, 或新的实例被创建
            - GCE 不会主动的选择用机会模式来更新实例. 
            - 适合非关键更新
      - rolling restart/replace - 滚动重启/替换
        - 滚动重启可以设置是否都重启,还是几个几个重启
        - 滚动替换是用同一个 instance template 生成新的实例来替换现有实例
          - 比如改了 startup script 内容
          - 可以设置几个几个换(max surge), 最少保留几个活的实例(max unavailable)
      - Canary Deployment - 金丝雀部署
        - 对指定的一部分用户进行升级, 其他的不动
        - Deploys a release to a subset of users
  - UMIG - unmanaged instance group
    - IG 下面是不同类型的VM, 或者是无法进行 Horizontal scaling 的应用
    - 不能进行 auto scalling, auto healing 和 管理版本升级
    - 场景: Lift and Shift of on-prem workload that need a load balancer to serve trafic
      - Lift and Shift - 通常指用于将本地资产在不重构的情况下, 迁移到云环境上云方式. 这种方式不会对原有(单体)应用进行微服务化改造, 一般是直接迁移到 云的 VM 环境. 
      - OP 应用接收  TCP请求, 不支持 Horizontal scaling. 需要访问文件系统(file system), 可接受 downtime. 迁移到 GCP 的方案?
        - network LB  + UMIG with active and standby in different zones + regional PD 
           1.   因为是 TCP, 所以 network LB 有更好的performance
           2.   因为不能 HS , 所以 UMIG with active/standby 更合适
           3.   因为 file system, 所以 regional PD 更合适

##### bastion host 堡垒机
- bastion host 是一个特殊功能的 VM 
- 提供用户从 GCP 外部 SSH 到堡垒机, 然后在堡垒机上再对 堡垒机所在的 VPC 的服务进行访问.  
- 在不暴露 VPC 资源的情况下,允许用户从外部访问 GCP 资源
- 使用流程
   1. 在 VPC 中建立一个堡垒机 VM
   1. 给 堡垒机配一个 public IP
   2. 用 SSH 连接到 堡垒机, 再在堡垒机上 SSH 连接到其他 VM
   3. 工作完成了, 把堡垒机关掉


#### Google App Engine - GAE
- GAE 是谷歌提供的 Serverless PaaS
  - Google 负责管理 hardware 和 network infra
- App Engine 是完全托管式无服务器平台，可用于大规模开发和托管 Web 应用。您可以选择多种主流的语言、库和框架来开发应用，然后让 App Engine 为您预配服务器并根据需求扩缩应用实例数量。
- App Engine 和 GKE 的区别
  - App Engine 是基于容器的
  - GKE 是基于 K8s 的
- 支持 Go, Java, .Net, Node.js, PHP, Ruby, python
- 适合web 应用部署
- 按用量付费
  - 如果没有用量, 每天的费用可以降到 0
- 自动的 LB 和 Auto scalling
- 使用前需要先开启 Kubernetes Engine API 
- 需要手动用 gcloud shell 在命令行中部署服务, 创建版本, 分配流量
- 提供端到端的应用管理
  - 代码上传
  - 应用部署
  - 应用版本管理
    - 基于版本的流量分配管理
      - 三种配置
        - 按 IP
        - 按 Cookie
        - 随机 random
  - 应用实例管理
  - 提供应用连接到其他谷歌云服务
- 和 Compute Engine 相比, APP Enginede 
  - 不需要自己管理底层
  - 但是会缺少一些灵活度
- 两种 App engine 环境
  - 两种类型的区别
  - ![](http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-02-08-062026.jpg)
  - Standard 标准型
    - 应用实例跑在预先配置好的开发语言的沙箱/容器环境中
      - 应用需要遵守沙箱预设的约束条件
      - 只支持部分开发语言 Java Python、PHP Go、Node.js 和 Ruby 
    - V2 比 V1 支持更多的开发语言 ,但也只是特定的语言
    - 无法 ssh 访问底层进程和磁盘
    - 标准型包含了
      - Persistent Storage(可以 query , sorting, transaction)
      - Autoscaling
      - LB
      - Sub/pub
      - Scheduler
      - 其他 API
    - 使用的三个步骤
      - 本地开发
      - 部署到 App Engine
      - App Engine 为应用提供沙箱的安全服务
  - Flexible 灵活型
    - 应用实例跑在Docker 容器中
      - 容器可以是自己提供的容器, 更加灵活
    - 容器跑在虚机上
      - 可以定制化 容器的 Image 和 Docker file
      - 可以定制化VM的OS
      - 应用可以写到本地磁盘上(local disk)
    - 支持任何开发语言
    - 可以 ssh 访问底层的进程和磁盘
    - 可以安装 third-party binaries.
- App Engine 的分层
  - 从上到下
    - application
    - Service
    - Version
    - Instance
  - 备注
    - 一个项目对应一个应用
    - 一个应用可以有多个服务
    - 一个服务可以理解成一个微服务
    - 一个服务可以有多个版本
      - 每个版本对应了不同的代码和配置
      - 多个版本可以共享流量分配
    - 一个版本可以有多个实例, 也可以没有实例. 没有实例的版本也可以运行
      - 实例是由系统自动分配给版本的


- gcloud shell 在命令行中部署服务, 创建版本, 分配流量
  - 步骤:
    1. 将python 的两个服务的代码目录传到 gcloud editor中 我自己的home目录中
    2. 在 gcloud terminal 中进入其中一个目录

```bash
cd default-service 
gcloud app deploy     # 部署这个目录为一个服务
gcloud app services list  
gcloud app versions list  # 已经产生了默认的第一个版本
gcloud app instances list  # 已经产生了自动创建的第一个实例
gcloud app deploy --version=v2  # 修改了代码重新部署. 可以指定版本号, 如果不指定, 默认会有一个新的版本. 默认部署了新的版本, 当前服务就会用最新版本对外服务(接收流量)
gcloud app versions list  
gcloud app browse   # 查看当前的服务的浏览器地址
gcloud app browse --version 20210215t072907  # 查看指定版本服务的浏览器地址
gcloud app deploy --version=v3 --no-promote  # 部署新的版本, 但是不提供对外服务
gcloud app browse --version v3  
watch curl https://melodic-furnace-304906.uc.r.appspot.com/  # 监控网页内容变化, 每秒重新刷新页面
gcloud app services set-traffic --splits=v3=.5,v2=.5 --split-by=random   # 设置不同版本的分流, 分流规则是 random. 
 
cd ../my-first-service/  # 部署另一个服务
gcloud app deploy
gcloud app browse --service=my-first-service
 
gcloud app services list 
gcloud app regions list
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;GAE 命令总结
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Migrate Traffic&lt;/code&gt; 这个参数是用来回滚到之前的版本的&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;google-kubernetes-engine---gke&quot;&gt;Google Kubernetes Engine - GKE&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;谷歌云管理的 K8S 服务&lt;/li&gt;
  &lt;li&gt;是 CaaS
    &lt;ul&gt;
      &lt;li&gt;容器的操作系统使用的是基于分享的内核层
        &lt;ul&gt;
          &lt;li&gt;Containers use a shared base operating system stored in a shared kernel layer.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;底层是 Compute Engine (VM 实例)&lt;/li&gt;
  &lt;li&gt;GKE 中的 K8s 是自动更新的, 我们不需要管&lt;/li&gt;
  &lt;li&gt;比起 App Engine, 更适合复杂的微服务架构, 更灵活&lt;/li&gt;
  &lt;li&gt;有自己的 OS - Container-Optimized OS&lt;/li&gt;
  &lt;li&gt;GKE 的硬件层级
    &lt;ul&gt;
      &lt;li&gt;硬件的管理用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gcloud&lt;/code&gt; 命令&lt;/li&gt;
      &lt;li&gt;从上到下分为几个层级
        &lt;ul&gt;
          &lt;li&gt;Cluster
            &lt;ul&gt;
              &lt;li&gt;是物理概念, 一个集群. 需要先创建集群, 才能部署容器应用&lt;/li&gt;
              &lt;li&gt;创建了 Cluster , 默认就会创建一个 Node Pool&lt;/li&gt;
              &lt;li&gt;cluster 包含了很多 Compute engine 实例
                &lt;ul&gt;
                  &lt;li&gt;A group of machines where Kubernetes can schedule workloads.&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;分为 Master Nodes 和 work Nodes
                &lt;ul&gt;
                  &lt;li&gt;Master nodes 管理cluster&lt;/li&gt;
                  &lt;li&gt;work nodes 运行workload in pods&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;Cluster type
                &lt;ul&gt;
                  &lt;li&gt;Single Zone&lt;/li&gt;
                  &lt;li&gt;Multi zone&lt;/li&gt;
                  &lt;li&gt;reginal&lt;/li&gt;
                  &lt;li&gt;private&lt;/li&gt;
                  &lt;li&gt;alpha&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;默认, GEK  cluster 上的nodes 是 有 public IP 地址的. 但是好的practice 是创建一个 private cluster , 让所有的 nodes 只有内网  IP. 外面可以接一个 HTTPS LB 或者 Network LB. 外面再配一个 Cloud NAT 访问外网&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Node Pool
            &lt;ul&gt;
              &lt;li&gt;集群中全都具有相同配置的一组节点&lt;/li&gt;
              &lt;li&gt;Node Pool 中默认会创建 3 个 Nodes&lt;/li&gt;
              &lt;li&gt;可以为 Cluster 增加更多的 Node Pool&lt;/li&gt;
              &lt;li&gt;应用场景
                &lt;ul&gt;
                  &lt;li&gt;当我们需要部署一个第三方的, 安全性未知的应用, 最好部署单独的 node pool&lt;/li&gt;
                  &lt;li&gt;对于 GPU 有特殊需求的应用, 单独部署一个 node pool&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Node
            &lt;ul&gt;
              &lt;li&gt;集群中的一个工作机器, 可以是一个 VM 或一个实例.&lt;/li&gt;
              &lt;li&gt;分为 Master Nodes 和 work Nodes
                &lt;ul&gt;
                  &lt;li&gt;Master nodes 管理cluster
                    &lt;ul&gt;
                      &lt;li&gt;API Server 提供 nodes 之间的通信和对外通信&lt;/li&gt;
                      &lt;li&gt;Scheduler 提供 pods 的 替换&lt;/li&gt;
                      &lt;li&gt;etcd 是一个分布式存储记录集群状态&lt;/li&gt;
                    &lt;/ul&gt;
                  &lt;/li&gt;
                  &lt;li&gt;work nodes 运行workload in pods
                    &lt;ul&gt;
                      &lt;li&gt;kubelet 是运行在 work notes上跟 master notes 通信的&lt;/li&gt;
                    &lt;/ul&gt;
                  &lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;GKE 的软件层级
    &lt;ul&gt;
      &lt;li&gt;软件的管理用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kubectl&lt;/code&gt; 命令&lt;/li&gt;
      &lt;li&gt;Deoloyment
        &lt;ul&gt;
          &lt;li&gt;deployment 管理 Pods&lt;/li&gt;
          &lt;li&gt;deoployment 代表了一个微服务和微服务的所有release&lt;/li&gt;
          &lt;li&gt;默认一个deployment 有一个 instance 对应
            &lt;ul&gt;
              &lt;li&gt;每个instance 都有一个 pod 来运行部署的应用&lt;/li&gt;
              &lt;li&gt;刷新页面, 就可以看到两个instance 提供的服务&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;可以通过在 Console 中编辑 Yaml 来修改 workload&lt;/li&gt;
          &lt;li&gt;Replica set (版本) ReplicaSets
            &lt;ul&gt;
              &lt;li&gt;确保 deplyoment 有指定的pods 个数可以运行指定的微服务的某个版本
                &lt;ul&gt;
                  &lt;li&gt;当一个pod 挂了, 马上会创建一个新的&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Service
        &lt;ul&gt;
          &lt;li&gt;expose deployment&lt;/li&gt;
          &lt;li&gt;可以理解成 Microservices, 是包含了若干个 Pod&lt;/li&gt;
          &lt;li&gt;可以通过在 Console 中编辑 Yaml 来修改 service&lt;/li&gt;
          &lt;li&gt;有三种类型的 Service
            &lt;ul&gt;
              &lt;li&gt;Cluster IP
                &lt;ul&gt;
                  &lt;li&gt;只能在集群内部访问的 IP&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;LoadBalancer
                &lt;ul&gt;
                  &lt;li&gt;可以对外服务, 每个微服务可以有一个 LB&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;Nodeport,
                &lt;ul&gt;
                  &lt;li&gt;将一个静态端口提供给每个Node’s IP .&lt;/li&gt;
                  &lt;li&gt;如果不想给每个微服务都配一个 LB, 就用这个&lt;/li&gt;
                  &lt;li&gt;NodePort服务是将外部流量直接发送给您的服务的最原始方式。 顾名思义，NodePort在所有节点（VM）上打开一个特定端口，并且发送到该端口的任何流量都将转发到该服务。&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Service DNS
            &lt;ul&gt;
              &lt;li&gt;让GKE 中的微服务通过内网进行互相访问
                &lt;ol&gt;
                  &lt;li&gt;为每个微服务在 GKE cluster 中创建 Deployment,&lt;/li&gt;
                  &lt;li&gt;使用 Service 暴露 deployment&lt;/li&gt;
                  &lt;li&gt;通过 Service DNS,  Cluster 中的每个微服务可以和其他微服务进行通信&lt;/li&gt;
                &lt;/ol&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Ingress
        &lt;ul&gt;
          &lt;li&gt;Ingress是k8s的标准对象，Ingress对象本身只是定义了一系列的流量路由规则，类似nginx.conf配置&lt;/li&gt;
          &lt;li&gt;Ingress controller是负载均衡器的实体，由各个厂商独立实现，通过读取ingress的规则进行流量路由。&lt;/li&gt;
          &lt;li&gt;提供 LB 和 SSL 终端&lt;/li&gt;
          &lt;li&gt;在使用 NodePort的时候, 可以使用 Ingress&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Pod
        &lt;ul&gt;
          &lt;li&gt;Pod是 K8S 的最小对象, 包含一个或多个容器，例如Docker 容器
            &lt;ul&gt;
              &lt;li&gt;Pod 里面是容器&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;pod 部署在worker node 里面&lt;/li&gt;
          &lt;li&gt;每个 Pod 有一个临时 IP 地址&lt;/li&gt;
          &lt;li&gt;Pod 内的多个容器共享 IP地址, 网络, 磁盘, 端口, volumes.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Docker
        &lt;ul&gt;
          &lt;li&gt;运行应用的独立容器环境&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Docker Image
        &lt;ul&gt;
          &lt;li&gt;创建Docker 内容的镜像&lt;/li&gt;
          &lt;li&gt;Docker File
            &lt;ul&gt;
              &lt;li&gt;保存了创建一个镜像的命令&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Container Registry
        &lt;ul&gt;
          &lt;li&gt;存放 Docker Image Repository 镜像仓库&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&quot;language-dockerfile&quot;&gt;FROM node:8.16.1-alpine     # 基础镜像
WORKDIR /app                # 镜像创建的 Docker 时 的工作目录
COPY . /app                 # 将本地目录的内容拷贝到工作目录
RUN npm install             # 运行一个命令
EXPOSE 5000                 # 暴露一个端口
CMD node index.js           # 启动 Docker 时执行一个命令
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
  &lt;li&gt;StatefulSet ,是一个 GKE的 一组稳定的, 保持状态的, 有稳定的域名 (hostname) 的 Pods集合. 不管是否会被 redeployment 或重启, 都会保持状态.
    &lt;ul&gt;
      &lt;li&gt;一些场景:
        &lt;ul&gt;
          &lt;li&gt;GKE 中一组 Redis pods 组成的 statefulSet&lt;/li&gt;
          &lt;li&gt;GKE 中一组 Cassandra sharding Pods 组成的 statefulSet&lt;/li&gt;
          &lt;li&gt;GKE 中一组 MongoDB read replicas 组成的 statefulSet&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-02-22-092321.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;GKE 的 autoscaling
    &lt;ul&gt;
      &lt;li&gt;GKE Cluster 既支持 Node 的 伸缩(GKE Cluster Autoscaler), 也支持 Pod 的伸缩 (Horizontal Pod Autoscaler)&lt;/li&gt;
      &lt;li&gt;在 deployment 中开启
        &lt;ul&gt;
          &lt;li&gt;开启 GKE cluster 的 autoscaling 选项&lt;/li&gt;
          &lt;li&gt;开启 horizontal Pod autoscaling 选项
            &lt;ul&gt;
              &lt;li&gt;一旦开启 Horizontal Pod autoscaling, pod 个数会随着流量的大小而变化&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;sidecar container
    &lt;ul&gt;
      &lt;li&gt;Sidecar containers let you run two tightly coupled containers together. In this article, you’ll learn when and how to use sidecar containers, as well as best practices for using them.&lt;/li&gt;
      &lt;li&gt;案例
        &lt;ul&gt;
          &lt;li&gt;php 应用提供上传照片功能, C 应用负责压缩照片, 两个应用用 sidecar container 进行捆绑提高效率.&lt;/li&gt;
          &lt;li&gt;日志记录应用和日志分析应用捆绑&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Cloud Operations for GKE
    &lt;ol&gt;
      &lt;li&gt;You can view a cluster’s key metrics, such as CPU utilization, memory utilization, and the number of open incidents.&lt;/li&gt;
      &lt;li&gt;You can view clusters by their infrastructure, workloads, or services.&lt;/li&gt;
      &lt;li&gt;You can inspect namespaces, nodes, workloads, services, pods, and containers.&lt;/li&gt;
      &lt;li&gt;For pods and containers, you can view metrics as a function of time and view log entries.&lt;/li&gt;
      &lt;li&gt;注意: Cloud Operation 只能服务于在 GCP 上的 GKE cluster 的监控,  GCP之外的服务无法监控; 如果需要多云混合云的监控, &lt;a href=&quot;https://cloud.google.com/stackdriver/docs/managed-prometheus&quot;&gt;Google Cloud Managed Service for Prometheus&lt;/a&gt; 更合适&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Istio
    &lt;ol&gt;
      &lt;li&gt;Istio 是个基于 K8s 的 开源 Service Mesh 扩展.
        &lt;ol&gt;
          &lt;li&gt;提供统一的微服务 连接, 管理和安全服务.&lt;/li&gt;
          &lt;li&gt;提供服务间的流量管理, 比如断掉某个服务的流量(模拟这个服务挂了 - Faul Injection)&lt;/li&gt;
          &lt;li&gt;不需要修改微服务代码&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;Istio 提供
        &lt;ol&gt;
          &lt;li&gt;HTTP、gRPC、WebSocket、MongoDB 和 TCP 流量的自动负载平衡。&lt;/li&gt;
          &lt;li&gt;通过丰富的路由规则、重试、故障转移和故障注入对流量行为进行精细控制。 支持访问控制、速率限制和配额的可配置策略层和 API。&lt;/li&gt;
          &lt;li&gt;集群内所有流量（包括集群入口和出口）的自动指标、日志和跟踪。 通过基于身份的强身份验证和授权，保护群集中的服务到服务通信。&lt;/li&gt;
          &lt;li&gt;GKE 上的 Istio 是一个工具，可以在您的 GKE 集群中自动安装和升级 Istio。当您升级 GKE 时，该附加组件会自动升级到最新的 GKE 支持的 Istio 版本。这使您可以轻松地管理 Istio 的安装和升级，作为 GKE 集群生命周期的一部分。&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;使用 GKE 的场景
    &lt;ul&gt;
      &lt;li&gt;优化 GKE 并且降低成本
        &lt;ul&gt;
          &lt;li&gt;方案:
            &lt;ul&gt;
              &lt;li&gt;尝试使用临时的 VM, 选合适的region, 用 committed discount&lt;/li&gt;
              &lt;li&gt;使用 E2, 不要用 N1&lt;/li&gt;
              &lt;li&gt;必要的话使用 多个 node pool&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;需要一个完整高效的 auto scaling 的 GKE
        &lt;ul&gt;
          &lt;li&gt;方案:
            &lt;ul&gt;
              &lt;li&gt;配置 HPA, horizontal pod autoscaler
                &lt;ul&gt;
                  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kubectl autoscale deployment&lt;/code&gt;&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;配置 cluster autoscaler for node pools
                &lt;ul&gt;
                  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gcloud container cluster update --enable-autoscaling&lt;/code&gt;&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;需要再 GKE 中运行不可信的第三方代码
        &lt;ul&gt;
          &lt;li&gt;方案:
            &lt;ul&gt;
              &lt;li&gt;通过 GKE Sandbox 创建新的 node pool , 把代码部署上来&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;希望 GKE 中的 cluster 只进行内网通信
        &lt;ul&gt;
          &lt;li&gt;方案:
            &lt;ul&gt;
              &lt;li&gt;服务类型选择 ClusterIP&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;发现 pod 一直是 Panding 状态
        &lt;ul&gt;
          &lt;li&gt;可能是 Pod 不能被正常 schedule 到Node 上&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;发现 pod 一直是 Waiting 状态
        &lt;ul&gt;
          &lt;li&gt;可能是 镜像 pull 不下来&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;CI/CD 安全
    &lt;ul&gt;
      &lt;li&gt;Binary authorization (可以去本文的Binary authorization专门章节看)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Standard GKE 的创建过程
    &lt;ul&gt;
      &lt;li&gt;创建一个新的项目&lt;/li&gt;
      &lt;li&gt;先开启 GKE 的 API&lt;/li&gt;
      &lt;li&gt;创建一个 Cluster (这里选Standard 版本)&lt;/li&gt;
      &lt;li&gt;Login to Cloud Shell&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;gcloud config &lt;span class=&quot;nb&quot;&gt;set &lt;/span&gt;project my-kubernetes-project-372302   &lt;span class=&quot;c&quot;&gt;# switch 到新的项目&lt;/span&gt;
gcloud container clusters get-credentials my-cluster --zone us-central1-c --project my-kubernetes-project-372302  &lt;span class=&quot;c&quot;&gt;# 获取连接到 Kubernetes Cluster 的认证, 获取后就可以用k8s命令了&lt;/span&gt;
kubectl create deployment hello-world-rest-api --image&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;in28min/hello-world-rest-api:0.0.1.RELEASE  &lt;span class=&quot;c&quot;&gt;# 用 K8s 的命令创建一个github 的镜像生成的 deployment  &lt;/span&gt;
kubectl get deployment  &lt;span class=&quot;c&quot;&gt;# 查看deployment情况&lt;/span&gt;
kubectl expose deployment hello-world-rest-api --type&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;LoadBalancer --port&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;8080  &lt;span class=&quot;c&quot;&gt;# 将 workload 暴露成 Service, 给外部用户. &lt;/span&gt;
kubectl scale deployment hello-world-rest-api --replicas&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;2  &lt;span class=&quot;c&quot;&gt;# 为 deployment 增加一个 pod (默认只有一个, 这里增加了1 个, 是replica set)&lt;/span&gt;
kubectl get deployment  
watch curl http://34.29.41.99:8080/hello-world  &lt;span class=&quot;c&quot;&gt;# 查看LB 下不同实例返回的结果&lt;/span&gt;
kubectl get pods  &lt;span class=&quot;c&quot;&gt;# 查看pods &lt;/span&gt;

gcloud container clusters resize my-cluster --node-pool default-pool --num-nodes 5 --zone us-central1-c  &lt;span class=&quot;c&quot;&gt;# 增加 Node 的个数到 5 个&lt;/span&gt;

kubectl autoscale deployment hello-world-rest-api --max&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;4 --cpu-percent&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;70  &lt;span class=&quot;c&quot;&gt;# 设置auto scaling , 最大pod 个数增加为 4 个, 检测 CPU 时用率&lt;/span&gt;
kubectl get hpa  &lt;span class=&quot;c&quot;&gt;# Horizential Pods Autoscaling&lt;/span&gt;
kubectl create configmap hello-world-config --from-literal&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;RDS_DB_NAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;todos  &lt;span class=&quot;c&quot;&gt;# 增加配置参数&lt;/span&gt;
kubectl get configmap
kubectl describe configmap hello-world-config &lt;span class=&quot;c&quot;&gt;# &lt;/span&gt;
kubectl create secret generic hello-world-secrets-1 --from-literal&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;RDS_PASSWORD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;your own password&amp;gt; &lt;span class=&quot;c&quot;&gt;# 创建密码&lt;/span&gt;
kubectl get secret
kubectl describe secret hello-world-secrets-1


kubectl apply -f deployment.yaml   &lt;span class=&quot;c&quot;&gt;# 应用 yaml 的配置(当修改了 Yaml 文件后应这个命令) &lt;/span&gt;
gcloud container node-pools create POOL_NAME --cluster CLUSTER_NAME  &lt;span class=&quot;c&quot;&gt;# 创建一个新的 Node pool&lt;/span&gt;
gcloud container node-pools list --zone&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;us-central1-c --cluster&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;my-cluster  
kubectl get pods -o wide   &lt;span class=&quot;c&quot;&gt;# 查看pods 的完整信息列表, 包含了外部 IP 地址&lt;/span&gt;
 
kubectl &lt;span class=&quot;nb&quot;&gt;set &lt;/span&gt;image deployment hello-world-rest-api hello-world-rest-api&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;in28min/hello-world-rest-api:0.0.2.RELEASE  &lt;span class=&quot;c&quot;&gt;## 为服务创建一个新的release(版本 0.0.2) &lt;/span&gt;
kubectl get services  
kubectl get replicasets  
kubectl get pods
kubectl delete pod hello-world-rest-api-58dc9d7fcc-8pv7r   
 
kubectl scale deployment hello-world-rest-api --replicas&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1  
kubectl get replicasets  
gcloud projects list
 
kubectl delete service hello-world-rest-api  &lt;span class=&quot;c&quot;&gt;# 删除服务&lt;/span&gt;
kubectl delete deployment hello-world-rest-api  &lt;span class=&quot;c&quot;&gt;# 删除deployment / workstream&lt;/span&gt;
gcloud container clusters delete my-cluster --zone us-central1-c  &lt;span class=&quot;c&quot;&gt;# 删除 custer 集群&lt;/span&gt;
gcloud projects delete my-kubernetes-project-372302  &lt;span class=&quot;c&quot;&gt;# 删除项目&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
  &lt;li&gt;命令强调
    &lt;ul&gt;
      &lt;li&gt;nodes pool 大小调整用 resize 参数&lt;/li&gt;
      &lt;li&gt;nodes 的 autoscaling 的 最大最小nodes 限制使用 update 参数.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;yaml 文件的例子 - deployment
    &lt;ul&gt;
      &lt;li&gt;修改后用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kubectl apply -f deployment.yaml&lt;/code&gt; 来应用更新
        &lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;s&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;apps/v1&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Deployment&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;hello-world-rest-api&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;hello-world-rest-api&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;namespace&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;default&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;replicas&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;3&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;matchLabels&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;hello-world-rest-api&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;s&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;hello-world-rest-api&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;containers&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;in28min/hello-world-rest-api:0.0.3.RELEASE&apos;&lt;/span&gt;
              &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;hello-world-rest-api&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;cloud-functions&quot;&gt;Cloud Functions&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;需要先开启 Cloud Funciton API, Google Pub/Sub API, Cloud Logging API , Cloud Build API, Cloud Storage API, Cloud firestore API, Eventarc API.&lt;/li&gt;
  &lt;li&gt;事件驱动型 Serverless 平台, 不需要关心底层架构, autoscaling .&lt;/li&gt;
  &lt;li&gt;用户选择 Cloud Function 的原因:
    &lt;ul&gt;
      &lt;li&gt;应用程序包含事件驱动代码, 用户不想为其配置其他计算资源&lt;/li&gt;
      &lt;li&gt;Cloud Function 可以无缝的 scaling&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Cloud Functions 对代码的部署方式施加了更多限制（显然易见，您需要将其打包为一个函数）&lt;/li&gt;
  &lt;li&gt;Cloud Function v2 在后台其实是运行在 Cloud Run 上面的
    &lt;ul&gt;
      &lt;li&gt;当创建了一个新的 Cloud Function, 也可以在 Cloud Run 看到对应的服务&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;适合被动被调用, 短时间计算的逻辑, 不适合长期运行的应用&lt;/li&gt;
  &lt;li&gt;计费
    &lt;ul&gt;
      &lt;li&gt;按调用时间, 请求次数, 内存 cpu 消耗情况计费&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;超时
    &lt;ul&gt;
      &lt;li&gt;默认function 执行 1 分钟就会自动停掉. 最大可以设置超时时间为 60 分钟&lt;/li&gt;
      &lt;li&gt;function v1 最大9 分钟, v2 是 60 分钟&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;触发场景例子
    &lt;ul&gt;
      &lt;li&gt;文件上传到 Cloud Storage&lt;/li&gt;
      &lt;li&gt;Error log 写到了 Cloud Logging&lt;/li&gt;
      &lt;li&gt;一条消息传到了 Cloud Pub/Sub (消息队列)&lt;/li&gt;
      &lt;li&gt;一个 Http/Https 的网页或 Rest API 被调用&lt;/li&gt;
      &lt;li&gt;Firebase&lt;/li&gt;
      &lt;li&gt;Cloud Firestore&lt;/li&gt;
      &lt;li&gt;Stack driver logging&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;怎么让两个 Cloud Function 的一个调用另一个?
    &lt;ol&gt;
      &lt;li&gt;给 function B “request authentication”&lt;/li&gt;
      &lt;li&gt;创建一个 service account, 并关联到 function a 上&lt;/li&gt;
      &lt;li&gt;为 service accoutn 赋予 访问 function b 的权限&lt;/li&gt;
      &lt;li&gt;在 function a 中创建一个 ID token , 当a 调用 b 的时候, 把这个 token pass 过去.&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;支持语言
    &lt;ul&gt;
      &lt;li&gt;.net&lt;/li&gt;
      &lt;li&gt;java&lt;/li&gt;
      &lt;li&gt;php&lt;/li&gt;
      &lt;li&gt;python&lt;/li&gt;
      &lt;li&gt;go&lt;/li&gt;
      &lt;li&gt;ruby&lt;/li&gt;
      &lt;li&gt;node.js&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;V1 和 V2 的区别
    &lt;ul&gt;
      &lt;li&gt;V2是基于Cloud Run and Eventarc&lt;/li&gt;
      &lt;li&gt;V2 增强了
        &lt;ul&gt;
          &lt;li&gt;Longer Request timeout: Up to 60 分钟
            &lt;ul&gt;
              &lt;li&gt;V1 9分钟&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Larger instance sizes: Up to 16GiB RAM with 4 vCPU
            &lt;ul&gt;
              &lt;li&gt;V1 8G 2vCPU&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Concurrency: Upto 1000 concurrent requests per function instance
            &lt;ul&gt;
              &lt;li&gt;V1 一个并发
                &lt;ul&gt;
                  &lt;li&gt;V1 默认是一个funciton 处理一个请求, 如果第二个请求来了, autoscaler 会创建第二个function 来处理第二个请求, 但这时个cold start(冷创建, 有个创建过程)&lt;/li&gt;
                  &lt;li&gt;解决方法是设置最少的默认function 实例个数, 或者用 V2&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;V2 虽然支持1000并发, 但我们要自己负责代码的并发可以被安全的执行.&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Multiple Function Revisions and Traffic splitting supported
            &lt;ul&gt;
              &lt;li&gt;V1 不支持&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Support for 90+ event types - enabled by Eventarc
            &lt;ul&gt;
              &lt;li&gt;V1 支持 7 个&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;HTTP 请求 Node.js 的function 样例
    &lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;escapeHtml&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&apos;escape-html&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;exports&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;helloHttp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Hello&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;escapeHtml&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;query&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;World&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;命令行操作 function
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gcloud functions deploy [NAME]&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;参数
        &lt;ul&gt;
          &lt;li&gt;–gen2 第二代&lt;/li&gt;
          &lt;li&gt;–runtime 指定语言&lt;/li&gt;
          &lt;li&gt;–timeout 超时时间&lt;/li&gt;
          &lt;li&gt;–max-instances, –min-instances  最大, 最小实例个数&lt;/li&gt;
          &lt;li&gt;–source 指定源代码&lt;/li&gt;
          &lt;li&gt;–trigger-bucket 触发方式&lt;/li&gt;
          &lt;li&gt;–serve-all-traffic-latest-revision 指定服务的版本&lt;/li&gt;
          &lt;li&gt;–docker-registry, –docker-repository 存放镜像位置&lt;/li&gt;
          &lt;li&gt;–service-account  设置服务账号&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;function 的最佳实践
    &lt;ul&gt;
      &lt;li&gt;为了避免cold start, 设置 min 最小实例个数 (成本会相应升高)&lt;/li&gt;
      &lt;li&gt;为了加快实例启动时间, 尽量减少function 的依赖关系&lt;/li&gt;
      &lt;li&gt;设置max 最大实例数, 可以避免异常的超大流量带来的额外费用&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;用Cloud Endpints (或 APIgee 或 API gateway) 给 function 设置版本, 方便用户可以访问不同的版本的function
    &lt;ul&gt;
      &lt;li&gt;用 V2 的 function, 可以在不同版本间分配流量, 可以rollback 到之前的版本&lt;/li&gt;
      &lt;li&gt;用 Secret Manager 管理 API 的  Key&lt;/li&gt;
      &lt;li&gt;为每个 function 设置不同的 service account, 让function 之间调用可以更安全
        &lt;ul&gt;
          &lt;li&gt;Grant roles/cloudfunctions.invoker role to invoke a cloud function&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;通过 npm, pip 等包管理工具来管理 function 的依赖&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;google-cloud-run&quot;&gt;Google Cloud Run&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;和 function 很像, 但是支持所有的开发语言, 有更长的超时时间, 可以同时接受更多的请求数.&lt;/li&gt;
  &lt;li&gt;就是无服务版本的 GKE, 用 GKE 的用户建议迁到这个 Cloud Run&lt;/li&gt;
  &lt;li&gt;也是 serverless&lt;/li&gt;
  &lt;li&gt;基于 Knative 构建， 是 Google 最新的 Serverless 产品。&lt;/li&gt;
  &lt;li&gt;方便在不同的云上迁移, 因为是基于容器的&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;使您可以将代码打包在无状态容器中，然后通过 HTTP 请求(Web, pub/sub)调用它&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;开发者用 Cloud Run 的三步流程
    &lt;ul&gt;
      &lt;li&gt;write code&lt;/li&gt;
      &lt;li&gt;build and package app in container&lt;/li&gt;
      &lt;li&gt;deploy to cloud run
        &lt;ul&gt;
          &lt;li&gt;Cloud Run 只能deploy 放在 Artifact Registry 中的 Image&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;三种无服务(App Engine, Cluod Function, Cloud Run)的选择
    &lt;ul&gt;
      &lt;li&gt;如果您已经将代码打包在 Docker 容器中或正在 Google Cloud 中运行 Kubernetes 集群，请针对您的 Serverless 工作负载考虑使用 Cloud Run 或 Knative。&lt;/li&gt;
      &lt;li&gt;对于运行响应实时事件的代码，或在不使用容器的情况下处理请求，请使用 Cloud Functions。
        &lt;ul&gt;
          &lt;li&gt;Cloud Function 在后台其实是运行在 Cloud Run 上面的&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;如果您需要在一个地方放置多个函数并且只想部署整个应用程序，请使用 App Engine。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;集成了诸多 GCP 的服务
    &lt;ul&gt;
      &lt;li&gt;Cloud Code&lt;/li&gt;
      &lt;li&gt;Cloud Build&lt;/li&gt;
      &lt;li&gt;Cloud Monitoring&lt;/li&gt;
      &lt;li&gt;Cloud Logging&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;CI/CI 安全
    &lt;ul&gt;
      &lt;li&gt;Binary authorization (可以去专门章节看)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Pricing
    &lt;ul&gt;
      &lt;li&gt;两种收费模式
        &lt;ul&gt;
          &lt;li&gt;仅在请求处理期间分配 CPU
            &lt;ul&gt;
              &lt;li&gt;没有请求就不分配 CPU , 就不用付费&lt;/li&gt;
              &lt;li&gt;前 n 次请求免费, 超量收费&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;始终分配 CPU
            &lt;ul&gt;
              &lt;li&gt;没请求也分配 CPU&lt;/li&gt;
              &lt;li&gt;前 n 次请求免费, 超量收费&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Anthos
    &lt;ul&gt;
      &lt;li&gt;是一个集成环境, 可以让 K8s 在任何地方运行
        &lt;ul&gt;
          &lt;li&gt;私有机房/on premise&lt;/li&gt;
          &lt;li&gt;公有云(AWS, Azure, 等)&lt;/li&gt;
          &lt;li&gt;Cloud Run 可以运行在 anthos 上&lt;/li&gt;
          &lt;li&gt;相当于 OpenShift&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;场景
    &lt;ul&gt;
      &lt;li&gt;如果有容器应用, 但是觉得管理麻烦, 就用 Cloud Run&lt;/li&gt;
      &lt;li&gt;如果觉得到处(on-premise, 公有云)管理 K8S 太麻烦, 就用 Cloud Run for Anthos&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;命令行对 Cloud run 创建, 查看, 切换流量
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;gcloud run deploy SERVICE-NAME --image IMAGE-URL --revision-suffix v1  
gcloud run revisions list
gcloud run services update-traffic myservice --to-revisions&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;v2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;10,v1&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;90
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;gce-gke-gae-function-cloud-run-区别&quot;&gt;GCE, GKE, GAE, Function, Cloud RUN 区别&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;GCE 是 VM&lt;/li&gt;
  &lt;li&gt;GKE 是 K8s 协调平台, 管容器&lt;/li&gt;
  &lt;li&gt;GAE 是 无服务的, 预设场景的, 支持多语言的开发环境, 比如弄个web 网站&lt;/li&gt;
  &lt;li&gt;Function 无服务的, 支持多语言的, 提供事件响应的一段函数, 有运行时间限制&lt;/li&gt;
  &lt;li&gt;Cloud Run 是无服务的 GKE, Function 的底层就是这个.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;容器所在的服务选择流程图&quot;&gt;容器所在的服务选择流程图&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-02-20-100446.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;storage&quot;&gt;Storage&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;块存储和文件存储&lt;/li&gt;
  &lt;li&gt;Block Storage 块存储
    &lt;ul&gt;
      &lt;li&gt;我们电脑的硬盘就是块存储&lt;/li&gt;
      &lt;li&gt;块存储 和 VM 是多对一(含一对一)的关系
        &lt;ul&gt;
          &lt;li&gt;read only 的 block storage 可以 attach 到多个 VM 上&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;两种使用方法
        &lt;ul&gt;
          &lt;li&gt;DAS
            &lt;ul&gt;
              &lt;li&gt;direct attached storage, 直连&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;SAN, Storage Area Network
            &lt;ul&gt;
              &lt;li&gt;连到一个磁盘池, 有更高的网络连接&lt;/li&gt;
              &lt;li&gt;用在数据库场景&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Google 提供的两种块存储
        &lt;ul&gt;
          &lt;li&gt;Persistent Disks&lt;/li&gt;
          &lt;li&gt;Local SSDs (SSD)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;File Storage 文件存储
    &lt;ul&gt;
      &lt;li&gt;Filestore 是google&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;SAN 和 NAS 的区别
    &lt;ul&gt;
      &lt;li&gt;Storage Area Network 是块存储, 存储结构化数据, 比如数据库. 所以和 PD 相关连&lt;/li&gt;
      &lt;li&gt;NAS 是文件存储, 往往存储视频和图片. 既可以和 PD 关联, 也可以和 Cloud Storage 关联.
        &lt;h4 id=&quot;persistent-disks-pd&quot;&gt;Persistent Disks (PD)&lt;/h4&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;是网络块存储&lt;/li&gt;
  &lt;li&gt;持久性更好
    &lt;ul&gt;
      &lt;li&gt;可以使用regional PD, 在 2 个zone 都有磁盘, 但会产生 2x 的价格&lt;/li&gt;
      &lt;li&gt;也可以使用 zonal PD 价格更便宜, 一般是给数据库用比较合适&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;可以随意增加 Size , 而不用停机
    &lt;ul&gt;
      &lt;li&gt;Step I: Resize the Disk&lt;/li&gt;
      &lt;li&gt;Step II: Take a snapshot (Just for backup in case things go wrong!)&lt;/li&gt;
      &lt;li&gt;Step III: Resize the file system and partitions&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;可以为 VM attache 新的 PD 不用停机
    &lt;ul&gt;
      &lt;li&gt;三个步骤:
        &lt;ul&gt;
          &lt;li&gt;A: Attach Disk to running or stopped VM&lt;/li&gt;
          &lt;li&gt;B: Format the disk&lt;/li&gt;
          &lt;li&gt;C: Mount the disk&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;单独的生命周期, 不和 VM 生命周期绑定
    &lt;ul&gt;
      &lt;li&gt;可以detach and attach 给另一个 VM&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;可以 regional, Regional PD 复制磁盘到同一个region 的另一个zone.&lt;/li&gt;
  &lt;li&gt;提升性能的方法
    &lt;ul&gt;
      &lt;li&gt;增加 PD size&lt;/li&gt;
      &lt;li&gt;增加 PD 的个数&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Snapshot&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;快照是从 PD 定期生成的一个磁盘映像(很快, 是增量的). 镜像可以生成 PD (慢, 因为要多个镜像才能生成完整的 PD)
        &lt;ul&gt;
          &lt;li&gt;如果需要频繁的把镜像还原成 disk, 可以考虑把镜像创建成image, image 生成disk 很快.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;可以schedule snapshot 生成的计划&lt;/li&gt;
      &lt;li&gt;可以设置snapshot 创建多久后被自动删除
        &lt;ul&gt;
          &lt;li&gt;镜像被删除, 其实只是删除了其他镜像不需要的数据, 不用担心.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;snapshot 可以跨region, 跨项目&lt;/li&gt;
      &lt;li&gt;新的snapshot 是增量的, 只对最新变化的内容做快照
        &lt;ul&gt;
          &lt;li&gt;第一个snapshot 是全量&lt;/li&gt;
          &lt;li&gt;后面的snapshot 是针对第一个snapshot 的变化而生成的增量 snapshot&lt;/li&gt;
          &lt;li&gt;如果多个快照(比如 4 个), 中间两个被删掉了
            &lt;ul&gt;
              &lt;li&gt;删除的快照会被标记为已删除&lt;/li&gt;
              &lt;li&gt;如果被删除的快照没有被其他快照依赖它, 直接删除&lt;/li&gt;
              &lt;li&gt;如果被删除的快照 有其他快照依赖它
                &lt;ol&gt;
                  &lt;li&gt;所有快照上的被依赖的数据会被拷贝到后一个快照上 (第四个)&lt;/li&gt;
                  &lt;li&gt;所有快照上的不被依赖的数据会被删除.&lt;/li&gt;
                  &lt;li&gt;后一个快照将不再依赖这个被标记删除的快照, 而是依赖被删除的快照的前一个快照(第一个).&lt;/li&gt;
                  &lt;li&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-02-13-152031.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
                &lt;/ol&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;如果要删除快照上的数据, 就要删除所有快照&lt;/li&gt;
      &lt;li&gt;建议
        &lt;ul&gt;
          &lt;li&gt;在流量低谷时做快照&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;PD 也分三种类型
    &lt;ul&gt;
      &lt;li&gt;Standard PD
        &lt;ul&gt;
          &lt;li&gt;HDD 机械硬盘&lt;/li&gt;
          &lt;li&gt;性能一般, 最便宜&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Balanced PD
        &lt;ul&gt;
          &lt;li&gt;SSD 固态硬盘&lt;/li&gt;
          &lt;li&gt;性能好, 价格适中&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;SSD PD
        &lt;ul&gt;
          &lt;li&gt;SSD 固态硬盘&lt;/li&gt;
          &lt;li&gt;性能最好, 价格最贵&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;可以通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;resize2fs&lt;/code&gt; 命令来给VM 的 PD 扩容 (只能增,不能减)
    &lt;ul&gt;
      &lt;li&gt;场景, 给正在运行的 VM 上的 数据库的 PD 扩容磁盘
        &lt;ul&gt;
          &lt;li&gt;先扩磁盘, 再扩文件系统和分区&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h5 id=&quot;local-ssds-ssd&quot;&gt;Local SSDs (SSD)&lt;/h5&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;  - 本地块存储
  - 物理 attache 到 VM 上
  - 提供临时的数据存储服务
  - 和 VM 有共同的生命周期
    - 不能 detach and attach 给另一个 VM
    - 和 VM 一样是 zonal
  - 提供更高的 IOPS 和 低延迟
    - SSD size 越大, vCPU 越多, 性能越好
    - 10 - 100 倍于 PD
  - 只有部分 machine type 支持 Local SSD
  - 支持 SCSI 和 NVMe 接口
    - Choose NVMe-enabled and multi-queue SCSI images for best performance
  - 不支持 Snapshot
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h4 id=&quot;filestore&quot;&gt;Filestore&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;File Storage 文件存储
    &lt;ul&gt;
      &lt;li&gt;Box 就算文件存储&lt;/li&gt;
      &lt;li&gt;一般用于媒体文件&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;是 Google 提供的高性能文件存储服务&lt;/li&gt;
  &lt;li&gt;需要先开启 Filestore API&lt;/li&gt;
  &lt;li&gt;创建时是创建了一个Filestore instance , 这个 instance 是一个google 管理的网络文件系统(NFS), 可以被 GCE, GKE 进行连接和使用&lt;/li&gt;
  &lt;li&gt;创建后会生成一个NFS mount 点 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;10.88.42.58:/dalongShare&lt;/code&gt; 供计算服务进行mount&lt;/li&gt;
  &lt;li&gt;支持 NFS v3 protocol&lt;/li&gt;
  &lt;li&gt;up to 320TB , 16GB/s, 480k IOPS&lt;/li&gt;
  &lt;li&gt;支持 HDD 和 SSD&lt;/li&gt;
  &lt;li&gt;场景&lt;/li&gt;
  &lt;li&gt;文件共享, 流媒体, 内容管理, 应用对 POSIX 文件系统高速的读写
    &lt;ul&gt;
      &lt;li&gt;Cloud Filestore is POSIX complaint.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;NAS (Network attached storage)&lt;/li&gt;
  &lt;li&gt;POSIX
    &lt;ul&gt;
      &lt;li&gt;POSIX: Portable Operating System Interface of Unix.，可移植操作系统接口&lt;/li&gt;
      &lt;li&gt;目的是提高应用程序在不同操作系统之间的可移植性&lt;/li&gt;
      &lt;li&gt;技巧: 提到 POSIX 就是 Filestore&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;machine-images&quot;&gt;Machine Images&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;给一个 VM 做完整的 image&lt;/li&gt;
  &lt;li&gt;是类似 Images, 但是支持多个磁盘attache 到 VM 时, 给VM instance 做镜像
    &lt;ul&gt;
      &lt;li&gt;Custom Image 一般只是给boot 磁盘做一个 Image, 包含了 OS 和已经安装的软件&lt;/li&gt;
      &lt;li&gt;Macine Image 是给  VM 做一个完整的Image&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;一个 Machine Image 包含了
    &lt;ul&gt;
      &lt;li&gt;configuration&lt;/li&gt;
      &lt;li&gt;metadata&lt;/li&gt;
      &lt;li&gt;permissiions&lt;/li&gt;
      &lt;li&gt;data from one or more disks&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;场景
    &lt;ul&gt;
      &lt;li&gt;磁盘备份, 实例clone 和 复制&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://cloud.google.com/compute/docs/machine-images&quot;&gt;Macine Image 和 Snapshot, Custom Image, Instance Template 的对比&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Global, Regional and Zonal Resources 比较
    &lt;ul&gt;
      &lt;li&gt;Global
        &lt;ul&gt;
          &lt;li&gt;Images&lt;/li&gt;
          &lt;li&gt;Snapshots&lt;/li&gt;
          &lt;li&gt;Instance templates (Unless you use zonal resources in your templates)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Regional
        &lt;ul&gt;
          &lt;li&gt;Regional managed instance groups&lt;/li&gt;
          &lt;li&gt;Regional persistent disks&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Zonal
        &lt;ul&gt;
          &lt;li&gt;Zonal managed instance groups&lt;/li&gt;
          &lt;li&gt;Instances&lt;/li&gt;
          &lt;li&gt;Persistent disks
            &lt;ul&gt;
              &lt;li&gt;You can attach a disk only to instances in the same zone as the disk&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;google-cloud-storage&quot;&gt;Google Cloud Storage&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;谷歌提供的对象存储是 &lt;strong&gt;Cloud Storage&lt;/strong&gt;, 相当于 AWS 的 S3&lt;/li&gt;
  &lt;li&gt;题目如果说到了 data lake (数据湖), 往往是 Cloud Storage&lt;/li&gt;
  &lt;li&gt;对象存储在bucket 中, 需要先创建bucket, 再上传对象
    &lt;ul&gt;
      &lt;li&gt;bucket 名字需要全球唯一, 3-36 个字符 (小写字母,数字,下划线,中划线,点)&lt;/li&gt;
      &lt;li&gt;bucket 名字不能包含 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;goog&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;bucket 要属于某个project&lt;/li&gt;
      &lt;li&gt;bucket 中的对象个数不受限制&lt;/li&gt;
      &lt;li&gt;对象上传不支持 partial upload (分块上传)&lt;/li&gt;
      &lt;li&gt;单个对象最大 5T&lt;/li&gt;
      &lt;li&gt;每个对象有一个unique key&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;无服务, autoscaling, 无限扩容&lt;/li&gt;
  &lt;li&gt;提供 Rest API , 命令行(gsutil) 进行访问&lt;/li&gt;
  &lt;li&gt;对象储存(object storage)的分类
    &lt;ul&gt;
      &lt;li&gt;Standard Storage
        &lt;ul&gt;
          &lt;li&gt;随存随取, hot data&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Nearline Storage
        &lt;ul&gt;
          &lt;li&gt;30 天取一次, once per month&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Coldline Storage
        &lt;ul&gt;
          &lt;li&gt;60/90 天读一次&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Archive Storage
        &lt;ul&gt;
          &lt;li&gt;1 年读一次&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;可以跨region
    &lt;ul&gt;
      &lt;li&gt;99.95 for multi-region (不含 archive)&lt;/li&gt;
      &lt;li&gt;99.99 for single-region (不含 archive)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;版本 version
    &lt;ul&gt;
      &lt;li&gt;防止数据被误删除或者误修改&lt;/li&gt;
      &lt;li&gt;bucket level 随时开关&lt;/li&gt;
      &lt;li&gt;和 duration 功能有冲突, 只能二选一&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Lifecycle 管理
    &lt;ul&gt;
      &lt;li&gt;可以把对象按照计划改变分类(standard -&amp;gt; newrline -&amp;gt; coldline -&amp;gt; artchive)
        &lt;ul&gt;
          &lt;li&gt;和设置多个条件组合&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;可以设置多久后删掉
        &lt;ul&gt;
          &lt;li&gt;要写一个 JSON 格式的 lifecycle management rule (配置多久删掉什么object) , 并用 gsutil 命令 把他 push 到bucket 中生效&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Bucket lock
    &lt;ul&gt;
      &lt;li&gt;如果企业对数据的合规性有要求, 可以通过 lock 来锁定设置的规则.&lt;/li&gt;
      &lt;li&gt;data retention policy 被锁定, 确保数据可以保留我们希望的时间, 规则不会被删除. 保存时间不但能被缩短, 但可以延长.&lt;/li&gt;
      &lt;li&gt;retention policy 负责数据保留多久, retention lock 负责在保留期间内数据不会被改动(包括删除).&lt;/li&gt;
      &lt;li&gt;lifecycle policy 是多久可以把一个 object 挪到另一个 bucket level 或删掉. 只有过了 retention policy 的约定时间的 object 才会被 lifecycle policy 删除.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Encryption 加密
    &lt;ul&gt;
      &lt;li&gt;默认用 server-side 加密
        &lt;ul&gt;
          &lt;li&gt;server side 加密分为
            &lt;ul&gt;
              &lt;li&gt;Google-managed
                &lt;ul&gt;
                  &lt;li&gt;默认的, 不需要配置, google 创建key, 管理 key, 对对象进行加密&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;Customer-managed
                &lt;ul&gt;
                  &lt;li&gt;google 创建key, Cloud KMS 管理key, 客户通过key 对数据进行加密解密&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;Customer-supplied
                &lt;ul&gt;
                  &lt;li&gt;客户自己的key, 在服务端对数据进行加密解密&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;client side encryption
            &lt;ul&gt;
              &lt;li&gt;客户在上传前就完成了数据加密, 客户收到收据后自己解密, 和google 一点关系没有.&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;对象的 metadata
    &lt;ul&gt;
      &lt;li&gt;每个对象存储好后都会有 metadata&lt;/li&gt;
      &lt;li&gt;是 key pair 数据&lt;/li&gt;
      &lt;li&gt;metadata 分为
        &lt;ul&gt;
          &lt;li&gt;Fixed-key metadata
            &lt;ul&gt;
              &lt;li&gt;key 固定的, 不能改, 但value 可以随便改&lt;/li&gt;
              &lt;li&gt;比如: Cache-Control, Content-Disposition, Content-Type&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Custom metadata
            &lt;ul&gt;
              &lt;li&gt;key 和 value 都是自己创建的, 随便定义随便增删改&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Non-editable metadata
            &lt;ul&gt;
              &lt;li&gt;google 预定义好的 metadata, 只能看, 不能删改&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;数据迁移
    &lt;ul&gt;
      &lt;li&gt;如果想把数据迁移到 object storage, 有几种方法
        &lt;ul&gt;
          &lt;li&gt;gsuitl or API or console
            &lt;ul&gt;
              &lt;li&gt;适用于一次性的, 数据量较少(小于 1T )的迁移&lt;/li&gt;
              &lt;li&gt;适用于从 on premise 到 object storage 的迁移, 或 bucket 之间的迁移&lt;/li&gt;
              &lt;li&gt;成本低&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Storage Transfer Service
            &lt;ul&gt;
              &lt;li&gt;使用与大规模数据迁移 (1-20T)&lt;/li&gt;
              &lt;li&gt;是适用于从  on premise, aws, azure, google cloud迁移到 object storage&lt;/li&gt;
              &lt;li&gt;可提供可重复的增量迁移.&lt;/li&gt;
              &lt;li&gt;有容错机制, 从哪里失败了, 还可以继续.&lt;/li&gt;
              &lt;li&gt;稳定&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Transfer Appliance
            &lt;ul&gt;
              &lt;li&gt;相当于 AWS 的 snow 系列硬件&lt;/li&gt;
              &lt;li&gt;适合 20T 以上的迁移, 适合带宽低, 时间久的场景&lt;/li&gt;
              &lt;li&gt;先预定硬件, 到货了把数据拷贝到硬件上, 然后寄回给google. google 工程师帮你把数据拷贝到 bucket 中&lt;/li&gt;
              &lt;li&gt;快, 量大&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;gsutil 命令行&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;gsutil mb gs://BKT_NAME &lt;span class=&quot;c&quot;&gt;# (Create Cloud Storage bucket)&lt;/span&gt;
gsutil ls -a gs://BKT_NAME &lt;span class=&quot;c&quot;&gt;#  (List current and non-current object versions) &lt;/span&gt;
gsutil cp gs://SRC_BKT/SRC_OBJ gs://DESTN_BKT/NAME_COPY &lt;span class=&quot;c&quot;&gt;# (Copy objects) # -o &apos;GSUtil:encryption_key=ENCRYPTION_KEY&apos; - Encrypt Object gsutil mv (Rename/Move objects)&lt;/span&gt;
gsutil mv gs://BKT_NAME/OLD_OBJ_NAME gs://BKT_NAME/NEW_OBJ_NAME
gsutil mv gs://OLD_BUCKET_NAME/OLD_OBJECT_NAME gs://NEW_BKT_NAME/NEW_OBJ_NAME
gsutil rewrite -s STORAGE_CLASS gs://BKT_NAME/OBJ_PATH &lt;span class=&quot;c&quot;&gt;# (Ex: Change Storage Class for objects) # gsutil cp : Upload and Download Objects&lt;/span&gt;
gsutil cp LOCAL_LOCATION gs://DESTINATION_BKT_NAME/ &lt;span class=&quot;c&quot;&gt;# (Upload)&lt;/span&gt;
gsutil cp gs://BKT_NAME/OBJ_PATH LOCAL_LOCATION &lt;span class=&quot;c&quot;&gt;# (Download)&lt;/span&gt;

gsutil versioning &lt;span class=&quot;nb&quot;&gt;set &lt;/span&gt;on/off gs://BKT_NAME &lt;span class=&quot;c&quot;&gt;# (Enable/Disable Versioning)&lt;/span&gt;
gsutil uniformbucketlevelaccess &lt;span class=&quot;nb&quot;&gt;set &lt;/span&gt;on/off gs://BKT_NAME
gsutil acl ch &lt;span class=&quot;c&quot;&gt;# (Set Access Permissions for Specific Objects)&lt;/span&gt;
gsutil acl ch -u AllUsers:R gs://BKT_NAME/OBJ_PATH &lt;span class=&quot;c&quot;&gt;# (Make specific object public)&lt;/span&gt;
gsutil acl ch -u john.doe@example.com:WRITE gs://BKT_NAME/OBJ_PATH &lt;span class=&quot;c&quot;&gt;# Permissions - READ (R), WRITE (W), OWNER (O) # Scope - User, allAuthenticatedUsers, allUsers(-u), Group (-g), Project (-p) etc&lt;/span&gt;
gsutil acl &lt;span class=&quot;nb&quot;&gt;set &lt;/span&gt;JSON_FILE gs://BKT_NAME
gsutil iam ch MBR_TYPE:MBR_NAME:IAM_ROLE gs://BKT_NAME &lt;span class=&quot;c&quot;&gt;# (Setup IAM role)&lt;/span&gt;
gsutil iam ch user:me@myemail.com:objectCreator gs://BKT_NAME
gsutil iam ch allUsers:objectViewer gs://BKT_NAME &lt;span class=&quot;c&quot;&gt;# (make the entire bucket readable)&lt;/span&gt;
gsutil signurl -d 10m YOUR_KEY gs://BUCKET_NAME/OBJECT_PATH &lt;span class=&quot;c&quot;&gt;# (Signed URL for temporary access)&lt;/span&gt;

&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
  &lt;li&gt;额外的几个命令
    &lt;ol&gt;
      &lt;li&gt;通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gsutil -m&lt;/code&gt;命令 拷贝文件  (-m 是多线程上传)&lt;/li&gt;
      &lt;li&gt;通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gsutil hash -c FILENAME&lt;/code&gt; 来计算所有 on-premise 文件的 CRC32C 的 哈希值&lt;/li&gt;
      &lt;li&gt;通过 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gsutil ls -L gs://[YOUR_BUCKET_NAME]&lt;/code&gt; 来获取所有上传到 backet 中的文件的 哈希值&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;最佳实践
    &lt;ul&gt;
      &lt;li&gt;数据存到离用户近的region&lt;/li&gt;
      &lt;li&gt;数据读取率不要变化太快, 要逐步提升读写量&lt;/li&gt;
      &lt;li&gt;遇到报错, 逐渐放缓读取频率&lt;/li&gt;
      &lt;li&gt;bucket 和 object 名字不要用敏感信息, 不要用序数, 不要用时间戳
        &lt;ul&gt;
          &lt;li&gt;具有顺序名称的对象是连续存储的，因此它们可能会访问同一后端服务器。发生这种情况时，吞吐量会受到限制。&lt;/li&gt;
          &lt;li&gt;可以用哈希值,&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Cloud Storage FUSE 可以让bucket 像目录一样在linux 系统中被管理&lt;/li&gt;
      &lt;li&gt;尽量合并和压缩小文件成为大文件, 可以节省网络带宽, 节省bucket 的存储空间.&lt;/li&gt;
      &lt;li&gt;如果是用命令上传文件, 可以用 -m 多线程上传, 加快速度.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;场景
    &lt;ul&gt;
      &lt;li&gt;数据 30 天后就不会被访问了, 但要保存 4 年满足合规.
        &lt;ul&gt;
          &lt;li&gt;方案: 用standard -&amp;gt; archive -&amp;gt; 4 年后删掉&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;需要把 2T 数据从 AWS 转到 google cloud
        &lt;ul&gt;
          &lt;li&gt;方案: Cloud Storage Tansfer Service&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;客户需要管理他们的 Key
        &lt;ul&gt;
          &lt;li&gt;方案: Customer-managed key&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;由于合规原因, 对象创建后两年内不能修改
        &lt;ul&gt;
          &lt;li&gt;方案: 配置 并 lock retention policy&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Signed URL
    &lt;ul&gt;
      &lt;li&gt;看 &lt;strong&gt;IAM, Service Account (服务账号), ACL&lt;/strong&gt;  这章&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;静态网站
    &lt;ul&gt;
      &lt;li&gt;看 &lt;strong&gt;IAM, Service Account (服务账号), ACL&lt;/strong&gt;  这章&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;database&quot;&gt;Database&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;数据库的决策树
    &lt;ul&gt;
      &lt;li&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-02-13-085842.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;场景:
    &lt;ul&gt;
      &lt;li&gt;初创公司, schema 不确定,还在进化中
        &lt;ul&gt;
          &lt;li&gt;FireStore&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;No SQL 数据库, 存储量不大
        &lt;ul&gt;
          &lt;li&gt;FireStore&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Transctional Global Database, 确定的schema, 需要处理大量数据
        &lt;ul&gt;
          &lt;li&gt;Spanner&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Cache Data for web app
        &lt;ul&gt;
          &lt;li&gt;MemoryStore&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Huge data from IOT
        &lt;ul&gt;
          &lt;li&gt;BigTable&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Huge data with time series
        &lt;ul&gt;
          &lt;li&gt;BugTable&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;几个概念
    &lt;ul&gt;
      &lt;li&gt;Availability - 就是多少个 9
        &lt;ul&gt;
          &lt;li&gt;99.99% 是一个月 4 分半宕机, 99.999% 是有 26 秒宕机&lt;/li&gt;
          &lt;li&gt;增加 standby 数据库, multi-zones, multi-regions&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Durability - 持久性, 就是保证多久不丢数据文件
        &lt;ul&gt;
          &lt;li&gt;99.999999999% 表示 1000 万年保存 100万个文件, 丢了一个文件.&lt;/li&gt;
          &lt;li&gt;增加 standby, snapshots, transaction logs, replicas, multi-zones, multi-regions&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;RTO - 最快宕机回复时间 (最大可接受的宕机时间)&lt;/li&gt;
      &lt;li&gt;RPO - 回复后, 恢复到事故前的几个小时 (最大可接受的丢失数据时长)&lt;/li&gt;
      &lt;li&gt;几种数据库恢复机制和 RTO, RPO 关系
        &lt;ul&gt;
          &lt;li&gt;Hot Standby
            &lt;ul&gt;
              &lt;li&gt;一个数据库挂了, 另一个可以马上自动切换过来&lt;/li&gt;
              &lt;li&gt;RPO 1m, RTO 5m&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Warm Standby
            &lt;ul&gt;
              &lt;li&gt;一个数据库挂了, 另一个需要有最minimum 的infra, 可以快速补充上来&lt;/li&gt;
              &lt;li&gt;RPO 1m, RTO 15m&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Snapshot and transaction logs
            &lt;ul&gt;
              &lt;li&gt;一个数据库挂了, 要用 snapshot 和 log 恢复&lt;/li&gt;
              &lt;li&gt;RPO 1m, RTO few hours&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Consistency - 保持一致性, 一般说的是master 和 replica 之间数据同步的实时性
        &lt;ul&gt;
          &lt;li&gt;分为几种
            &lt;ul&gt;
              &lt;li&gt;Strong Consistency
                &lt;ul&gt;
                  &lt;li&gt;实时将数据同步到所有的 replica&lt;/li&gt;
                  &lt;li&gt;如果 replica 太多, 同步的速度会降低&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;Eventual consistency
                &lt;ul&gt;
                  &lt;li&gt;异步将数据传递给 replica&lt;/li&gt;
                  &lt;li&gt;所有replica 都完成同步可能要花好几秒钟, 而且有可能从每个replica 获取的结果不太一样&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;Read-after-Write consistency
                &lt;ul&gt;
                  &lt;li&gt;写入后马上就可以读到写入的数据,&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;数据库类型
    &lt;ul&gt;
      &lt;li&gt;RDB
        &lt;ul&gt;
          &lt;li&gt;提前定义了 Schema&lt;/li&gt;
          &lt;li&gt;OLTP 和 OLAP 使用关系型数据库
            &lt;ul&gt;
              &lt;li&gt;OLTP DB
                &lt;ul&gt;
                  &lt;li&gt;Online Transaction Processing&lt;/li&gt;
                  &lt;li&gt;use row storage&lt;/li&gt;
                  &lt;li&gt;适合 很多用户运行 small transactions&lt;/li&gt;
                  &lt;li&gt;场景: ERP, CRM, E-Commerce, Banking app&lt;/li&gt;
                  &lt;li&gt;Google 提供的无服务OLTP RDB 数据库&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;几种数据存储的比较
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-02-08-023618.jpg&quot; alt=&quot;&quot; /&gt;
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-02-10-093009.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;h4 id=&quot;cloud-sql&quot;&gt;Cloud SQL&lt;/h4&gt;
  &lt;/li&gt;
  &lt;li&gt;支持 Mysql, PostgreSQL, SQL Server&lt;/li&gt;
  &lt;li&gt;如果上限不超过64 processor core, 30个 TB存储, 400G Ram 可以考虑&lt;/li&gt;
  &lt;li&gt;Replica 可以跨Region&lt;/li&gt;
  &lt;li&gt;99.95% 的 HA 保障&lt;/li&gt;
  &lt;li&gt;带一个 network firewall&lt;/li&gt;
  &lt;li&gt;功能
    &lt;ul&gt;
      &lt;li&gt;自动加密
        &lt;ul&gt;
          &lt;li&gt;存在数据库中的数据被自动加密&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;HA
        &lt;ul&gt;
          &lt;li&gt;通过创建 HA Configuration&lt;/li&gt;
          &lt;li&gt;有 primary 和 Secondary(standby) 两个实例, 部署在两个不同的zone
            &lt;ul&gt;
              &lt;li&gt;primary 的变化会同步到 secondary&lt;/li&gt;
              &lt;li&gt;primary 挂了, 流量会auto failover 到 secondaryt instance
                &lt;ul&gt;
                  &lt;li&gt;就算primary 恢复了, failover 不会自动切换回 primary&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;最好用 Cloud SQL Proxy 接收来自app 的请求&lt;/li&gt;
          &lt;li&gt;Cloud SQL 只能横向扩展读, 不能横向扩展写
            &lt;ul&gt;
              &lt;li&gt;最好把写的内容分成不同的小 Cloud SQL instance, 单独部署&lt;/li&gt;
              &lt;li&gt;不能有两个 Master 一起写&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Read replica
        &lt;ul&gt;
          &lt;li&gt;支持自动 replica&lt;/li&gt;
          &lt;li&gt;解决read workload&lt;/li&gt;
          &lt;li&gt;不解决 HA 的问题&lt;/li&gt;
          &lt;li&gt;创建 Read Replica 的前置条件
            &lt;ul&gt;
              &lt;li&gt;开启 automatic backup
                &lt;ul&gt;
                  &lt;li&gt;启动了 auto backup 会自动开启 Binary Logging&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;至少有一个 backup 已经完成&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;如果replica 有 延迟 (lag), 可以对数据库进行 sharding (分成小块, 横向扩展)
            &lt;ul&gt;
              &lt;li&gt;Sharding. Sharding makes horizontal scaling possible by partitioning the database into smaller, more manageable parts (shards), then deploying the parts across a cluster of machines.&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;自动增加容量 (automatic storage increase feature)&lt;/li&gt;
      &lt;li&gt;支持 DMS 数据库迁移&lt;/li&gt;
      &lt;li&gt;导入和导出
        &lt;ul&gt;
          &lt;li&gt;可以导出单个数据库或者表&lt;/li&gt;
          &lt;li&gt;导出会比较耗时, 导出太大的数据库会影响数据库性能
            &lt;ul&gt;
              &lt;li&gt;可以用 Serverless export 工具导出, 效果会好一点&lt;/li&gt;
              &lt;li&gt;把导入导出的内容分成小块来批处理, 效果会好很多&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;自动备份
        &lt;ul&gt;
          &lt;li&gt;实例被删了, 备份也会被删掉&lt;/li&gt;
          &lt;li&gt;备份只能把实例整体进行备份, 不能只备份某个数据库或者表&lt;/li&gt;
          &lt;li&gt;实例成本包含了 7 个 backup&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;最佳实践&lt;/li&gt;
  &lt;li&gt;Cloud SQL 的 灾难恢复 Dister Recovery 方案
    &lt;ol&gt;
      &lt;li&gt;运行 Cloud SQL 的 HA Mode (一个 Primary instance, 一个 standby instance, 前面一个 对外的 IP)&lt;/li&gt;
      &lt;li&gt;定期bakup 数据, 可以在发生灾难之后, 快速创建一个新的数据库实例&lt;/li&gt;
      &lt;li&gt;创建 cross region read replica. 在发生地区灾难之后, 从另一个地区快速恢复. 
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-02-12-032729.jpg&quot; alt=&quot;&quot; /&gt;
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-02-12-032749.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;使用场景
    &lt;ul&gt;
      &lt;li&gt;迁移本地的mysql, postgresql, sql server 上云&lt;/li&gt;
      &lt;li&gt;为简单关系数据库降低运维成本&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;cloud-spanner&quot;&gt;Cloud Spanner&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;可无限 scale
    &lt;ul&gt;
      &lt;li&gt;要开启 autoscalling&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;上限 几个 PB&lt;/li&gt;
  &lt;li&gt;99.999% 的 HA 保证 (5 个 9)&lt;/li&gt;
  &lt;li&gt;multi-regional 支持更好
    &lt;ul&gt;
      &lt;li&gt;可以有多个master&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;很贵&lt;/li&gt;
  &lt;li&gt;Google Cloud Spanner 的底层是一种分布式的关系型数据库引擎，它是基于 Google 自己的设计和开发的。&lt;/li&gt;
  &lt;li&gt;选择 Cloud Spanner 的理由
    &lt;ul&gt;
      &lt;li&gt;需要global scale&lt;/li&gt;
      &lt;li&gt;需要 5 个 9 的HA&lt;/li&gt;
      &lt;li&gt;需要无限扩展的容量&lt;/li&gt;
      &lt;li&gt;可横向扩展写&lt;/li&gt;
      &lt;li&gt;任务急, 不差钱&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;场景
    &lt;ul&gt;
      &lt;li&gt;内置高可用&lt;/li&gt;
      &lt;li&gt;关系性数据库, 需要第二个 index&lt;/li&gt;
      &lt;li&gt;强大的 global consistency&lt;/li&gt;
      &lt;li&gt;每秒大量的 Input/output&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;cloud-firestore&quot;&gt;Cloud FireStore&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;NO-Sql DB (Document DB)&lt;/li&gt;
  &lt;li&gt;Flexible schema, 每个表是一个collection, 每条数据是一个document, 每个document 可能有不同的字段
    &lt;ul&gt;
      &lt;li&gt;Collection 和 Document 可以互相嵌套 (Document 里面可以有 collection, collection 中可以再有 document)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;适合小公司刚启动业务, 有些schema 不清楚的场景&lt;/li&gt;
  &lt;li&gt;比 RDB 来说, 更加scalability 和 high-performance&lt;/li&gt;
  &lt;li&gt;自动的 multi-region data replication&lt;/li&gt;
  &lt;li&gt;付费
    &lt;ul&gt;
      &lt;li&gt;每个月 1G 的免费额度&lt;/li&gt;
      &lt;li&gt;read, write, delete 都要付费&lt;/li&gt;
      &lt;li&gt;存的数据的大小&lt;/li&gt;
      &lt;li&gt;带宽使用的大小&lt;/li&gt;
      &lt;li&gt;每天的免费用量是
        &lt;ul&gt;
          &lt;li&gt;5 万个document read&lt;/li&gt;
          &lt;li&gt;2万个 document write&lt;/li&gt;
          &lt;li&gt;2万个 delete&lt;/li&gt;
          &lt;li&gt;1G 存&lt;/li&gt;
          &lt;li&gt;超过这些用量才会收费&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Google 提供的  No-SQL DB
    &lt;ul&gt;
      &lt;li&gt;老版本叫做 DataStore&lt;/li&gt;
      &lt;li&gt;适合 0-few TB&lt;/li&gt;
      &lt;li&gt;无服务&lt;/li&gt;
      &lt;li&gt;支持离线模式&lt;/li&gt;
      &lt;li&gt;支持一个表中有多个 index
        &lt;ul&gt;
          &lt;li&gt;创建 key 的时候不要用序数, 或者时间戳, 可以用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;allocateIds()&lt;/code&gt; 这个函数创建 ID 作为 Key&lt;/li&gt;
          &lt;li&gt;只用经常用到的query 中需要查询的字段才用来创建index&lt;/li&gt;
          &lt;li&gt;如果经常有一些 ad hoc 的请求, 建议使用 Bigtable&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;不支持 join or agreegate (sum or count) 操作&lt;/li&gt;
      &lt;li&gt;提供客户端的类库
        &lt;ul&gt;
          &lt;li&gt;web, ios, android and etc.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;两种模式
        &lt;ul&gt;
          &lt;li&gt;DataStore mode
            &lt;ul&gt;
              &lt;li&gt;在 Datastore 模式 中的数据对象称为实体(entities)&lt;/li&gt;
              &lt;li&gt;Each entity in a Datastore mode database has a key&lt;/li&gt;
              &lt;li&gt;key 和 identifier 关联, identifier 可以是 key 的名字或者一个数字&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Native mode&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;导出
        &lt;ul&gt;
          &lt;li&gt;通过 gcloud 命令&lt;/li&gt;
          &lt;li&gt;不能通过console 导出&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;适用例子:
        &lt;ul&gt;
          &lt;li&gt;User profile&lt;/li&gt;
          &lt;li&gt;让用户将自己的照片存到 Cloud Storage, 然后将照片的meta data 放到 Firestore 中&lt;/li&gt;
          &lt;li&gt;product catalogs&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h4 id=&quot;cloud-bigtable&quot;&gt;Cloud BigTable&lt;/h4&gt;
  &lt;/li&gt;
  &lt;li&gt;不是无服务, 需要自己创建 instance&lt;/li&gt;
  &lt;li&gt;Bigtable 的底层数据库引擎是 Google 自行开发的分布式存储系统，名为 Colossus。&lt;/li&gt;
  &lt;li&gt;适合大于 10 TB 的情景 , PB 级别支持没问题&lt;/li&gt;
  &lt;li&gt;很多 Google 核心应用都是用 BigTable
    &lt;ul&gt;
      &lt;li&gt;Google搜索&lt;/li&gt;
      &lt;li&gt;Analytics（分析）&lt;/li&gt;
      &lt;li&gt;Google 地图&lt;/li&gt;
      &lt;li&gt;Gmail&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;可以和其他 GCP/开源大数据 的 batch/stream 服务集成,  包括
    &lt;ul&gt;
      &lt;li&gt;Dataflow&lt;/li&gt;
      &lt;li&gt;Spark streaming&lt;/li&gt;
      &lt;li&gt;Stom&lt;/li&gt;
      &lt;li&gt;Hadoop Map/Reduce&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;通过 多个cluster 和 nodes 来提供 HA 和 横向扩展
    &lt;ul&gt;
      &lt;li&gt;cluster 可以 跨 region 和 zone&lt;/li&gt;
      &lt;li&gt;自动的 sharding data 到多个cluster 的 nodes 中的多个表中&lt;/li&gt;
      &lt;li&gt;创建两个 cluster 可以实现replication
        &lt;ul&gt;
          &lt;li&gt;可以提高 HA,  durability, 自动 failover, 把数据放到离客户更近的地方&lt;/li&gt;
          &lt;li&gt;要配置一个 application profile 来设置replication&lt;/li&gt;
          &lt;li&gt;每个 change 都会自动的被 replica 到不同的 cluster 的nodes 中&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;支持 SSD 和 HDD
    &lt;ul&gt;
      &lt;li&gt;一般用 SSD 比较好&lt;/li&gt;
      &lt;li&gt;不怕延迟的数据, 对读的速度不敏感的场景, 可以用 HDD&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;适配 HBase API
    &lt;ul&gt;
      &lt;li&gt;和 HBase 用同样的 API&lt;/li&gt;
      &lt;li&gt;允许 on-premise HBase 和 BigTable 整合&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;通过 HBase 命令, 或者 java 命令来导出数据
    &lt;ul&gt;
      &lt;li&gt;gcloud 和 console 都不能导出数据&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;一个表只能有一个 index
    &lt;ul&gt;
      &lt;li&gt;每行(row)数据通过一个 row key 进行index&lt;/li&gt;
      &lt;li&gt;创建 row key 的时候不要用序数, 或者时间戳,&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;不支持多行的 transactions , 只支持单行&lt;/li&gt;
  &lt;li&gt;使用前
    &lt;ul&gt;
      &lt;li&gt;要做压力测试&lt;/li&gt;
      &lt;li&gt;用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Key Visualizer tool&lt;/code&gt; 分析数据库使用情况&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;适用例子:
    &lt;ul&gt;
      &lt;li&gt;IOT Stream 数据&lt;/li&gt;
      &lt;li&gt;Time Series 数据&lt;/li&gt;
      &lt;li&gt;Graph Data (图形数据)&lt;/li&gt;
      &lt;li&gt;real time 分析数据&lt;/li&gt;
      &lt;li&gt;股票数据/财务数据&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;memorystore&quot;&gt;MemoryStore&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;In Memory DB&lt;/li&gt;
  &lt;li&gt;内存数据库, 更快的读取速度&lt;/li&gt;
  &lt;li&gt;减少读取关系数据库或者后端服务的实践&lt;/li&gt;
  &lt;li&gt;适合更新不频繁的数据, 用户可以接受数据并不是实时更新的&lt;/li&gt;
  &lt;li&gt;最大 300G&lt;/li&gt;
  &lt;li&gt;HA, failover, patching and monitoring&lt;/li&gt;
  &lt;li&gt;Google 提供的 in memory DB&lt;/li&gt;
  &lt;li&gt;无服务&lt;/li&gt;
  &lt;li&gt;底层是 Redis 和 MemCache
    &lt;h5 id=&quot;memcached&quot;&gt;Memcached&lt;/h5&gt;
  &lt;/li&gt;
  &lt;li&gt;场景: 数据库读数据后被缓存, 用户登录session, web应用的静态配置 比较合适
    &lt;ul&gt;
      &lt;li&gt;Cache 在 web 和 DB 之间&lt;/li&gt;
      &lt;li&gt;减少数据库压力&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;一旦缓存数据丢失, 如果有访问, 就会从后端重新重新读取后再缓存&lt;/li&gt;
  &lt;li&gt;两种服务级别
    &lt;ul&gt;
      &lt;li&gt;Shared Memcached (免费)&lt;/li&gt;
      &lt;li&gt;Dedicated memcache (\(\))
        &lt;ul&gt;
          &lt;li&gt;为应用提供固定的cache 缓存空间大小&lt;/li&gt;
          &lt;li&gt;每 G 每小时 $0.06
            &lt;h5 id=&quot;redis&quot;&gt;Redis&lt;/h5&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;场景: 游戏排名等&lt;/li&gt;
  &lt;li&gt;支持数据持久化(persistence)和高可用(HA)&lt;/li&gt;
  &lt;li&gt;可以被以下服务读取缓存
    &lt;ul&gt;
      &lt;li&gt;Compute Engine&lt;/li&gt;
      &lt;li&gt;App Engine&lt;/li&gt;
      &lt;li&gt;GKE&lt;/li&gt;
      &lt;li&gt;Cloud Function&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;创建并连接 Cloud SQL (mysql)
    &lt;ul&gt;
      &lt;li&gt;要先启动 Cloud SQL Admin API
```bash&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;gcloud config set project my-nlp-project-68654
gcloud sql connect dalong-cloud-sql-mysql-db –user=root –quiet # 下面是连接上了mysql 的命令, todos 是在console 中创建的一个 databse
use todos
create table user (id integer, username varchar(30) );
describe user;
insert into user values (1, ‘Ranga’);
select * from user;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;
### Data Analytics

#### BigQuery
- 可以保存数据, PB 的 scale 能力的分布式数据仓库
- 可以处理 near real time 数据的分析, 内嵌 ML 功能
- OLAP 关系型DB
  - 可以用 SQL 查询
- Online Analytics Processing
- use columnar storage
- 适合 对大数据(PB 级)进行分析
- 场景: 数据仓库, BI, 分析报告应用, 分析几年之前的数据 
- Google 提供的无服务 OLAP RDB 数据库
- dataset
  - Bigquery 中的 dataset 是用来存储表和视图的容器，它们主要用于组织和管理大量的表和视图
- 数据安全
  - BigQuery 默认会加密数据 at rest. 但如果客户需要自己加密数据, 也可以用customer-managed encryption keys(CMEK), key 保存在 KMS 中
- role 
  - BigQuery jobUser/user role on billing project (job User role 是用来在 BigQuery 中执行 query 的)
  - BigQuery dataViewer role on projects that contain the data (dataView role 是用来查看(不能update) 底层数据的 )

#### BigQuery 
- PB 的 scale 能力的分布式数据仓库
- 是 OLAP
- BigQuery 的层级 Data Set &amp;gt; Table &amp;gt; Partitions
- 适合复杂的 Query 数据查询.
  - 如果是简单的数据查询 (查两个字段这种), 建议用 BigTable (NoSql)
- BigQuery 的存储有两种
  - 标准
  - Long-term storage
    - 相当于 Cloud Storage 的 Nearline, 就是访问量很少(90 天无人问津)
    - 成本低
- 是关系型数据库, 用 SQL 查询
  - 查询方式
    - Cloud Console
    - bq 命令行工具
    - BigQuery Rest API
    - HYBase API (基于 Java, .Net, Python)
- 费用
  - 两部分
    - BigQuery 根据 scan (扫描) 了多少数据来付费的, 可能会很贵
    - BigQuery 还通过存储在 BigQuery 上的数据量付费
  - 查前先算要花多少钱
    - 1. 先用 Console 或者 `bq --dry-run` 命令 查一下要查询的数据的数据量
    - 2. 用 Pricing Calculatyor 来算一下这些数据量要花多少钱
  - 省钱的方法
    - Partitioning 分割
      - 把一个表分成几个表 (比如按日期/时间戳分割)
      - 每个partition的 schema 不变
      - partition 可以设置过期(删除)
      - 注意, 不要分的太小 (小于1G)
    - Clustering 分类(排序)
      - 把一些字段提前排好序, 就不用额外的 scan 所有的行了. 
    - 定期删除(过期)数据
      - 可以分别在 Data Set , Table, Partitions 级别设置过期
        - Data Set 设置 default table expiration (default_table_expiration_days) 
        - Table 设置  expiration time (expiration_timestamp) , 比如 100 天过期
        - partitioned tables 设置 partition expiration (partition_expiration_days)  
- 上游 - 导入数据
  - 导入方式
    - Batch 批量导入 - 免费
      - 支持 Cloud Storage 和 本地文件
      - 可以用 BigQuery Transfer Service
      - 需要先用 Cloud Dataflow 和 Cloud Dataproc 处理数据
    - Streaming 实时流导入 - 贵
      - 支持 Cloud pub/sub, Streaming Insert
      - 需要先用 Cloud Dataflow 和 Cloud Dataproc 处理数据
      - 要去重(de-deulicate), 需要增加一个 `insertId` 到每一条stream insert中
      - Streaming 有 Quota (吞吐量)限制 insert 的数量
        - 每秒每 project 100M(带 insertId) - 每秒每project 1G(不带 insertId) 
        - 换算成每秒的insert 条数 (带 insertId) , 100k - 500k (欧洲地区) 条.
        - 如果要每秒上百万条的需求, 就别用BigQuery 了, 用 BigTalbe (NoSql DB)
    - Federation 直接用Query 读 GCP 其他服务的数据
      - 支持 CloudStorage, Cloud SQL, BigTable, Google Drive
    - DataTransferService 从第三方转换数据到 BigQuery
      - 支持 Google Ads, Cloud Storage, Amazon S3, Amazon RedShift
  - 支持的格式: CSV, JSON, Avro, Parquet, ORC, Datastore backup
- 下游 - 导出
  - 支持的格式: CSV, JSON (Gzip 压缩), Avro
- 自动的数据失效(过期)
- 实时读取外部数据
  - Cloud Storage, Cloud Sql , Bigtable, Google Drive
- BigQuery 最佳实践
  - 查之前先 评估 Query (评估数据量, 评估价格)
  - 尽量用 Partitioning 和 Clustering
  - 尽量避免 Streaming insert, 用批量导入代替
    - 如果使用, 尽量使用 insertId 来去重
  - 尽量设置 数据的过期时间, 没用的数据尽早删了
  - 适合复杂的 Query 数据查询.
    - 如果是简单的数据查询 (查两个字段这种), 建议用 BigTable (NoSql)
  - 可以通过 audit log 来优化 BigQuery 的查询
    - 把 audit log stream 到 BigQuery


- Partitioning and Clustering BigQuery Tables - 语法
```sql
CREATE TABLE `my_data_set.questions_partitioned_and_clustered`
...
...
PARTITIONED BY
    DATE(created_date)
    CLUSTER BY category
...
OPTIONS (
  expiration_timestamp=TIMESTAMP &quot;2025-01-01 00:00:00 UTC&quot;,
  partition_expiration_days=7
)

CREATE SCHEMA mydataset
OPTIONS(
  default_table_expiration_days=3.75
  )
ALTER TABLE mydataset.mytable
SET OPTIONS (
  expiration_timestamp=TIMESTAMP &quot;2025-01-01 00:00:00 UTC&quot;,
  partition_expiration_days=7
)
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h4 id=&quot;dataproc&quot;&gt;Dataproc&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;GCP 提供的 的 Spark 和 Hadoop, Flink, Presto 和 30+ 服务&lt;/li&gt;
  &lt;li&gt;是数据湖 Data Lake 的现代化方案,&lt;/li&gt;
  &lt;li&gt;当需要进行批量数据处理, 比如处理ML 和 AI 的数据.
    &lt;ul&gt;
      &lt;li&gt;支持复杂的批处理&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Cloud Dataproc 是个数据处理平台&lt;/li&gt;
  &lt;li&gt;只能导出配置, 不能导出数据&lt;/li&gt;
  &lt;li&gt;基于 standard VMs 或者 Preemptible(临时) VMs
    &lt;ul&gt;
      &lt;li&gt;standard worker instance 有点浪费了, preemptible 最省钱且完美适配 hadoop 迁移到 dataproc&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;支持 Spark, Pyspark, SparkR, Hive, SparkSQL, Pig, Hadoop&lt;/li&gt;
  &lt;li&gt;提供多个 Cluster 模式
    &lt;ul&gt;
      &lt;li&gt;Single Node&lt;/li&gt;
      &lt;li&gt;Standard&lt;/li&gt;
      &lt;li&gt;High Availability (3个 masters)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;场景
    &lt;ul&gt;
      &lt;li&gt;需要迁移hadoop 和 spark clusters 到云上&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;代替方案
    &lt;ul&gt;
      &lt;li&gt;BigQuery&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;pubsub-消息队列-异步数据通信&quot;&gt;Pub/Sub 消息队列 异步数据通信&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;Google 提供的异步数据通信服务是 Pub/Sub&lt;/li&gt;
  &lt;li&gt;pubsub 是无服务&lt;/li&gt;
  &lt;li&gt;Pub/Sub 包含了AWS SQS 和 SNS 两种服务的所有功能&lt;/li&gt;
  &lt;li&gt;publisher 和 subscriber 是 多对多关系&lt;/li&gt;
  &lt;li&gt;工作原理
    &lt;ul&gt;
      &lt;li&gt;Publisher
        &lt;ul&gt;
          &lt;li&gt;发送https 消息到 pubsub.googleapis.com 的 topic&lt;/li&gt;
          &lt;li&gt;每个消息会到每个 subscription 那里&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Subscriber
        &lt;ul&gt;
          &lt;li&gt;提供两种订阅方式
            &lt;ul&gt;
              &lt;li&gt;pull
                &lt;ul&gt;
                  &lt;li&gt;订阅者主动来取(pull)数据&lt;/li&gt;
                  &lt;li&gt;Subscriber makes HTTPS requests to pubsub.googleapis.com&lt;/li&gt;
                  &lt;li&gt;对应 AWS SNS&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;push
                &lt;ul&gt;
                  &lt;li&gt;订阅者提供一个web hook endpoint 地址, 消息到了pub/sub之后, 会把数据推到web hook endpoint&lt;/li&gt;
                  &lt;li&gt;对应 AWS SQS&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Subscriber 发送 acknowledgement 给 pub/sub
            &lt;ul&gt;
              &lt;li&gt;message(s) 从 subscriptions 的 message queue 中被删掉&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;创建过程
    &lt;ul&gt;
      &lt;li&gt;
        &lt;ol&gt;
          &lt;li&gt;创建Topic&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;ol&gt;
          &lt;li&gt;创建subscription(s)
            &lt;ul&gt;
              &lt;li&gt;每个订阅默认都能从publisher 哪里收到所有的, 同样的信息&lt;/li&gt;
              &lt;li&gt;订阅者可以通过filter 接收自己感兴趣的消息, 其他消息被过滤掉&lt;/li&gt;
              &lt;li&gt;发布者和订阅者可以设置按照 order 进行发送和接收信息&lt;/li&gt;
              &lt;li&gt;订阅者可以设置每个消息只接受一次 (去重)&lt;/li&gt;
              &lt;li&gt;订阅者可以发送 acknowledge 给 pub/sub , 告诉它自己已经收到了消息, 可以在 message queue 中 把这个消息删掉了
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-01-15-052236.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;pub/sub 的publis batching 批处理选项
    &lt;ol&gt;
      &lt;li&gt;pub/sub 默认是开启 message batching 功能的, subscriber 会一次性接收所有的未读数据.&lt;/li&gt;
      &lt;li&gt;应用一次读取过多的数据, 花费大量时间处理, 可能就会没时间处理下一批数据, 产生timeout.&lt;/li&gt;
      &lt;li&gt;最佳实践是关闭 message batching 功能, 然后通过 autoscaling 增加 subscriber 的数量来并行处理消息&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;pub/sub 与 autoscaling
    &lt;ul&gt;
      &lt;li&gt;用 pub/sub的 subscription/num_undelivered_messages 这个 metric 来作为 autoscaling 的伸缩条件, 如果超过一定的数量, 就可以增加处理消息的 VM 或者  GKE cluster 的 pode 数量
        &lt;ul&gt;
          &lt;li&gt;不能用  subscription/push_request_latencies 这个 metric, 因为这个只是来定义多久pub/sub发一个message 到 distination, 不能用来作为 autoscaling 的依据.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;pub/sub FIFO
    &lt;ul&gt;
      &lt;li&gt;先进先出&lt;/li&gt;
      &lt;li&gt;进入到 pub/sub 的数据是按顺序进来的, 出去也是按顺序出去的&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;去重 Deduplication / exactly-once
    &lt;ul&gt;
      &lt;li&gt;pub/sub 是会 delivery message 最少一次的, 所以无法避免 duplicate&lt;/li&gt;
      &lt;li&gt;Dataflow 可以提供去重功能 - Dataflow exactly-once processing&lt;/li&gt;
      &lt;li&gt;或者通过定制开发应用去重&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;pub/sub 的好处
    &lt;ul&gt;
      &lt;li&gt;解耦 Decoupling
        &lt;ul&gt;
          &lt;li&gt;一个大应用做成多个小应用, 应用之间用pub/sub 通信&lt;/li&gt;
          &lt;li&gt;publisher 不需要知道谁是订阅者&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;高可用 Availability
        &lt;ul&gt;
          &lt;li&gt;订阅者挂了, publisher 也不用担心, 可以继续发信息&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;可伸缩 Scalability
        &lt;ul&gt;
          &lt;li&gt;订阅者可以快速扩展以消费大量的消息&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;持久性 Durability
        &lt;ul&gt;
          &lt;li&gt;信息会存在 pubsub 中, 就算订阅者挂了也没关系&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;适合场景
    &lt;ul&gt;
      &lt;li&gt;事件型应用
        &lt;ul&gt;
          &lt;li&gt;比如有文件上传到了 bucket, 就发送信息到pubsub, 再转到 Bigquery 进行分析&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;streaming 流分析类型
        &lt;ul&gt;
          &lt;li&gt;比如 IOT 的sensor 数据一直发送到pubsub, 再转到 Bigquery 进行分析&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;将应用从 synchronous 改成 asynchronous workflow
        &lt;ul&gt;
          &lt;li&gt;代替方案
            &lt;ul&gt;
              &lt;li&gt;RabitMQ, Apache Kafka&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;创建 pubsub 的命令&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;gcloud config &lt;span class=&quot;nb&quot;&gt;set &lt;/span&gt;project glowing-furnace-304608   &lt;span class=&quot;c&quot;&gt;# 转到项目&lt;/span&gt;
gcloud pubsub topics create topic-from-gcloud      &lt;span class=&quot;c&quot;&gt;# 创建 Topic&lt;/span&gt;
gcloud pubsub subscriptions create subscription-gcloud-1 --topic&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;topic-from-gcloud  &lt;span class=&quot;c&quot;&gt;# 创建订阅1&lt;/span&gt;
gcloud pubsub subscriptions create subscription-gcloud-2 --topic&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;topic-from-gcloud  &lt;span class=&quot;c&quot;&gt;# 创建订阅2&lt;/span&gt;
gcloud pubsub subscriptions pull subscription-gcloud-2  &lt;span class=&quot;c&quot;&gt;# 从订阅 2 订阅消息(pull 方式)&lt;/span&gt;
gcloud pubsub subscriptions pull subscription-gcloud-1  &lt;span class=&quot;c&quot;&gt;# 从订阅 1 订阅消息(pull 方式)&lt;/span&gt;
gcloud pubsub topics publish topic-from-gcloud --message&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;My First Message&quot;&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# 向 topic 发布一个新的消息  &lt;/span&gt;
gcloud pubsub topics publish topic-from-gcloud --message&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;My Second Message&quot;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# 向 topic 发布一个新的消息  &lt;/span&gt;
gcloud pubsub topics publish topic-from-gcloud --message&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;My Third Message&quot;&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# 向 topic 发布一个新的消息  &lt;/span&gt;
gcloud pubsub subscriptions pull subscription-gcloud-1 --auto-ack  &lt;span class=&quot;c&quot;&gt;# 从订阅 1 订阅消息(pull 方式) , 获取消息后自动给 acknolodge 反馈&lt;/span&gt;
gcloud pubsub subscriptions pull subscription-gcloud-2 --auto-ack  &lt;span class=&quot;c&quot;&gt;# 从订阅 2 订阅消息(pull 方式) , 获取消息后自动给 acknolodge 反馈&lt;/span&gt;
gcloud pubsub topics list  &lt;span class=&quot;c&quot;&gt;# 查看 topic list&lt;/span&gt;
gcloud pubsub topics delete topic-from-gcloud  &lt;span class=&quot;c&quot;&gt;# 删除 topic&lt;/span&gt;
gcloud pubsub topics list-subscriptions my-first-topic  &lt;span class=&quot;c&quot;&gt;# &lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h4 id=&quot;dataflow&quot;&gt;Dataflow&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;是谷歌提供的 数据流服务&lt;/li&gt;
  &lt;li&gt;可以创建 batch/streaming 的 data pipeline (ETL - Extract Transfer and Load)
    &lt;ul&gt;
      &lt;li&gt;Batch: Cloud Storage -&amp;gt; Dataflow -&amp;gt; BigQuery&lt;/li&gt;
      &lt;li&gt;Streaming: Pub/sub -&amp;gt; Dataflow -&amp;gt; BigQuery&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;是无服务&lt;/li&gt;
  &lt;li&gt;基于 Apache Beam&lt;/li&gt;
  &lt;li&gt;使用了 pre-build 的模板&lt;/li&gt;
  &lt;li&gt;可能会用到 pub/sub&lt;/li&gt;
  &lt;li&gt;模板的几个例子
    &lt;ul&gt;
      &lt;li&gt;Pub/Sub &amp;gt; Dataflow &amp;gt; BigQuery (Streaming)&lt;/li&gt;
      &lt;li&gt;Pub/Sub &amp;gt; Dataflow &amp;gt; Cloud Storage (Streaming - files)&lt;/li&gt;
      &lt;li&gt;Cloud Storage &amp;gt; Dataflow &amp;gt; Bigtable/CloudSpanner/Datastore/BigQuery (Batch - Load data into databases)&lt;/li&gt;
      &lt;li&gt;Bulk compress files in Cloud Storage (Batch)&lt;/li&gt;
      &lt;li&gt;Convert file formats between Avro, Parquet &amp;amp; csv (Batch)&lt;/li&gt;
      &lt;li&gt;IOT Core -&amp;gt; Pub/Sub &amp;gt; Dataflow &amp;gt; BigQuery -&amp;gt; (Vertex AI, AutoML, BigQuery ML)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;场景
    &lt;ul&gt;
      &lt;li&gt;实时诈骗检测 (fraud detection)&lt;/li&gt;
      &lt;li&gt;sensor 数据处理&lt;/li&gt;
      &lt;li&gt;日志数据处理&lt;/li&gt;
      &lt;li&gt;批量数据处理 (数据读取, 数据格式转换)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;数据的生命周期&quot;&gt;数据的生命周期&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;数据生命周期分四个阶段
    &lt;ul&gt;
      &lt;li&gt;Ingest 注入&lt;/li&gt;
      &lt;li&gt;Store 存储&lt;/li&gt;
      &lt;li&gt;Process &amp;amp; Analysis 处理和分析&lt;/li&gt;
      &lt;li&gt;Explore &amp;amp; Visualize 发现和展现&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;每个阶段都会用到不同的服务&lt;/li&gt;
  &lt;li&gt;Ingest 注入
    &lt;ul&gt;
      &lt;li&gt;流
        &lt;ul&gt;
          &lt;li&gt;Pub/sub&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;批量
        &lt;ul&gt;
          &lt;li&gt;Storage Transfer Service&lt;/li&gt;
          &lt;li&gt;BigQuery Transfer Service&lt;/li&gt;
          &lt;li&gt;Transfer Appliance&lt;/li&gt;
          &lt;li&gt;gsutil&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;数据库迁移
        &lt;ul&gt;
          &lt;li&gt;Database Migration Service&lt;/li&gt;
          &lt;li&gt;Dataflow&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Store 存储
    &lt;ul&gt;
      &lt;li&gt;对象存储
        &lt;ul&gt;
          &lt;li&gt;Cloud Storage&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;关系数据库
        &lt;ul&gt;
          &lt;li&gt;Cloud SQL
            &lt;ul&gt;
              &lt;li&gt;mysql, postgresql, sql server&lt;/li&gt;
              &lt;li&gt;regional&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Cloud Spanner
            &lt;ul&gt;
              &lt;li&gt;HA&lt;/li&gt;
              &lt;li&gt;Global scale&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;No SQL
        &lt;ul&gt;
          &lt;li&gt;Firestore&lt;/li&gt;
          &lt;li&gt;Bigtable
            &lt;ul&gt;
              &lt;li&gt;petabyte scale&lt;/li&gt;
              &lt;li&gt;single row transactions&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;数据仓库
        &lt;ul&gt;
          &lt;li&gt;BigQuery&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;定制数据库
        &lt;ul&gt;
          &lt;li&gt;自己把自己的数据库安装到 VM 上&lt;/li&gt;
          &lt;li&gt;在 marketplace 上可以找到开源镜像&lt;/li&gt;
          &lt;li&gt;mongoDB , Cassandra 等&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Process &amp;amp; Analysis 处理和分析
    &lt;ul&gt;
      &lt;li&gt;数据清洗和转换
        &lt;ul&gt;
          &lt;li&gt;DataPrep&lt;/li&gt;
          &lt;li&gt;Cloud Data Loss Prevention (DLP) API
            &lt;ul&gt;
              &lt;li&gt;数据检查服务, 对Cloud Storage, BigQuery, Cloud Logging, and Datastore 上的敏感数据(PII 等)进行扫描, 检查和分类, 把查询到的结果保存到 Data Catalog 中. 需要时可以查找 data catalog 并删除所有 PII , PCI DSS 等敏感信息.&lt;/li&gt;
              &lt;li&gt;GCP 的数据 , on-prem 的数据都可以检查.&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Dataflow
            &lt;ul&gt;
              &lt;li&gt;ETL pipeline&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Dataproc
            &lt;ul&gt;
              &lt;li&gt;迁移 Spark 和 Hadoop 到google&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Explore &amp;amp; Visualize 发现和展现
    &lt;ul&gt;
      &lt;li&gt;数据仓库
        &lt;ul&gt;
          &lt;li&gt;BigQuery&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;机器学习
        &lt;ul&gt;
          &lt;li&gt;ML - Pre build models&lt;/li&gt;
          &lt;li&gt;ML - Custom models&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;科学计算和画图
        &lt;ul&gt;
          &lt;li&gt;Cloud Datalab
            &lt;ul&gt;
              &lt;li&gt;Jupyter Notebook 的代替&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;实时图表
        &lt;ul&gt;
          &lt;li&gt;Cloud Data Studio
            &lt;ul&gt;
              &lt;li&gt;把 Cloud SQL, BigQuery 内的数据实时展现出来&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Cloud Data Catalog
            &lt;ul&gt;
              &lt;li&gt;是数据分类目录, 记录通过 Data Loss Prevension 扫描过的数据的扫描结果, 比如 PII 信息等.&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;大数据, 流, IOT 数据处理用到的数据服务
    &lt;ul&gt;
      &lt;li&gt;IoT Core
        &lt;ul&gt;
          &lt;li&gt;获取 sensor 数据, 发到 pub/sub&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;pub/sub
        &lt;ul&gt;
          &lt;li&gt;实时数据导入&lt;/li&gt;
          &lt;li&gt;流数据处理的起点&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Cloud Storage
        &lt;ul&gt;
          &lt;li&gt;批量数据处理, 先把数据放这里&lt;/li&gt;
          &lt;li&gt;成本低&lt;/li&gt;
          &lt;li&gt;存放时间长&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Dataflow
        &lt;ul&gt;
          &lt;li&gt;ETL&lt;/li&gt;
          &lt;li&gt;可以是pub/sub的下游&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;BigQuery
        &lt;ul&gt;
          &lt;li&gt;数据仓库&lt;/li&gt;
          &lt;li&gt;不管是批量还是实时的数据处理, 最后数据都放这里&lt;/li&gt;
          &lt;li&gt;适合需要进行复杂数据分析的数据&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Data Studio
        &lt;ul&gt;
          &lt;li&gt;数据展示&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Dataproc
        &lt;ul&gt;
          &lt;li&gt;大数据处理, hadoop, spark功能&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Dataprep
        &lt;ul&gt;
          &lt;li&gt;数据清洗和准备&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Datalab
        &lt;ul&gt;
          &lt;li&gt;数据计算和绘图&lt;/li&gt;
          &lt;li&gt;可以用 Tensorflow, numpy 等类库&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Cloud Composer
        &lt;ul&gt;
          &lt;li&gt;Managed workflow orchestration service&lt;/li&gt;
          &lt;li&gt;Create pipelines across clouds and on-premises data centers&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;BigTable
        &lt;ul&gt;
          &lt;li&gt;存储大规模 IoT 数据更合适&lt;/li&gt;
          &lt;li&gt;适合时间序列的数据&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;DataStore
        &lt;ul&gt;
          &lt;li&gt;存储 IoT 数据更合适
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-01-18-020105.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;ai--ml&quot;&gt;AI &amp;amp; ML&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;google 的机器学习服务分为几种
    &lt;h4 id=&quot;预制-ml-api&quot;&gt;预制 ML API&lt;/h4&gt;
  &lt;/li&gt;
  &lt;li&gt;不需要使用者有 ML 知识, 直接就能用&lt;/li&gt;
  &lt;li&gt;google 训练数据, google 的模型&lt;/li&gt;
  &lt;li&gt;包括了
    &lt;ul&gt;
      &lt;li&gt;Vision API&lt;/li&gt;
      &lt;li&gt;Video API&lt;/li&gt;
      &lt;li&gt;Chat API&lt;/li&gt;
      &lt;li&gt;Natural Language API&lt;/li&gt;
      &lt;li&gt;Speech-to-Text API&lt;/li&gt;
      &lt;li&gt;Text-to- Speech API&lt;/li&gt;
      &lt;li&gt;Translation API&lt;/li&gt;
      &lt;li&gt;…
        &lt;h4 id=&quot;automl&quot;&gt;AutoML&lt;/h4&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;低代码的 AI 方案&lt;/li&gt;
  &lt;li&gt;谷歌训练的数据, 我们自己的模型&lt;/li&gt;
  &lt;li&gt;我们在谷歌已经训练好的模型基础上定制我们自己的 ML 模型&lt;/li&gt;
  &lt;li&gt;创建用户自定义的 AI 模型&lt;/li&gt;
  &lt;li&gt;不需要懂太多 ML 知识
    &lt;h4 id=&quot;vertex-ai&quot;&gt;Vertex AI&lt;/h4&gt;
  &lt;/li&gt;
  &lt;li&gt;我们自己的数据, 我们自己的模型&lt;/li&gt;
  &lt;li&gt;managed ML platform&lt;/li&gt;
  &lt;li&gt;custom ML models&lt;/li&gt;
  &lt;li&gt;可以运行Tensorflow&lt;/li&gt;
  &lt;li&gt;以前可能叫 api platform&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;bigquery-ml&quot;&gt;BigQuery ML&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;把 ML 和 SQL 进行整合&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;networking&quot;&gt;Networking&lt;/h3&gt;

&lt;h4 id=&quot;network-tier&quot;&gt;Network Tier&lt;/h4&gt;
&lt;p&gt;Google Cloud Platform offers two different network tiers which differ both on price and performance.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Google Premium Tier Network
    &lt;ul&gt;
      &lt;li&gt;配置良好、低延迟、高度可靠的全球网络&lt;/li&gt;
      &lt;li&gt;支持 Global HTTPS LB
        &lt;ul&gt;
          &lt;li&gt;支持  across regions and overflow or fail over to other regions.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;IPv4 or IPv6 Virtual IP&lt;/li&gt;
      &lt;li&gt;更贵&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Google Standard Tier Network
    &lt;ul&gt;
      &lt;li&gt;支持 regional 的 LB&lt;/li&gt;
      &lt;li&gt;不支持跨区域的 failover&lt;/li&gt;
      &lt;li&gt;便宜&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;例题:
    &lt;ul&gt;
      &lt;li&gt;Which of these networking tiers is recommended if you want to use Global HTTPS Load Balancing?
        &lt;ul&gt;
          &lt;li&gt;Premium network tier
            &lt;ul&gt;
              &lt;li&gt;premium 是高级的意思, 支持 Global HTTPS LB ,&lt;/li&gt;
              &lt;li&gt;标准的(Standard network tier) 不支持 global HTTPS LB&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;vpc&quot;&gt;VPC&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;Google 提供一个内部网络来保护我们的资源, 数据, 以及和内部外部的沟通&lt;/li&gt;
  &lt;li&gt;VPC 是 global resource, 是跨 region 和 zone 的
    &lt;ul&gt;
      &lt;li&gt;region
        &lt;ul&gt;
          &lt;li&gt;一个地区, 比如 us-east1&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;zone
        &lt;ul&gt;
          &lt;li&gt;一个数据中心, 比如 us-east1-a&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Route Table
        &lt;ul&gt;
          &lt;li&gt;VPC 有一个 default routing table
            &lt;ul&gt;
              &lt;li&gt;build-in 的&lt;/li&gt;
              &lt;li&gt;没有管理和视图界面&lt;/li&gt;
              &lt;li&gt;用于 把 traffic 从一个 vm  forward 到另一个 vm&lt;/li&gt;
              &lt;li&gt;不需要 external IP 地址&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Private Google Access
    &lt;ul&gt;
      &lt;li&gt;相当于 AWS 的 VPC Endpoint.&lt;/li&gt;
      &lt;li&gt;提供一个私有连接, 让这个subnet中的服务(VM, Bigquery and etc) 通过内网 IP 地址访问 google 的服务, 比如 youtubve, Gmap,  (省钱)
        &lt;ul&gt;
          &lt;li&gt;如果用了 VPN tunnel, 也可以让 on-prem 用 private IP 互相访问&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-02-24-091201.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;每个项目有一个default VPC
    &lt;ul&gt;
      &lt;li&gt;default VPC (auto mode vpc)中为所有region 都默认创建了一个 subnet.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;VPC 有两种模式
    &lt;ul&gt;
      &lt;li&gt;Auto Mode VPC
        &lt;ul&gt;
          &lt;li&gt;为所有region 都默认创建了一个 subnet.&lt;/li&gt;
          &lt;li&gt;default vpc 就是 auto mode&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Custom Mode VPC
        &lt;ul&gt;
          &lt;li&gt;要手动创建 subnet , CIDR 以及 VPC Fire Rule&lt;/li&gt;
          &lt;li&gt;生产环境建议使用 custom mode&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;subnet
    &lt;ul&gt;
      &lt;li&gt;vpc 可以包含多个 subnet&lt;/li&gt;
      &lt;li&gt;subnet 是 只能属于某一个region 的, regional resource.&lt;/li&gt;
      &lt;li&gt;subnet 是 跨zone 的, 比如这个subnet 在us-central1, 它就在任何一个 us-central1 的zone 可用.&lt;/li&gt;
      &lt;li&gt;subnet 下面的实例可以是某一个zone 的&lt;/li&gt;
      &lt;li&gt;每个subnet 有一个 CIDR range (IP 地址段)
        &lt;ul&gt;
          &lt;li&gt;32 表示 1 个 IP&lt;/li&gt;
          &lt;li&gt;26 表示 64 个 IP (2的(32-26)的 6 次方)&lt;/li&gt;
          &lt;li&gt;…&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Flow logs 开启的话, 可以通过 flow log 查看subnet 的网络访问日志.&lt;/li&gt;
      &lt;li&gt;subnet 分为 public subnet 和 private subnet
        &lt;ul&gt;
          &lt;li&gt;public subnet 中的资源可以被外网访问(也可以访问外网), 可以访问private subnet&lt;/li&gt;
          &lt;li&gt;private subnet 中的资源不能被外网访问(但可以访问外网)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Firewall Rule
    &lt;ul&gt;
      &lt;li&gt;Firewall 是 Google 管理的 build-in 服务&lt;/li&gt;
      &lt;li&gt;为进出 VPC 设置流量限制
        &lt;ul&gt;
          &lt;li&gt;每条 rule 对应一个 VPC&lt;/li&gt;
          &lt;li&gt;每条 rule 可以设置成 ingress rule 或者 egress rule&lt;/li&gt;
          &lt;li&gt;每条 rule 可以设置成 allow 或者 deny&lt;/li&gt;
          &lt;li&gt;每条 rule 的影响范围可以是
            &lt;ul&gt;
              &lt;li&gt;all instance&lt;/li&gt;
              &lt;li&gt;指定 tag 的资源&lt;/li&gt;
              &lt;li&gt;指定 service account 的资源&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;每条 rule 有一个 Priority, 0 - 65535, 数字越大优先级越低&lt;/li&gt;
          &lt;li&gt;可以设置 protocol(TCP/UDP/Others) 和 port&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;默认的 rule 是
        &lt;ul&gt;
          &lt;li&gt;允许所有 egress&lt;/li&gt;
          &lt;li&gt;不允许所有的 ingress&lt;/li&gt;
          &lt;li&gt;可以设置不同 priority 的  rule 进行覆盖, 数字越小优先级越高&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;默认的 VPC 有 4 条 rule
        &lt;ul&gt;
          &lt;li&gt;Allow incoming traffic from VM instances in same network (default-allow-internal)
            &lt;ul&gt;
              &lt;li&gt;允许同一个网络的  VM访问&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Allow Incoming TCP traffic on port 22 (SSH) default-allow-ssh
            &lt;ul&gt;
              &lt;li&gt;允许 ssh 访问&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Allow Incoming TCP traffic on port 3389 (RDP) default-allow-rdp
            &lt;ul&gt;
              &lt;li&gt;允许远程桌面访问&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Allow Incoming ICMP from any source on the network default-allow-icmp
            &lt;ul&gt;
              &lt;li&gt;允许 Ping 通不通&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Firewall Rule 最佳实践
        &lt;ul&gt;
          &lt;li&gt;尽量使用 tag (给资源打标签) 来被 firewall rule 进行允许外部流量访问&lt;/li&gt;
          &lt;li&gt;尽量只允许 LB 访问 instance, 不要外网直接访问&lt;/li&gt;
          &lt;li&gt;删掉 0.0.0.0/0 这种地址段, 太宽了&lt;/li&gt;
          &lt;li&gt;地址段只允许特定的小范围地址段&lt;/li&gt;
          &lt;li&gt;允许 LB 的健康检查访问实例/MIG&lt;/li&gt;
          &lt;li&gt;如果不想让所有实例都默认可以 egress 访问外网
            &lt;ul&gt;
              &lt;li&gt;先建立一个low priority (比如 65000)的 egress rule 把所有访问都 deny&lt;/li&gt;
              &lt;li&gt;再建立一个high priority (比如 1000)的 egress rule 指定哪些资源可以通过什么端口来访问 外网&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Firewall Insights (防火墙洞察)
        &lt;ul&gt;
          &lt;li&gt;需要先开启 Firewall Rule Logging&lt;/li&gt;
          &lt;li&gt;可以通过 logging 查看这些 firewall rule 的使用效率. 方便理解, 提升安全, 优化配置&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Shared VPC
    &lt;ul&gt;
      &lt;li&gt;同一个组织(organization) 有多个 project 希望可以通过内网 IP 互相通信&lt;/li&gt;
      &lt;li&gt;需要先创建组织&lt;/li&gt;
      &lt;li&gt;可以在一个Org 中的一个 Host Project 中创建一个 shared VPC, 把需要共享的应用跑在里面, 然后让org 下面的其他project 中的服务通过内网 IP访问. 
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-02-07-160108.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;VPC Service Control
    &lt;ul&gt;
      &lt;li&gt;Google managed 网络功能, 降低数据外泄(exfiltration)风险, 保护VPC 内数据隐私, 提供独立的访问控制&lt;/li&gt;
      &lt;li&gt;提供如下功能:
        &lt;ul&gt;
          &lt;li&gt;控制 VPC 网络可以访问哪些谷歌服务&lt;/li&gt;
          &lt;li&gt;multi-tenant, 保证不会泄露 (exfiltration)&lt;/li&gt;
          &lt;li&gt;敏感信息只能被经过认证的网络访问&lt;/li&gt;
          &lt;li&gt;限制资源访问 IP 地址, identity, 客户设备&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;serverless-vpc-access&quot;&gt;Serverless VPC Access&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;Serverless VPC Access 是一个私有访问选项, 允许你通过一个 internal IP 让一个 无服务(serverless) 连接到 VPC 网络.
    &lt;ul&gt;
      &lt;li&gt;VPN tunnel 连接到的on-premise 也算  VPC网络内&lt;/li&gt;
      &lt;li&gt;要无服务发起连接请求&lt;/li&gt;
      &lt;li&gt;如果是 VM 先发起的请求, 就要走外网的无服务入口了&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;无服务包括
    &lt;ul&gt;
      &lt;li&gt;Cloud Run&lt;/li&gt;
      &lt;li&gt;App Engine standard environment&lt;/li&gt;
      &lt;li&gt;Cloud Function&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;vpc-peering-vpc-network-peering&quot;&gt;VPC Peering (VPC Network Peering)&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;VPC Peering 可以让不同组织之间的 VPC 互相连接 并使用 内网 IP 相互通信
    &lt;ul&gt;
      &lt;li&gt;前提是两个 VPC  的网络 IP 不能重叠&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;数据交换不需要额外付费&lt;/li&gt;
  &lt;li&gt;VPC1 和 VPC2 peer 了, PC2 和 VPC3 Peer 了, 并不能解决 VPC1 和 VPC3 的 Peering&lt;/li&gt;
  &lt;li&gt;VPC 只能在 GCP 内部使用, 为两个 VPC 提供链接, 不能在  GCP 外部建立连接&lt;/li&gt;
  &lt;li&gt;VPC peering 有时候也叫 network peering.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;carrier-peering&quot;&gt;Carrier Peering&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;运营商对等&lt;/li&gt;
  &lt;li&gt;Peer through a carrier&lt;/li&gt;
  &lt;li&gt;是一种通过第三方运营商来实现的互联，这意味着一个网络可以通过运营商来连接到另一个网络。&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;cloud-router&quot;&gt;Cloud Router&lt;/h4&gt;
&lt;p&gt;VPC/on-prem network route exchange (BGP)&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Google 管理的 build-in 服务&lt;/li&gt;
  &lt;li&gt;Router 同一个 VPC 下面的不同subnet 之间的通信&lt;/li&gt;
  &lt;li&gt;不同的 VPC 之间需要通过 VPN Gateway 或者 Cloud Interconnect 才能让不同subnet 之间通信&lt;/li&gt;
  &lt;li&gt;Firewall 和 Router 的区别
    &lt;ul&gt;
      &lt;li&gt;Google Cloud Firewall rules are used to create and manage network access control lists (ACLs) that control the traffic that is allowed to and from a Google Cloud virtual private cloud (VPC) network. Cloud Router is a specialized virtual router that enables customers to route traffic between their on-premises networks and their Google Cloud VPC networks. Cloud Router also provides dynamic routing for customers who need to connect multiple VPC networks together or to other networks.
        &lt;ul&gt;
          &lt;li&gt;Google Cloud Firewall 规则用于创建和管理网络访问控制列表 （ACL），这些列表控制允许进出 Google Cloud 虚拟私有云 （VPC） 网络的流量。云路由器是一种专用的虚拟路由器，使客户能够在其本地网络和 Google Cloud VPC 网络之间路由流量。云路由器还为需要将多个VPC网络连接在一起或连接到其他网络的客户提供动态路由。
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-02-15-091711.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;direct-peering&quot;&gt;Direct Peering&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;直连 (on-prem 到 GCP VPC)&lt;/li&gt;
  &lt;li&gt;Direct Peering可以让你在企业网络和 Google 边缘网络之间建立直接对等互连连接，并交换高吞吐的云端流量&lt;/li&gt;
  &lt;li&gt;通过 network peering 直连 客户网络和 GCP 网络&lt;/li&gt;
  &lt;li&gt;low level 的连接, &lt;strong&gt;不推荐&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;推荐使用 Cloud VPN 或者 Cloud Interconnect&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;cloud-nat-cloud-nat-gateway&quot;&gt;Cloud NAT (Cloud NAT Gateway)&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;无服务&lt;/li&gt;
  &lt;li&gt;相当于 AWS 中的 NAT Gateway / Ineternet Gateway&lt;/li&gt;
  &lt;li&gt;和 堡垒机相反, 提供 VPC 内部的互联网请求&lt;/li&gt;
  &lt;li&gt;Cloud NAT 是一个网络组件, 并不存在于某个  VM 或者 应用上&lt;/li&gt;
  &lt;li&gt;让 VPC 中的资源在没有 public IP 的情况下也可以访问互联网&lt;/li&gt;
  &lt;li&gt;可以支持的 GCP 资源
    &lt;ul&gt;
      &lt;li&gt;VM&lt;/li&gt;
      &lt;li&gt;GKE&lt;/li&gt;
      &lt;li&gt;Cloud Run&lt;/li&gt;
      &lt;li&gt;App Engine&lt;/li&gt;
      &lt;li&gt;Cloud Function&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;不需要配置 firewall rules&lt;/li&gt;
  &lt;li&gt;需要所在的  VPC有一个默认的 router , 这个 router 的下一跳(hop) 是 internet gateway
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-02-10-043548.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
  &lt;li&gt;案例
    &lt;ul&gt;
      &lt;li&gt;要部署应用到  GKE上, 需要访问外网,  但GKE所在的 GCE VM 没有外网 IP, 如何解决?
        &lt;ol&gt;
          &lt;li&gt;把 GKE Cluster 作为一个 private subnet&lt;/li&gt;
          &lt;li&gt;给这个 subnet 配置 CLoud NAT Gateway&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;vpn&quot;&gt;VPN&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;连接 on premise 和 GCP 网络&lt;/li&gt;
  &lt;li&gt;每个 VPN 最高速度为 3Gbps, 多建几个可以增加带宽&lt;/li&gt;
  &lt;li&gt;使用了 IPSec VPN Tunnel 实现&lt;/li&gt;
  &lt;li&gt;通过 internet 公网连接&lt;/li&gt;
  &lt;li&gt;用 Internet Key Exchange 协议加密&lt;/li&gt;
  &lt;li&gt;VPN Gateway
    &lt;ul&gt;
      &lt;li&gt;要建立 VPN tunnel, 就要在所在的 region 建立一个 VPN Gateway&lt;/li&gt;
      &lt;li&gt;Regional 的, 不是 global 的. 每个region 可以有一个 VPN gateway&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;两种 VPN 类型
    &lt;ul&gt;
      &lt;li&gt;HA VPN
        &lt;ul&gt;
          &lt;li&gt;SLA 99.99%&lt;/li&gt;
          &lt;li&gt;对外暴露 2个 外部 IP 地址&lt;/li&gt;
          &lt;li&gt;2条线路, 是 HA (在一个 region)&lt;/li&gt;
          &lt;li&gt;只支持动态路由 (BGP)
            &lt;ul&gt;
              &lt;li&gt;Cloud Router
                &lt;ul&gt;
                  &lt;li&gt;支持动态路由, 当网络拓扑变化时, 可以自动更新路由&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;gateway
            &lt;ul&gt;
              &lt;li&gt;GCP 端是 Cloud HA VPN gateway&lt;/li&gt;
              &lt;li&gt;on premise 端是 on-premise vpn gateway
                &lt;ul&gt;
                  &lt;li&gt;or peer gateway&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Clasic VPN
        &lt;ul&gt;
          &lt;li&gt;SLA 99.9%&lt;/li&gt;
          &lt;li&gt;对外暴露 1个 外部 IP 地址&lt;/li&gt;
          &lt;li&gt;1条线路, 非 HA&lt;/li&gt;
          &lt;li&gt;支持动态和静态路由 (BGP)&lt;/li&gt;
          &lt;li&gt;gateway
            &lt;ul&gt;
              &lt;li&gt;GCP 端是 Cloud Compute Engine VPN gateway&lt;/li&gt;
              &lt;li&gt;on premise 端是 on-premise vpn gateway&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;适合场景
    &lt;ul&gt;
      &lt;li&gt;希望on premise 和 GCP 的通信进行加密&lt;/li&gt;
      &lt;li&gt;对吞吐量要求不高, 没有太多 cost&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;VPN 和 Cloud Interconnect 适用的场景区别
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-02-15-092310.jpg&quot; alt=&quot;&quot; /&gt;
    &lt;h4 id=&quot;cloud-interconnect&quot;&gt;Cloud Interconnect&lt;/h4&gt;
  &lt;/li&gt;
  &lt;li&gt;专线网络, 连接 GCP 和 on premise&lt;/li&gt;
  &lt;li&gt;高速连接, 高可用, 低延迟的私有连接&lt;/li&gt;
  &lt;li&gt;通过私有网络连接
    &lt;ul&gt;
      &lt;li&gt;使用私有 IP 地址 (无外网 IP 接口)&lt;/li&gt;
      &lt;li&gt;省去了 egress 外网流量的成本&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;有两种类型
    &lt;ul&gt;
      &lt;li&gt;Dedicated Interconnect
        &lt;ul&gt;
          &lt;li&gt;on-prem data center 需要和 GCP data center 比较近&lt;/li&gt;
          &lt;li&gt;99.99% SLA&lt;/li&gt;
          &lt;li&gt;独享专线, GCP 和 on-premise 直连&lt;/li&gt;
          &lt;li&gt;80 Gbps 的网速 (or 200 Gbps circuits)&lt;/li&gt;
          &lt;li&gt;缺点, 要花时间去建立, 一般几周到几个月&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Partner Interconnect
        &lt;ul&gt;
          &lt;li&gt;on-prem data center 和 GCP data center 比较远, 才需要一个partner 在中间&lt;/li&gt;
          &lt;li&gt;GCP 和 on-premise 中间还有一个partner 网络
            &lt;ul&gt;
              &lt;li&gt;partner 可以是中国电信, 联通, 移动&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;和 Dedicated 相比, 稍微低一点的带宽&lt;/li&gt;
          &lt;li&gt;50 Mbps 到 10Gbps&lt;/li&gt;
          &lt;li&gt;partner 这部分出了问题, Google 不负责.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;最佳实践
    &lt;ul&gt;
      &lt;li&gt;GCP 中和 on premise 连接的网络, 使用一个不同 IP 地址段
        &lt;ul&gt;
          &lt;li&gt;地址段不能相互重叠&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;网络连接要有备份方案
        &lt;ul&gt;
          &lt;li&gt;把 Cloud Interconnect 作为主要连接&lt;/li&gt;
          &lt;li&gt;把 VPN 作为备份方案, 就算主要连接挂了, 也可以保持连接&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;cloud-dns&quot;&gt;Cloud DNS&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;谷歌云提供的 DNS 服务 (不含域名注册)&lt;/li&gt;
  &lt;li&gt;Zone 是对某个域名的管理集合
    &lt;ul&gt;
      &lt;li&gt;分为 public zone (处理外网公有域名) 和 private zone (处理内网私有域名)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Record 是&lt;/li&gt;
  &lt;li&gt;步骤:
    &lt;ul&gt;
      &lt;li&gt;在域名注册商那里购买域名&lt;/li&gt;
      &lt;li&gt;将域名路由到 Cloud DNS
        &lt;ul&gt;
          &lt;li&gt;
            &lt;ol&gt;
              &lt;li&gt;在 Cloud DNS 中创建一个 Zone, 并指定要处理的域名&lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
          &lt;li&gt;
            &lt;ol&gt;
              &lt;li&gt;在zone 中创建记录, 处理域名的不同解析方式
                &lt;ul&gt;
                  &lt;li&gt;比如:
                    &lt;ul&gt;
                      &lt;li&gt;Route api.dalong.work to the IP address of api server&lt;/li&gt;
                      &lt;li&gt;Route static.dalong.work to the IP address of http server&lt;/li&gt;
                      &lt;li&gt;Route email (dalong@dalong.work) to the mail server(mail.dalong.work)&lt;/li&gt;
                    &lt;/ul&gt;
                  &lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ol&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Cloud DNS 路由 policies
    &lt;ul&gt;
      &lt;li&gt;Cloud DNS 有两种路由规则
        &lt;ul&gt;
          &lt;li&gt;weighted round robin (权重)
            &lt;ul&gt;
              &lt;li&gt;如果 DNS 下面有两个 IP, 那么对两个  IP设置不同的权重, 20% 到一个 IP, 80% 到另一个 IP&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;geo-location
            &lt;ul&gt;
              &lt;li&gt;通过用户 IP 地址判断客户所在地, 然后再把客户流量转给对应的后端的LB 或者对应region 的服务) 
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-02-10-031419.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;cloud-cdn&quot;&gt;Cloud CDN&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;使用谷歌的 global edge network 让用户可以在全球范围内在就近, 快速获取到被缓存的静态资源&lt;/li&gt;
  &lt;li&gt;和 External Https/Http LB 整合&lt;/li&gt;
  &lt;li&gt;后端可以是
    &lt;ul&gt;
      &lt;li&gt;Cloud Storage buckets&lt;/li&gt;
      &lt;li&gt;Instance groups&lt;/li&gt;
      &lt;li&gt;App Engine&lt;/li&gt;
      &lt;li&gt;Cloud Run&lt;/li&gt;
      &lt;li&gt;Cloud Functions&lt;/li&gt;
      &lt;li&gt;客户自己的数据源&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;原理
    &lt;ul&gt;
      &lt;li&gt;和memcache 差不多&lt;/li&gt;
      &lt;li&gt;URL 如果map 到了Cloud CDN 中的cache 就直接返回给客户; 如果没map 到, 就去 origian 拿到静态数据, 然后返回给客户, 然后把缓存存到 CDN 中&lt;/li&gt;
      &lt;li&gt;可以通过 TTL 设置缓存过期时间&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;cache key
    &lt;ul&gt;
      &lt;li&gt;默认是完整的 url 作为 cache key&lt;/li&gt;
      &lt;li&gt;定制 cache key, 去掉 protocol 信息 可以提高cache 命中率
        &lt;ul&gt;
          &lt;li&gt;http 和 https 开头的, 后面 URL 完全相同的 cache key 合并, 可以提高命中率&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;缩短 cache 过期时间只会降低命中率&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;最佳实践
    &lt;ul&gt;
      &lt;li&gt;根据过期时间需要缓存静态内容
        &lt;ul&gt;
          &lt;li&gt;Example: Cache-Control: public, max-age=259200 (72 hours)&lt;/li&gt;
          &lt;li&gt;Example: Cache-Control: public, max-age=300 (5 minutes)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;提高 cache hit ratio (缓存命中率)
        &lt;ul&gt;
          &lt;li&gt;如果 URL 是 https://yourwebsite.com/my-image/1.jpg 那么下面两种  URL都不会命中缓存&lt;/li&gt;
          &lt;li&gt;http://yourwebsite.com/my-image/1.jpg (http vs https)&lt;/li&gt;
          &lt;li&gt;http://yourwebsite.com/my-image/1.jpg?mobile=1 (query string does not match)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;可以通过命令来设置 cache key
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gcloud compute backend-services update BACKEND_SERVICE --enable-cdn --no-cache-key-include-protocol --no-cache-key-include-host --no-cache-key-include-query-string&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;在 URL 中通过版本好来更新内容
        &lt;ul&gt;
          &lt;li&gt;https://yourwebsite.com/my-image/1.jpg?v=1&lt;/li&gt;
          &lt;li&gt;https://yourwebsite.com/my-image/1.jpg?v=2&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;media-cdn&quot;&gt;Media CDN&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;CDN for Streaming and Videos&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;load-balancing-load-balancer&quot;&gt;Load Balancing (Load Balancer)&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;可以把流量在一个或多个region 传给应用实例, 提供高可用 HA&lt;/li&gt;
  &lt;li&gt;配合 health check 和 auto scaling
    &lt;ul&gt;
      &lt;li&gt;LB 只会把流量给到 MIG 中的健康的VM&lt;/li&gt;
      &lt;li&gt;如果一个 region 的 backend 都挂了, LB会把流量转到其他region&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;可以是 internal (VM 之间) 或者 external (互联网用户流量)
    &lt;ul&gt;
      &lt;li&gt;external 到 LB - 建议 HTTPS, TLS&lt;/li&gt;
      &lt;li&gt;LB 到 VM - 建议 HTTPS, HTTP 也 OK&lt;/li&gt;
      &lt;li&gt;internal 建议 HTTP, TCP&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;支持的 protocol
    &lt;ul&gt;
      &lt;li&gt;HTTP/HTTPS
        &lt;ul&gt;
          &lt;li&gt;第七层&lt;/li&gt;
          &lt;li&gt;web, API, email(SMTP), FTP 等&lt;/li&gt;
          &lt;li&gt;大多数应用都在这一层&lt;/li&gt;
          &lt;li&gt;HTTP/HTTPS 是基于 第四层之上的&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;TCP(TLS)/UDP/ICMP(Ping)
        &lt;ul&gt;
          &lt;li&gt;第四层&lt;/li&gt;
          &lt;li&gt;游戏, 视频等用 UDP&lt;/li&gt;
          &lt;li&gt;性能更好&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;组成 LB 的 3 个部分
    &lt;ul&gt;
      &lt;li&gt;Frontend - 指定的 IP 地址, 端口和 protocol.
        &lt;ul&gt;
          &lt;li&gt;IP 地址客户可以直接访问&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Host, path rules, http header - 就是路由规则
        &lt;ul&gt;
          &lt;li&gt;Host 就是用二级域名来判断把流量转到后台什么地方&lt;/li&gt;
          &lt;li&gt;Path rules 就是利用 路径来判断把流量送哪里去&lt;/li&gt;
          &lt;li&gt;Http header - 通过http header 决定怎么传递流量
            &lt;ul&gt;
              &lt;li&gt;authorization header&lt;/li&gt;
              &lt;li&gt;post/get/…&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Backend - 提供服务的 endpoint
        &lt;ul&gt;
          &lt;li&gt;一般一个 Backend 指一个 MIG, 也可能是一个instance 或者 bucket&lt;/li&gt;
          &lt;li&gt;因为 MIG 只能在一个 Region, 所以如果需要跨region 服务, 需要在多个region 部署几个跑同样应用的 MIG (同一个 project)&lt;/li&gt;
          &lt;li&gt;LB 会把用户流量转到离用户最近(延迟最低)的那个region 的 MIG&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Protocol 的常用端口
        &lt;ul&gt;
          &lt;li&gt;HTTP/HTTPS - 80,8080, 443&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;负载均衡类型
    &lt;ul&gt;
      &lt;li&gt;Global HTTP(S)&lt;/li&gt;
      &lt;li&gt;Global SSL Proxy&lt;/li&gt;
      &lt;li&gt;Global TCP&lt;/li&gt;
      &lt;li&gt;Reginal&lt;/li&gt;
      &lt;li&gt;Reginal Internal
        &lt;ul&gt;
          &lt;li&gt;多层应用之间,内网互访&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;几个容易混淆的概念
    &lt;ul&gt;
      &lt;li&gt;Bacakend Service
        &lt;ul&gt;
          &lt;li&gt;跨region&lt;/li&gt;
          &lt;li&gt;一堆backend or bucket&lt;/li&gt;
          &lt;li&gt;一个backend service 可以有多个 MIG 分布在不同的region&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Backend : 比如一个 MIG&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;几个负载均衡的场景
    &lt;ul&gt;
      &lt;li&gt;同样的服务在不同region
        &lt;ul&gt;
          &lt;li&gt;方案: 1个 LB + 1个 backend service + 多个 backend (分布在不同region)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;不同的服务在不同 region
        &lt;ul&gt;
          &lt;li&gt;方案: 1个 LB + 1个 URL Maps + 多个 backend service + 多个 backend (分布在不同region)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;不同服务,不同版本在不同region
        &lt;ul&gt;
          &lt;li&gt;方案和上面一个一样, 同一个服务的不同版本视作不同的服务.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;例题:
    &lt;ul&gt;
      &lt;li&gt;Which of these networking tiers is recommended if you want to use Global HTTPS Load Balancing?
        &lt;ul&gt;
          &lt;li&gt;Premium network tier
            &lt;ul&gt;
              &lt;li&gt;premium 是高级的意思, 就是用最新的LB , 不用标准的(Standard network tier)&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;How many HTTPS Load Balancing Backends would you need to support one version each of three different microservices, each with two MIGs in two different regions?
        &lt;ul&gt;
          &lt;li&gt;6个
            &lt;ul&gt;
              &lt;li&gt;一个微服务就表示一个backend service&lt;/li&gt;
              &lt;li&gt;每个服务在两个region中分别部署一个 MIG(backend) , 一共是 6 个&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;service-directory&quot;&gt;Service Directory&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;谷歌提供的服务发现服务&lt;/li&gt;
  &lt;li&gt;帮助微服务之间互相发现彼此&lt;/li&gt;
  &lt;li&gt;一个地方 publish, discover, connect 服务&lt;/li&gt;
  &lt;li&gt;可以在混合云中运行&lt;/li&gt;
  &lt;li&gt;Managed Service&lt;/li&gt;
  &lt;li&gt;通过 DNS, HTTP, and gRPC&lt;/li&gt;
  &lt;li&gt;client libraries 支持多种开发语言, 提供 Rest/ RPC 的 API&lt;/li&gt;
  &lt;li&gt;输出日志
    &lt;ul&gt;
      &lt;li&gt;Audit log&lt;/li&gt;
      &lt;li&gt;request/response log&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;eventarc&quot;&gt;Eventarc&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;谷歌的事件处理服务&lt;/li&gt;
  &lt;li&gt;遵循了 &lt;a href=&quot;https://cloudevents.io&quot;&gt;CloudEvent&lt;/a&gt; 标准
    &lt;ul&gt;
      &lt;li&gt;支持多语言, 混合云,&lt;/li&gt;
      &lt;li&gt;标准类库和工具&lt;/li&gt;
      &lt;li&gt;可移植性强&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;理解为事件总线, 集中&lt;/li&gt;
  &lt;li&gt;上游 - 谁来触发 event
    &lt;ul&gt;
      &lt;li&gt;Pub/Sub&lt;/li&gt;
      &lt;li&gt;Cloud Storage&lt;/li&gt;
      &lt;li&gt;Cloud Functions&lt;/li&gt;
      &lt;li&gt;Cloud IoT&lt;/li&gt;
      &lt;li&gt;Cloud Memorystore&lt;/li&gt;
      &lt;li&gt;Cloud Audit Logs (间接的, GCE 和  GAE可以先把log 发送到 Audit log, 然后由 audit log 触发event)&lt;/li&gt;
      &lt;li&gt;..&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;下游 - 谁来处理event
    &lt;ul&gt;
      &lt;li&gt;Cloud Functions (2nd gen)&lt;/li&gt;
      &lt;li&gt;Cloud Run&lt;/li&gt;
      &lt;li&gt;GKE services&lt;/li&gt;
      &lt;li&gt;..
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-02-04-060656.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;gcloud eventarc triggers create my-pub-sub-trigger
  --destination-run-service&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$SERVICE_NAME&lt;/span&gt; --destination-run-region&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$REGION&lt;/span&gt;
  --event-filters&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;type=google.cloud.pubsub.topic.v1.messagePublished&quot;&lt;/span&gt;
gcloud eventarc triggers create my-audit-log-trigger
  --destination-run-service&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$SERVICE_NAME&lt;/span&gt; --destination-run-region&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$REGION&lt;/span&gt;
  --event-filters&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;type=google.cloud.audit.log.v1.written&quot;&lt;/span&gt;
  --event-filters&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;serviceName=storage.googleapis.com&quot;&lt;/span&gt;
  --event-filters&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;methodName=storage.objects.create&quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;devops-cicd-and-sre&quot;&gt;DevOps CICD and SRE&lt;/h3&gt;
&lt;h4 id=&quot;cicd&quot;&gt;CICD&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;CI: continus integration
    &lt;ul&gt;
      &lt;li&gt;代码开发完后, 持续运行测试和打包&lt;/li&gt;
      &lt;li&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-02-20-092024.jpg&quot; alt=&quot;CI 工具&quot; /&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;CD: continus deployment/ delivery
    &lt;ul&gt;
      &lt;li&gt;CI 之后, 持续部署到测试环境和生产环境&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;CICD 中要做的事情
    &lt;ul&gt;
      &lt;li&gt;静态代码分析
        &lt;ul&gt;
          &lt;li&gt;Sonar Lint , 开源代码分析工具&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Runtime 检查&lt;/li&gt;
      &lt;li&gt;测试
        &lt;ul&gt;
          &lt;li&gt;单元测试&lt;/li&gt;
          &lt;li&gt;整合测试&lt;/li&gt;
          &lt;li&gt;系统测试&lt;/li&gt;
          &lt;li&gt;Sanity and Regression testing&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;CICD 的工具
    &lt;ul&gt;
      &lt;li&gt;CICD 的工具有的是 Google Cloud 的服务, 有的是要在 Google Market Plance 中找到, 并进行安装&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Cloud Source Repositories&lt;/strong&gt;
        &lt;ul&gt;
          &lt;li&gt;代码管理, 相当于 github&lt;/li&gt;
          &lt;li&gt;优势
            &lt;ul&gt;
              &lt;li&gt;To keep code private to a Google Cloud project&lt;/li&gt;
              &lt;li&gt;To reduce work&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Container Registory&lt;/strong&gt;
        &lt;ul&gt;
          &lt;li&gt;保存 自己的镜像 image&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Jenkins&lt;/strong&gt;
        &lt;ul&gt;
          &lt;li&gt;CI 工具&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Cloud Build&lt;/strong&gt;
        &lt;ul&gt;
          &lt;li&gt;打包工具&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Spinnaker&lt;/strong&gt;
        &lt;ul&gt;
          &lt;li&gt;多云部署平台 (CD)
            &lt;ul&gt;
              &lt;li&gt;支持 GCE, GKE, GAE 和其他云平台&lt;/li&gt;
              &lt;li&gt;支持多种部署策略&lt;/li&gt;
              &lt;li&gt;快速发布应用
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-02-01-083057.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Binary authorization
    &lt;ul&gt;
      &lt;li&gt;在 continus deployment 的环节的安全控制, 保证部署可信的Image 到GKE or Cloud Run 的容器中, 在部署过程中会对image 进行签名验证, 只有可信的image 才能部署到指定环境中&lt;/li&gt;
      &lt;li&gt;步骤
        &lt;ol&gt;
          &lt;li&gt;给所有 GKE Cluster (开发, staging 和 生产)配置 Binary authorization policies (二进制认证 policy)&lt;/li&gt;
          &lt;li&gt;认证后只有经过签名的 image 才能进行部署&lt;/li&gt;
          &lt;li&gt;设置 CI/CI pipeline, 让 attestations (验证) 作为 Pipeline 的一部分,&lt;/li&gt;
          &lt;li&gt;开发人员的image 没有经过 验证, 不能直接上生产了.&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;infrastructure-as-code&quot;&gt;Infrastructure as Code&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;通过配置文件 (比如YAML) 来对infrastructure 进行部署, 配置, 修改, 管理&lt;/li&gt;
  &lt;li&gt;可以跟踪 infra 的变化&lt;/li&gt;
  &lt;li&gt;可以通过配置文件快速复制 infra&lt;/li&gt;
  &lt;li&gt;IaC 包括了软硬两部分
    &lt;ul&gt;
      &lt;li&gt;平台硬件资源管理 (Infra Provisioning)
        &lt;ul&gt;
          &lt;li&gt;可以部署虚机, 数据库, 网络, 存储等&lt;/li&gt;
          &lt;li&gt;开源方案 - &lt;strong&gt;Terraform&lt;/strong&gt;
            &lt;ul&gt;
              &lt;li&gt;Terraform can be used as an infrastructure management system for Google Cloud resources.&lt;/li&gt;
              &lt;li&gt;将模板部署在规模较大的环境中 以便根据需要快速创建任意多个相同的应用环境&lt;/li&gt;
              &lt;li&gt;要使用Terraform 你需要使用 HashiCorp Configuration Language (HCL) 创建一个描述环境组件的模板文件 然后Terraform会使用该模型 来确定创建所描述环境所需的操作&lt;/li&gt;
              &lt;li&gt;如果你需要更改环境 可以修改模板 然后使用Terraform来更新环境以进行更改&lt;/li&gt;
              &lt;li&gt;你可以在Cloud Source Repositories中 存储Terraform模板&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;GCP 方案 - &lt;strong&gt;Google Cloud Deployment Manager&lt;/strong&gt;
            &lt;ul&gt;
              &lt;li&gt;用Deployment manager 创建资源, 可以用它管理 Terraform&lt;/li&gt;
              &lt;li&gt;Yaml 是配置文件
                &lt;ul&gt;
                  &lt;li&gt;有版本控制&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;自动处理依赖关系&lt;/li&gt;
              &lt;li&gt;部署遇到错误可以自动回滚&lt;/li&gt;
              &lt;li&gt;免费使用, 为部署的硬件资源付费
```YAML&lt;/li&gt;
              &lt;li&gt;type: compute.v1.instance
  name: my-first-vm
  properties:
      zone: us-central1-a
      machineType: «MACHINE_TYPE»
      disks:
      - deviceName: boot
          type: PERSISTENT
          boot: true
          autoDelete: true
          initializeParams:
              sourceImage: «SOURCE_IMAGE»
      networkInterfaces:
      - network: «NETWORK»
          # Give instance a public IP Address
          accessConfigs:
          - name: External NAT
              type: ONE_TO_ONE_NAT
```&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;配置管理 (Config Management)
        &lt;ul&gt;
          &lt;li&gt;安装适合的软件和工具到硬件资源上&lt;/li&gt;
          &lt;li&gt;开源工具:
            &lt;ul&gt;
              &lt;li&gt;&lt;strong&gt;Chef&lt;/strong&gt;&lt;/li&gt;
              &lt;li&gt;&lt;strong&gt;Puppet&lt;/strong&gt;&lt;/li&gt;
              &lt;li&gt;&lt;strong&gt;Ansible&lt;/strong&gt;&lt;/li&gt;
              &lt;li&gt;&lt;strong&gt;SaltStack&lt;/strong&gt;
                &lt;h4 id=&quot;sre&quot;&gt;SRE&lt;/h4&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Site Reliability Engineering&lt;/li&gt;
  &lt;li&gt;体现系统性能和可靠性的四个黄金信号(Four Golden Signals)
    &lt;ul&gt;
      &lt;li&gt;latency 延迟时间
        &lt;ul&gt;
          &lt;li&gt;请求应用的响应时间, 是否足够快&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Traffic 流量
        &lt;ul&gt;
          &lt;li&gt;用来衡量系统的请求量的大小&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Saturation 饱和度
        &lt;ul&gt;
          &lt;li&gt;用来衡量资源资源的容量消耗的程度&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Errors
        &lt;ul&gt;
          &lt;li&gt;衡量系统健康程度&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;是 DevOps 的升级版本 , 专注的事情比以往的更多的指标
    &lt;ul&gt;
      &lt;li&gt;availability&lt;/li&gt;
      &lt;li&gt;performance&lt;/li&gt;
      &lt;li&gt;efficiency&lt;/li&gt;
      &lt;li&gt;change management&lt;/li&gt;
      &lt;li&gt;monitoring&lt;/li&gt;
      &lt;li&gt;emergency response&lt;/li&gt;
      &lt;li&gt;capacity planning&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;四个衡量维度 (metrics)
    &lt;ul&gt;
      &lt;li&gt;SLI - 服务级别指标
        &lt;ul&gt;
          &lt;li&gt;在一个时间范围内的, 可衡量的服务参数
            &lt;ul&gt;
              &lt;li&gt;A time-bound measurable attribute of a service&lt;/li&gt;
              &lt;li&gt;比如&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;SLO - 服务目标
        &lt;ul&gt;
          &lt;li&gt;就是几个 9&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;SLA - 服务协议
        &lt;ul&gt;
          &lt;li&gt;是一份agreement , 签字了就是合同的一部分.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Error Budget (错误预算)
        &lt;ul&gt;
          &lt;li&gt;是一个数值, 是 100% 减 SLO , 结果可能是 0.01 , 或者 0.00001&lt;/li&gt;
          &lt;li&gt;用来衡量 SRE 团队部署的速度 (错误越少, release 速度越快越频繁)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;最佳实践
    &lt;ul&gt;
      &lt;li&gt;处理负载过量 (exceed load)
        &lt;ul&gt;
          &lt;li&gt;一些企业由于突然太过成功导致应用的访问流量暴增(success disaster)&lt;/li&gt;
          &lt;li&gt;解决方案
            &lt;ul&gt;
              &lt;li&gt;Load Shedding (卸载部分流量)
                &lt;ul&gt;
                  &lt;li&gt;通过 API 访问限制&lt;/li&gt;
                  &lt;li&gt;将时序类型的数据丢弃一部分&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;Reduce Quality of Service (降低服务质量)
                &lt;ul&gt;
                  &lt;li&gt;原来的实时 response 改成 hardcode 的内容&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Peneration testing (渗透测试)
        &lt;ul&gt;
          &lt;li&gt;模拟黑客攻击, 寻找安全漏洞&lt;/li&gt;
          &lt;li&gt;可以是黑盒测试或白盒测试&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Load Testing (压力测试)
        &lt;ul&gt;
          &lt;li&gt;模拟真实场景的流量&lt;/li&gt;
          &lt;li&gt;模拟突发流量&lt;/li&gt;
          &lt;li&gt;工具: JMeter, LoadRunner, Locust, Gatling etc&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Resilene Testing (伸缩测试)
        &lt;ul&gt;
          &lt;li&gt;当系统的某个部分损坏了, 整个应用仍然可以进行服务的能力&lt;/li&gt;
          &lt;li&gt;几种测试方法
            &lt;ul&gt;
              &lt;li&gt;Chaos Testing (Simian Army)  混沌测试
                &lt;ul&gt;
                  &lt;li&gt;随机把机房的某个部分弄坏 (想象一个有武器的猴子进了机房, 可能会随便按按钮, 扯网线)&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;在应用的某层进行压力测试&lt;/li&gt;
              &lt;li&gt;测试断网
                &lt;ul&gt;
                  &lt;li&gt;比如 VPN, Cloud Interconnect 断掉&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;灾难测试
                &lt;ul&gt;
                  &lt;li&gt;比如指定时间把整个 Data Center 停电&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;marketplace-cloud-launcher&quot;&gt;Marketplace (Cloud Launcher)&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;相当于 app store&lt;/li&gt;
  &lt;li&gt;可以安装
    &lt;ul&gt;
      &lt;li&gt;操作系统 - Linux 等&lt;/li&gt;
      &lt;li&gt;应用环境 - LAMP 等&lt;/li&gt;
      &lt;li&gt;Web 应用 - WordPress 等&lt;/li&gt;
      &lt;li&gt;企业应用 - SAP Hana on GCP (商业方案, 需要付费)&lt;/li&gt;
      &lt;li&gt;数据应用 - Cssandra 等&lt;/li&gt;
      &lt;li&gt;CICD 工具 - Jenkins 等&lt;/li&gt;
      &lt;li&gt;…&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;release-management&quot;&gt;Release Management&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;发布管理的目标
    &lt;ul&gt;
      &lt;li&gt;零 downtime&lt;/li&gt;
      &lt;li&gt;同一时间, 生产只有一个版本&lt;/li&gt;
      &lt;li&gt;最小化承恩&lt;/li&gt;
      &lt;li&gt;新版本上生产之前要测试&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;最佳实践
    &lt;ul&gt;
      &lt;li&gt;小而快的发布&lt;/li&gt;
      &lt;li&gt;尽量自动化&lt;/li&gt;
      &lt;li&gt;处理新发布版本的问题
        &lt;ul&gt;
          &lt;li&gt;分析日志和查看监控&lt;/li&gt;
          &lt;li&gt;回滚, 在另一个环境检查问题&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;几个发布方法
    &lt;ul&gt;
      &lt;li&gt;Recreate 重建发布
        &lt;ul&gt;
          &lt;li&gt;卸载掉原来的版本, 用新版本代替&lt;/li&gt;
          &lt;li&gt;特点:
            &lt;ul&gt;
              &lt;li&gt;发布需要downtime , 影响客户正常访问&lt;/li&gt;
              &lt;li&gt;回滚的话需要更长的 downtime&lt;/li&gt;
              &lt;li&gt;过程非常快&lt;/li&gt;
              &lt;li&gt;新版本不能向后兼容时(应用和数据), 可以用这个方法&lt;/li&gt;
              &lt;li&gt;不需要额外的 infra&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Canary 金丝雀发布
        &lt;ul&gt;
          &lt;li&gt;先发布新版本到部分实例上, 测试好后再在全部实力上发布新版本&lt;/li&gt;
          &lt;li&gt;特点
            &lt;ul&gt;
              &lt;li&gt;没有downtime, 对用户影响小&lt;/li&gt;
              &lt;li&gt;有问题就回滚&lt;/li&gt;
              &lt;li&gt;新版本需要有向后兼容能力.&lt;/li&gt;
              &lt;li&gt;不需要额外infra&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;AB 测试
            &lt;ul&gt;
              &lt;li&gt;是基于金丝雀的发布方式&lt;/li&gt;
              &lt;li&gt;要看一下用户对两个版本的不同反应&lt;/li&gt;
              &lt;li&gt;最终留下客户喜欢的那个版本&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Rolling 滚动发布
        &lt;ul&gt;
          &lt;li&gt;和金丝雀基本一样, 就是需要先设定好一个滚动升级的机制, 比如每次新版本替换生产的实例个数或百分比&lt;/li&gt;
          &lt;li&gt;特点
            &lt;ul&gt;
              &lt;li&gt;没有downtime, 对用户影响小&lt;/li&gt;
              &lt;li&gt;是自动发布过程, 但需要提前setup 好&lt;/li&gt;
              &lt;li&gt;有问题就回滚&lt;/li&gt;
              &lt;li&gt;发布速度慢, rolling 需要一段时间&lt;/li&gt;
              &lt;li&gt;新版本需要有向后兼容能力.&lt;/li&gt;
              &lt;li&gt;不需要额外的infra&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Rolling with additional batch
        &lt;ul&gt;
          &lt;li&gt;和 rolling 基本一样, 但是需要额外的一个/几个 实例&lt;/li&gt;
          &lt;li&gt;将新版本先发布到新增加的实例上, 没问题了再将新版本 rolling 到其他实例上&lt;/li&gt;
          &lt;li&gt;特点 (对比 Rolling):
            &lt;ul&gt;
              &lt;li&gt;不会影响生产上的任何正在处理用户访问的实例&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Blue Green 蓝绿发布
        &lt;ul&gt;
          &lt;li&gt;增加额外的实例环境发布新版本, 两个环境(和版本)并行, 测试后撤掉原来的环境, 保留新环境为生产环境&lt;/li&gt;
          &lt;li&gt;特点
            &lt;ul&gt;
              &lt;li&gt;没有downtime&lt;/li&gt;
              &lt;li&gt;在两个环境值之前切换和回滚&lt;/li&gt;
              &lt;li&gt;新版本要有向后兼容能力&lt;/li&gt;
              &lt;li&gt;需要很多额外的infra&lt;/li&gt;
              &lt;li&gt;配置有些复杂&lt;/li&gt;
              &lt;li&gt;要避免支付等场景使用蓝绿发布, 因为可能会引起重复的支付交易订单&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Shadow 测试
            &lt;ul&gt;
              &lt;li&gt;是基于蓝绿发布的&lt;/li&gt;
              &lt;li&gt;第二个环境的流量是 shadow 第一个环境的流量&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;多个 Google 服务都可以应用不同的发布方式
    &lt;ul&gt;
      &lt;li&gt;MIG (Managed Instance Group)
        &lt;ul&gt;
          &lt;li&gt;Canary&lt;/li&gt;
          &lt;li&gt;Rolling&lt;/li&gt;
          &lt;li&gt;Blue Green&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;App Engine
        &lt;ul&gt;
          &lt;li&gt;Recreate&lt;/li&gt;
          &lt;li&gt;Canary and AB Testing&lt;/li&gt;
          &lt;li&gt;Rolling&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;GKE
        &lt;ul&gt;
          &lt;li&gt;Recreate&lt;/li&gt;
          &lt;li&gt;Canary&lt;/li&gt;
          &lt;li&gt;Rolling&lt;/li&gt;
          &lt;li&gt;Blue Green&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;identify-and-security&quot;&gt;Identify and Security&lt;/h3&gt;

&lt;h4 id=&quot;container-analysis&quot;&gt;Container Analysis&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;对容器进行自动安全扫描&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;artifact-registry&quot;&gt;Artifact Registry&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;image 镜像安全管理&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;kms&quot;&gt;KMS&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;Hosted key management service&lt;/li&gt;
  &lt;li&gt;要启动 KMS API, 并创建一个 Key Ring
    &lt;ul&gt;
      &lt;li&gt;Key ring, 钥匙戒指, 算是一个KMS 的总钥匙?&lt;/li&gt;
      &lt;li&gt;Key rings group keys together to keep them organized.&lt;/li&gt;
      &lt;li&gt;先创建好 key ring, 再在下面创建 keys (Customer-managed key)&lt;/li&gt;
      &lt;li&gt;创建好 Key 之后, 在创建一个新的compute engine 的 instance 的时候, 可以在选择add new desk 的时候, 就可以选择刚创建的Customer-managed key 进行加密. (默认是用google 自己的Google-managed key)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;数据状态分为
    &lt;ul&gt;
      &lt;li&gt;Data at rest
        &lt;ul&gt;
          &lt;li&gt;存在某个地方的数据&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Data in motion/ transit
        &lt;ul&gt;
          &lt;li&gt;传输中的数据&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Data in use
        &lt;ul&gt;
          &lt;li&gt;使用中的数据&lt;/li&gt;
          &lt;li&gt;比如内存中的数据&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;需要为at rest, in transit 的数据进行加密&lt;/li&gt;
  &lt;li&gt;加密类型
    &lt;ul&gt;
      &lt;li&gt;Symmetric key encryption 对称加密
        &lt;ul&gt;
          &lt;li&gt;用同一个key 对数据进行加密和解密&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Asymmetric key encryption 非对称加密
        &lt;ul&gt;
          &lt;li&gt;用公钥加密, 私钥解密&lt;/li&gt;
          &lt;li&gt;公钥分享给别人, 私钥自己留着&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Cloud KMS
    &lt;ul&gt;
      &lt;li&gt;Google 的 key management service&lt;/li&gt;
      &lt;li&gt;KMS 用于给google cloud 的所有可加密服务提供加密&lt;/li&gt;
      &lt;li&gt;分为三种
        &lt;ul&gt;
          &lt;li&gt;Google-managed key
            &lt;ul&gt;
              &lt;li&gt;Google 创建和管理&lt;/li&gt;
              &lt;li&gt;我们不需要做任何管理和配置&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Customer-managed key
            &lt;ul&gt;
              &lt;li&gt;我们在 KMS 中创建和使用&lt;/li&gt;
              &lt;li&gt;Use key from KMS&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Customer-supplied key
            &lt;ul&gt;
              &lt;li&gt;可以自己的 key, 放在 KMS 中进行管理和使用&lt;/li&gt;
              &lt;li&gt;Provide your own key&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;iam-service-account-服务账号-acl&quot;&gt;IAM, Service Account (服务账号), ACL&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;Identity and Access Management (IAM)
    &lt;ul&gt;
      &lt;li&gt;IAM 有继承关系, project &amp;gt; bucket &amp;gt; object
        &lt;ul&gt;
          &lt;li&gt;最低级的资源的 Policy 是它和它的祖先的所有 policy 的合集&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;用户或者应用都需要访问 Google Cloud 资源
        &lt;ul&gt;
          &lt;li&gt;IAM 可以提供服务: 配置谁, 访问什么资源, 访问什么内容, 可以做什么action&lt;/li&gt;
          &lt;li&gt;Authentication - 正确的用户&lt;/li&gt;
          &lt;li&gt;Authorization - 正确的访问权限&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Identify 可以是:
        &lt;ul&gt;
          &lt;li&gt;GCP User&lt;/li&gt;
          &lt;li&gt;A Group of GCP Users&lt;/li&gt;
          &lt;li&gt;一个 GCP 应用&lt;/li&gt;
          &lt;li&gt;一个 on premise 应用&lt;/li&gt;
          &lt;li&gt;未认证的外部用户&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;提供的控制包括 (对单个用户)
        &lt;ul&gt;
          &lt;li&gt;执行一个 single action&lt;/li&gt;
          &lt;li&gt;针对一个特定的 cloud resource&lt;/li&gt;
          &lt;li&gt;来自某个特定的 IP address&lt;/li&gt;
          &lt;li&gt;在一个特定的 time window&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;为一个同事赋予访问 storage bucket 的过程
    &lt;ul&gt;
      &lt;li&gt;概念
        &lt;ul&gt;
          &lt;li&gt;Role
            &lt;ul&gt;
              &lt;li&gt;包含一些 permission (提供对某些资源的某些actions)
                &lt;ul&gt;
                  &lt;li&gt;一个role 可以有多个permissions&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;Role 中并不定义 member/who
                &lt;ul&gt;
                  &lt;li&gt;Role 定义 “can do what”&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;分三种类型
                &lt;ul&gt;
                  &lt;li&gt;Basic Roles (现在google 已经不推荐了, 因为范围比较广, 如果给一个人设置了editor, 那么他可以编辑所有Project 下面的服务, 包括 GCE, GKE, Cloud Storage 等所有服务)
                    &lt;ul&gt;
                      &lt;li&gt;Owner
                        &lt;ul&gt;
                          &lt;li&gt;view + create + update + delete + billing&lt;/li&gt;
                        &lt;/ul&gt;
                      &lt;/li&gt;
                      &lt;li&gt;Editor
                        &lt;ul&gt;
                          &lt;li&gt;view + create + update + delete&lt;/li&gt;
                        &lt;/ul&gt;
                      &lt;/li&gt;
                      &lt;li&gt;Viewer
                        &lt;ul&gt;
                          &lt;li&gt;view&lt;/li&gt;
                        &lt;/ul&gt;
                      &lt;/li&gt;
                      &lt;li&gt;Billing Admin
                        &lt;ul&gt;
                          &lt;li&gt;view + billing&lt;/li&gt;
                        &lt;/ul&gt;
                      &lt;/li&gt;
                    &lt;/ul&gt;
                  &lt;/li&gt;
                  &lt;li&gt;Predefined Roles
                    &lt;ul&gt;
                      &lt;li&gt;Google 提前定义好的&lt;/li&gt;
                      &lt;li&gt;比如:
                        &lt;ul&gt;
                          &lt;li&gt;Storage Admin  (roles/storage.admin)
                            &lt;ul&gt;
                              &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;storage.buckets.*&lt;/code&gt;&lt;/li&gt;
                              &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;storage.objects.*&lt;/code&gt;&lt;/li&gt;
                            &lt;/ul&gt;
                          &lt;/li&gt;
                          &lt;li&gt;Storage Object Admin (roles/storage.objectAdmin)
                            &lt;ul&gt;
                              &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;storage.objects.*&lt;/code&gt;&lt;/li&gt;
                            &lt;/ul&gt;
                          &lt;/li&gt;
                          &lt;li&gt;Storage Object Viewer (roles/storage.objectViewer)
                            &lt;ul&gt;
                              &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;storage.objects.get&lt;/code&gt;&lt;/li&gt;
                              &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;storage.objects.list&lt;/code&gt;&lt;/li&gt;
                            &lt;/ul&gt;
                          &lt;/li&gt;
                          &lt;li&gt;Storage Object Creator  (roles/storage.objectCreator)&lt;/li&gt;
                          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;storage.objects.create&lt;/code&gt;&lt;/li&gt;
                        &lt;/ul&gt;
                      &lt;/li&gt;
                      &lt;li&gt;每个 Role 都有的 permission
                        &lt;ul&gt;
                          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;resourcemanager.projects.get&lt;/code&gt;&lt;/li&gt;
                          &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;resourcemanager.projects.list&lt;/code&gt;&lt;/li&gt;
                        &lt;/ul&gt;
                      &lt;/li&gt;
                    &lt;/ul&gt;
                  &lt;/li&gt;
                  &lt;li&gt;Custom Roles
                    &lt;ul&gt;
                      &lt;li&gt;我们自己定义的 Roles 来弥补 perdefined roles 不能满足的情况&lt;/li&gt;
                      &lt;li&gt;比如定义一个人, 除了可以 editor GCE 和 GKE 之外, 不能干别的事情&lt;/li&gt;
                      &lt;li&gt;只能应用在 Org 和 Project level, 不能在 folder level 应用&lt;/li&gt;
                      &lt;li&gt;一般用来设置指定的服务的访问权限&lt;/li&gt;
                    &lt;/ul&gt;
                  &lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Policy
            &lt;ul&gt;
              &lt;li&gt;指定 哪个 member/group/service account/workspace or cloud identity domain/外部用户 有什么 role
                &lt;ul&gt;
                  &lt;li&gt;一个member 可以有多个role, 是在policy 中定义的&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;指定有什么条件, 比如 Which Resources?, When?, From Where?&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;步骤
        &lt;ul&gt;
          &lt;li&gt;选择一个合适的 role - (ex. Storage Object Admin)&lt;/li&gt;
          &lt;li&gt;创建 Policy, 把同事和这个role 绑定&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Service Account 服务账号
    &lt;ul&gt;
      &lt;li&gt;为应用提供访问 GCP 资源&lt;/li&gt;
      &lt;li&gt;比如, 给一个 VM 访问Cloud Storage 的权限,而不用给VM创建一个个人账号&lt;/li&gt;
      &lt;li&gt;service account 也是资源, 如果某个人要访问, 也需要给一个role (editor or viewer) 才能访问&lt;/li&gt;
      &lt;li&gt;可以跨项目访问
        &lt;ul&gt;
          &lt;li&gt;In project B, add the service account from Project A and assign Storage Object Viewer Permission on the bucket&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Service account 有一个唯一的email 地址, 但不需要password
        &lt;ul&gt;
          &lt;li&gt;有公钥私钥&lt;/li&gt;
          &lt;li&gt;不能通过浏览器登录&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;服务账号的类型有三种
        &lt;ul&gt;
          &lt;li&gt;Default service account
            &lt;ul&gt;
              &lt;li&gt;当我们使用某些服务的时候, 系统会自动创建一个账号&lt;/li&gt;
              &lt;li&gt;一般不推荐我们使用&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;User Managed
            &lt;ul&gt;
              &lt;li&gt;用户自己创建的 Service account&lt;/li&gt;
              &lt;li&gt;推荐我们使用自定义的&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Google Managed service account
            &lt;ul&gt;
              &lt;li&gt;GCP 用来代替用户对服务进行管理的&lt;/li&gt;
              &lt;li&gt;我们不用管这种服务账号&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;服务账号在几个场景中的创建过程
        &lt;ul&gt;
          &lt;li&gt;场景 1: VM -&amp;gt; Cloud Storage
            &lt;ul&gt;
              &lt;li&gt;创建一个 Service account 给 VM&lt;/li&gt;
              &lt;li&gt;把Cloud Storage 的 &lt;strong&gt;IAM&lt;/strong&gt; role assign 给 VM 实例
                &lt;ul&gt;
                  &lt;li&gt;系统会自动创建 Google Cloud-Managed Keys , 并用于 assignment&lt;/li&gt;
                  &lt;li&gt;只要不删除 Service account, VM 就可以一只访问 cloud storage&lt;/li&gt;
                  &lt;li&gt;这个 Role 也是 IAM Role, 把这个 IAM role 给 service account&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;场景 2: on-prem -&amp;gt; Cloud Storage
            &lt;ul&gt;
              &lt;li&gt;我们不能直接把service account assign 给 on-premise 的 App&lt;/li&gt;
              &lt;li&gt;创建一个 service account&lt;/li&gt;
              &lt;li&gt;创建一个 service account User Managed Key&lt;/li&gt;
              &lt;li&gt;让 on-prem 的应用访问 key file
                &lt;ul&gt;
                  &lt;li&gt;本地设置一个环境变量 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;export GOOGLE_APPLICATION_CREDENTIALS=&quot;/PATH_TO_KEY_FILE&quot;&lt;/code&gt;&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;本地应用调用 Google Cloud Client Libraries , 就可以找到环境变量, 并访问 Cloud Storage&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;场景 3: Google Cloud APIs (Short Lived)
            &lt;ul&gt;
              &lt;li&gt;因为访问时短暂的, 使用 OAuth2.0 或者 OpenID 或者 JWTs token 就可以了&lt;/li&gt;
              &lt;li&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;ACL (Access Control Lists)
    &lt;ul&gt;
      &lt;li&gt;定义了谁可以访问 Bucket, 以及访问什么level&lt;/li&gt;
      &lt;li&gt;和 IAM 的区别
        &lt;ul&gt;
          &lt;li&gt;IAM 只能允许访问一个 Bucket 中的所有 objects
            &lt;ul&gt;
              &lt;li&gt;Uniform 的形式访问 Bucket&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;ACL 可以设定访问哪些 Objects
            &lt;ul&gt;
              &lt;li&gt;Fine-grained 的形式访问 Bucket.&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;IAM 允许用户访问 Object, 但是 ACL 没有允许, 用户也可以访问 Object.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Signed URL
    &lt;ul&gt;
      &lt;li&gt;让外部用户(无google cloud 账号的用户) 临时的访问 Bucket 中的 objects&lt;/li&gt;
      &lt;li&gt;创建流程
        &lt;ul&gt;
          &lt;li&gt;1: Create a key (YOUR_KEY) for the Service Account/User with the desired permissions&lt;/li&gt;
          &lt;li&gt;2: Create Signed URL with the key: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gsutil signurl -d 10m YOUR_KEY gs://BUCKET_NAME/OBJECT_PATH&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;用 Bucket 创建一个静态网站
    &lt;ul&gt;
      &lt;li&gt;创建一个bucket, 上传web 页面
        &lt;ul&gt;
          &lt;li&gt;bucket 的名字要和 DNS 中的域名保持一致&lt;/li&gt;
          &lt;li&gt;要有index.html 和 error.html&lt;/li&gt;
          &lt;li&gt;在bucket 中的 permission中 增加 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;allUser&lt;/code&gt; , 并赋予 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Storage Object Viewer&lt;/code&gt; 权限&lt;/li&gt;
          &lt;li&gt;bucket 就会出现 public URL 地址&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Policy 的 描述文件
    &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;bindings&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;role&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;roles/storage.objectAdmin&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;members&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;user:you@in28minutes.com&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;serviceAccount:myAppName@appspot.gserviceaccount.com&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  
              &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;group:administrators@in28minutes.com&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;domain:google.com&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;role&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;roles/storage.objectViewer&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;members&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;user:you@in28minutes.com&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;condition&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Limited time access&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;description&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Only upto Feb 2022&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;expression&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;request.time &amp;lt; timestamp(&apos;2022-02-01T00:00:00.000Z&apos;)&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gcloud&lt;/code&gt; 命令&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;gcloud compute project-info describe &lt;span class=&quot;c&quot;&gt;#- Describe current project&lt;/span&gt;
gcloud auth login &lt;span class=&quot;c&quot;&gt;#- Access the Cloud Platform with Google user credentials&lt;/span&gt;
gcloud auth revoke &lt;span class=&quot;c&quot;&gt;#- Revoke access credentials for an account&lt;/span&gt;
gcloud auth list &lt;span class=&quot;c&quot;&gt;#- List active accounts&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# gcloud projects&lt;/span&gt;
gcloud projects add-iam-policy-binding &lt;span class=&quot;c&quot;&gt;#- Add IAM policy binding&lt;/span&gt;
gcloud projects get-iam-policy &lt;span class=&quot;c&quot;&gt;#- Get IAM policy for a project&lt;/span&gt;
gcloud projects remove-iam-policy-binding &lt;span class=&quot;c&quot;&gt;#- Remove IAM policy binding &lt;/span&gt;
gcloud projects &lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt;-iam-policy &lt;span class=&quot;c&quot;&gt;# - Set the IAM policy&lt;/span&gt;
gcloud projects delete &lt;span class=&quot;c&quot;&gt;#- Delete a project&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# gcloud iam&lt;/span&gt;
gcloud iam roles describe &lt;span class=&quot;c&quot;&gt;#- Describe an IAM role&lt;/span&gt;
gcloud iam roles create &lt;span class=&quot;c&quot;&gt;#- create an iam role(--project, --permissions, --stage) &lt;/span&gt;
gcloud iam roles copy &lt;span class=&quot;c&quot;&gt;#- Copy IAM Roles&lt;/span&gt;

&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h4 id=&quot;iam-organization-billing-account-id-manager&quot;&gt;IAM, Organization, Billing Account, ID manager&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;IAM 中的几个概念
    &lt;ul&gt;
      &lt;li&gt;Google Account
        &lt;ul&gt;
          &lt;li&gt;一个人的账号, 一个 email 地址&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Service Account
        &lt;ul&gt;
          &lt;li&gt;一个应用账号, 提供访问一个服务所需要的权限&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Google Group
        &lt;ul&gt;
          &lt;li&gt;每个group 有一个对应的email 地址&lt;/li&gt;
          &lt;li&gt;group 下面可以有多个 Google Account&lt;/li&gt;
          &lt;li&gt;group 是跨project 的&lt;/li&gt;
          &lt;li&gt;policy 可以应用到 group 上&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Workspace
        &lt;ul&gt;
          &lt;li&gt;原来叫做 G suite&lt;/li&gt;
          &lt;li&gt;提供google 多种产品的 API , 比如 Google Chat, Gmail, Calendar, Meet 的 API&lt;/li&gt;
          &lt;li&gt;Workspace 下面的都是 SaaS 服务&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;GCP 的资源层级
    &lt;ul&gt;
      &lt;li&gt;Organization &amp;gt; Folder &amp;gt; Project &amp;gt; Resources&lt;/li&gt;
      &lt;li&gt;每个层级都可以单独设置 Policy, policy 向下继承&lt;/li&gt;
      &lt;li&gt;由较低级别的策略实施的 IAM 策略可以 覆盖在更高级别定义的策略(IAM policies that are implemented by lower-level policies can
override the policies defined at a higher level.) ?&lt;/li&gt;
      &lt;li&gt;组织是一个公司
        &lt;ul&gt;
          &lt;li&gt;org 有一些特殊权限的role, 比如 org.policy.administrator 专门负责修改权限&lt;/li&gt;
          &lt;li&gt;默认用gmail 创建的GCP 是不带 org 的, 需要自己去创建 org, 主要的两个原因是:
            &lt;ul&gt;
              &lt;li&gt;When you want to centrally apply organization-wide policies&lt;/li&gt;
              &lt;li&gt;When you want to create folders&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Folder 往往是一个部门
        &lt;ul&gt;
          &lt;li&gt;Folder 下面可以有 子Folder 和 projects&lt;/li&gt;
          &lt;li&gt;Folder 可以设置 Policy, 被下面所有的 Folder 和 Projects 继承&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Project 是一个项目的一个环境(开发/测试/生产)
        &lt;ul&gt;
          &lt;li&gt;为一个项目的不同环境创建不同项目&lt;/li&gt;
          &lt;li&gt;可以为要共享的资源创建共享目录&lt;/li&gt;
          &lt;li&gt;更容易为该环境的使用人员分配统一权限&lt;/li&gt;
          &lt;li&gt;所有的 GCP 资源都跟某个 Project 关联 (project 可以关联所有的 GCP 资源)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Resources 是 project 下的一个服务&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Billing Account (付费账户)
    &lt;ul&gt;
      &lt;li&gt;一个org 下面可以有多个 billing account
        &lt;ul&gt;
          &lt;li&gt;初创公司可以只有一个biiling account&lt;/li&gt;
          &lt;li&gt;大企业建议按组织的架构设计 billing account, 比如 IT, HR&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;一个 Billing account 下面可以有一个或多个项目&lt;/li&gt;
      &lt;li&gt;billing account 下面包含付费详细信息&lt;/li&gt;
      &lt;li&gt;可以为每个billing account 设置 budget, alter and export
        &lt;ul&gt;
          &lt;li&gt;比如设置 400 块钱的 budget, 然后设置在 200 块钱, 320 块, 400 块的时候进行 alert 提醒
            &lt;ul&gt;
              &lt;li&gt;alert 可以发送到
                &lt;ul&gt;
                  &lt;li&gt;email&lt;/li&gt;
                  &lt;li&gt;pub/sub&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;可以为已经花费的详细信息导出数据报表
            &lt;ul&gt;
              &lt;li&gt;可以在 Big Query 中进行查看分析&lt;/li&gt;
              &lt;li&gt;可以把历史的 export 存放到 cloud storage 中长期保存&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Organization policies
    &lt;ul&gt;
      &lt;li&gt;是跨项目的, 全组织级别的 policies&lt;/li&gt;
      &lt;li&gt;比如:
        &lt;ul&gt;
          &lt;li&gt;允许或者不允许在某个 region 创建资源&lt;/li&gt;
          &lt;li&gt;全组织不允许创建 Service Account&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;需要有 Organization Policy Administrator 这个 Role 才能进行编辑&lt;/li&gt;
      &lt;li&gt;Policy 是可以继承的, 从 Org &amp;gt; Folder &amp;gt; Project &amp;gt; Resource
        &lt;ul&gt;
          &lt;li&gt;Policy 可以在任何一个层级进行设置&lt;/li&gt;
          &lt;li&gt;Resources 会继承所有父层级的所有 policies
            &lt;ul&gt;
              &lt;li&gt;这个resrouce 上的有效 policy 是它和它的所有父 policy 的 并集 (Union)&lt;/li&gt;
              &lt;li&gt;父层设置的 Policy, 子层是不能进行限制和修改的的
                &lt;ul&gt;
                  &lt;li&gt;比如 Org policy 设置了不能创建 VM, 那么 folder level 和 project level 就算设置了可以创建 VM 也没用.&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;提示:
        &lt;ul&gt;
          &lt;li&gt;IAM 是 Who&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Org Policy 是 What&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;IAM 最佳实践
    &lt;ul&gt;
      &lt;li&gt;最少权限
        &lt;ul&gt;
          &lt;li&gt;按需提供权限, 不要给额外的, 不需要的权限&lt;/li&gt;
          &lt;li&gt;不建议给 Basic Roles (Owner/Viewer/Editor) 权限&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;分离权限
        &lt;ul&gt;
          &lt;li&gt;敏感的服务, 可以考虑把权限分给两个人, 每人负责一部分, 比如deploy 一个人, release 新版本 一个人&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;持续监控
        &lt;ul&gt;
          &lt;li&gt;用 cloud audit log 来审计  IAM policy 的使用 和 Service Account 的 key 的访问情况&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;尽量多的使用 Group
        &lt;ul&gt;
          &lt;li&gt;组中有多个用户, 可以绑定 role 和 group , 为多个用户赋予相同权限&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Identity management (谷歌云的 ID 管理)
    &lt;ul&gt;
      &lt;li&gt;普通用户
        &lt;ul&gt;
          &lt;li&gt;可以通过注册时使用的 Gmail 账号 可以作为 Super Admin 来访问 Organization, Folders, Projects&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;企业用户:
        &lt;ul&gt;
          &lt;li&gt;Option 1: Google Workspace
            &lt;ul&gt;
              &lt;li&gt;用户用企业自己的域名邮箱登录谷歌云&lt;/li&gt;
              &lt;li&gt;企业通过 Worksapce 管理用户, 组&lt;/li&gt;
              &lt;li&gt;把 Org 和 workspace 整合&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Option 2: Federation
            &lt;ul&gt;
              &lt;li&gt;用户用第三方的 Idp (Identity provider) 登录谷歌云
                &lt;ul&gt;
                  &lt;li&gt;步骤
                    &lt;ul&gt;
                      &lt;li&gt;用户登录时跳转到第三方 Idp 进行登录认证&lt;/li&gt;
                      &lt;li&gt;认证完成后, 再跳转回 google, 同时SAML assertion (断言) 会发送到 Google Sign-in&lt;/li&gt;
                      &lt;li&gt;好处 - 不需要保留用户登录的敏感信息到 GCP 上, 满足一些企业的合规要求.&lt;/li&gt;
                    &lt;/ul&gt;
                  &lt;/li&gt;
                  &lt;li&gt;第三方 Idp 包括
                    &lt;ul&gt;
                      &lt;li&gt;AD (Active Directory)
                        &lt;ul&gt;
                          &lt;li&gt;Google Cloud Directory Sync 可以同步 Google 和 (on-prem)AD 之间的用户和组的数据&lt;/li&gt;
                          &lt;li&gt;单向同步 (on-prem to GCP)&lt;/li&gt;
                          &lt;li&gt;同步之后, 就可以用 SAML 进行 SSO 登录&lt;/li&gt;
                        &lt;/ul&gt;
                      &lt;/li&gt;
                      &lt;li&gt;AAD (Azure Active Directorty)
                        &lt;ul&gt;
                          &lt;li&gt;AAD 可以整合 on premises 的 AD&lt;/li&gt;
                        &lt;/ul&gt;
                      &lt;/li&gt;
                    &lt;/ul&gt;
                  &lt;/li&gt;
                  &lt;li&gt;Federation 的场景
                    &lt;ul&gt;
                      &lt;li&gt;使用 IDaaS (比如 Okta) 作为 Idp, 进行 Single Sign On 登录&lt;/li&gt;
                      &lt;li&gt;使用 AD 作为 Idp 进行 SSO 登录&lt;/li&gt;
                      &lt;li&gt;使用 AAD 作为 Idp 进行 SSO 登录&lt;/li&gt;
                    &lt;/ul&gt;
                  &lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;IAM Member 和 ID 的场景
    &lt;ul&gt;
      &lt;li&gt;所有用户都有 G suit 账号, 我们创建了一个新的项目(生产) , 需要给运营团队提供访问权限.
        &lt;ul&gt;
          &lt;li&gt;方案
            &lt;ul&gt;
              &lt;li&gt;给运营团队创建一个组, 给这个组提供可以访问项目的权限&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;所有用户都有 G suit 账号, 我们创建了一个新的项目(生产) , 需要给一个团队成员提供访问权限.
        &lt;ul&gt;
          &lt;li&gt;方案
            &lt;ul&gt;
              &lt;li&gt;和上面的方案一样. 但如果只是一次性的临时访问, 就位这个人单独提供必要的 role 的访问权限&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;给一个外部的审计人员提供可以查看一个项目的所有资源, 他不能进行任何修改
        &lt;ul&gt;
          &lt;li&gt;方案
            &lt;ul&gt;
              &lt;li&gt;给审计人员提供 Basic Roles 的 roles/viewer role&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;项目 A 的一个 VM 上的应用需要访问项目 B 的 cloud storage 的 bucket.
        &lt;ul&gt;
          &lt;li&gt;方案
            &lt;ul&gt;
              &lt;li&gt;在 project B 中 给 Project A 的  VM 设置可以访问的 role&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;OAuth2.0 和 SAML 的不同场景
      1.  提到 Restful API 的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;authorization and authentication&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;delegated authorization&lt;/code&gt; 那就是 OAuth 2.0
      2.  想要用 google/youtube 账号登录一个 smart TV app, 就用 OAuth 2
      3.  提到 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Identity management&lt;/code&gt; , 企业内部软件放到 GCP 上, 要用企业内部  ID 进行 SSO 登录 , 就是 SAML&lt;br /&gt;
      4.  要选择一个 protocol 来进行 SSO 登录, 那就是 SAML&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;identity-aware-proxy-iap&quot;&gt;Identity Aware Proxy (IAP)&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;提供登录认证授权服务&lt;/li&gt;
  &lt;li&gt;当您要对应用和资源强制执行访问权限控制政策时，请使用 IAP&lt;/li&gt;
  &lt;li&gt;比如对指定的用户,组授权访问资源&lt;/li&gt;
  &lt;li&gt;比如您可以允许员工但不允许承包商使用某一资源，或者只允许特定部门使用该资源。&lt;/li&gt;
  &lt;li&gt;IAP 可以使用  Google Cloud Directory Sync 与 Active Directory 或 LDAP 服务器同步 后的用户和组数据进行登录.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;identity-platform&quot;&gt;Identity Platform&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;为客户的应用提供登录认证服务, 可以称为 CIAM&lt;/li&gt;
  &lt;li&gt;和 IAM 区别
    &lt;ul&gt;
      &lt;li&gt;IAM 是提供用户访问谷歌云里的服务的认证机制&lt;/li&gt;
      &lt;li&gt;CIAM 是为用户的应用提供认证的机制&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;主要功能
    &lt;ul&gt;
      &lt;li&gt;Authentication &amp;amp; authorization for web &amp;amp; mobile apps (iOS, Android, ..)&lt;/li&gt;
      &lt;li&gt;Multiple authentication methods
        &lt;ul&gt;
          &lt;li&gt;SAML, OIDC, email/password, phone, social - Google/Facebook/Twitter/..&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Features: User sign-up and sign-in, MFA etc.&lt;/li&gt;
      &lt;li&gt;是从 Firebase Authentication Legacy 演化而来的&lt;/li&gt;
      &lt;li&gt;完美集成了 Identity-Aware Proxy&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;使用 IAM 和 CIAM 的场景
    &lt;ul&gt;
      &lt;li&gt;An Application on a GCE VM needs access to cloud storage
        &lt;ul&gt;
          &lt;li&gt;Cloud IAM - Service Account&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;An enterprise user need access to upload objects to a Cloud Storage bucket
        &lt;ul&gt;
          &lt;li&gt;Cloud IAM&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;I want to manage end users for my application
        &lt;ul&gt;
          &lt;li&gt;Identity Platform&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;I want to enable “Login using facebook/twitter” for my application
        &lt;ul&gt;
          &lt;li&gt;Identity Platform&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;I want to create user sign-up and sign-in workflows for my application
        &lt;ul&gt;
          &lt;li&gt;Identity Platform&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;和 Service Account 的区别
    &lt;ul&gt;
      &lt;li&gt;service accoutn 是 GCP 内部的服务之间互相访问的权限机制&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;cloud-armor&quot;&gt;Cloud Armor&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;是一个防止 DDos 网络攻击解决方案库, 收集每年的 OWASP Top 10 attacks, 并提供保护机制&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;secret-manager&quot;&gt;Secret Manager&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;存放数据库密码, API key credentials&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;security-command-center&quot;&gt;Security Command Center&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;用 Security Command Center 分析 infra 的安全
    &lt;ul&gt;
      &lt;li&gt;功能
        &lt;ul&gt;
          &lt;li&gt;维护 compliance&lt;/li&gt;
          &lt;li&gt;发现风险 (对现有的project, 资源…)&lt;/li&gt;
          &lt;li&gt;可视化风险&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;可以对多个 GCP 服务进行安全管理&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-02-27-084817.jpg&quot; alt=&quot;&quot; /&gt;
&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-02-27-085056.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;h4 id=&quot;network-intelligence-center&quot;&gt;Network Intelligence Center&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;用 Network Intelligence Center 监控网络, 检查网络拓扑和架构&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;operations-and-monitoring&quot;&gt;Operations and Monitoring&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Cloud Operation 原来的名字是 Stackdriver, 包含了
    &lt;ul&gt;
      &lt;li&gt;Cloud Monitoring&lt;/li&gt;
      &lt;li&gt;Cloud Logging&lt;/li&gt;
      &lt;li&gt;Cloud Trace&lt;/li&gt;
      &lt;li&gt;Cloud Debugger&lt;/li&gt;
      &lt;li&gt;Cloud Profiler&lt;/li&gt;
      &lt;li&gt;Cloud Error Reporting
        &lt;h4 id=&quot;cloud-monitoring&quot;&gt;Cloud Monitoring&lt;/h4&gt;
      &lt;/li&gt;
      &lt;li&gt;需要先建立 workspace (orgnization) 才能监控多个项目&lt;/li&gt;
      &lt;li&gt;可以监控服务的 metrics
        &lt;ul&gt;
          &lt;li&gt;CPU&lt;/li&gt;
          &lt;li&gt;Network&lt;/li&gt;
          &lt;li&gt;Process matrics&lt;/li&gt;
          &lt;li&gt;Disk traffic&lt;/li&gt;
          &lt;li&gt;Uptime&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;可自定义监控指标 (custom metrics)&lt;/li&gt;
      &lt;li&gt;需要在 VM 上安装 Cloud Monitoring agent&lt;/li&gt;
      &lt;li&gt;可以创建 dashboard 来视觉化监控内容和结果&lt;/li&gt;
      &lt;li&gt;可以配置 Alert 来提供报警
        &lt;ul&gt;
          &lt;li&gt;Condition&lt;/li&gt;
          &lt;li&gt;Notification&lt;/li&gt;
          &lt;li&gt;Documentation&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;可监控 GCP 的多个项目 和 AWS 服务&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;opentelemetry&quot;&gt;OpenTelemetry&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;不是谷歌云的服务&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://opentelemetry.io&quot;&gt;Opentelemetry&lt;/a&gt; 一个遵循 CNCF 的, 跨平台的, 开源监控服务&lt;/li&gt;
  &lt;li&gt;Steps to use OpenTelemetry:
1: Add OpenTelemetry libraries (for your specific language) to your project
2: Instrument your code to export telemetry&lt;/li&gt;
  &lt;li&gt;下游:
    &lt;ul&gt;
      &lt;li&gt;Google Cloud Monitoring&lt;/li&gt;
      &lt;li&gt;Google Cloud Logging&lt;/li&gt;
      &lt;li&gt;Google Cloud Trace&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;X-Cloud-Trace-Context&lt;/code&gt; header 放指定参数, 来跟踪某个请求
    &lt;ul&gt;
      &lt;li&gt;To force a specific request to be traced, add an X-Cloud-Trace-Context header to the request.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;cloud-logging&quot;&gt;Cloud Logging&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;可以从所有的服务中获取实时日志进行分析
    &lt;ul&gt;
      &lt;li&gt;大多数Google managed service (无服务)都是自动发送日志到 Cloud Logging&lt;/li&gt;
      &lt;li&gt;VM 是通过 安装 Logging Agent (基于 Fluentd) 想 Cloud Logging 发送日志
        &lt;ul&gt;
          &lt;li&gt;建议所有 VM 都安装 Logging Agent&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;On-premises 的服务器或者虚机可以通过下面两种方式发送日志
        &lt;ul&gt;
          &lt;li&gt;Blue Medora 的 BindPlane tool (推荐)&lt;/li&gt;
          &lt;li&gt;Cloud Logging API&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;可提供日志的获取, 存储, 搜索, 分析, 监控, 报警&lt;/li&gt;
  &lt;li&gt;可以自定义 log 的 metrics (Cloud Logging lets you define metrics based on your logs.)&lt;/li&gt;
  &lt;li&gt;&lt;/li&gt;
  &lt;li&gt;无服务&lt;/li&gt;
  &lt;li&gt;主要功能
    &lt;ul&gt;
      &lt;li&gt;Logs Explorer - Search, sort &amp;amp; analyze using flexible queries&lt;/li&gt;
      &lt;li&gt;Logs Dashboard - Rich visualization&lt;/li&gt;
      &lt;li&gt;Logs Metrics - Capture metrics from logs (using queries/matching strings&lt;/li&gt;
      &lt;li&gt;Logs Router - Route different log entries to different destinations&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;审计日志
    &lt;ul&gt;
      &lt;li&gt;提供
        &lt;ul&gt;
          &lt;li&gt;对什么服务&lt;/li&gt;
          &lt;li&gt;做了什么操作&lt;/li&gt;
          &lt;li&gt;对什么资源进行了audit&lt;/li&gt;
          &lt;li&gt;谁进触发的日志&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;日志可以导出到以下服务中, 进行后续操作
    &lt;ul&gt;
      &lt;li&gt;Pub/sub&lt;/li&gt;
      &lt;li&gt;BigQuery&lt;/li&gt;
      &lt;li&gt;Cloud Storage&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;日志保存
    &lt;ul&gt;
      &lt;li&gt;普通日志: 默认 30 天,  最大 3650 天 (10 年)&lt;/li&gt;
      &lt;li&gt;管理日志: 默认 400 天
        &lt;h4 id=&quot;access-transparency-log-访问透明日志&quot;&gt;Access Transparency Log (访问透明日志)&lt;/h4&gt;
        &lt;ul&gt;
          &lt;li&gt;提供 GCP 团队访问我们的服务的日志 (只有 Gold 级别的客户才会有这个服务)
            &lt;h4 id=&quot;cloud-audit-logs-审计日志&quot;&gt;Cloud Audit Logs (审计日志)&lt;/h4&gt;
          &lt;/li&gt;
          &lt;li&gt;四种
            &lt;ul&gt;
              &lt;li&gt;Admin Activity Logs
                &lt;ul&gt;
                  &lt;li&gt;以管理员身份登录的用户进行的操作日志&lt;/li&gt;
                  &lt;li&gt;比如 VM 的创建, 打补丁, 修改 IAM 权限&lt;/li&gt;
                  &lt;li&gt;比如 修改bucket or object&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;Data Access Logs
                &lt;ul&gt;
                  &lt;li&gt;数据访问日志&lt;/li&gt;
                  &lt;li&gt;比如 VM 的 Listing, Image 的 listing&lt;/li&gt;
                  &lt;li&gt;比如 Bucket 和 object 的 修改和查看, 比如 BigQuery 的 query 查询
                    &lt;ul&gt;
                      &lt;li&gt;如果为了审计要求, 要记录一个bucket 中的所有的活动行为
                        &lt;ul&gt;
                          &lt;li&gt;为 Bucket 开启 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;data access audit logging&lt;/code&gt;&lt;/li&gt;
                        &lt;/ul&gt;
                      &lt;/li&gt;
                    &lt;/ul&gt;
                  &lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;System Event Audit Logs
                &lt;ul&gt;
                  &lt;li&gt;非人为的系统级别日志&lt;/li&gt;
                  &lt;li&gt;比如虚机自动重启, GCP 系统维护&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;Policy Denied Audit Logs
                &lt;ul&gt;
                  &lt;li&gt;用户或者Service account 访问被拒绝&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;日志的路由 (Routing)
    &lt;ul&gt;
      &lt;li&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-01-07-155107.jpg&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
      &lt;li&gt;Log 从不同的来源都要经过 Routing&lt;/li&gt;
      &lt;li&gt;路由通过查看规则决定将什么来源的日志, 需要经过什么样的过滤/筛选, 最后发送到什么地方&lt;/li&gt;
      &lt;li&gt;Sinks 是路由规则&lt;/li&gt;
      &lt;li&gt;Log 经过路由可以保存到:
        &lt;ul&gt;
          &lt;li&gt;Locked sinks (默认的日志存放方式)
            &lt;ul&gt;
              &lt;li&gt;_Required logs bucket
                &lt;ul&gt;
                  &lt;li&gt;存放管理事件, 系统事件, Access Transparency logs&lt;/li&gt;
                  &lt;li&gt;保存 400 天 (不能改)&lt;/li&gt;
                  &lt;li&gt;免费, 不能删掉bucket&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;_Default logs bucket
                &lt;ul&gt;
                  &lt;li&gt;其他类型系统日志&lt;/li&gt;
                  &lt;li&gt;保存 30 天 (可改成 1 天到 10 年)&lt;/li&gt;
                  &lt;li&gt;不能删, 但是可以disable&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;User-managed Log Sinks (用户自定义的日志导出, 长期存放的下游服务)
            &lt;ul&gt;
              &lt;li&gt;Cloud Storage&lt;/li&gt;
              &lt;li&gt;BigQuery&lt;/li&gt;
              &lt;li&gt;Pub/Sub&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;日志使用场景
    &lt;ul&gt;
      &lt;li&gt;VM 的 trouble shooting
        &lt;ul&gt;
          &lt;li&gt;安装 Cloud logging agent 把日志导到 Cloud Logging&lt;/li&gt;
          &lt;li&gt;在Cloud Logging 导出的日志中搜索线索&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;用 BigQuery 查询和分析日志
        &lt;ul&gt;
          &lt;li&gt;安装 Cloud logging agent 把日志导到 Cloud Logging&lt;/li&gt;
          &lt;li&gt;创建 BigQuery 数据库&lt;/li&gt;
          &lt;li&gt;在 Cloud Logging 中创建 Sink, 把log 在按照规则导出到 BigQuery&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;保留日志给外部审计使用
        &lt;ul&gt;
          &lt;li&gt;在 Cloud Logging 中创建 Sink , 把log 导到自己创建的bucket 中&lt;/li&gt;
          &lt;li&gt;在 Bucket 中为审计员创建 Storage Object Viewer role&lt;/li&gt;
          &lt;li&gt;也可以用 Google Data Studio 看分析图形数据&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;stackdrive-log&quot;&gt;Stackdrive log&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;就是 Cloud log 原来的名字&lt;/li&gt;
  &lt;li&gt;收集各种日志, stackdriver is google’s recommended tool for monitoring and debbuging&lt;/li&gt;
  &lt;li&gt;场景:
    &lt;ul&gt;
      &lt;li&gt;测试 灾难计划&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Stackdriver logs对比 (Admin) Activity logs
    &lt;ul&gt;
      &lt;li&gt;(Admin) Activity logs 是用来查看系统被用户使用的情况的
        &lt;ul&gt;
          &lt;li&gt;以管理员身份登录的用户进行的操作日志&lt;/li&gt;
          &lt;li&gt;比如 VM 的创建, 打补丁, 修改 IAM 权限&lt;/li&gt;
          &lt;li&gt;比如 修改bucket or object&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Stackdriver logs 可以看系统级别的事件
        &lt;ul&gt;
          &lt;li&gt;可以从所有的服务中获取实时日志进行分析和debug&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;cloud-trace&quot;&gt;Cloud Trace&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;相当于浏览器的网页加载过程分析工具, 像甘特图一样展示所有元素的加载时间和依赖关系.&lt;/li&gt;
  &lt;li&gt;它可以告诉你
    &lt;ul&gt;
      &lt;li&gt;• How long does it take to handle a given request?&lt;/li&gt;
      &lt;li&gt;. Why is it taking so long to handle a request?&lt;/li&gt;
      &lt;li&gt;• Why do some of the requests take longer than others?&lt;/li&gt;
      &lt;li&gt;• What is the overall latency of requests for the application?&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;分布式跟踪系统&lt;/li&gt;
  &lt;li&gt;通过对应用的tracing , 获取应用每个步骤的延迟(读取)时间数据, 并进行分析, 找出性能瓶颈&lt;/li&gt;
  &lt;li&gt;通过 Cloud Trace API 可以跟踪很多服务
    &lt;ul&gt;
      &lt;li&gt;Compute Engine&lt;/li&gt;
      &lt;li&gt;Cloud Run&lt;/li&gt;
      &lt;li&gt;Cloud Function&lt;/li&gt;
      &lt;li&gt;GKE&lt;/li&gt;
      &lt;li&gt;App Engine (Flexible/Standard)&lt;/li&gt;
      &lt;li&gt;…&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;支持的语言包括
    &lt;ul&gt;
      &lt;li&gt;C#, Go, Java, Node.js, PHP, Python &amp;amp; Ruby
        &lt;h4 id=&quot;cloud-debugger&quot;&gt;Cloud Debugger&lt;/h4&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;可让您在任意代码位置检查应用状态，既不需要停止正在运行的应用，也不会导致应用性能下降&lt;/li&gt;
  &lt;li&gt;部署，包括测试、开发和生产。只有在捕获应用状态时，调试程序才会在请求延迟时间内增加不到 10 毫秒的时间&lt;/li&gt;
  &lt;li&gt;Take snapshots of variables and call stack&lt;/li&gt;
  &lt;li&gt;No need to add logging statements&lt;/li&gt;
  &lt;li&gt;支持的语言包括
    &lt;ul&gt;
      &lt;li&gt;Python、 Node.js、 Java、 Go、 Ruby、 PHP 或 .NET Core
        &lt;h4 id=&quot;cloud-profiler&quot;&gt;Cloud Profiler&lt;/h4&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;系统性能瓶颈 的剖析工具
    &lt;ul&gt;
      &lt;li&gt;分析 CPU ,内存&lt;/li&gt;
      &lt;li&gt;从源代码中剖析, 找到性能瓶颈&lt;/li&gt;
      &lt;li&gt;可以分析运行在不同平台环境的应用, 包括
        &lt;ul&gt;
          &lt;li&gt;GCP&lt;/li&gt;
          &lt;li&gt;AWS,Azure,…&lt;/li&gt;
          &lt;li&gt;on-premise&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;功能包括
        &lt;ul&gt;
          &lt;li&gt;Profiling agent (获取剖析数据)&lt;/li&gt;
          &lt;li&gt;Profiler interface (查看数据报表)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;支持的开发语言
        &lt;ul&gt;
          &lt;li&gt;Java&lt;/li&gt;
          &lt;li&gt;go&lt;/li&gt;
          &lt;li&gt;python&lt;/li&gt;
          &lt;li&gt;node.js
            &lt;h4 id=&quot;error-reporing&quot;&gt;Error Reporing&lt;/h4&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;实时获取生产环境的异常问题&lt;/li&gt;
  &lt;li&gt;把所有的 error 集中在 console 中管理&lt;/li&gt;
  &lt;li&gt;使用 Firebase Crash Reporting (放在手机上跟踪app crash 的) 获取 iOS 和 Android 的崩溃信息&lt;/li&gt;
  &lt;li&gt;可以看到error 详细信息
    &lt;ul&gt;
      &lt;li&gt;时间,频率, 影响的用户账号登&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;特支持开发语言包括
    &lt;ul&gt;
      &lt;li&gt;Go, Java, .NET, Node.js, PHP, Python, and Ruby&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;os-patch-management&quot;&gt;OS Patch Management&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;给  VM 的操作系统机型升级管理的&lt;/li&gt;
  &lt;li&gt;包含两部分
    &lt;ul&gt;
      &lt;li&gt;Patch compliance reporting
        &lt;ul&gt;
          &lt;li&gt;which provides insights on the patch status of your VM instances across Windows and Linux distributions. Along with the insights, you can also view recommendations for your VM instances.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Patch deployment
        &lt;ul&gt;
          &lt;li&gt;which automates the operating system and software patch update process. A patch deployment schedules patch jobs. A patch job runs across VM instances and applies patches.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;cloud-operations-for-gke&quot;&gt;Cloud Operations for GKE&lt;/h4&gt;
&lt;ol&gt;
  &lt;li&gt;You can view a cluster’s key metrics, such as CPU utilization, memory utilization, and the number of open incidents.&lt;/li&gt;
  &lt;li&gt;You can view clusters by their infrastructure, workloads, or services.&lt;/li&gt;
  &lt;li&gt;You can inspect namespaces, nodes, workloads, services, pods, and containers.&lt;/li&gt;
  &lt;li&gt;For pods and containers, you can view metrics as a function of time and view log entries.&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;场景&quot;&gt;场景&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;跟踪对微服务的一个请求
    &lt;ul&gt;
      &lt;li&gt;Cloud Trace&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;确定一个微服务的 异常 (error)
    &lt;ul&gt;
      &lt;li&gt;Error Reporting&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;再生产上 一步一步 Debug 一个问题
    &lt;ul&gt;
      &lt;li&gt;Cloud Debugger&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;要看一个请求的日志
    &lt;ul&gt;
      &lt;li&gt;Cloud Logging&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;为了审计要求, 要记录一个bucket 中的所有的活动行为
    &lt;ul&gt;
      &lt;li&gt;为 Bucket 开启 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;data access audit logging&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;complaiance-and-regulations-合规&quot;&gt;Complaiance and Regulations 合规&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;谷歌云支持合规&lt;/li&gt;
  &lt;li&gt;用谷歌云的用户也需要确保自己在云上的应用合规&lt;/li&gt;
  &lt;li&gt;客户如果要保证合规, 需要和 google 签署一份 BAA (Business Associate Agreement)&lt;/li&gt;
  &lt;li&gt;谷歌云支持多种认证和标准
    &lt;ul&gt;
      &lt;li&gt;ISO/IEC 27001
        &lt;ul&gt;
          &lt;li&gt;security controls , 管理信息风险&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;ISO/IEC 27017
        &lt;ul&gt;
          &lt;li&gt;information security controls , 云服务&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;ISO/IEC 27018
        &lt;ul&gt;
          &lt;li&gt;云的个人隐私数据安全,  critical components of cloud privacy - personally identifiable information (PII)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;ISO/IEC 27701
        &lt;ul&gt;
          &lt;li&gt;国际隐私标准&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;PCI DSS
        &lt;ul&gt;
          &lt;li&gt;Payment Card Industry (PCI) Data Security Standards (DSS)&lt;/li&gt;
          &lt;li&gt;PCI DSS: PCI 支付卡的数据安全标准&lt;/li&gt;
          &lt;li&gt;用 tokenizer service 加密信用卡中的敏感信息
            &lt;ul&gt;
              &lt;li&gt;tokenizer service 是用来对信用卡的敏感信息做对应的token, 有了这个 token 就不用保存信用卡的敏感信息了, 也就合规了.&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;22 年,  GCP 整体都满足了  PCI 的合规要求, 但是客户仍然需要自己配置环境, 让自己的应用满足 PIC 合规&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;SOC 1
        &lt;ul&gt;
          &lt;li&gt;审计, 供应商的服务&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;SOC 2
        &lt;ul&gt;
          &lt;li&gt;审计, 服务供应商的安全,  可用, 隐私, 保密.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;COPPA
        &lt;ul&gt;
          &lt;li&gt;儿童线上隐私保护 Children’s Online Privacy Protection Act&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;HIPAA
        &lt;ul&gt;
          &lt;li&gt;健康保险便携义务 Health Insurance Portability and Accountability Act&lt;/li&gt;
          &lt;li&gt;Reference: https://cloud.google.com/security/compliance/hipaa/&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;GDPR
        &lt;ul&gt;
          &lt;li&gt;欧洲数据保护 General Data Protection Regulation&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;HIPAA 最佳实践
    &lt;ul&gt;
      &lt;li&gt;应用 IAM 最佳实践&lt;/li&gt;
      &lt;li&gt;开启 Cloud Storage buckets 的 版本功能&lt;/li&gt;
      &lt;li&gt;开启 Autid log, 并把log 存到 Cloud Storage 中&lt;/li&gt;
      &lt;li&gt;不要对 PHI 的信息 缓存到 Cloud CDN&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;PCI 最佳实践
    &lt;ul&gt;
      &lt;li&gt;碰到有支付的应用, 为支付环境创建一个单独的账号和环境
        &lt;ul&gt;
          &lt;li&gt;隔离其他环境&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;限制对这个环境的访问
        &lt;ul&gt;
          &lt;li&gt;Follow “principle of least privilege”&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;控制进和出的流量
        &lt;ul&gt;
          &lt;li&gt;inbound: 通过 firewall rule 控制, 只允许
            &lt;ul&gt;
              &lt;li&gt;https&lt;/li&gt;
              &lt;li&gt;同一个内网网段访问&lt;/li&gt;
              &lt;li&gt;办公室的网络(给审计和管理用)&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;outbound: 只允许
            &lt;ul&gt;
              &lt;li&gt;https&lt;/li&gt;
              &lt;li&gt;反馈给 third-party payment processor&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;应用
            &lt;ul&gt;
              &lt;li&gt;用 compute engine 和 GKE 来跑应用
                &lt;ul&gt;
                  &lt;li&gt;不建议 App Engine 和 Cloud Function ,因为他们不支持 outbound cloud firewall rule&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;创建 HTTPS 的 Load Balancer, 并绑定SSL 证书&lt;/li&gt;
      &lt;li&gt;使用 harden (成熟的, 官方的) Linux Image&lt;/li&gt;
      &lt;li&gt;只安装必要软件&lt;/li&gt;
      &lt;li&gt;自动化 DevOps, 少人工干预&lt;/li&gt;
      &lt;li&gt;用开源软件进行安全管理, 定期升级安全补丁&lt;/li&gt;
      &lt;li&gt;开启
        &lt;ul&gt;
          &lt;li&gt;VPC Flow Log&lt;/li&gt;
          &lt;li&gt;Access Transparency Logs&lt;/li&gt;
          &lt;li&gt;Firewall Rules Logging&lt;/li&gt;
          &lt;li&gt;Configure Monitoring Alert&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Log 保存到 Cloud Storage, 或 BigQuery 进行分析&lt;/li&gt;
      &lt;li&gt;开启 Cloud Data Loss Prevention 权限来限制数据访问&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;migration-to-gcp-云迁移和整合&quot;&gt;Migration to GCP 云迁移和整合&lt;/h3&gt;
&lt;h4 id=&quot;云迁移&quot;&gt;云迁移&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;云迁移的几个阶段
    &lt;ul&gt;
      &lt;li&gt;Phase 1: Assess the workloads to be migrated
        &lt;ul&gt;
          &lt;li&gt;评估要迁移到云上的内容
            &lt;ul&gt;
              &lt;li&gt;对要迁移的应用进行整理和分类&lt;/li&gt;
              &lt;li&gt;做一些实验和 POC 验证&lt;/li&gt;
              &lt;li&gt;计算迁移成本&lt;/li&gt;
              &lt;li&gt;确定要迁移的应用和先后顺序
                &lt;ul&gt;
                  &lt;li&gt;可以基于:
                    &lt;ul&gt;
                      &lt;li&gt;Business value&lt;/li&gt;
                      &lt;li&gt;Teams&lt;/li&gt;
                      &lt;li&gt;Dependencies&lt;/li&gt;
                      &lt;li&gt;Refactoring effort&lt;/li&gt;
                      &lt;li&gt;Licensing and compliance needs&lt;/li&gt;
                      &lt;li&gt;Availability and reliability requirements&lt;/li&gt;
                    &lt;/ul&gt;
                  &lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Phase 2: Plan the foundation
        &lt;ul&gt;
          &lt;li&gt;设置云端环境
            &lt;ul&gt;
              &lt;li&gt;设计 资源org 层级, 配置 IAM, 设计网络拓扑和连接(GCP 内部连接, 云和 on-premise 连接)&lt;/li&gt;
              &lt;li&gt;安全, 监控和治理计划&lt;/li&gt;
              &lt;li&gt;组建迁移团队&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Phase 3: Deploy the workloads
        &lt;ul&gt;
          &lt;li&gt;迁移应用和数据
            &lt;ul&gt;
              &lt;li&gt;数据迁移
                &lt;ul&gt;
                  &lt;li&gt;评估成本, 时间窗口, 实时和批量迁移, 数据安全&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;应用部署&lt;/li&gt;
              &lt;li&gt;进行自动化
                &lt;ul&gt;
                  &lt;li&gt;Automate configuration management with Ansible, Chef or Puppet&lt;/li&gt;
                  &lt;li&gt;Automate build and deployment using Jenkins, SonarQube, Cloud Build or Spinnaker&lt;/li&gt;
                  &lt;li&gt;Implement Infrastructure as Code using Terraform or Deployment Manager&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Phase 4: Optimize your environment
        &lt;ul&gt;
          &lt;li&gt;迁移后进行优化
            &lt;ul&gt;
              &lt;li&gt;提供日志, 监控和报警支持&lt;/li&gt;
              &lt;li&gt;增加无服务比例&lt;/li&gt;
              &lt;li&gt;通过 autoscaling 优化成本&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;几种云迁移方式
    &lt;ul&gt;
      &lt;li&gt;Retaining: 不迁移(保留在 on-premise)&lt;/li&gt;
      &lt;li&gt;Retiring: 淘汰掉老旧不用的服务&lt;/li&gt;
      &lt;li&gt;Rehosting: 原来应用啥样还啥样, 直接放到云上, 换个环境&lt;/li&gt;
      &lt;li&gt;Replatforming: 对原有应用简单调整, 比如进行容器化&lt;/li&gt;
      &lt;li&gt;Repurchasing: 对原有应用进行云改造, 比如换个云数据库&lt;/li&gt;
      &lt;li&gt;Refactoring: 重构, 不如做成微服务, 无服务&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;两个云迁移案例
    &lt;ul&gt;
      &lt;li&gt;MS SQL Server 迁移到谷歌云的步骤如下:
        &lt;ul&gt;
          &lt;li&gt;Create a Cloud SQL for SQL Server instance&lt;/li&gt;
          &lt;li&gt;Move backup of your database to Cloud Storage&lt;/li&gt;
          &lt;li&gt;Import the database into Cloud SQL for SQL Server&lt;/li&gt;
          &lt;li&gt;Validate the imported data&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;容器迁移到谷歌云的几个选项:
        &lt;ul&gt;
          &lt;li&gt;迁移到:
            &lt;ul&gt;
              &lt;li&gt;App Engine flexible environment
                &lt;ul&gt;
                  &lt;li&gt;不能定制底层 VM 环境, 但马上就可以用, 很少的环境管理负担, 可伸缩性强, 但不能缩到零&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;Cloud Run and Cloud Run for Anthos
                &lt;ul&gt;
                  &lt;li&gt;不能定制环境, 但是可以马上就用, 没有环境管理负担, 可伸缩性强, 可以缩到零&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;GKE and Anthos clusters
                &lt;ul&gt;
                  &lt;li&gt;比较麻烦, 需要自己配置管理 Cluster, 但是比较灵活, Highly scalable&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;Compute Engine
                &lt;ul&gt;
                  &lt;li&gt;不推荐, 啥都要自己配置, 太麻烦&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;迁移大量数据的计算&quot;&gt;迁移大量数据的计算&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;例如 迁移200T的数据， 带宽是100Mbps , 需要多长时间
    &lt;ul&gt;
      &lt;li&gt;按 1Gbps 与 1T 是 3 小时 -&amp;gt; 6000 小时 -&amp;gt; 250 天&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;数据迁移的时间表&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-02-10-092444.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;数据迁移的方案选择
    &lt;ol&gt;
      &lt;li&gt;aws 到 GCS 建议用 Storage Transfer Service&lt;/li&gt;
      &lt;li&gt;GCS 到 GCS 建议用 Storage Transfer Service&lt;/li&gt;
      &lt;li&gt;on-prem 迁到 GCS 带宽够用, 1T 以下的数据迁移 , 用 gsutil&lt;/li&gt;
      &lt;li&gt;on-prem 迁到 GCS 带宽够用, 1T 以上的数据迁移 , Storage Transfer Service&lt;/li&gt;
      &lt;li&gt;on-prem 迁到 GCS 带宽不够用, 花费时间不满足业务要求, transfer appliance&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;cloud-scheduler&quot;&gt;Cloud Scheduler&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;google cloud 的 cron job&lt;/li&gt;
  &lt;li&gt;scheduler 底层是一个 Google App Engine 的 cron 服务&lt;/li&gt;
  &lt;li&gt;使用 Unix cron 格式&lt;/li&gt;
  &lt;li&gt;自动重试功能&lt;/li&gt;
  &lt;li&gt;前提:
    &lt;ul&gt;
      &lt;li&gt;需要先在项目中建立一个 GAE&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;案例
    &lt;ul&gt;
      &lt;li&gt;scheduler 发送信息到 pub/sub&lt;/li&gt;
      &lt;li&gt;GCE 的多个实例从 pub/sub 中读取信息, 然后进行处理&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;cloud-emulators&quot;&gt;Cloud Emulators&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;模拟的开发环境 (sandbox)&lt;/li&gt;
  &lt;li&gt;用于在无法连接到 GCP 的时候, 开发人员可以在自己的机器上模拟 GCP 进行应用开发&lt;/li&gt;
  &lt;li&gt;支持模拟:
    &lt;ul&gt;
      &lt;li&gt;Cloud Bigtable&lt;/li&gt;
      &lt;li&gt;Cloud Datastore/ Firestore&lt;/li&gt;
      &lt;li&gt;Cloud Pub Sub&lt;/li&gt;
      &lt;li&gt;Cloud Spanner&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;managed-service-for-microsoft-active-directory&quot;&gt;Managed Service for Microsoft Active Directory&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;也是 Active Directory Federation Service (AD FS)&lt;/li&gt;
  &lt;li&gt;For single sign-on&lt;/li&gt;
  &lt;li&gt;synchronize users and groups from Active Directory to Cloud Identity&lt;/li&gt;
  &lt;li&gt;将您的本地 AD 网域连接到云端&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;pricing-calculator&quot;&gt;Pricing Calculator&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://cloud.google.com/products/calculator?hl=zh-cn&quot;&gt;价格计算器&lt;/a&gt; , 计算 GCP 中不同服务的价格&lt;/li&gt;
  &lt;li&gt;支持 40 多种服务&lt;/li&gt;
  &lt;li&gt;注意, 这只是计算器, 并没有直接和我们的项目中的已经使用的服务绑定&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;hybrid-and-multi-cloud&quot;&gt;Hybrid and Multi-cloud&lt;/h3&gt;

&lt;h4 id=&quot;anthos&quot;&gt;Anthos&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;混合多云的集成开发环境&lt;/li&gt;
  &lt;li&gt;相当于 OpenShift, 混合多云版本的 GKE (GKE on-prem + GKE on-GCP)
    &lt;ul&gt;
      &lt;li&gt;主要运行 K8S&lt;/li&gt;
      &lt;li&gt;既可以在GCP 上管理 K8s, 也可以在 on-premise 上管理 K8s&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;集中的配置管理 (Git)&lt;/li&gt;
  &lt;li&gt;多集群(multi-cluster)管理&lt;/li&gt;
  &lt;li&gt;提供 Service Mesh (based on K8s Istio)
    &lt;ul&gt;
      &lt;li&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;课程提供的解释:
    &lt;ul&gt;
      &lt;li&gt;Run Kubernetes clusters anywhere (cloud and on-premises)&lt;/li&gt;
      &lt;li&gt;Config Mgmt - Central policies - Kubernetes API, Service Mesh, Access control&lt;/li&gt;
      &lt;li&gt;Service Mesh (dashboards, logging, monitoring, distributed tracing)
        &lt;ul&gt;
          &lt;li&gt;Anthos Service Mesh 是一个工具套装, 用来监控, tracing, logging, 深度了解服务的 performance, 以及 performance 如何影响其他的流程, 发现存在的问题.
            &lt;ul&gt;
              &lt;li&gt;例子: 通过Anthos Service Mesh 监控一个服务的 latency, 超过阈值就报警
                &lt;ol&gt;
                  &lt;li&gt;安装 Anthos Service Mesh&lt;/li&gt;
                  &lt;li&gt;在 console 中定义 Service Level Objective(SLO)&lt;/li&gt;
                  &lt;li&gt;基于 SLO 创建 alerting policy&lt;/li&gt;
                &lt;/ol&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;CI/CD - Watch for updates in the Git repository and applies changes to all relevant clusters automatically&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://dalong-1251052260.cos.ap-shanghai.myqcloud.com/2023-02-08-032734.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;api&quot;&gt;API&lt;/h3&gt;

&lt;h4 id=&quot;api-management-tools&quot;&gt;API Management Tools&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;有多种 API 管理工具, 包含
    &lt;ul&gt;
      &lt;li&gt;Cloud Endpoint&lt;/li&gt;
      &lt;li&gt;API Gateway&lt;/li&gt;
      &lt;li&gt;APIgee Edge&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h5 id=&quot;cloud-endpoint&quot;&gt;Cloud Endpoint&lt;/h5&gt;
&lt;ul&gt;
  &lt;li&gt;Cloud API Gateway&lt;/li&gt;
  &lt;li&gt;分布式 API 管理系统&lt;/li&gt;
  &lt;li&gt;提供 API console, hosting, logging, monitoring, and other features&lt;/li&gt;
  &lt;li&gt;可以使用任何支持 API 标准的 API&lt;/li&gt;
  &lt;li&gt;可以支持 GCE, GAE, GKE,&lt;/li&gt;
  &lt;li&gt;支持的终端
    &lt;ul&gt;
      &lt;li&gt;IOS&lt;/li&gt;
      &lt;li&gt;Android&lt;/li&gt;
      &lt;li&gt;Javascript
        &lt;h5 id=&quot;api-gateway&quot;&gt;API Gateway&lt;/h5&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;full namaged API Gateway&lt;/li&gt;
  &lt;li&gt;提供定义良好的 Rest API 来包住backend services&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;apigee-edge&quot;&gt;Apigee (Edge)&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;管理 Rest API 生命周期
    &lt;ul&gt;
      &lt;li&gt;设计&lt;/li&gt;
      &lt;li&gt;安全&lt;/li&gt;
      &lt;li&gt;发布&lt;/li&gt;
      &lt;li&gt;分析&lt;/li&gt;
      &lt;li&gt;监控&lt;/li&gt;
      &lt;li&gt;scale
        &lt;ul&gt;
          &lt;li&gt;on-premise&lt;/li&gt;
          &lt;li&gt;google cloud&lt;/li&gt;
          &lt;li&gt;hybrid cloud&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;caching with Cloud CDN&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;提供 develoer portals
    &lt;ul&gt;
      &lt;li&gt;方便开发人员 管理 API, 获取 API key&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;案例:
    &lt;ul&gt;
      &lt;li&gt;为老旧应用抽象出 API 对外服务&lt;/li&gt;
      &lt;li&gt;把已有资产进行 API 暴露&lt;/li&gt;
      &lt;li&gt;perform business analytics and billing on a customer-facing API
        &lt;ul&gt;
          &lt;li&gt;把商业分析和 Billing 包装成面向客户的 API 暴露出来&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;transcoder-api&quot;&gt;Transcoder API&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;Optimized files for delivery&lt;/li&gt;
  &lt;li&gt;提高 transcoding 的效率&lt;/li&gt;
  &lt;li&gt;数据源和目的地都可以是 Cloud Storage&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;video-intelligence-api&quot;&gt;Video Intelligence API&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;Scene-level video annotation&lt;/li&gt;
  &lt;li&gt;实时流媒体的视频智能分析&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;game&quot;&gt;Game&lt;/h3&gt;
&lt;h4 id=&quot;game-server&quot;&gt;Game Server&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;提供 Agones 集群协调管理服务&lt;/li&gt;
  &lt;li&gt;提供无缝的多人游戏体验平台&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;好的架构设计&quot;&gt;好的架构设计&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Resiliency: 弹性, 挂了部分, 服务还能用
    &lt;ul&gt;
      &lt;li&gt;用 Cloud Monitoring&lt;/li&gt;
      &lt;li&gt;安装 logging agent 发送日志到 Cloud Logging&lt;/li&gt;
      &lt;li&gt;给 VM 开 Migrate VM Instance 和 Automatic restart&lt;/li&gt;
      &lt;li&gt;健康检查&lt;/li&gt;
      &lt;li&gt;用 LB 放在 VM 前面&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Availability: 99.99%
    &lt;ul&gt;
      &lt;li&gt;99% 代表 7 小时一个月可以挂&lt;/li&gt;
      &lt;li&gt;99.9% 代表43分钟一个月可以挂&lt;/li&gt;
      &lt;li&gt;99.99% 代表一个月有 4 分半可以挂&lt;/li&gt;
      &lt;li&gt;99.999% 代表一个月有 26 秒可以挂&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;High Avaibility
    &lt;ul&gt;
      &lt;li&gt;多 region 支持的服务, 一个region 挂了也没事&lt;/li&gt;
      &lt;li&gt;用 LB 分配流量&lt;/li&gt;
      &lt;li&gt;用 health check 检查出问题的实例, 不在给问题实例分配流量&lt;/li&gt;
      &lt;li&gt;给 VM 的 On host maintenance 配置 &lt;strong&gt;Migrate VM Instance&lt;/strong&gt;
        &lt;ul&gt;
          &lt;li&gt;当计算引擎执行定期基础架构维护时，它可以将您的 VM 实例迁移到其他服务器(同一个zone的)，而不会停机&lt;/li&gt;
          &lt;li&gt;不支持 GPU 类型 和  Pod 类型 的 VM&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;给 VM 配置 &lt;strong&gt;Automatic restart&lt;/strong&gt; (当VM 发生非人为的关闭后, 会自动重启)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Scalability: 伸缩, 随着流量/用户/数据的增减, 可以增减服务器
    &lt;ul&gt;
      &lt;li&gt;横向伸缩: 增加实例个数, 配上 LB + auto scaling
        &lt;ul&gt;
          &lt;li&gt;单zone&lt;/li&gt;
          &lt;li&gt;一个region 的多 zone&lt;/li&gt;
          &lt;li&gt;多个region 的多 zone&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;纵向伸缩: 增加单个机器的性能&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;lower costs: 知道怎么省钱
    &lt;ul&gt;
      &lt;li&gt;Sustained use discount 持续使用的折扣
        &lt;ul&gt;
          &lt;li&gt;VM 用的久且有持续流量, 那么满了一个月, 那么从用量的 25% 开始逐渐打折, 一直到月底打到 7 折&lt;/li&gt;
          &lt;li&gt;这个是自动发生的, google 帮我们算.&lt;/li&gt;
          &lt;li&gt;只有 GCE 和 GKE 才可以打折&lt;/li&gt;
          &lt;li&gt;某些机型, 比如 E2 和 A2 不打折&lt;/li&gt;
          &lt;li&gt;通过 App Engine Flexible 和 Dataflow生成的 VM 不打折&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Committed use discounts 提前预定好用量的折扣
        &lt;ul&gt;
          &lt;li&gt;预定1-3 年&lt;/li&gt;
          &lt;li&gt;最高可以达到 3 折&lt;/li&gt;
          &lt;li&gt;某些机型, 比如 E2 和 A2 不打折&lt;/li&gt;
          &lt;li&gt;通过 App Engine Flexible 和 Dataflow生成的 VM 不打折&lt;/li&gt;
          &lt;li&gt;适用场景: 大量用户的稳定网站.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Spot (preemptible vm) 临时用用的机器
        &lt;ul&gt;
          &lt;li&gt;临时的机器可以用于那种数据不怕丢的计算, 不需要实时进行的计算&lt;/li&gt;
          &lt;li&gt;最高可以打到 2 折, 最便宜的一种机型&lt;/li&gt;
          &lt;li&gt;可能随时被 google 收回&lt;/li&gt;
          &lt;li&gt;有 30 秒的警告&lt;/li&gt;
          &lt;li&gt;没有 SLA 保障&lt;/li&gt;
          &lt;li&gt;不会自动重启&lt;/li&gt;
          &lt;li&gt;300 美金的免费账号用不了&lt;/li&gt;
          &lt;li&gt;Preemptible 和 Spot 的区别主要是
            &lt;ul&gt;
              &lt;li&gt;Preemptible 有 24 小时的提前通知&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Billing 账单
        &lt;ul&gt;
          &lt;li&gt;google 是按秒算钱的&lt;/li&gt;
          &lt;li&gt;实例停了不算钱, 但它上面的存储会算钱&lt;/li&gt;
          &lt;li&gt;最好创建 Budget alert 提醒我们别花超了&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;网络流量费用
        &lt;ul&gt;
          &lt;li&gt;ingress 免费&lt;/li&gt;
          &lt;li&gt;egress
            &lt;ul&gt;
              &lt;li&gt;egress 到 google 服务免费 (youtue, map )&lt;/li&gt;
              &lt;li&gt;同一个 region 之间的谷歌服务 egress 免费&lt;/li&gt;
              &lt;li&gt;不同 region 之间 egress 付费&lt;/li&gt;
              &lt;li&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;安全
    &lt;ul&gt;
      &lt;li&gt;使用 Firewall Rules&lt;/li&gt;
      &lt;li&gt;尽量用内部 IP 地址&lt;/li&gt;
      &lt;li&gt;如果有合规要求, 用 Sole-tenant nodes&lt;/li&gt;
      &lt;li&gt;使用自己做的 custom image 来生成 VM&lt;/li&gt;
      &lt;li&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;架构师要知道的东西&quot;&gt;架构师要知道的东西&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;业务需求
    &lt;ul&gt;
      &lt;li&gt;降低成本
        &lt;ul&gt;
          &lt;li&gt;managed service&lt;/li&gt;
          &lt;li&gt;autoscaling&lt;/li&gt;
          &lt;li&gt;premptible vms&lt;/li&gt;
          &lt;li&gt;总成本(TCO - total cost of ownership)来源:
            &lt;ul&gt;
              &lt;li&gt;licensing cost (软硬件)&lt;/li&gt;
              &lt;li&gt;计算服务成本&lt;/li&gt;
              &lt;li&gt;存储成本&lt;/li&gt;
              &lt;li&gt;网络成本(线路成本, 数据的 ingress, egress)&lt;/li&gt;
              &lt;li&gt;人员成本(开发, 测试, 运维, 业务)&lt;/li&gt;
              &lt;li&gt;其他
                &lt;ul&gt;
                  &lt;li&gt;事故成本&lt;/li&gt;
                  &lt;li&gt;第三方API 等&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;CAPEX，全称为Capital Expenditure，即资本性支出, 如果在  GCP, 那就是采购云的一次性支出&lt;/li&gt;
          &lt;li&gt;OPEX，全称为Operating Expense，指的是企业的管理支出, 如果在 GCP 那就是持续的订阅支出&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;加快开发/创新速度
        &lt;ul&gt;
          &lt;li&gt;devops(CI/CD) SRE&lt;/li&gt;
          &lt;li&gt;微服务?&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;合规&lt;/li&gt;
      &lt;li&gt;应用和架构透明&lt;/li&gt;
      &lt;li&gt;数据智能&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;技术需求
    &lt;ul&gt;
      &lt;li&gt;功能性需求, 比如技术部门要求:
        &lt;ul&gt;
          &lt;li&gt;容器化&lt;/li&gt;
          &lt;li&gt;linux&lt;/li&gt;
          &lt;li&gt;容器协调&lt;/li&gt;
          &lt;li&gt;自动scaling&lt;/li&gt;
          &lt;li&gt;NoSQL&lt;/li&gt;
          &lt;li&gt;大量数据存储, 且低成本&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;非功能性需求
        &lt;ul&gt;
          &lt;li&gt;High Availability
            &lt;ul&gt;
              &lt;li&gt;Compute Engine
                &lt;ul&gt;
                  &lt;li&gt;MIG, AutoScaling, Health Checks (Auto healing), GLB, Global &amp;gt; Multi-Regional &amp;gt; Regional &amp;gt; Zonal&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;GKE
                &lt;ul&gt;
                  &lt;li&gt;Multi master, Regional clusters with pod and cluster autoscaling&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;Bigtable
                &lt;ul&gt;
                  &lt;li&gt;Place clusters in different zones or regions&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;Cloud Firestore/Datestore
                &lt;ul&gt;
                  &lt;li&gt;Use Multi-region locations&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;Cloud SQL
                &lt;ul&gt;
                  &lt;li&gt;Use HA configuration (regional)&lt;/li&gt;
                  &lt;li&gt;read replica 不能作为 HA&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;网络连接
                &lt;ul&gt;
                  &lt;li&gt;Dedicated interconnect &amp;gt; Partner interconnect &amp;gt; VPN Have a backup connection.&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;Managed Services - like App Engine, Cloud Functions, Cloud Storage, Cloud Firestore/Datastore, BigQuery&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Scalability
            &lt;ul&gt;
              &lt;li&gt;CE
                &lt;ul&gt;
                  &lt;li&gt;用 MIG 和 template + LB&lt;/li&gt;
                  &lt;li&gt;UMIG 不能自动伸缩&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;GKE
                &lt;ul&gt;
                  &lt;li&gt;用 pod 和 cluster 自动伸缩&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;persistent disk
                &lt;ul&gt;
                  &lt;li&gt;可以伸缩, 比如增加硬盘大小, 增加硬盘数量&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;local SSD
                &lt;ul&gt;
                  &lt;li&gt;不能自动伸缩&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;无服务
                &lt;ul&gt;
                  &lt;li&gt;Cloud Storage, App Engine and Cloud Functions are serverless (Auto Scaling)&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;数据库
                &lt;ul&gt;
                  &lt;li&gt;Pub/Sub, BigQuery and Cloud Datastore are serverless (Auto Scaling)&lt;/li&gt;
                  &lt;li&gt;BigTable, Cloud Spanner, Cloud SQL, Dataproc are NOT serverless ,&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Durability&lt;/li&gt;
          &lt;li&gt;Security
            &lt;ul&gt;
              &lt;li&gt;Cloud KMS
                &lt;ul&gt;
                  &lt;li&gt;对 传输的数据或者 at rest 数据进行加密&lt;/li&gt;
                  &lt;li&gt;公钥私钥&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;&lt;strong&gt;Cloud Armor&lt;/strong&gt;
                &lt;ul&gt;
                  &lt;li&gt;是一个网络攻击解决方案库, 收集每年的 OWASP Top 10 attacks, 并提供保护机制&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;Secret Manager
                &lt;ul&gt;
                  &lt;li&gt;存放数据库密码, API key credentials&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;谷歌云-architecture-framework&quot;&gt;谷歌云 Architecture Framework&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;有四个原则
    &lt;ul&gt;
      &lt;li&gt;运营完美
        &lt;ul&gt;
          &lt;li&gt;高效的运行, 管理和监控交付的商业价值&lt;/li&gt;
          &lt;li&gt;策略
            &lt;ul&gt;
              &lt;li&gt;自动 build, 测试和部署&lt;/li&gt;
              &lt;li&gt;监控商业指标&lt;/li&gt;
              &lt;li&gt;执行灾难恢复测试&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;增加软件开发和发布的速度
            &lt;ul&gt;
              &lt;li&gt;小而快的发布&lt;/li&gt;
              &lt;li&gt;对静态代码分析和安全扫描&lt;/li&gt;
              &lt;li&gt;使用
                &lt;ul&gt;
                  &lt;li&gt;Cloud Source Repositories&lt;/li&gt;
                  &lt;li&gt;Container Registry&lt;/li&gt;
                  &lt;li&gt;Cloud Build&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;监控系统和业务健康度
            &lt;ul&gt;
              &lt;li&gt;监控和日志
                &lt;ul&gt;
                  &lt;li&gt;Cloud Monitoring&lt;/li&gt;
                  &lt;li&gt;Cloud Logging&lt;/li&gt;
                  &lt;li&gt;Cloud Debugger&lt;/li&gt;
                  &lt;li&gt;Error Reporting&lt;/li&gt;
                  &lt;li&gt;Cloud Trace&lt;/li&gt;
                  &lt;li&gt;Cloud Profiler&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;SLI, SLO, SLA&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;灾难恢复 Dister Recovery
            &lt;ul&gt;
              &lt;li&gt;创建 DR 恢复方案&lt;/li&gt;
              &lt;li&gt;定义 RTO, RPO&lt;/li&gt;
              &lt;li&gt;考虑 网络, 计算, 数据, 带宽, infra&lt;/li&gt;
              &lt;li&gt;定期进行灾难测试&lt;/li&gt;
              &lt;li&gt;DNS 来切换 primary 和 backup&lt;/li&gt;
              &lt;li&gt;定期对 VM 的持久磁盘进行snapshot 并拷贝到其他region&lt;/li&gt;
              &lt;li&gt;开启 Live Migration, 确保 VM 在维护的时候也能正常提供服务&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;安全, 隐私和合规
        &lt;ul&gt;
          &lt;li&gt;对安全控制, 隐私, 进行计划,确保合规&lt;/li&gt;
          &lt;li&gt;策略
            &lt;ul&gt;
              &lt;li&gt;仅提供最小的权限&lt;/li&gt;
              &lt;li&gt;自动部署敏感任务&lt;/li&gt;
              &lt;li&gt;进行安全监控&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;Authentication and authorization
            &lt;ul&gt;
              &lt;li&gt;IAM policy
                &lt;ul&gt;
                  &lt;li&gt;提供必要的role 给用户&lt;/li&gt;
                  &lt;li&gt;使用 Org Policy Service (组织都允许什么)&lt;/li&gt;
                  &lt;li&gt;使用 &lt;strong&gt;Cloud Asset Inventory&lt;/strong&gt; (跟踪资产目录)&lt;/li&gt;
                  &lt;li&gt;使用 Cloud Audit Logs (audit IAM Policy 变化 和 Service Accounts)&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;计算安全控制
            &lt;ul&gt;
              &lt;li&gt;尽量使用私有 IP (避免外网访问)&lt;/li&gt;
              &lt;li&gt;使用 harden VM image (没有乱七八糟的软件)&lt;/li&gt;
              &lt;li&gt;使用 Shielded VM (避免远程攻击, privilege escalation, and malicious insiders)&lt;/li&gt;
              &lt;li&gt;开启 GKE 集群 的 Node 自动 upgrade&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;网络安全
            &lt;ul&gt;
              &lt;li&gt;用 custom VPC (不要用default VPC)&lt;/li&gt;
              &lt;li&gt;每个 project 对应一个 VPC (相互隔绝)&lt;/li&gt;
              &lt;li&gt;使用 firewall rules 控制进出的流量&lt;/li&gt;
              &lt;li&gt;用 &lt;strong&gt;Security Command Center&lt;/strong&gt; 分析 infra 的安全&lt;/li&gt;
              &lt;li&gt;用 &lt;strong&gt;Network Intelligence Center&lt;/strong&gt; 检查网络拓扑和架构&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;数据安全
            &lt;ul&gt;
              &lt;li&gt;谷歌云默认会把存放在云上的数据进行加密&lt;/li&gt;
              &lt;li&gt;Cloud Storage
                &lt;ul&gt;
                  &lt;li&gt;给 bucket 使用版本 (敏感数据)&lt;/li&gt;
                  &lt;li&gt;bucket 中数据进行生命周期管理, 可以降低成本&lt;/li&gt;
                  &lt;li&gt;合规的数据可以用 Bucket Lock&lt;/li&gt;
                  &lt;li&gt;临时对外提供的数据用 Signed URLs&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
              &lt;li&gt;使用其他数据类服务, 用 audit log&lt;/li&gt;
              &lt;li&gt;开启 Access Transparency Logs&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;可靠性
        &lt;ul&gt;
          &lt;li&gt;设计可伸缩, 高可用, Self-healing(自动修复)的架构&lt;/li&gt;
          &lt;li&gt;定义 SLI, SLO, SLA 和 Error budget&lt;/li&gt;
          &lt;li&gt;监控和日志
            &lt;ul&gt;
              &lt;li&gt;Monitoring, logging, tracing, profiling, debugging etc.&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;设计高可用和伸缩
            &lt;ul&gt;
              &lt;li&gt;设计跨region 架构来实现 failover&lt;/li&gt;
              &lt;li&gt;尽量 横向 scale&lt;/li&gt;
              &lt;li&gt;预测高峰流量, 并进行提前计划&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;事故管理
            &lt;ul&gt;
              &lt;li&gt;减少 mean time to detect (MTTD 平均故障发现时间): 及时通知团队&lt;/li&gt;
              &lt;li&gt;减少 Mean Time to Mitigate (MTTM 平均故障缓和时间): 临时措施&lt;/li&gt;
              &lt;li&gt;减少 Mean Time to Recovery (MTTR 平均故障修复时间): 彻底修复&lt;/li&gt;
              &lt;li&gt;延长两次故障间隔时间 Mean Time Between Failures (MTBF): build 可靠系统&lt;/li&gt;
              &lt;li&gt;记录故障原因和修复记录, 以及lessons learn&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;性能和成本优化
        &lt;ul&gt;
          &lt;li&gt;Use GPUs and TPUs 增加性能
            &lt;ul&gt;
              &lt;li&gt;GPU 用来提高 ML, 视觉的性能&lt;/li&gt;
              &lt;li&gt;TPU 用硬件加速 ML&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;尽量使用无服务, managed service
            &lt;ul&gt;
              &lt;li&gt;Cloud Run, App Engine, Cloud Functions, Dataproc and Dataflow&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;分析成本和优化
            &lt;ul&gt;
              &lt;li&gt;Cloud Billing 看账单, 导出账单
                &lt;ul&gt;
                  &lt;li&gt;BigQuery 可以分析账单&lt;/li&gt;
                  &lt;li&gt;Google Data Studio 对账单视觉化&lt;/li&gt;
                &lt;/ul&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
          &lt;li&gt;几种打折
            &lt;ul&gt;
              &lt;li&gt;Sustained use discounts (长时间使用的打折)&lt;/li&gt;
              &lt;li&gt;Committed use discounts (预定时长的打折)&lt;/li&gt;
              &lt;li&gt;Preemptible VMs (用临时vm 运行不重要的工作任务, 可以打折)&lt;/li&gt;
              &lt;li&gt;用 Cloud Storage Lifecycle 管理数据, 节省成本&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;managed-service--serverless-无服务&quot;&gt;Managed service / Serverless 无服务&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;一些名词
    &lt;ul&gt;
      &lt;li&gt;IaaS (Infrastructure as a Service)
        &lt;ul&gt;
          &lt;li&gt;比如: Compute Engine&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;PaaS (Platform as a Service)
        &lt;ul&gt;
          &lt;li&gt;比如: App Engine
            &lt;ul&gt;
              &lt;li&gt;是serverless&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;FaaS (Function as a Service)
        &lt;ul&gt;
          &lt;li&gt;比如: Cloud Function
            &lt;ul&gt;
              &lt;li&gt;是serverless&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;CaaS (Container as a Service) Serverless
        &lt;ul&gt;
          &lt;li&gt;比如: GKE, Cloud Run
            &lt;ul&gt;
              &lt;li&gt;GKE 也有 serverless&lt;/li&gt;
              &lt;li&gt;Cloud Run是serverless&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;无服务
    &lt;ul&gt;
      &lt;li&gt;不需要自己去设置 VM, LB, Disk 的服务&lt;/li&gt;
      &lt;li&gt;不需要自己在虚机上安装相关的软件&lt;/li&gt;
      &lt;li&gt;上来就能用.&lt;/li&gt;
      &lt;li&gt;VM , LB, Disk 对用户都是透明的&lt;/li&gt;
      &lt;li&gt;默认提供了 auto scalling, HA&lt;/li&gt;
      &lt;li&gt;一般是付钱就能用, 按请求数, 用多少付多少&lt;/li&gt;
      &lt;li&gt;比如:
        &lt;ul&gt;
          &lt;li&gt;AWS 的 Lambda&lt;/li&gt;
          &lt;li&gt;GCP 的 function&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Serverless NEG (network endpoint groups)
    &lt;ul&gt;
      &lt;li&gt;一个 NEG 定义了 一组 backend endpoints for a load balancer.&lt;/li&gt;
      &lt;li&gt;A serverless NEG is a backend that points to a Cloud Run, App Engine, Cloud Functions, or API Gateway service.&lt;/li&gt;
      &lt;li&gt;一个 NEG 可以代表
        &lt;ul&gt;
          &lt;li&gt;1 个或者一组 Cloud Run 服务&lt;/li&gt;
          &lt;li&gt;1 个或者一组 Cloud Function 服务&lt;/li&gt;
          &lt;li&gt;1 个或者一组 App Engine 服务&lt;/li&gt;
          &lt;li&gt;1 个或者一组 API Gateway 服务&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;NEG 前面放一个 LB&lt;/li&gt;
      &lt;li&gt;可以把  NEG 比作 无服务版本的 MIG&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Serverless VPC Access
    &lt;ol&gt;
      &lt;li&gt;Serverless VPC Access 是一个私有访问选项, 允许你通过一个 internal IP 让一个 无服务(serverless) 连接到 VPC 网络.&lt;/li&gt;
      &lt;li&gt;VPN tunnel 连接的on-premise 环境(包含的database) 也算是 VPC 网络, 让 Serverless 服务访问 on-premise 的服务(比如数据库)&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;workesapce&quot;&gt;Workesapce&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;为使用 GCP 的组织和组织的员工提供便利的服务&lt;/li&gt;
  &lt;li&gt;比如, 日历, 文档, 邮件等.&lt;/li&gt;
  &lt;li&gt;方便组织的开发人员/员工可以远程高效开发/办公&lt;/li&gt;
  &lt;li&gt;workspace 里面的应用都是SaaS 的服务&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;命令行工具---cloud-shell-gcloud&quot;&gt;命令行工具 - Cloud Shell (GCloud)&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;谷歌云提供四种方式和云进行交互
    &lt;ul&gt;
      &lt;li&gt;Web Console/ Mobile Console/ Admin console&lt;/li&gt;
      &lt;li&gt;CLI&lt;/li&gt;
      &lt;li&gt;API&lt;/li&gt;
      &lt;li&gt;SDK&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;cloud shell 是 google 默认给我们提供的一个虚机
    &lt;ul&gt;
      &lt;li&gt;5G 默认 磁盘 放在 $HOME 目录&lt;/li&gt;
      &lt;li&gt;我们自己在目录下创建的的文件只在 访问的 session 期间存在&lt;/li&gt;
      &lt;li&gt;20 分钟不用 shell, 会就被自动terminate 掉&lt;/li&gt;
      &lt;li&gt;120 天不活跃, 目录可能都被删了&lt;/li&gt;
      &lt;li&gt;可以在这个shell 上通过 SSH 登录其他的 VM&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;通过命令行工具可以和管理谷歌云的服务
    &lt;ul&gt;
      &lt;li&gt;create&lt;/li&gt;
      &lt;li&gt;delete&lt;/li&gt;
      &lt;li&gt;update&lt;/li&gt;
      &lt;li&gt;read&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;有一些谷歌云服务有特别的命令行
    &lt;ul&gt;
      &lt;li&gt;Cloud Storage - gsutil&lt;/li&gt;
      &lt;li&gt;Cloud BigQuery - bq&lt;/li&gt;
      &lt;li&gt;Cloud Bigtable - cbt&lt;/li&gt;
      &lt;li&gt;Kubernetes - kubectl (in addition to Gcloud which is used to manage clusters)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;使用方法
    &lt;ul&gt;
      &lt;li&gt;Mac 上 安装 Gcloud SDK&lt;/li&gt;
      &lt;li&gt;网页上用 Cloud Shell&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;官方&lt;a href=&quot;https://cloud.google.com/sdk/docs/cheatsheet&quot;&gt;中文介绍以及相关命令&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;gcloud init  &lt;span class=&quot;c&quot;&gt;# 初始化 gcloud, 包括允许 gcloud 使用我的账号认证信息, 并设置 configuration&lt;/span&gt;
gcloud config list  &lt;span class=&quot;c&quot;&gt;# 列出我的账号的可配置参数&lt;/span&gt;
gcloud compute instances list 

&lt;span class=&quot;c&quot;&gt;## 语法&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;## gcloud 组 子组 动作 ...&lt;/span&gt;

gcloud compute zones list
gcloud compute regions list
gcloud compute machine-types list
gcloud compute machine-types list --filter&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;zone:us-central1-b&quot;&lt;/span&gt;
gcloud compute machine-types list --filter&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;zone:( us-central1-b europe-west1-d )&quot;&lt;/span&gt;

&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
        <pubDate>Thu, 23 Feb 2023 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/Google-Cloud-Platform-Professional-Architect/</link>
        <guid isPermaLink="true">http://localhost:4000/Google-Cloud-Platform-Professional-Architect/</guid>
        
        
        <category>GCP</category>
        
        <category>Google Cloud Platform</category>
        
        <category>Architecture</category>
        
        <category>Database</category>
        
        <category>Storage</category>
        
        <category>DevOps</category>
        
        <category>IAM</category>
        
        <category>Cloud</category>
        
        <category>API</category>
        
        <category>Data Migration</category>
        
        <category>Network</category>
        
        <category>YAML</category>
        
        <category>kubernetes</category>
        
        <category>Serverless</category>
        
        <category>CICD</category>
        
      </item>
    
      <item>
        <title>Agile Project Management and Agile Delivery</title>
        <description>&lt;p&gt;用了敏捷这么多年, 一直没有机会把自己的一些管理心得写下来. 因为前不久在为一个客户做敏捷项目的时候客户希望我能给客户做一个敏捷 Workshop , 所以才有机会让我回顾之前的敏捷项目, 不管是做的好的部分还是不好的部分, 都整理出来, 和大家一起分享.&lt;/p&gt;

&lt;h1 id=&quot;agile-project-management-and-agile-delivery&quot;&gt;Agile Project Management and Agile Delivery&lt;/h1&gt;

&lt;p&gt;[TOC]&lt;/p&gt;

&lt;h2 id=&quot;资源&quot;&gt;资源&lt;/h2&gt;

&lt;p&gt;User Story &lt;a href=&quot;https://www.agilealliance.org/glossary/user-story-template/&quot;&gt;定义和模板&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Scrum Guide &lt;a href=&quot;https://scrumguides.org/download.html&quot;&gt;官方中文版&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;key-concepts&quot;&gt;Key concepts&lt;/h2&gt;

&lt;p&gt;中文版的一张图片介绍 Scrum &lt;img src=&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gxvm9z72l4j30hs5smnhv.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gxr9sdmrq2j30tw0nsach.jpg&quot; style=&quot;zoom:33%;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Scrum 简单来说就是 11 个元素, 分成三类:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;3 个角色:
    &lt;ul&gt;
      &lt;li&gt;产品 owner&lt;/li&gt;
      &lt;li&gt;Scrum Master&lt;/li&gt;
      &lt;li&gt;交付团队&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;5 件事
    &lt;ul&gt;
      &lt;li&gt;Sprint - 下面四件事情的容器&lt;/li&gt;
      &lt;li&gt;Sprint Planning&lt;/li&gt;
      &lt;li&gt;Daily Scrum&lt;/li&gt;
      &lt;li&gt;Sprint Review&lt;/li&gt;
      &lt;li&gt;Sprint retrospective&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;3 个武器
    &lt;ul&gt;
      &lt;li&gt;Product Backlog&lt;/li&gt;
      &lt;li&gt;Sprint Backlog&lt;/li&gt;
      &lt;li&gt;Increment - Sprint 的增量交付物&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gxowztm659j31jd0u0whd.jpg&quot; style=&quot;zoom:30%;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gxnjhbq992j31860u0dih.jpg&quot; style=&quot;zoom:25%;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gxnjnecqymj31ib0u00wi.jpg&quot; style=&quot;zoom:25%;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;User Stories&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;As a  &lt;user&gt; (who) I want.  &lt;what&gt; so that.  &lt;Why&gt;&lt;/Why&gt;&lt;/what&gt;&lt;/user&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;+story points + acceptance criteria.  Should be independent, negotiable,  valuable, estimable, sized appropriately, testable (INVEST)&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Story points&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Story points are a relative unit of measure to assess whether a user story is  big or small. You can use different scales for story points (. G. 1, 3 or5; tshirt sizes s, m,, xl, xxl)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Product Backlog&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;An ordered list of everything that might be needed in the product (also  known as Master Story List)&lt;/li&gt;
  &lt;li&gt;The product owner owns this artifact, which is where everything and anything that may be needed for the product (now or in the future) is stored.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Sprint Backlog&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The set of Backlog items selected to be delivered over a period of time&lt;/li&gt;
  &lt;li&gt;The development team owns this artifact, which contains the plan for the current sprint.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Velocity&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The number of story points delivered over a sprint&lt;/li&gt;
  &lt;li&gt;每个迭代一个敏捷团队完成的 story point 数量, 如果一个迭代, 4 个人的团队可以完成 20 个 story pints. 那么后面大概就是每个迭代 20 个 的 velocity&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Swimlanes&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;A visual representation of stories (y axis) Vs status on the kanban/agile  board: To Do; Doing; Done (x axis). Swimlanes let the team see progress on  individual stories, while highlighting specific areas that need attention.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Minimum Viable Product (MVP)&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The bare minimum product that meets the client’s expectations Includes all  must haves and excludes all nice to haves (no bells and whistles).&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Release&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Comprised of several iterations or sprints&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Sprint&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;A period of time in which the team will work on a defined set of user stories&lt;/li&gt;
  &lt;li&gt;The container event within which the other four events occur. The sprint should be one month or less in duration.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;increment&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;交付物, 每个迭代的增量产品, 成果&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;agile-principles&quot;&gt;Agile Principles&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;Customer satisfaction by early and continuous delivery of us&lt;/li&gt;
  &lt;li&gt;Welcome changing requirements, even late in development ful software&lt;/li&gt;
  &lt;li&gt;Working software is delivered frequently (weeks rather than months)&lt;/li&gt;
  &lt;li&gt;Close, daily cooperation between business people and developers&lt;/li&gt;
  &lt;li&gt;Proiects are built around motivated individuals, who should be trusted&lt;/li&gt;
  &lt;li&gt;Face-to-face conversation is the best form of communication (co-location)&lt;/li&gt;
  &lt;li&gt;Working software is the principal measure of progress&lt;/li&gt;
  &lt;li&gt;Sustainable development, able to maintain a constant pace&lt;/li&gt;
  &lt;li&gt;Continuous attention to technical excellence and good design.&lt;/li&gt;
  &lt;li&gt;Simplicity-only build what is really essential.&lt;/li&gt;
  &lt;li&gt;Self-organizing teams&lt;/li&gt;
  &lt;li&gt;Regular adaptation to changing circumstance.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;翻译&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;通过我们及早和持续的交付使客户满意&lt;/li&gt;
  &lt;li&gt;欢迎不断变化的需求，即使是在开发软件的后期&lt;/li&gt;
  &lt;li&gt;可工作软件经常交付（几周而不是几个月）&lt;/li&gt;
  &lt;li&gt;业务人员和开发人员之间密切的日常合作&lt;/li&gt;
  &lt;li&gt;Proiects是围绕着积极进取的个人建立的，他们应该被信任&lt;/li&gt;
  &lt;li&gt;面对面交谈是最好的沟通形式（共址-坐在一起办公）&lt;/li&gt;
  &lt;li&gt;可工作的软件是衡量进度的主要标准&lt;/li&gt;
  &lt;li&gt;可持续发展，能够保持恒定的步伐&lt;/li&gt;
  &lt;li&gt;持续注重技术卓越和良好设计。&lt;/li&gt;
  &lt;li&gt;简单 - 只构建真正必要的东西。&lt;/li&gt;
  &lt;li&gt;自组织团队&lt;/li&gt;
  &lt;li&gt;定期适应不断变化的环境。&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;the-agile-team&quot;&gt;The Agile Team&lt;/h2&gt;

&lt;p&gt;三种角色&lt;/p&gt;

&lt;p&gt;Product Owner&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Represents the or is the end customer Defines what is valuable and  priorities (owns the backlog)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Scrum Master&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Facilitates team meetings, removes team impediments, liaises with the scrum team&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;product owner and ensures the team remains on track&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Delivery Team&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The people in charge of execution or that are also part of the projects  implementation (e. G. Developers, testers, business analysts, etc.  Defines what user stories are part of a sprint&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;tools&quot;&gt;Tools&lt;/h2&gt;

&lt;p&gt;Burn down chart&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;A chart that shows the remaining work to be done, progress over time and  the teams velocity (points delivered in a sprint). On the X axis you have time   (sprints) and on the Y axis effort (story points)&lt;br /&gt;
&lt;img src=&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gxnlfbfghoj30q00gk3ze.jpg&quot; style=&quot;zoom:50%;&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Kanban/Agile board&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;A visual pull system to track work and progress in a logical/basic flow (from left to  right): To Do&amp;gt; In Progress&amp;gt; In Review or In QA (optional)&amp;gt; Done
&lt;img src=&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gxnllgn37fj30qo0kegnf.jpg&quot; style=&quot;zoom:50%;&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Trellow&lt;/p&gt;

&lt;p&gt;看板可以被设计成如下类型. 可以单独放一个看板用于存档完成的工作, 每隔一段时间(自然月, 或者是一个 Iteration 或者是一个 Sprint, 就把Done 这个 list move 到存档的看板中, 重命名为那个迭代的名字或者一个日期名字, 比如 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Done December 2021 (Sprint11)&lt;/code&gt;),&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;TODO, Doing, QA, Done, Backlog, Parking Lot( 一些站会讨论出来的额外话题, 需要站会后 去单独讨论)&lt;/li&gt;
  &lt;li&gt;Discovering, Planning, Implementation, Closure&lt;/li&gt;
  &lt;li&gt;Team member names, Done&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;poker planning&lt;/p&gt;

&lt;h2 id=&quot;rituals---仪式一个也不能少&quot;&gt;Rituals - 仪式一个也不能少&lt;/h2&gt;

&lt;p&gt;Sprint planning&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Meeting where the team defines which user stories they Will work on in an  upcoming sprint -Delivery Team and Scrum Master.&lt;/li&gt;
  &lt;li&gt;Happens at the beginning of the sprint when the Scrum team gathers and creates a plan for the sprint.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Daily stand-ups&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;15 min daily meeting where people stand up near the Kanban board and  share what they did yesterday, what they are doing today and impediments (if any) -Delivery Team and Scrum Master&lt;/li&gt;
  &lt;li&gt;When the development team inspects where they are in relation to the sprint goal and adapts their work plan for the next 24 hours.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Sprint Review(Demo/Showcase)&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Meeting where the team presents what they have delivered over a sprint to  the product owner-product Owner, Delivery Team and Scrum Master.&lt;/li&gt;
  &lt;li&gt;At the end of a sprint, the Scrum team and stakeholders gather and collaborate to inspect the increment and adapt the product backlog.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Retrospectives&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The last event in a sprint, where the Scrum team meets and decides how to improve in the next sprint.&lt;/li&gt;
  &lt;li&gt;Meetings done after sprints to review, revise and adjust (similar to a lessons  learned, but in real time, not just at the end of the project) -delivery Team  and Scruin Master. 要问的三个问题
    &lt;ol&gt;
      &lt;li&gt;What went well&lt;/li&gt;
      &lt;li&gt;What didn’t&lt;/li&gt;
      &lt;li&gt;What should you do differently in next sprint&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;agile-myths&quot;&gt;Agile Myths&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Agile is anti-documentation&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Agile is anti-planning&lt;/li&gt;
  &lt;li&gt;Agile is undisciplined&lt;/li&gt;
  &lt;li&gt;Agile requires a lot of rework&lt;/li&gt;
  &lt;li&gt;Agile is anti-architecture&lt;/li&gt;
  &lt;li&gt;Agile doesn’t scale&lt;/li&gt;
  &lt;li&gt;Agile solves everything&lt;/li&gt;
  &lt;li&gt;Agile is only for IT projects&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;翻译&lt;/p&gt;

&lt;p&gt;谣言&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;敏捷是反文档的&lt;/li&gt;
  &lt;li&gt;敏捷是反规划的&lt;/li&gt;
  &lt;li&gt;敏捷是无纪律的&lt;/li&gt;
  &lt;li&gt;敏捷需要大量的返工&lt;/li&gt;
  &lt;li&gt;敏捷是反架构的&lt;/li&gt;
  &lt;li&gt;敏捷无法扩展&lt;/li&gt;
  &lt;li&gt;敏捷解决一切&lt;/li&gt;
  &lt;li&gt;敏捷仅适用于IT项目&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;启动一个敏捷项目之前要准备的工作&quot;&gt;启动一个敏捷项目之前要准备的工作&lt;/h2&gt;

&lt;p&gt;Before you start doing Agile&lt;/p&gt;

&lt;p&gt;. Start with Sprint O (Planning)&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Define who will be part of the team and which role each person will play&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Agree with the team on days and times for the Agile rituals.  比如 Sprint plan, standup meeting,  Sprint Review, Retrospectives 的时间和日期&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Get your physical or digital tools ready (e. G Kanban board,&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Make sure you have done the due diligence required for the project (e. G business case, budget, key requirements, etc.)  yes, you still need  it, just keep it lean&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Determine any constraints that are part of your project (budget, time, business cycle, etc.)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Define which days you will release, test and sprint (e. G. Releases or push to production will be done on a Thursday morning).&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;如何面对做不完的任务和不够的时间&quot;&gt;如何面对做不完的任务和不够的时间&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;You make a list&amp;gt; feature or what needs to be done  (a. K. A. User  stories )&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;You size things up estimate the effort required for each user story by assigning a unit of measure (a k. A. Story points)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;You set some priorities&amp;gt; put most important story points at the top of the list (backlog), which will be the first you take for the  upcoming sprint.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;You start executing &amp;gt; working through user stories (delivering value) over a period of time (a k. A. Sprints )&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;You update the plan as you go &amp;gt; you reflect on what worked and what didn’t and adjust (a k. A. Retrospectives)&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;scrum-失败的原因&quot;&gt;Scrum 失败的原因&lt;/h2&gt;

&lt;h3 id=&quot;失去目标---lacking-goals&quot;&gt;失去目标 - Lacking Goals&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;让 Scrum 团队知道我们的产品目标以及产品如何影响客户&lt;/li&gt;
  &lt;li&gt;公司目标转化给产品目标, 产品目标转化给 Spinrt 目标&lt;/li&gt;
  &lt;li&gt;目标可以被 measurable&lt;/li&gt;
  &lt;li&gt;目标要customer-focused&lt;/li&gt;
  &lt;li&gt;每个 Sprint 需要有一个目标, 并且在 restropective 会上阐述本次 sprint 的 increment 是否达到了 sprint goal&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;taylorism-泰勒主义&quot;&gt;Taylorism 泰勒主义&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;泰勒主义主要思想就是最大化的发掘每个人的工作潜能. 被有些人理解为 - 现代奴隶制&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Table 1. Taylorism vs. Scrum&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;Taylorism&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;Scrum&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Workers only know how to do the specific tasks they’ve been assigned; they don’t have or need a big-picture view of what their organization is trying to accomplish and are not encouraged to broaden their skill sets.&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Work is performed by cross-functional teams that have all the skills they need to get the job done. These teams are supported by leadership, and high levels of trust are leveraged between leadership and Scrum teams to make decisions quickly and deliver increments of working software to customers frequently. Workers are encouraged to broaden their skill sets and collaborate.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Managers plan work without input from the people who perform the work.&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Planning happens at varying levels across all the Scrum roles. Management is invited in to inspect the team’s work during sprint reviews and to collaborate with the product owner, so that the team can take management and stakeholder opinions into consideration as they figure out what to do during the next sprint.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Management tries to make the work as predictable as possible by precisely managing resource utilization with exact estimates.&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Scrum teams manage their time and focus as they plan their work. The development team is responsible for resource utilization. They use estimates to trigger conversations within the Scrum team and with management—not to make the work as predictable as possible.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Management optimizes workers’ performance using metrics and measurements.&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Scrum teams use metrics to optimize outcomes that benefit the customer.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Management uses money and rewards as primary motivators for performance. Workers are motivated to achieve rewards and avoid punishment (extrinsic motivation).&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Scrum team members have a goal they are trying to achieve, the autonomy to achieve it, and a comprehensive set of skills to accomplish their goal. They also have opportunities to learn from each other. Team members are motivated to perform their work because they enjoy what they do and feel a sense of personal accomplishment (intrinsic motivation).&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;团队出现 泰勒主义的迹象&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Scrum框架的机械实现，而没有真正接受其原则和价值观。&lt;/li&gt;
  &lt;li&gt;Scrum团队成员认为Scrum只是微观管理的新方式。&lt;/li&gt;
  &lt;li&gt;Scrum团队成员之间没有有意义的协作迹象。&lt;/li&gt;
  &lt;li&gt;Scrum团队正在产生低质量的增量。&lt;/li&gt;
  &lt;li&gt;人们仍然以他们的忙碌程度来衡量，而不是他们的工作成果。&lt;/li&gt;
  &lt;li&gt;Scrum团队无法在每个冲刺 （sprint） 中交付增量产品。&lt;/li&gt;
  &lt;li&gt;回到过去的做法，但用新的名字称呼它们。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;trust-is-missing&quot;&gt;Trust is Missing&lt;/h3&gt;

&lt;p&gt;Scrum 中的信任&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The product owner trusts the development team to create a done product increment by the end of every sprint.&lt;/li&gt;
  &lt;li&gt;The development team trusts the product owner to provide them with a clear product vision.&lt;/li&gt;
  &lt;li&gt;Development team members trust one another to do their best and support one another.&lt;/li&gt;
  &lt;li&gt;Management trusts the Scrum team and removes any impediments to delivery.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;提高团队信任的方法&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Shorten your sprint length. Instead of a four-week sprint, try a one-week sprint. The development team will have fewer product backlog items to focus on, the product owner will have stakeholders in the sprint review even more frequently, and collaboration will happen in shorter intervals.&lt;/li&gt;
  &lt;li&gt;Focus sprint planning on setting a sprint goal that has a true impact on the customer. This helps inspire the team and gives them something real to work toward.&lt;/li&gt;
  &lt;li&gt;Use the daily scrum as an opportunity for the development team to inspect their progress toward their sprint goal. Celebrate progress and promote opportunities for Scrum team members to support and help one another. This helps increase trust within the team.&lt;/li&gt;
  &lt;li&gt;Create opportunities for the Scrum team to collaborate with real customers. The sprint review event is perfect for this. Who better to talk about the impact of the team’s work than the people who are actually affected by it?&lt;/li&gt;
  &lt;li&gt;Introduce or reemphasize the importance of the Scrum values. If you and your team keep the Scrum values in mind, then empiricism will shine.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;coachs-corner---教练角&quot;&gt;Coach’s Corner - 教练角&lt;/h3&gt;

&lt;p&gt;如果没有一个 Scrum master 委员会, 大家的 Scrum 是松散的, 需要有一个类似 PMO 的地方, 定期让大家一起研讨 Scrum 最佳实践. Coach’s Corner 可以做的事情如下&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Gather all the Scrum masters in your organization.&lt;/li&gt;
  &lt;li&gt;Discuss with them how far your organization has come in terms of transitioning to the Scrum way of doing things and how much is still left to do. If it’s helpful, reference the Taylorism vs. Scrum info we presented in this chapter.&lt;/li&gt;
  &lt;li&gt;Have everyone in the group spend five minutes on their own answering the following question: What’s within my control that I can change to get our organization 15% closer to where it needs to be?&lt;/li&gt;
  &lt;li&gt;Put people in groups of two to four, and have each person take three minutes to share their 15% Solution with their group. Make sure that the people who aren’t sharing are actively listening and &lt;em&gt;not&lt;/em&gt; giving feedback or advice.&lt;/li&gt;
  &lt;li&gt;Finally, have each team member spend five minutes sharing their idea(s) again—but this time encourage the other team members to ask questions and give feedback to each 15% Solution.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;定期回顾-scrum-的价值&quot;&gt;定期回顾 Scrum 的价值&lt;/h3&gt;

&lt;p&gt;Scrum 有五个价值, 需要定期和团队回顾, 是否我们遗忘了这些价值&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Commitment can transform a team. It’s a promise to yourself, your teammates, and your organization to do the very best work you can. If everyone on your Scrum team is committed to delivering a done increment of valuable product each and every sprint, you can accomplish great things together.&lt;/li&gt;
  &lt;li&gt;Focus allows us to do our very best. Valuing focus means that we give people the time they need to think about their work. After all, creativity is hard enough without being constantly interrupted. Allowing development team members to focus just on one product, the current sprint, and the current sprint goal gives them the best chance of succeeding. Encourage the product owner to focus on the future value of the product while you, the Scrum master, focus on upholding Scrum.&lt;/li&gt;
  &lt;li&gt;Openness is the core of transparency, which is what makes Scrum work. If the members of your Scrum team (and the people who work with your team) aren’t open with each other and the wider organization, they can’t solicit honest feedback or adapt their work accordingly. You need to be open and honest, even when you’re struggling or there’s a tough issue to address. If you aren’t, transparency will suffer.&lt;/li&gt;
  &lt;li&gt;Respect creates a feeling of safety. Being open with others can be scary and admitting when you’re stuck is hard, but respect makes these actions easier. A high-performing Scrum team is built on mutual respect, and honest discussions create the safety needed to tackle difficult issues. Respect helps a team gel, grow, and learn together.&lt;/li&gt;
  &lt;li&gt;Courage is the linchpin of the other Scrum values. It takes courage to commit, to focus amid distractions, and to be open to new ideas. And it takes courage and faith in your teammates to count on having respectful interactions when you need to discuss problems.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;翻译:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;承诺：Scrum大师致力于仆人的领导。你通过影响力而不是头衔来领导。您的承诺是致力于Scrum框架，并确保Scrum团队颁布和理解规则。&lt;/li&gt;
  &lt;li&gt;焦点：Scrum大师的重点是团队围绕工作自我组织的能力。当存在自我组织时，团队有权尽其所能。您专注于培养协作文化，并帮助团队度过健康的冲突和困难情况。&lt;/li&gt;
  &lt;li&gt;勇气：成为Scrum大师有时很可怕。你会做一些事情来保护你的团队，但并不总是感到安全。你必须勇敢地行动起来，对伤害团队的做法说不。有时，向权力说真话需要勇气。在为Scrum团队和更广泛的组织服务时，请依靠勇气透明地行事。&lt;/li&gt;
  &lt;li&gt;尊重：作为一名Scrum大师，你正在与那些可能害怕你领导的变化的人一起工作。永远尊重那些人。尊重他们过去的工作，他们的成功，以及他们今天在学习和颁布Scrum的旅程中的位置。&lt;/li&gt;
  &lt;li&gt;开放。Scrum大师对他们观察到的事情和他们对事情进展的感受持开放态度，但他们也愿意听取团队的反馈。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;引导大家对 Scrum Value 认识的一些问题&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Why do courage, commitment, focus, respect, and openness matter? Ask people to give examples of situations where specific values helped them.&lt;/li&gt;
  &lt;li&gt;How do we act on the Scrum values? If your team members aren’t using the values to guide their actions, they risk performing uninspired, mechanical Scrum.&lt;/li&gt;
  &lt;li&gt;What happens when the Scrum values aren’t present on our team? One example: without respect, team members may lack the courage to be open with one another.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;在 Retrospective meeting 上问下面的问题, 让大家重新认识 Scrum Value&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;When is it difficult to live the values of courage, commitment, focus, respect, or openness?&lt;/li&gt;
  &lt;li&gt;What gets easier when we embrace the Scrum values?&lt;/li&gt;
  &lt;li&gt;Which Scrum value(s) helped us the most this sprint?&lt;/li&gt;
  &lt;li&gt;Is there a specific value that you think we especially need to work on within the team?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;两种让大家了解 Scrum Value 的方法&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;During your next sprint retrospective, write each value across the top of a whiteboard. Then ask the team to come up with ways that they applied each value during the last sprint. You should also ask how the values were violated. Use the responses to generate a discussion about each value. Over time, this will create a common understanding about how each value applies to the team. If your team is struggling with embracing the Scrum values, you can perform this exercise during every retrospective. If, on the other hand, your team is consistently working well together, you may not need to perform it very often (though you should still do it occasionally, just to keep the values fresh in everyone’s minds.)&lt;/li&gt;
  &lt;li&gt;If your team is more action-oriented, you can try framing each Scrum value as a product backlog item in the product backlog. Here is a story format you can use to get you started: “As a &lt;em&gt;&lt;strong&gt;***, I want to __***&lt;/strong&gt;&lt;/em&gt; in order to &lt;em&gt;&lt;strong&gt;**&lt;/strong&gt;&lt;/em&gt;_.” Use this format to make these “value stories’’ actionable. For example, “As a Scrum team member, I want to show up on time to Scrum events in order to show my teammates that I respect them.”&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;product-owner---po&quot;&gt;Product Owner - PO&lt;/h2&gt;

&lt;h3 id=&quot;一般来说一个产品只能有一个产品经理&quot;&gt;一般来说一个产品只能有一个产品经理.&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;单个产品如果有多个产品经理, 会带来各种利益冲突&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;产品所有者委员会带着相互竞争的利益来到谈判桌前：技术、部门、客户、政治、组织等。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;只有一个产品所有者，开发团队知道什么工作对产品真正重要，以及他们应该关注什么。Scrum团队内部和利益相关者都对产品现在在哪里以及未来的走向有着整体的看法，因为有一个人指导它。唯一的产品所有者收集利益相关者和客户的反馈，并将潜在更改纳入产品积压。决策不会因相互竞争的利益而停滞不前。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;以下是一些关于产品所有者角色的重要事实，供您在阅读本章时记住：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The PO role should be performed by &lt;em&gt;one&lt;/em&gt; person per product, not a committee.&lt;/li&gt;
  &lt;li&gt;The PO manages and is responsible for the product backlog.&lt;/li&gt;
  &lt;li&gt;The PO works relentlessly to maximize the value of what the development team is working on by ordering the product backlog.&lt;/li&gt;
  &lt;li&gt;The PO is in charge of creating and maintaining the product vision.&lt;/li&gt;
  &lt;li&gt;The PO uses Scrum as a catalyst to inspect the product and adapt its direction based on customer and stakeholder feedback.&lt;/li&gt;
  &lt;li&gt;The PO keeps tabs on the marketplace and adapts the product with it.&lt;/li&gt;
  &lt;li&gt;The PO works with stakeholders to gather opinions and ideas, but is empowered to make final decisions.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;产品经理必须是全职的--不能由其他角色的人员兼任&quot;&gt;产品经理必须是全职的,  不能由其他角色的人员兼任.&lt;/h3&gt;

&lt;p&gt;一些产品经理需要全权负责的在 Scrum 框架之外的工作&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Evaluating competitor products&lt;/li&gt;
  &lt;li&gt;Assessing customer information&lt;/li&gt;
  &lt;li&gt;Building a road map&lt;/li&gt;
  &lt;li&gt;Managing the budget&lt;/li&gt;
  &lt;li&gt;Implementing value-based metrics&lt;/li&gt;
  &lt;li&gt;Gathering stakeholder opinions&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;产品经理没有足够的权利--或者拥有太大的权利&quot;&gt;产品经理没有足够的权利 / 或者拥有太大的权利&lt;/h3&gt;

&lt;p&gt;Scrum Master 需要帮助产品经理争取到足够的权利来履行产品经理在敏捷开发中要做的所有工作&lt;/p&gt;

&lt;p&gt;一个总司令类型产品经理的特征&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;决定了开发团队要做的事情, 参加每日晨会, 并且要求 Scrum Master 让开发团队满负荷运转&lt;/li&gt;
  &lt;li&gt;一个人的意见代表了公司的所有利益相关者&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Scrum Master 要帮助产品经理得到适当的权利, 但也要帮助 PO 分担压力, 让他能放松. 如果权利过于集中, 产品就会缺乏透明度.&lt;/p&gt;

&lt;h3 id=&quot;po-和-scrum-master-是一个人&quot;&gt;PO 和 Scrum Master 是一个人&lt;/h3&gt;

&lt;p&gt;有时因为预算或者管理者的无知, 希望PO 和 Scrum Master 是一个人. 甚至架构师或者开发人员来担当产品经理&lt;/p&gt;

&lt;p&gt;但是PO 和 Scrum Master 的职责不同, 两个角色由一个人担任会有冲突&lt;/p&gt;

&lt;p&gt;SM 和团队的对话:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;开发团队：维护Scrum，并确保团队针对经验流程控制进行优化。&lt;/li&gt;
  &lt;li&gt;利益相关者：创建对复杂工作领域的理解，并向他们展示进行经验流程控制是多么必要。&lt;/li&gt;
  &lt;li&gt;管理：合作进行Scrum成功所需的组织变革。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;产品所有者和团队的对话:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;开发团队：产品的愿景和方向，以及产品所有者如何将愿景和方向转化为产品积压。&lt;/li&gt;
  &lt;li&gt;利益相关者：与产品方向合作并保持积极参与。&lt;/li&gt;
  &lt;li&gt;管理：完成预算编制过程。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Scrum大师对产品所有者的支持工作:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;促进产品所有者和开发团队之间的互动。&lt;/li&gt;
  &lt;li&gt;帮助产品所有者识别并与利益相关者合作。&lt;/li&gt;
  &lt;li&gt;与产品所有者合作，找到进行适当产品积压管理的方法。&lt;/li&gt;
  &lt;li&gt;寻找方法，使产品积压对开发团队和利益相关者透明。&lt;/li&gt;
  &lt;li&gt;向产品所有者教授Scrum。&lt;/li&gt;
  &lt;li&gt;指导产品所有者进行敏捷产品管理。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;因此, 产品 owner 和 Scrum Master 需要两个全职的人员担任&lt;/p&gt;

&lt;h3 id=&quot;缺乏产品愿景&quot;&gt;缺乏产品愿景&lt;/h3&gt;

&lt;p&gt;Scrum Master 要和 PO 一起, 创建一个愿景&lt;/p&gt;

&lt;h3 id=&quot;教练角&quot;&gt;教练角&lt;/h3&gt;

&lt;p&gt;帮助产品 owner 创建一个 PO 交互图&lt;/p&gt;

&lt;p&gt;Work together to create a Product Owner interaction map:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;On a whiteboard, create four quadrants. Label them “Stakeholder,” “Customer,” “Development Team,” and “Management” (respectively).&lt;/li&gt;
  &lt;li&gt;On individual sticky notes of the same color, answer this question: “What interactions is the product owner having with this group right now?”. Place each sticky note in the appropriate quadrant. An example might be placing a sticky labeled “product backlog refinement” in the development-team quadrant.&lt;/li&gt;
  &lt;li&gt;On different color sticky notes, answer this question: “What interactions is the product owner &lt;em&gt;not&lt;/em&gt; having (or not allowed to have)?” Again, place each sticky note in the appropriate quadrant. These items are impediments that are preventing your product owner from making value-based decisions. Why aren’t those interactions happening? What is the first course of action you can take to change this? In other words, what is the first impediment we can remove?&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;product-backlog&quot;&gt;Product Backlog&lt;/h2&gt;

&lt;p&gt;产品backlog 是Scrum团队对其产品的所有了解，以及他们打算在任何给定时间构建和交付什么。这是路线图、产品愿景和执行计划。竞争对手们很想得到它，但前提是Scrum团队建造得很好。&lt;/p&gt;

&lt;p&gt;产品 backlog 应该是不断被优化的, 优先级被重新排序的, 根据市场的变化进行调整的, 逐步被实现的.&lt;/p&gt;

&lt;h3 id=&quot;一个产品-多个-backlog&quot;&gt;一个产品, 多个 backlog&lt;/h3&gt;

&lt;p&gt;在某些情况下, 一个产品产生了多个 backlog, 比如单独为 bug 创建一个 backlog, 或者为一个产品的不同开发团队建立不同的 backlog. 这样会带来灾难&lt;/p&gt;

&lt;p&gt;这样做的坏处&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;对于需要完成什么，没有整体的看法，因此团队将开始分歧，导致产品不再具有凝聚力，甚至可能无法发挥作用。&lt;/li&gt;
  &lt;li&gt;每个团队将以自己的方式构建产品积压，使整体产品愿景和目标变得毫无用处。&lt;/li&gt;
  &lt;li&gt;基础架构在团队之间将不一致，导致技术债务和需要重新设计不连贯的功能。&lt;/li&gt;
  &lt;li&gt;团队之间的依赖性不会被考虑，从而导致指责和冲突。&lt;/li&gt;
  &lt;li&gt;试图整合所有不同团队的工作将为冲刺增加不必要的复杂性和时间。&lt;/li&gt;
  &lt;li&gt;没有一个团队对产品的质量和价值对利益相关者负责。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;一个产品应该只有一个 PO 和 一个 Backlog&lt;/p&gt;

&lt;p&gt;如果有多个 Backlog, Scrum Master 应该做如下这些事情:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Work with your product owner to gather every product backlog. This sounds a little silly, but there are likely many spreadsheets, notebooks, and napkins in your organization with important product information and backlog items. Check with the development team(s). They probably have lists of technical debt and “things we intend to do later,” captured somewhere, that should also be included in the product backlog.&lt;/li&gt;
  &lt;li&gt;Ask the product owner to merge all of these lists into a single product backlog. The new backlog will be sprawling and seem overwhelming at first, but that’s okay. You’re about to prune it into something more manageable.&lt;/li&gt;
  &lt;li&gt;Delete anything that’s older than six months, as you likely won’t ever do the work for those features. And if that work is important, it will reappear via feedback from customers and stakeholders. Understandably, your PO may be really nervous about truly deleting any PBIs. But trust us, it’s better for everyone in the organization to axe PBIs that are old and stale. The PO may be tempted to create a separate list of “deleted” PBIs “just in case,” but as we discuss in the next section, that’s a bad idea. The product backlog (singular!) should be the one and only source of truth for the project.&lt;/li&gt;
  &lt;li&gt;Group similar items together and help your product owner create new product backlog items, if needed. Refine and rework these items as you merge them together to create a unified product backlog.&lt;/li&gt;
  &lt;li&gt;Help the product owner order the newly built product backlog. Discuss what needs to be worked on next in order to deliver the most value in the next sprint.&lt;/li&gt;
  &lt;li&gt;Facilitate a product backlog refinement session with the Scrum team(s). Helping the team(s) re-establish a holistic vision of the product is important. A refinement session or two can help get everyone back on the same page and allow them to see what has changed now that all of the work is visible.&lt;/li&gt;
  &lt;li&gt;Have your product owner share the updated product backlog during the next sprint review.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;太多或者太少的-pbi-product-backlog-items&quot;&gt;太多或者太少的 PBI (Product Backlog Items)&lt;/h3&gt;

&lt;p&gt;太少的 backlog 导致产品缺失了愿景和目标&lt;/p&gt;

&lt;p&gt;太多的 backlog 导致愿景不清晰, 不具体, 增加过多的沟通成本&lt;/p&gt;

&lt;p&gt;好的 backlog 足以定义您产品的短期、中期和长期未来：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Short-term items (a.k.a. stories) should have the most detailed requirements. It’s good to have two to three sprints worth of such items that are ready for the development team to bring into a sprint. These items should contain enough detail that the development team feels confident bringing them into a sprint, but not &lt;em&gt;so&lt;/em&gt; much detail that there’s little flexibility in the outcome.&lt;/li&gt;
  &lt;li&gt;Mid-term items (a.k.a. features) are things that will be accomplished 3-6 months from now. They should have enough detail for the development team to know the direction that the product is heading. Invest minimal time here. Remember, PBIs are emergent—things will change before you get to these items. Rough estimates and sizing are perfectly fine for these PBIs.&lt;/li&gt;
  &lt;li&gt;Long-term items (a.k.a. epics) can be vague. They should describe what the product might contain in the distant future. These items are too large to be finished within a single sprint, are often unclear, and will need multiple refinement sessions to become actionable.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;细化产品-backlog&quot;&gt;细化产品 backlog&lt;/h4&gt;

&lt;p&gt;产品 owner 和交付团队要定期(每个 Sprint 一次或者多次)将一些 需求(Feature or Epics) 进行细化, 工作包括&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;添加详细信息&lt;/li&gt;
  &lt;li&gt;评估工作量 (optional)&lt;/li&gt;
  &lt;li&gt;分解&lt;/li&gt;
  &lt;li&gt;归属的 Sprint (optional)&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;仅在必要时估算&quot;&gt;仅在必要时估算&lt;/h4&gt;

&lt;p&gt;您估计得越晚，离工作就越近，估计就越相关。有些人认为，在软件开发等复杂职业中工作时，准确的估计是不可能的，也是浪费时间。虽然很少能够&lt;em&gt;准确&lt;/em&gt;估计事情的进展，但出于两个关键原因，创建估计仍然值得：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;估算允许产品所有者在权衡功能的预期价值与构建该功能的预测努力时破译PBI的投资回报。&lt;/li&gt;
  &lt;li&gt;估算为开发团队提供了详细信息，可以帮助他们确定可能需要什么才能将该项目带入冲刺。例如，它可以帮助他们确定单个PBI是否可以（或应该）分为多个项目。关于工作的对话通常比实际估计更重要。&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;不要走得太远&quot;&gt;不要走得太远&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;如果您正在和开发团队讨论几个月内无法处理的产品backlog，请停止——您是在浪费时间&lt;/li&gt;
  &lt;li&gt;一般保持 2 个 Sprint 的清晰 backlog 就差不多了&lt;/li&gt;
  &lt;li&gt;留一些关于实现需求的对话空间给开发团队, 让他们有一些想象的空间, 模棱两可让开发团队有机会谈论完成PBI的更好方法和找到创造性的解决方案&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;pbi-的格式不一致&quot;&gt;PBI 的格式不一致&lt;/h3&gt;

&lt;p&gt;PBI 建议的字段包括:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Title&lt;/li&gt;
  &lt;li&gt;Description&lt;/li&gt;
  &lt;li&gt;Acceptance Criteria&lt;/li&gt;
  &lt;li&gt;Estimate&lt;/li&gt;
  &lt;li&gt;Value&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;一个例子:&lt;/p&gt;

&lt;p&gt;Title: &lt;em&gt;作为一名Scrum培训师，我想为Scrum培训课程创建一个新列表，以便潜在学生可以获得有关该课程的信息。&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Description:  Scrum培训师需要能够输入和编辑以下信息：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;课程名称&lt;/li&gt;
  &lt;li&gt;课程描述&lt;/li&gt;
  &lt;li&gt;Scrum教练姓名&lt;/li&gt;
  &lt;li&gt;课程地点（地址）&lt;/li&gt;
  &lt;li&gt;课程开始日期&lt;/li&gt;
  &lt;li&gt;课程结束日期&lt;/li&gt;
  &lt;li&gt;注册课程的链接（目前通过第三方支付处理器处理）&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Value: &lt;em&gt;查找和注册课程的高能力-与收入的直接链接估计：开发团队估计此PBI的五个故事点。当前平台支持大多数请求的功能。&lt;/em&gt;&lt;/p&gt;

&lt;h3 id=&quot;一成不变的-产品-backlog&quot;&gt;一成不变的 产品 backlog&lt;/h3&gt;

&lt;p&gt;有的 PO 给所有的 backlog 都设定了, 而且不希望做任何变化.&lt;/p&gt;

&lt;p&gt;随着外部环境的变化(市场, 竞争对手, 用户习惯, 科技变革, 政治因素等等), 我们需要不断的改变自己的产品&lt;/p&gt;

&lt;p&gt;只有 water flow 的项目才不希望变化, 而敏捷项目是要拥抱变化&lt;/p&gt;

&lt;p&gt;我们需要不断的迭代, 然后在客户和市场面前验证, 然后再不断改进,迭代&lt;/p&gt;

&lt;h3 id=&quot;frustrated-stakeholders&quot;&gt;Frustrated Stakeholders&lt;/h3&gt;

&lt;p&gt;一个 Stakeholder 问产品 owner, 之前提的一个需求什么时候完成,  PO 说按照现在的趋势, 估计要等 6 个迭代后实现(12 周后), 但是到了12 周, 这个需求被其他中间插进来的需求给 delay 了.  所有这个 Ctakeholder 感觉被骗了.&lt;/p&gt;

&lt;p&gt;更好的回答方式:&lt;/p&gt;

&lt;p&gt;&lt;em&gt;“鉴于对该功能的估计，并假设我们不添加任何其他产品backlog item，我们预测大约有六次冲刺。这也假设我们的其余估计是准确的，在我们完成工作之前，我们不会知道这一点。我很乐意与您坐在一起，重新评估该功能的价值主张，看看它如何符合该产品的路线图。”&lt;/em&gt; 这样说的好处:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;传统上，团队被要求同意，然后承诺进行估算。我们的答案不同：它包括“预测”一词而不是“承诺”，以强调缺乏确定性。&lt;/li&gt;
  &lt;li&gt;它提到积压的产品将发生变化。&lt;/li&gt;
  &lt;li&gt;它提醒每个人工作的不可预测性，以及估计可能是错误的。&lt;/li&gt;
  &lt;li&gt;产品所有者提议重新审视作品的价值主张，这表明根据价值订购积压产品是灵活的。&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;计算某个功能哪个-sprint-能开发完成的预测方法&quot;&gt;计算某个功能哪个 Sprint 能开发完成的预测方法:&lt;/h4&gt;

&lt;p&gt;表3。产品积压样本&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;类型&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;故事点估计&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;功能A&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;4&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;功能B&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;5&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;缺陷1&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;6&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;功能C&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;2&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;功能D&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;8&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;功能E&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;5&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;缺陷2&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;1&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;利益相关者想知道功能D何时准备就绪——换句话说，他希望根据该功能的交付情况进行预测。如果开发团队的速度（这是一种花哨的“容量”）为每次冲刺10个故事点，那么他们需要多少冲刺才能交付功能A？使用简单的数学，我们知道，只要遵守PBI的顺序，就需要大约三次冲刺才能交付该功能。&lt;/p&gt;

&lt;h3 id=&quot;没有排列先后顺序的-backlog&quot;&gt;没有排列先后顺序的 Backlog&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;先后顺序 - 是哪个先做,哪个后做. 这个是 PO 来决定的, 包含了优先级的因素和产品功能的依赖逻辑.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;优先级 - 是重要紧急程度, 只能说明哪个PBI 更重要紧急, 是从需求方的角度来看的, 没有产品功能的依赖逻辑&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Product backlogs should be ordered, not prioritized.&lt;/li&gt;
  &lt;li&gt;A clearly ordered product backlog creates transparency to stakeholders and helps the dev team know exactly what they should be working on at any given time.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;使用 Order, 而不是 Prioritization 的理由:&lt;/p&gt;

&lt;p&gt;There are some really good reasons for preferring ordering over prioritization:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The term “priority” implies a level of certainty that we simply don’t have in a complex environment. If your product owner gives a PBI a priority of 1, that implies that the item will get done, and your stakeholders will hear that implicit message loud and clear. And why shouldn’t stakeholders assume that PBI will get done—it’s of the highest priority!&lt;/li&gt;
  &lt;li&gt;If ten PBIs have a priority of 1, how does the development team know which one they should work on first? In short, they don’t. But if PBIs are &lt;em&gt;ordered&lt;/em&gt; instead, the development team knows exactly which ones to work on, and in what order.&lt;/li&gt;
  &lt;li&gt;If your product owner has multiple top-priority PBIs, he should know which one delivers the most value to stakeholders—and therefore, he should be able to order the items appropriately. If the PO doesn’t know which PBI is most valuable, how can he possibly know whether the sprint should be funded in the first place?&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;教练角---帮助-po-找到最优价值的-pbi--并进行排序-的-workshop&quot;&gt;教练角 - 帮助 PO 找到最优价值的 PBI , 并进行排序 的 workshop&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://www.liberatingstructures.com/14-min-specs/&quot;&gt;Min Space 方法&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;邀请利益相关者、开发团队成员、客户、在组织中担任领导职务的人以及对产品或项目结果感兴趣的其他人。&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Have the participants form groups of 4-7 people, and provide them with materials for rapidly capturing ideas, tools such as markers and sticky notes, and space to post the ideas (either on a wall or flip chart).&lt;/li&gt;
  &lt;li&gt;Display the current product backlog so that everyone can see it, and then pose this question: “Which features in our product backlog are needed in order to have a successful product release?”&lt;/li&gt;
  &lt;li&gt;Ask each person to write down (one per sticky note) as many must-do product backlog items and must-not-do product backlog items as they can in 2-3 minutes. When time’s up, ask the groups to consolidate their individual lists, eliminating duplicates. At this point, each group’s list of must-do PBIs will likely be quite large.&lt;/li&gt;
  &lt;li&gt;Have the groups aggressively test all the items on their must-do lists by answering this question about each item: “If we delivered all of our must-do PBIs &lt;em&gt;except&lt;/em&gt; this one, would we still have a successful product release?” If the answer is “yes,” then the group has to delete that PBI from their must-do list. Encourage the teams to be ruthless when answering this question. This step can take around 15-20 minutes, depending on the size of lists. Allow more time as needed.&lt;/li&gt;
  &lt;li&gt;Have the groups compare their work. Ask each group to spend a few minutes sharing their whittled-down, must-do PBI list with everyone, and have them discuss the trade-offs and decisions they made to get to their current list.&lt;/li&gt;
  &lt;li&gt;After each group has presented their lists, have everyone work together to consolidate their lists into one master must-do PBI list that is as short as possible.&lt;/li&gt;
  &lt;li&gt;Have everyone discuss the master list and work together to help the PO order these vital PBIs.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;开发团队&quot;&gt;开发团队&lt;/h2&gt;

&lt;p&gt;假设有下面的这些开发团队在我们公司使用敏捷, 但是失败了&lt;/p&gt;

&lt;p&gt;表4。团队组成&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;团队编号&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;团队能力&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;1&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;数据库和基础设施&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;2&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;网络服务&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;3&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;网络服务&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;4&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;前端和用户体验&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;5&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;前端和用户体验&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;6&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;前端和用户体验&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;7&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;前端和用户体验&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;缺乏必要的技能&quot;&gt;缺乏必要的技能&lt;/h3&gt;

&lt;p&gt;瀑布式项目的开发团队组成, 他们是顺序进行项目开发的&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;分析&lt;/li&gt;
  &lt;li&gt;设计&lt;/li&gt;
  &lt;li&gt;开发&lt;/li&gt;
  &lt;li&gt;测试&lt;/li&gt;
  &lt;li&gt;部署&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Scrum 开发团队需要拥有所有必要的技能，以创建每次冲刺的增量&lt;/p&gt;

&lt;p&gt;无需依赖团队以外的任何人, 因为他们是自给自足的——他们不必依赖其他人来取得进展。&lt;/p&gt;

&lt;p&gt;开发团队需要具备一切必要的能力，才能实现这一目标。这通常被称为&lt;em&gt;跨职能&lt;/em&gt;团队。&lt;/p&gt;

&lt;p&gt;分析一个团队是否需要其他技能集的快速有效的方法是绘制从开始到生产所要完成的 backlog iteam 所需的工作流程, 比如:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;分析/精炼&lt;/li&gt;
  &lt;li&gt;UX/UI Design&lt;/li&gt;
  &lt;li&gt;编码&lt;/li&gt;
  &lt;li&gt;测试&lt;/li&gt;
  &lt;li&gt;部署&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;如果发现了 Scrum 开发团队缺失某项技能, 就需要补齐这块短板&lt;/p&gt;

&lt;h3 id=&quot;thats-not-my-job-这不是我的工作&quot;&gt;That’s Not My Job 这不是我的工作&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Scrum团队的开发人员可能会编写代码、开发测试用例、创建用户界面设计、编写客户文档等。&lt;/li&gt;
  &lt;li&gt;无论单个团队成员的专业领域如何，整个团队都有一个单一的责任：在冲刺结束时提供增量。&lt;/li&gt;
  &lt;li&gt;Scrum 开发团队是共享问责制&lt;/li&gt;
  &lt;li&gt;Scrum 的开发人员/设计/测试等人员不用向他的垂直部门经理汇报&lt;/li&gt;
  &lt;li&gt;团队中没有一个角色是英雄。开发团队一起成功或失败&lt;/li&gt;
  &lt;li&gt;开发团队中的所有人都是向Scrum 团队进行汇报的.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;对交付工作的定义&quot;&gt;对交付工作的定义&lt;/h3&gt;

&lt;p&gt;Scrum 开发团队初期交付的成果和后期交付的成果会有一些不同&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Now: Our definition of done as it stands today. What are we capable of right now? For instance, in our earlier example, this section would contain the following:
    &lt;ul&gt;
      &lt;li&gt;Code has been reviewed by someone other than the person who wrote it.&lt;/li&gt;
      &lt;li&gt;The PBI has been tested by someone other than the person who developed it.&lt;/li&gt;
      &lt;li&gt;The PBI has been deployed to the development environment.&lt;/li&gt;
      &lt;li&gt;The PBI has been tested by someone besides the code reviewer or the person who wrote it.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Next: What do we plan to do next to advance our architectural practices and make our definition of done more strict? Again, pulling from the earlier example:
    &lt;ul&gt;
      &lt;li&gt;Automated tests have been written.&lt;/li&gt;
      &lt;li&gt;The code passes the continuous integration build.&lt;/li&gt;
      &lt;li&gt;The functionality is sitting in the staging environment, ready for deployment.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Future: What things do we imagine being in our definition of done once we’re capable of them in the future? Here are some possibilities for our example scenario:
    &lt;ul&gt;
      &lt;li&gt;The PBI passes all automated tests (unit, integration, and functional).&lt;/li&gt;
      &lt;li&gt;The PBI has been reviewed by the entire Scrum team.&lt;/li&gt;
      &lt;li&gt;The PBI has been shipped into production.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Revisit this exercise frequently during sprint retrospectives to help evolve the team’s definition of done.&lt;/p&gt;

&lt;h3 id=&quot;每个人都为自己&quot;&gt;每个人都为自己&lt;/h3&gt;

&lt;p&gt;尝试让开发团队的个体之间有更多的交互, 只有团队有更多的沟通和协作, 才可以保证每个 Sprint 的高质量完成&lt;/p&gt;

&lt;p&gt;一些尝试&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;结对变成&lt;/li&gt;
  &lt;li&gt;代码 review&lt;/li&gt;
  &lt;li&gt;分享开发成果和经验,心得&lt;/li&gt;
  &lt;li&gt;先完成工作的开发人员帮助没有完成的开发人员共同开发&lt;/li&gt;
  &lt;li&gt;限制每个 Sprint 的工作量, 留出时间让大家进行交流&lt;/li&gt;
  &lt;li&gt;开发人员帮助测试人员一起测试&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;wait-your-turn--等轮到你&quot;&gt;Wait Your Turn- 等轮到你&lt;/h3&gt;

&lt;p&gt;开发团队的各个角色在迭代开发的时候可能会有相互等待的情况, 比如开发等设计, 测试等开发, 运维等测试等.&lt;/p&gt;

&lt;p&gt;如何让开发团队不用相互等待&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;尽早的让PO 把架构和 UI/UX design 在 Sprint 之前就准备好, 让开发人员不需要等待&lt;/li&gt;
  &lt;li&gt;Sprint 开始的时候测试人员就需要准备测试用例和环境&lt;/li&gt;
  &lt;li&gt;运维和上线的事情最好由开发人员搞定, 不需要额外找一个不能开发只能运维的人员&lt;/li&gt;
  &lt;li&gt;开发人员要具备测试的专业能力, 相互进行测试&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;团队太大了&quot;&gt;团队太大了&lt;/h3&gt;

&lt;p&gt;在过去的一年半里，开发团队从10人增加到29人。这让很多工作变得复杂. 不透明, 不可控&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;开发人员个性不同, ：英雄、消防员、流浪汉，随你便。等等, 沟通变得困难&lt;/li&gt;
  &lt;li&gt;晨会时间边长, 多数人在等待别人发言, 却和自己无关&lt;/li&gt;
  &lt;li&gt;让一个 Sprint 的内容变得过多, 管理困难,  透明度变差&lt;/li&gt;
  &lt;li&gt;产出增量变大, 增加测试时间, 增加上线风险&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;解决方法&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Scrum Guide建议开发团队由三到九人组成，虽然不是强硬的规则, 但是我们仍然建议3-9 人&lt;/li&gt;
  &lt;li&gt;一个大团队, 要去掉多余的人, 留下那种多面手, 全栈工程师.&lt;/li&gt;
  &lt;li&gt;如果必须要拆分成多个 Scrum 团队, 要确保每个小团队都可以独立的自我运转并在每个迭代可以看到增量.&lt;/li&gt;
  &lt;li&gt;通过让团队自主进行重组，他们立即开始将自己更多地视为一个团队，而不是一个个人集合。&lt;/li&gt;
  &lt;li&gt;要求每个团队给自己取一个有趣的名字，如超级英雄力量或电子游戏。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;教练角-1&quot;&gt;教练角&lt;/h3&gt;

&lt;p&gt;开发团队和 Scrum 的角色和责任&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;作为一名Scrum大师，记住开发团队拥有他们工作的所有权，而不是你，这一点非常重要。&lt;/li&gt;
  &lt;li&gt;Scrum大师很容易忘记他们是仆人领袖，而不是任务主管。&lt;/li&gt;
  &lt;li&gt;开发团队对其流程缺乏自主权是不健康的，也适得其反。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;如果开发团队缺乏责任, 尝试下面的方法&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Gather the development team together. Ask each person to silently spend one minute brainstorming as many team improvements as they can think of (process, technical, and so on), and to write each idea on a separate sticky note. To get them inspired, try offering a phrase for them to complete, such as “In order for us to become a rock-star development team, we have to…”&lt;/li&gt;
  &lt;li&gt;After the one minute is up, ask them to pair up with another person and spend two minutes collaborating and writing down yet more improvement ideas together.&lt;/li&gt;
  &lt;li&gt;After these two minutes are up, have the pairs share an idea one at a time by shouting it out and placing it on a whiteboard.&lt;/li&gt;
  &lt;li&gt;Ask the group to look for patterns, and if any emerge, group the related sticky notes together. Discuss all the topics for five minutes, paying specific attention to the patterns.&lt;/li&gt;
  &lt;li&gt;Lastly, give each person three sticker dots. Tell them to put the dots on what they think are the most pressing items. They can place all three dots on the same sticky note or distribute them across various sticky notes.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Catalog the results and make them visible in the team area. Use the dots to help prioritize: Address the items with the most dots first. Choose one or two of these improvements to implement in the next sprint, and then revisit the list during the next sprint retrospective. Look carefully at the list for signs of impediments, and if there’s something going on that the development team can’t resolve on their own, be sure to take action.&lt;/p&gt;

&lt;h2 id=&quot;敏捷大师&quot;&gt;敏捷大师&lt;/h2&gt;

&lt;p&gt;一个被动的 Scrum Master 是常见的失败因素&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;做一个仆人领袖意味着什么？&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;仆人-领导哲学意味着，最重要的是，为他人服务是领导力最重要的方面。仆人领袖将他人的需求放在首位。仆人领袖的主要兴趣是帮助和支持他人成长和繁荣，因为这是促进个人和团队成功的最佳方式。这与传统领导力形成鲜明对比，传统领导力是积累权力和权威的首要问题。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Scrum大师的角色是：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;通过将Scrum原则和实践应用于团队成员、利益相关者和组织中其他人之间的互动，&lt;strong&gt;确保团队和组织理解并实施Scrum&lt;/strong&gt;。&lt;/li&gt;
  &lt;li&gt;根据需要促进Scrum活动，以&lt;strong&gt;帮助每个人遵守Scrum角色和规则&lt;/strong&gt;。&lt;/li&gt;
  &lt;li&gt;通过指导团队成员如何接受和践行Scrum价值观，为Scrum框架注入生命。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;充当团队的仆人领导，&lt;em&gt;而不是&lt;/em&gt;团队老板。&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;以影响力和同理心领导，同时&lt;strong&gt;关注Scrum团队成员和他们所服务的客户的需求&lt;/strong&gt;。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;激发&lt;/strong&gt;旨在提高产品质量和&lt;strong&gt;项目成果的变化&lt;/strong&gt;。&lt;/li&gt;
  &lt;li&gt;向组织&lt;strong&gt;体现Scrum价值观&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;我的团队没有人知道scrum&quot;&gt;我的团队没有人知道Scrum&lt;/h3&gt;

&lt;p&gt;如果不确定团队是否了解 Scrum ,那就找个晨会, 画个图给大家, 让大家填 Scrum 的 11 要素的便签, 填不上, 就由教练来写, 然后由团队来贴, 并由贴的人给大家讲解为什么&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gxtma0nvzuj30ok0ji0th.jpg&quot; style=&quot;zoom:25%;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;请您的团队在图表上放置他们选择的任何便签，并讨论他们放在板上的物品的重要事实。&lt;/li&gt;
  &lt;li&gt;一旦第一个人分享了他们的事实，请进一步阐述所选便签，并提供额外的见解和上下文。&lt;/li&gt;
  &lt;li&gt;不要立即纠正错误的答案。事实上，在整个练习过程中，不要碰一个便签。&lt;/li&gt;
  &lt;li&gt;如果团队需要提示，请询问是否有问题。&lt;/li&gt;
  &lt;li&gt;你可以很容易地花两三个小时来锻炼这个练习。如果这似乎对一次会议来说太长了，每天分成半小时的会议，直到所有便签都放在正确的位置。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;超级英雄-scrum-master&quot;&gt;超级英雄 Scrum Master&lt;/h3&gt;

&lt;p&gt;SM 有的时候会忍不住直接给 Scrum 团队提供问题的解决方案或决定, 而不是引导团队自己做出尝试和决定, 这样会带来一些伤害:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;No ability to experiment: When a Scrum master “solves’’ all the team’s problems, the team won’t learn how to experiment. A Scrum master must constantly inspect and adapt practices. Some changes work—others don’t. Dictating answers robs the team of these lessons.&lt;/li&gt;
  &lt;li&gt;Scrum team members withdraw: Apathy sets in when a Scrum master mandates solutions. A disengaged team can lead to silos of knowledge and individual actors instead of a gelled and cohesive Scrum team.&lt;/li&gt;
  &lt;li&gt;Whole-team concept is compromised: Every member of the Scrum team contributes to the product and code base. If a hero Scrum Master is solving all the problems, the Scrum team becomes dependent on this hero behavior. Coaching others to solve issues and impediments can help teams grow, mature, and find success together.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;一些想法:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Scrum大师英雄主义在短期内似乎有帮助，但随着时间的推移，负面影响会放大。&lt;/li&gt;
  &lt;li&gt;看到问题, 如果团队没有发现, 不要自己指出来, 而是引导团队成员去发现并纠正&lt;/li&gt;
  &lt;li&gt;鼓励团队做出决定, 成功后做出表扬&lt;/li&gt;
  &lt;li&gt;如果团队似乎没有就他们的工作做出决定，请集思广益，以团队的方式纠正决策中的不平衡。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;轮值的-scrum-master&quot;&gt;轮值的 Scrum Master&lt;/h3&gt;

&lt;p&gt;显然，Scrum大师是一个忙碌的人，需要一套专业技能才能成功。Scrum大师是观察者。&lt;/p&gt;

&lt;p&gt;你的工作是观察团队：他们如何工作和互动。您还可以关注外部组织如何与Scrum团队互动。&lt;/p&gt;

&lt;p&gt;如果这个职位是轮值的, 任何人都可以填补该角色, 如果Scrum大师为团队带来了一些特定的技能，这些技能需要时间和精力来发展。如果Scrum主角色持续轮换，您将无法了解许多社交线索、信息点和机会, 这些技能将断裂&lt;/p&gt;

&lt;p&gt;Scrum Master 需要有技术背景吗?&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;根据《Scrum Guide》，不，在某些情况下，技术技能可能会分散注意力——特别是如果Scrum大师发现技术工作比辅导、促进、培训、指导、消除障碍和随之而来的组织变革更有趣。&lt;/li&gt;
  &lt;li&gt;另一方面，技术技能对Scrum大师来说可能是一个好处。如果Scrum团队坚持技术决策，如果Scrum大师有一些开发经验，他或她可以更快地解决这个问题。但开发团队拥有构建产品的“方法”，他们拥有团队内部交付工作所需的所有技能。&lt;/li&gt;
  &lt;li&gt;成为Scrum大师需要如此多的不同技能，以至于在评估候选人时，技术水平几乎属于要寻找的末尾。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Scrum Master有三个级别的服务：对产品所有者、开发团队和组织&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;您对产品所有者的服务始于帮助有效管理产品backlog 的排序。这包括创建按业务价值排序的PBI。这方面的技术和实践各不相同，但您花在这样做上的时间有助于PO优化业务价值。您还负责教产品所有者如何规划产品发布并获得投资回报。做得好，为产品所有者服务直接有助于增加利润。&lt;/li&gt;
  &lt;li&gt;开发团队也需要您的帮助。Scrum大师消除障碍，教授技术和团队技能，保持自我组织，打破筒仓，鼓励合作，指出技术债务问题，并为Scrum活动提供便利。结果：一个更有效的开发团队。&lt;/li&gt;
  &lt;li&gt;最后，你也为组织服务。通过向组织提供敏捷辅导，您不仅可以查看团队如何开展工作的大局，还可以查看更广泛的组织如何影响您的团队。您发现了Scrum团队内外使产品交付更加困难的问题和障碍。通过解决这些问题，您正在提高Scrum团队的有效性。随着组织中有效团队数量的增加，这些团队提供的价值也可能增加。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;兼职或者轮训的 SM 可能做不到持续和连贯的对组织, 开发团队和 PO 的支持&lt;/p&gt;

&lt;h3 id=&quot;so-many-impediments-so-little-time---障碍太多-时间太少&quot;&gt;So Many Impediments, So Little Time - 障碍太多, 时间太少&lt;/h3&gt;

&lt;p&gt;有一种失败是 Scrum大师没有有效地处理超出团队能力的障碍&lt;/p&gt;

&lt;p&gt;这些障碍可能包括:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;测试服务器已经停机两周了。&lt;/li&gt;
  &lt;li&gt;Stage 环境并不反映生产环境，但DevOps团队太忙了，无法处理它。&lt;/li&gt;
  &lt;li&gt;组织要求代码审查由开发团队以外的人员执行，团队已经浪费了等待其他团队完成这些审查的时间。&lt;/li&gt;
  &lt;li&gt;架构团队花费了大量时间批准新的编码模式，这阻碍了他们取得进展的能力。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;有一个方法是创建  &lt;strong&gt;障碍 Backlog&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;找到一个Scrum团队和利益相关者可见的地方，在那里您列出了阻碍团队的所有障碍。&lt;/li&gt;
  &lt;li&gt;按优先级或严重程度列出它们，并定期提供有关影响和进展的最新信息。&lt;/li&gt;
  &lt;li&gt;与您的利益相关者、产品所有者和开发团队一起查看障碍。促进这项工作，使团队能够尽快解决这些障碍。&lt;/li&gt;
  &lt;li&gt;强有力的促进对于这项工作的运作至关重要,  包括想出创造性的方法来收集团队的建议, 并将建议提炼成可操作的改进方法。&lt;/li&gt;
  &lt;li&gt;让任何人都可以使用便签和记号笔来添加障碍 Backlog，也可以贴上他们提供的解决方案的建议. 但不要自己碰任何东西！&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gxto9smnkgj30p20mujss.jpg&quot; style=&quot;zoom:25%;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;SM 在看到某个障碍并想亲自解决它之前, 参考如下步骤:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;想想这是真正的障碍，还是只是一个有变通办法的临时障碍。&lt;/li&gt;
  &lt;li&gt;如果这是一个障碍，想想团队是否可以自己解决。&lt;/li&gt;
  &lt;li&gt;如果您确定障碍超出了团队的修复能力，那么是时候采取行动并帮助消除障碍了。&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;可怕的-scrum-lord-暴君&quot;&gt;可怕的 Scrum Lord (暴君)&lt;/h3&gt;

&lt;p&gt;这些Scrum大师对懈怠的团队成员大发脾气。他们分配任务，设置截止日期，并管理任意指标。&lt;/p&gt;

&lt;p&gt;本来应该是仆人的领导, 被指挥和控制的欲望所取代。&lt;/p&gt;

&lt;p&gt;Scrum团队应该自我管理并自我组织。在Scrum中，使用武力效果不佳。&lt;/p&gt;

&lt;p&gt;带来的伤害:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;质量下降：强加指标和不切实际最后期限让团队被迫降低质量以满足新需求。在这些类型的情况下，质量是首先要做的事情。对于一个团队来说，很容易决定，为了在不切实际的最后期限前完成，他们必须停止编写单元测试。或者更糟糕的是，完全停止测试。&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;技术债务增加：不断承受压力的Scrum团队不太可能做出正确的决定。随着时间的推移，质量和架构方面的一系列妥协将导致技术债务增加。具有讽刺意味的是，随着系统变得太脆弱和复杂，无法轻松改变，额外的技术债务将降低速度。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;士气低落的团队：Scrum的核心是增强开发团队的能力。自组织从软件开发中移除了传统的指挥和控制杠杆。通过强制任务分配和技术指导重新添加这些杠杆会削弱Scrum开发团队拥有工作的能力。这是扼杀士气和导致员工留用率大幅下降的绝佳方式。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Scrum明确地将权力还给了开发人员。尊重这一点！&lt;/p&gt;

&lt;h3 id=&quot;变成-scrum-secretary-秘书&quot;&gt;变成 Scrum Secretary (秘书)&lt;/h3&gt;

&lt;p&gt;感觉 Scrum Master 要变成秘书的迹象有:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Scrum 活动中的会议速记员&lt;/li&gt;
  &lt;li&gt;早上给团队带咖啡, 晚上给团队定晚餐&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;SM 的职责不是养活团队或者成为秘书&lt;/p&gt;

&lt;p&gt;把这些工作交还给团队, 他们能管理好自己&lt;/p&gt;

&lt;h3 id=&quot;担任scrum-清洁工管理员-janitor&quot;&gt;担任Scrum 清洁工/管理员 (Janitor)&lt;/h3&gt;

&lt;p&gt;当 SM 帮助Scrum 团队 执行 Sprint 的时候, 可能一不小心就变成了清洁工/管理员&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;亲自设置看板工具&lt;/li&gt;
  &lt;li&gt;讲解 backlog User Story, 或者创建一个新的&lt;/li&gt;
  &lt;li&gt;亲自画燃尽图,  给看板贴贴纸, 并移动贴纸&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;这些活动都不属于Scrum大师。开发团队管理他们的工作，无论是在数字工具中还是在物理板上。&lt;/p&gt;

&lt;p&gt;Scrum Master 对这些内容应该是 Read only&lt;/p&gt;

&lt;p&gt;底线，不要碰物理板或工具！&lt;/p&gt;

&lt;h3 id=&quot;教练角-2&quot;&gt;教练角&lt;/h3&gt;

&lt;p&gt;成为一名专业的Scrum大师是一生的旅程。&lt;/p&gt;

&lt;p&gt;打印 Scrum Guide , 每个月阅读一次, 并做一些心得笔记&lt;/p&gt;

&lt;h2 id=&quot;management-管理&quot;&gt;Management 管理&lt;/h2&gt;

&lt;p&gt;Scrum Master 面对的三群人, PO , 开发团队 和组织&lt;/p&gt;

&lt;p&gt;组织包括了很多人&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;管理者/经理&lt;/li&gt;
  &lt;li&gt;业务团队&lt;/li&gt;
  &lt;li&gt;C level&lt;/li&gt;
  &lt;li&gt;….&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;管理者/经理可能会因为 Scrum 让开发团队自我运转而感到害怕, 害怕自己原有的领导权被分散掉&lt;/p&gt;

&lt;p&gt;这导致有些管理者可能并不希望 Scrum 成功, 甚至悄悄运作, 让 Scrum 失败&lt;/p&gt;

&lt;p&gt;管理者控制预算，拥有招聘和解雇权，并可以利用组织内的政治关系来挖掘和抵制与Scrum相关的变化&lt;/p&gt;

&lt;p&gt;SM 的一个重要工作就是管理组织, 包括&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;You help management &lt;strong&gt;plan&lt;/strong&gt; the company’s Scrum &lt;strong&gt;adoption&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;You lead and &lt;strong&gt;coach people&lt;/strong&gt; (including managers) &lt;strong&gt;during the adoption&lt;/strong&gt; process.&lt;/li&gt;
  &lt;li&gt;You &lt;strong&gt;help everyone&lt;/strong&gt; (yep, including managers) understand how empiricism and Scrum work.&lt;/li&gt;
  &lt;li&gt;You serve &lt;strong&gt;as a change agent&lt;/strong&gt;, provoking changes in the organization (with management support) that &lt;strong&gt;improve the way&lt;/strong&gt; your Scrum team works.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;不知道经理想要什么-没有得到经理的信任&quot;&gt;不知道经理想要什么/ 没有得到经理的信任&lt;/h3&gt;

&lt;p&gt;经理们有很多顾虑，包括交付、可预测性、利润和预算。他们实际上不在乎冲刺、回顾、故事要点或Scrum的任何日常细节。&lt;/p&gt;

&lt;p&gt;这可能会导致经理和Scrum团队之间的严重脱节,  经理正在试图弄清楚他们如何融入这套新规则。&lt;/p&gt;

&lt;p&gt;SM 需要弄清楚管理层需要您做什么, 这将帮助SM 与经理建立起信任的关系&lt;/p&gt;

&lt;p&gt;如果我们还不知道经理想要什么, 就去和他聊聊, 问问他们需要你做什么.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;在这次谈话中, 经理们想从我们这里获得什么？&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;我可以做什么来帮助经理获得他们想要的东西？&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;我可以利用哪些Scrum实践来实现这一结果，同时仍然满足管理层的需求？&lt;/li&gt;
  &lt;li&gt;我需要哪些数据才能发挥作用？&lt;/li&gt;
  &lt;li&gt;我怎么知道我成功了？&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;通过成为管理层的合作伙伴，您可以增加Scrum团队和更广泛组织之间的信任。&lt;/p&gt;

&lt;p&gt;信任让我们的生活更轻松。&lt;/p&gt;

&lt;p&gt;###&lt;/p&gt;

&lt;h3 id=&quot;想一次对话就解决问题&quot;&gt;想一次对话就解决问题&lt;/h3&gt;

&lt;p&gt;如果您正在就您提议的更改与经理进行首次互动，请慢慢来。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;问问经理他们需要你做什么。&lt;/li&gt;
  &lt;li&gt;就对他们来说很重要的问题进行&lt;em&gt;另一次&lt;/em&gt;对话&lt;/li&gt;
  &lt;li&gt;然后，你的工作是出现在下次会议上，满足&lt;em&gt;他们&lt;/em&gt;的需求。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;随着时间的推移，您将与该经理建立关系并建立信任。一旦您赢得了他们的信任，您可能会有机会建议对当前流程或实践进行小幅更改。&lt;/p&gt;

&lt;p&gt;请记住，从介绍到建议改变公司流程——即使是小的改变——是许多对话过程中需要发生的事情，而不仅仅是一次。&lt;/p&gt;

&lt;h3 id=&quot;不对经理的需求好奇&quot;&gt;不对经理的需求好奇&lt;/h3&gt;

&lt;p&gt;有些经理试图阻挠 Scrum , 他们为 Scrum 设置各种障碍, 并试图对Scrum团队应该自己处理的领域（如架构、设计和测试）保持控制和监督&lt;/p&gt;

&lt;p&gt;看起来经理在故意和我们作对, 其实并不是.&lt;/p&gt;

&lt;p&gt;如果遇到抵制变革的经理, 请保持好奇心,  找个机会了解他的顾虑是什么, 以及他的需求是什么.&lt;/p&gt;

&lt;p&gt;先不要急着给出你的回应, 做出回应之前花点时间, 不要试图立即反驳他们刚才说的话。&lt;/p&gt;

&lt;p&gt;再多问一些问题，以了解他们试图实现的目标的核心。 比如 “听起来很有意思, 你为什么会有这样的想法/问题”&lt;/p&gt;

&lt;p&gt;保持好奇心（通过提问而不是做出判断）是你如何履行仆人领袖的角色。&lt;/p&gt;

&lt;h3 id=&quot;更好更快更便宜谁在乎呢&quot;&gt;更好、更快、更便宜——谁在乎呢？&lt;/h3&gt;

&lt;p&gt;老板：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;听着，你可以随心所欲地向我兜售Scrum理论，但如果Scrum没有比我们目前做得更好、更快、更便宜，我们就不会投资了。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;我们应该保持好奇, 为什么老板会这么问, 到底 Scrum 让工作变得更好,更快,更便宜的一些原因：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Scrum创造了根据频繁反馈做出新决定的机会。这比过去重视完成一套要求而不是与客户合作的做法要好。&lt;/li&gt;
  &lt;li&gt;Scrum比其他方法或框架更快。它更快地为客户提供价值，因为频繁的反馈有助于您知道问题何时发生，这让利益相关者更快地获得投资回报。对于Scrum团队来说，了解产品构建时的挑战和风险也更快。&lt;/li&gt;
  &lt;li&gt;Scrum更便宜。Scrum做得好，可以防止您交付客户不想要和不付费的东西——换句话说，浪费。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;经理应该在-scrum-中做什么&quot;&gt;经理应该在 Scrum 中做什么?&lt;/h3&gt;

&lt;p&gt;正常运转的 Scrum 团队&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;产品所有者完全有权就产品做出战略和战术决策。&lt;/li&gt;
  &lt;li&gt;Scrum主控负责维护Scrum框架；为开发团队、产品所有者和组织提供服务；并消除阻碍Scrum团队的任何障碍。&lt;/li&gt;
  &lt;li&gt;开发团队决定如何最好地完成工作，并构建潜在的可交付产品的高质量增量。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;问题在于，这种分散的决策方式可能很难让经理们适应。许多经理喜欢就产品和工作方式做出决定。经理们往往不愿意失去这种决策权，他们可能会感到紧张，事实上，《Scrum Guide》甚至没有提到经理。&lt;/p&gt;

&lt;p&gt;那么经理为Scrum团队做什么呢？事实上，很多。经理：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;为Scrum团队&lt;strong&gt;设定&lt;/strong&gt;高水平的&lt;strong&gt;组织目标&lt;/strong&gt;。这些目标澄清了团队工作的目的。明确的目的激励团队，从而实现高效工作。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;帮助确保组织中的每个人都朝着共同的目标而努力&lt;/strong&gt;。如果各个团体不都朝着共同的目标和结果保持一致，一个组织将无法获得Scrum的全部好处。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;定义Scrum团队在里面工作的边界&lt;/strong&gt;。管理层制定组织标准、惯例和政策，可以帮助人们集中注意力并清楚地了解他们应该如何开展工作。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;保持自我组织。&lt;/strong&gt;经理应该捍卫团队的自我组织能力，并决定如何最好地完成工作。例如，托德咨询的一个组织的一位主任试图要求每个开发团队以同样的方式创建估算。开发经理为每个开发团队评估他们认为最好的方式的权利而奋斗。经理最终获胜，保留了开发团队做出能够自我组织的决策的能力。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;消除组织障碍&lt;/strong&gt;。经理应与Scrum大师合作，努力尽快消除组织障碍。例如，如果您的团队只有一个工具许可证，这对他们正确测试应用程序至关重要，该怎么办？您可以联系您的经理，寻求加快采购流程以获得额外许可证的帮助。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;处理人力资源职责&lt;/strong&gt;。这些包括政策合规性、福利、职业发展、培训以及与满足团队成员需求相关的所有其他事情。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;通过一些实验性的尝试来解决经理的担忧&lt;/p&gt;

&lt;p&gt;在与对Scrum持怀疑态度的经理交谈时可以尝试的问题示例：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;我们如何将您的担忧转化为实验？&lt;/li&gt;
  &lt;li&gt;我们尝试一些实验会有什么风险？&lt;/li&gt;
  &lt;li&gt;过去我们可以借鉴哪些有效的经验？&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;教练角-3&quot;&gt;教练角&lt;/h3&gt;

&lt;p&gt;需要定期和经理们进行一些沟通互动活动&lt;/p&gt;

&lt;p&gt;你多久没和公司管理团队合作了？如果已经有一段时间了，也许是时候举办一个活动了，不仅会引发一些启发性的讨论，还可以帮助你和管理层团队创建一个障碍清单。你可以这样做：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;将管理团队聚集到一个墙上有足够的空间的大房间里。给墙壁的一个区域贴上“为什么是Scrum？”&lt;/li&gt;
  &lt;li&gt;让每个参与者用便签写下他们对以下问题的答案：“我们为什么要采用Scrum？”&lt;/li&gt;
  &lt;li&gt;在每个人都写下答案后，让每个人都大声朗读答案（一次一个），然后在“为什么是Scrum？”中发布答案。空间。&lt;/li&gt;
  &lt;li&gt;一旦每个答案都发布，请大家共同努力，将答案分组到共同的主题中。虽然每个组织都不同，但可能会出现一些常见的模式。例如，您可能会看到一组与可预测性或交付相关的便签。&lt;/li&gt;
  &lt;li&gt;查看分组，并选择与交付最相关的便签。例如，您可能会看到一个关于代码质量、提高开发技能、了解客户的需求、更快地向客户提供软件或省钱的便条。&lt;/li&gt;
  &lt;li&gt;把这张便签放在墙上标有“交付”的新区域，然后问：“为什么交付很困难？”&lt;/li&gt;
  &lt;li&gt;给参与者一分钟时间在便笺上写下尽可能多的想法，每个便笺一个答案。&lt;/li&gt;
  &lt;li&gt;请参与者找到一个合作伙伴，并在两分钟内比较他们的列表，并继续扩展他们。你想让他们在单独的贴纸上想出尽可能多的想法。它们还应该消除任何重复。&lt;/li&gt;
  &lt;li&gt;让每对人找到另一对一起工作，然后让这四人一组花四分钟比较并添加到他们的想法列表中。让他们用新的便签写下他们想出的每个新想法。同样，让他们消除任何重复。&lt;/li&gt;
  &lt;li&gt;让每个小组在将他们的想法放在您创建的“交付”区域时大声朗读出来。如果另一个小组听到他们也写下了一个想法，请让他们揉碎笔记以消除重复。&lt;/li&gt;
  &lt;li&gt;祝贺该小组创建了一份交付障碍清单。&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;thinking-in-sprint&quot;&gt;Thinking in Sprint&lt;/h2&gt;

&lt;p&gt;所有必要的Scrum事件（冲刺、冲刺规划、每日Scrum、冲刺审查和冲刺回顾）都是时间框定的。每个活动的持续时间都应该根据您的环境量身定制。以下是《Scrum指南》关于每个活动应该持续多长时间的指南：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Sprint - one month or less&lt;/li&gt;
  &lt;li&gt;Sprint Planning - a maximum of eight hours for a one-month sprint, usually shorter for shorter sprint lengths&lt;/li&gt;
  &lt;li&gt;Daily Scrum - a maximum of 15 minutes regardless of sprint length&lt;/li&gt;
  &lt;li&gt;Sprint Review - a maximum of four hours for a one-month sprint, usually less for shorter sprint lengths&lt;/li&gt;
  &lt;li&gt;Sprint Retrospective - a maximum of three hours for a one-month sprint, usually less for shorter sprint lengths&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Sprint 是一个经常被误解的工具,  Sprint 可以带来如下好处&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The sprint time box creates focus on doing only the things that are essential to completing the sprint goal, and getting features released to your customers. Any distractions that are not related to your sprint goal become an easy “no’’—you don’t have time to waste.&lt;/li&gt;
  &lt;li&gt;Working and thinking in sprints will expose many problems with the way your Scrum team currently works. Every bottleneck, inefficient process, and ineffective practice will come to light as the team tries to get a feature completed, tested, integrated, and deployed by the end of the sprint. This provides excellent opportunities for your team to identify and resolve impediments that could have gone undetected or unresolved if you were using another framework or methodology.&lt;/li&gt;
  &lt;li&gt;The sprint represents a commitment to Scrum. By working in sprints, the team has decided to provide multiple opportunities to inspect and adapt progress toward the sprint goal. This commitment allows the team to get feedback frequently and maintain alignment with the customers’ needs.&lt;/li&gt;
  &lt;li&gt;Working in sprints gives your business partners transparency into the team’s progress, and empowers the stakeholders to manage cost and release schedules with real data, clear information, and product increments to inspect at the end of every sprint.&lt;/li&gt;
  &lt;li&gt;Sprints give your team members opportunities to let go of limiting beliefs about what is possible and to try new approaches. While this may be uncomfortable at times, with the help of the Scrum master (you!), they can move through these situations and grow as developers and team members. The momentary discomfort is worth the long-term benefits.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;我们需要一个特殊的冲刺&quot;&gt;我们需要一个特殊的冲刺&lt;/h3&gt;

&lt;p&gt;很多时候, 团队还是在使用瀑布的开发方式,但是却给这些方式冠以了Scrum 的名字, 如果出现下面这些名字, 就需要提高警惕了&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Sprint Zero - Also called architecture or planning sprints, the intent of this type of sprint is to create a robust plan, often in the form of a product backlog, that the team can use to get started.&lt;/li&gt;
  &lt;li&gt;Design Sprints - The result of these sprints is a design output such as user experience or architecture. There’s no business value delivered during these sprints, only a vision of what future business value &lt;em&gt;might&lt;/em&gt; look like, such as user interface mockups or a database design.&lt;/li&gt;
  &lt;li&gt;Development Sprints - Sprints where the only thing achieved is writing code. All other tasks, such as design, testing, and integration, are put on hold or handled by other teams.&lt;/li&gt;
  &lt;li&gt;Test Sprints - Sprints where code written by another team is tested. Bugs and issues that are found are reported back to the team that created them.&lt;/li&gt;
  &lt;li&gt;Integration Sprints - The output is code merges or attempts at completing integrations with other systems that the system is dependent upon.&lt;/li&gt;
  &lt;li&gt;Hardening Sprints - These are for code clean up, bug fixes, integration, testing and anything left over, to make sure the system is ready for production.&lt;/li&gt;
  &lt;li&gt;Release Sprints - Often used as the final phase, a release sprint is where software that has been designed, written, and tested meets the infrastructure team for deployment into production.&lt;/li&gt;
  &lt;li&gt;Bug Sprints - After code is shipped into production and bugs start rolling in, these sprints are designed to patch and fix them, and then deploy those fixes back into production.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;弄清楚为什么您的团队要求专门的冲刺是从Scrum练习中删除这些事件的第一步。以下是一些可能导致团队请求特定、专业冲刺的常见潜在问题：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Sprint zero是一个团队希望在开始前进行太多分析的标志，这在第一次冲刺期间对学习不open。团队还使用冲刺零来暂停软件开发过程，以赶上测试、技术债务，或只是让一周更容易充电并为下一次冲刺做准备。&lt;/li&gt;
  &lt;li&gt;设计冲刺暗示了一个团队在处理不完整信息时感到不舒服。软件开发世界中的一个严酷事实是，您无法完美规划复杂性。您将在整个冲刺过程中进行实验、学习和适应。&lt;/li&gt;
  &lt;li&gt;测试、集成和硬化冲刺是试图在开发周期结束时将质量塞进产品中。质量必须是Scrum团队的首要考虑因素。开发团队每天在冲刺中测试、集成和改进产品——而不仅仅是在最后。Scrum要求团队每次冲刺都会输出潜在的可释放增量，这需要测试。&lt;/li&gt;
  &lt;li&gt;发布冲刺让Scrum团队有时间将最新的产品增量转移到生产中，并验证一切是否仍然正常工作。由于手动部署和回归测试实践，团队通常需要这种分阶段的方法。每当团队手动部署产品时，他们都不是花在构建企业想要的有价值的东西上。为了帮助您的团队克服这些过时的做法并提高效率，请作为一个团队规划您的发布流程，并寻找自动化重复和复杂任务的方法。&lt;/li&gt;
  &lt;li&gt;Bug冲刺是质量低下的标志。放慢速度，减少冲刺中积压的产品，加强完成的定义，并停止创建错误。有时你必须放慢速度才能更快地交付。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;让我们更改冲刺长度&quot;&gt;让我们更改冲刺长度&lt;/h3&gt;

&lt;p&gt;冲刺的长度应该在 1 个月或者之内&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;在开发过程中保持冲刺持续时间的一致性可以建立节奏。&lt;/li&gt;
  &lt;li&gt;一致的时间框还有助于团队向产品所有者和利益相关者提供一致的预测。&lt;/li&gt;
  &lt;li&gt;一旦冲刺开始，它的长度就无法改变。&lt;/li&gt;
  &lt;li&gt;我们不会因为更快地完成所有工作而缩短它们，也不会因为我们没有完全完成而延长它们。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;但我们离得太近了！我们不能在冲刺中增加几天来完成最后一个积压的产品吗？&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;不。即使您已经完成了两周的冲刺，并且没有完全完成产品增量。这是一个困难的地方，但你必须去冲刺retrospective ，讨论冲刺期间发生了什么，以及为什么你没有完成的产品增量。无论发生什么，我们都不会超过时间限制。&lt;/li&gt;
  &lt;li&gt;没有失败的冲刺，只有我们可以与利益相关者一起学习的不良结果。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;延长冲刺的时间的问题:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;连续延长一天会增加朝着错误方向前进的风险&lt;/li&gt;
  &lt;li&gt;让那些真正影响了交付的障碍没有被暴露出来, 如果不解决，成本、延迟和风险将加剧。&lt;/li&gt;
  &lt;li&gt;如果你要求的额外一天还不够呢？你见过多少次“再多一天”变成“再多一个月”？&lt;/li&gt;
  &lt;li&gt;如果您延长冲刺时间，您将剥夺团队改进流程、实践和协作的机会。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;“正确的”冲刺长度是多少&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;当团队决定冲刺长度时，您首先应该考虑&lt;strong&gt;PO 多久会被利益相关者和客户要求进行一次反馈&lt;/strong&gt;。在高度复杂的环境中，过长的反馈循环可能会有风险。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;您的团队需要讨论各种冲刺长度选项的&lt;strong&gt;产品和技术影响&lt;/strong&gt;，并确定他们在没有反馈的情况下可以舒适地工作多久，以及利益相关者在不检查最新产品增量的情况下可以舒适地工作多久。当然，&lt;strong&gt;冲刺时间还必须在技术上可行&lt;/strong&gt;，这样才能完整完成“完成”的工作。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;您的团队决定的周数远不如选择背后的推理和导致该决定的协作讨论重要。在您的团队决定“恰到好处”之前，请确保您&lt;strong&gt;平衡了风险，经常为客户提供价值，以及技术可行性。&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;scrum的会议太多了&quot;&gt;Scrum的会议太多了&lt;/h3&gt;

&lt;p&gt;有的时候 Scrum 团队会被会议所淹没, 可能的原因 和解决办法&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;违反时间框：如果您的Scrum活动超过分配的时间，您需要认真研究为什么团队无法在预定时间内实现活动目标。&lt;/li&gt;
  &lt;li&gt;多个团队中的人：被分配到多个团队的开发人员必须参加每个团队的Scrum活动。考虑单团队任务。&lt;/li&gt;
  &lt;li&gt;Bad facilitating: The events are within the time box but the team isn’t making adaptations. For instance, if people aren’t engaged in a sprint review or sprint retrospective, perhaps it’s time to change the format.&lt;/li&gt;
  &lt;li&gt;日历上仍然保留着旧会议：这是最常见的问题。每个Scrum活动都旨在取代传统会议。如果您的开发团队仍然被他们的日历困住了，是时候减少一些会议了。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;如何面对额外会议的经验:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;邀请利益相关者参加 Sprint Review meeting, 向他们介绍我们的迭代成果和规划, 回答他们的问题和困惑&lt;/li&gt;
  &lt;li&gt;随时欢迎领导来了解 Scrum 的进展情况, 为他们展示我们的 report, 但是这部分时间要由 PO 来完成比较合适, 不要影响开发团队的节奏.&lt;/li&gt;
  &lt;li&gt;大家都可以访问的工具和高度透明的报表&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;底线：帮助您的团队成员清理日历并开始工作。&lt;/p&gt;

&lt;h3 id=&quot;取消一个-sprint&quot;&gt;取消一个 Sprint&lt;/h3&gt;

&lt;p&gt;产品Owner 有权利取消一个没完成的 Sprint, 但是这是在迫不得已的情况下才能做的. 只要 Sprint 足够短, 应该完成它.&lt;/p&gt;

&lt;p&gt;产品所有者确实有权取消冲刺；然而，该决定通常是与Scrum大师和开发团队协商做出的，因为它发生了如此戏剧性和破坏性的事件。&lt;/p&gt;

&lt;p&gt;就像不必要地取消冲刺一样，继续永远无法带来价值的冲刺也会浪费时间。因此，当情况发生变化时，即使你以前从未取消过冲刺，也许也值得讨论。&lt;/p&gt;

&lt;h3 id=&quot;严格按照需求开发&quot;&gt;严格按照需求开发&lt;/h3&gt;

&lt;p&gt;PO 在 Sprint 之前应该尽量细化需求, 并和开发团队进行充分交流, 让开发团队清晰的了解要被开发的内容&lt;/p&gt;

&lt;p&gt;但是如果在迭代过程中, 开发团队不再和 PO 针对需求进行互动, 那么也是不正常的事情.&lt;/p&gt;

&lt;p&gt;无论开发团队在任何时候对Sprint Backlog 中的内容有疑问, 都应该第一时间找到 PO 进行交流.&lt;/p&gt;

&lt;h3 id=&quot;教练角-4&quot;&gt;教练角&lt;/h3&gt;

&lt;p&gt;处理那些Scrum 之外的事件的方法&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;在Sprint 期间, 让团队成员留意&lt;em&gt;非&lt;/em&gt; Scrum事件的活动，如额外会议、延迟、中断、拦截和障碍。随着这些活动的发生，让团队把它们写在便笺上，并把它们放在一个公共区域。目标是尽可能多地捕捉这些活动。&lt;/li&gt;
  &lt;li&gt;在 Spring 结束后的 Retrospective 会议上吧这些便签拿出来, 让他们进行分类, have the team sort the resulting sticky notes using the MoSCoW (Must, Should, Could, Won’t) method:
    &lt;ul&gt;
      &lt;li&gt;&lt;em&gt;Must continue&lt;/em&gt; - things that absolutely need to continue, or the success of the product will be threatened.&lt;/li&gt;
      &lt;li&gt;&lt;em&gt;Should continue&lt;/em&gt; - things that should continue and which might affect the product (negatively or positively).&lt;/li&gt;
      &lt;li&gt;&lt;em&gt;Could continue&lt;/em&gt; - things that we could keep doing, but that don’t affect the product.&lt;/li&gt;
      &lt;li&gt;&lt;em&gt;Won’t continue&lt;/em&gt; - things that are a waste and that we shouldn’t continue.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;一旦便签分类完毕，让团队后退一步，考虑活动中突出的内容。问他们以下问题：
    &lt;ul&gt;
      &lt;li&gt;有什么应该移动的吗？如果是这样，为什么要移动它？&lt;/li&gt;
      &lt;li&gt;有什么重大分歧吗？如果是这样，我们该怎么做？&lt;/li&gt;
      &lt;li&gt;我们可以优化“必须继续”的活动吗？&lt;/li&gt;
      &lt;li&gt;对于“应该”和“可以”的活动，它们中的任何一个应该移动到“必须”还是“不会”？&lt;/li&gt;
      &lt;li&gt;我们的大多数活动都在“必须”列中吗？它们&lt;em&gt;真的是&lt;/em&gt;我们必须继续做的事情，还是我们只是觉得它们是？&lt;/li&gt;
      &lt;li&gt;我们如何停止“不会继续”的活动？&lt;/li&gt;
      &lt;li&gt;有什么艰难的决定吗？&lt;/li&gt;
      &lt;li&gt;根据这个练习，我们将在下一次冲刺中实施的一两个项目是什么？&lt;/li&gt;
      &lt;li&gt;我们什么时候应该重温这个列表？&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;sprint-planning---冲刺计划&quot;&gt;Sprint Planning - 冲刺计划&lt;/h2&gt;

&lt;p&gt;冲刺计划活动是冲刺中的第一个活动，整个Scrum团队都参加。输出是Sprint Backlog（包含预测和计划）和冲刺目标，团队可以自行组织。&lt;/p&gt;

&lt;p&gt;经常遇到的情况是&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Sprint Plan 会议上大家陷入了讨论需求的情况, 往往几个小时还在讨论某个需求到底是怎样的.&lt;/li&gt;
  &lt;li&gt;PO 没有很多时间提前准备, 导致花费大量时间在会议上讨论需求或者画线框图&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;冲刺规划中的讨论有两个方面：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;我们在建造什么——产品所有者准备了排序的产品backlog。PBI应该有足够的细节，开发团队可以将其视为candidate，可以被选入冲刺backlog。细节水平取决于你情况的背景。在某些情况下，一个模糊的想法可能已经足够好了。其他人将要求在冲刺前大幅完善PBI。&lt;/li&gt;
  &lt;li&gt;我们将如何构建它——随着开发形成冲刺积压，他们合作讨论了手头问题的方法。冲刺期间将出现更多的工作——意识到这一点很重要。我们希望开发团队对他们即将实现的目标充满信心，相信这是可能的，并接管它。他们制定的计划应该足以在冲刺开始时将他们从地面上抬起来。意味着确定性的充分详细实施不是目标。冲刺积压由计划和预测组成，完全由开发团队拥有。&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;马拉松计划活动&quot;&gt;马拉松计划活动&lt;/h3&gt;

&lt;p&gt;团队在 Sprint Plan 中花费了大量时间搞清楚一些 Backlog 的需求细节以及如何实现&lt;/p&gt;

&lt;p&gt;常见问题&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;PO 没有提前细化 PBI, 导致大量的讨论&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;拥有健康的产品backlog需要两个组成部分：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;产品所有者根据情况适当管理产品backlog。这可能意味着他们积极参与添加、更新、删除和订购积压的产品项目。或者这可能意味着他们已经下放了其中一些责任，同时仍然对积压工作保持全面问责。&lt;/li&gt;
  &lt;li&gt;开发团队通常花在冲刺精炼积压产品的时间不超过百分之十。这些活动包括添加细节、估计、分解、讨论实施计划，以及执行为&lt;em&gt;即将到来的冲刺&lt;/em&gt;做准备所需的任何其他产品积压活动。我们称从开发团队收到此类TLC的产品积压项目为“就绪”PBI。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;产品积压项目应该有多少细节？&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;在产品积压中，底部和下部的项目通常是模糊的、注定要在未来发生的大变化。当您朝着顶端前进时，项目变得更加清晰，更适合实现。但一个积压的产品项目应该被视为“就绪”多少细节？&lt;/li&gt;
  &lt;li&gt;PBI应该有足够的细节，以便开发团队可以以高度的信心开始工作，相信他们可以在冲刺结束时交付它。提前太多的细节可能会让你做错事。细节太少，团队可能无法在冲刺期间有效地处理该项目。如果开发团队觉得他们有足够的信息来实现PBI，并且可以在冲刺期间完成，那么它就是“就绪”。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;没有-sprint-goal-的-sprint-plan&quot;&gt;没有 Sprint goal 的 Sprint Plan&lt;/h3&gt;

&lt;p&gt;目前的冲刺没有总体目标。当冲刺产生不令人满意的结果时，产品所有者和开发团队经常争论不满意。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;冲刺目标是什么？&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;冲刺目标是一个描述冲刺目的的明确目标。它概述了产品的业务需求或功能。这是Scrum团队在冲刺期间与客户的联系。它创造了透明度，是开发团队和产品所有者之间的范围谈判工具。只要你有一个冲刺目标，那么产品所有者和开发团队对彼此都有明确的期望。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;考虑一下 Sprint Backlog - 一个在线宠物用品商店的团队&lt;/p&gt;

&lt;p&gt;表5。Sprint积压示例&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;PBI #&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;类型&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;头衔&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;118&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Feature&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;添加数字支付-Apple Pay&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;119&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Feature&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;添加数字支付 - Google&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;120&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Feature&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;添加数字支付 - Facebook&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;121&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Feature&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;添加数字支付-亚马逊&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;124&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Bug&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;狗主人建议展示猫用品。&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;126&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Feature&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;添加发货集成-联邦快递&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;我们可以为这次 Sprint 制定一个冲刺目标 - &lt;em&gt;“添加数字在线支付形式。”&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;谁创造了冲刺目标？&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;冲刺目标是冲刺规划的输出。这是产品所有者和开发团队之间的协作努力。作为Scrum大师，您应该帮助您的团队创建一个冲刺目标。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;让团队透支&quot;&gt;让团队透支&lt;/h3&gt;

&lt;p&gt;很多 企业都希望团队能在一个 Sprint 中做尽可能多地工作, 但这会造成&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;产品质量低，因为完成项目的竞争成为最重要的成功因素。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;由于冲刺成为小型“死亡游行”，员工被视为“资源”，而不是人，士气低落。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;由于“清除盘子”成为需要解决的问题，而不是取悦客户，因此对产品的预期价值缺乏所有权。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;没有创新的空间，因为有很多事情要做，而这个列表填补了——或超过了开发团队完成它的时间。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;团队的对话不是关于有效和交付优秀产品的对话，而是关于最大限度地提高个人效率。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;团队过于疲劳&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;冲刺完成率是一个很好的指标吗？&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;冲刺完成率是一些组织用来查看团队是否在冲刺期间完成所有冲刺积压项目的指标。它在确定Scrum团队的有效性方面没有价值。一个团队可以完成所有冲刺积压项目，但提供低质量的工作，不会给产品增加任何价值。相反，一个团队无法定期完成整个冲刺积压，而是提供高质量、有价值的增量。底线：冲刺完成率是无用的，您不应该使用它们。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;技术债务越来越大&quot;&gt;技术债务越来越大&lt;/h3&gt;

&lt;p&gt;如果因为要做一个需求而放弃重构已有的不良代码并不是好的建议&lt;/p&gt;

&lt;p&gt;建议把重构代码并做更完善的自动化测试作为 backlog 中的工作, 而不是不断的在不良的代码上累加功能&lt;/p&gt;

&lt;p&gt;请在冲刺规划期间提出以下问题：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;我们有没有办法让那个地区更友好地编码？&lt;/li&gt;
  &lt;li&gt;是否有涵盖现有功能的自动化测试？&lt;/li&gt;
  &lt;li&gt;是否值得成对地合作，以找到一种方法使代码更健壮？&lt;/li&gt;
  &lt;li&gt;我们可以做些什么来降低此代码的脆弱性？&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;与其最终导致积压一堆“重构”项目的产品，不如在技术债务进入对话时立即承担技术债务。如果有技术债务，请将其解决纳入提供某种业务价值的产品积压项目中。不要忽视它，否则你最终可能会陷入债务中。&lt;/p&gt;

&lt;h3 id=&quot;教练角-5&quot;&gt;教练角&lt;/h3&gt;

&lt;h2 id=&quot;sprint-backlog&quot;&gt;Sprint Backlog&lt;/h2&gt;

&lt;p&gt;Scrum 团队要拥有 Sprint Backlog 的控制权, 而不是管理层, 否则可能会产生很多问题.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;管理层会不断的追加需求到 Sprint Backlog 中, 导致Sprtint不可控&lt;/li&gt;
  &lt;li&gt;管理层会进行微观管理, 让 Scrum 开发团队没有 ownership, 开发工作马虎, 士气低落&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Sprint Backlog 的所有者是开发图案丢&lt;/p&gt;

&lt;p&gt;Product Backlog 的所有者是 PO, 管理层可以和 PO 讨论增加 Product Backlog, 但不是 Sprint Backlog&lt;/p&gt;

&lt;h3 id=&quot;开发人员被-burn-down&quot;&gt;开发人员被 Burn down&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Sprint烧毁图表是一种互补的Scrum实践，开发团队可以使用它来检查他们的冲刺积压。我们认可不太漂亮的燃尽图, 因为我们可以从中找到问题, 并加以调整/纠正&lt;/li&gt;
  &lt;li&gt;但我们如果只看到这些图表相关的不良行为远远大于好处, 把它作为 KPI 来衡量团队的绩效, 那么这已经偏离了燃尽图的初衷&lt;/li&gt;
  &lt;li&gt;为了让燃尽图好看而可能会迫使开发团队弄虚作假. 冲刺以大量未完成的工作结束，这些工作被标记并在冲刺评论中显示为完成。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Sprint Backlog 和相关的燃尽图等都属于 Scrum 团队. 管理层应该理解和尊重&lt;/p&gt;

&lt;p&gt;我们对冲刺烧毁图表的痴迷导致了一些负面行为, 如果必要, 不用燃尽图也没关系,&lt;/p&gt;

&lt;p&gt;保持物理看板的重要性, 它更能让团队时刻了解 Sprint Backlog 的完成情况, 尽管有的时候团队会认为物理看板和电子看板是重复劳动.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gxuqev676ej30vd0u0415.jpg&quot; style=&quot;zoom:25%;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;物理看板的重要性:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;想象一下，如果你们都站在看板前，同时积极改变和管理冲刺积压，那么每天的争球会好得多。&lt;/li&gt;
  &lt;li&gt;物理Scrum板确实有助于提高透明度。如果经理们想知道发生了什么，他们可以来看看看板。（这也适用于数字Scrum板——它们也提高了透明度。）&lt;/li&gt;
  &lt;li&gt;当您一直在处理艰巨的任务或产品积压项目时，将便签从“执行”列实际移动到“完成”列真的很令人满意。&lt;/li&gt;
  &lt;li&gt;与浏览数字工具不同，浏览物理看板是再次检查开发团队成员在做什么的更简单、更快的方式。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;鼓励开发团队使用物理Scrum板是放松管理层对冲刺烧毁图表的痴迷的第一步&lt;/p&gt;

&lt;h3 id=&quot;过度承诺-sprint-backlog&quot;&gt;过度承诺 Sprint Backlog&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;我们经常听到Scrum团队和组织说，Sprint Backlog 是一项承诺——冲刺积压中的所有内容都必须在冲刺结束前完成，&lt;/li&gt;
  &lt;li&gt;这种对冲刺积压的思考方式表明，一个组织渴望确定性，但在复杂的项目中并不存在确定性。&lt;/li&gt;
  &lt;li&gt;例如, 表面上似乎只需要几个小时就能修复的错误。但当你深入研究代码时，你会发现它比你想象的要复杂的多, 修复需要几天甚至几周&lt;/li&gt;
  &lt;li&gt;这就是复杂工作的本质.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Sprint 开始后, 我们可以对 Sprint backlog 进行调整, 但是 Sprint 目标不能改变&lt;/p&gt;

&lt;p&gt;如果开发团队发现 Spint 过程中因为调整 backlog 而影响了目标, 这时必须找 PO 进行沟通&lt;/p&gt;

&lt;h3 id=&quot;谁更新看板物理或者电子的&quot;&gt;谁更新看板(物理或者电子的)&lt;/h3&gt;

&lt;p&gt;有的时候开发团队并不会主动去更新看板上的贴纸的位置来反应最新的状态. 只能是 SM 催促他们去更新, 或者 SM 自己来更新&lt;/p&gt;

&lt;p&gt;Scrum Master 更新看板是错误的, 因为&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;这样做实际上&lt;em&gt;降低了&lt;/em&gt;冲刺积压的透明度&lt;/li&gt;
  &lt;li&gt;它变成了一个由Scrum Masnter而不是开发团队拥有的状态板&lt;/li&gt;
  &lt;li&gt;这对开发团队的自我组织能力产生了负面影响，因为他们对自己工作的自主权变小了&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;谁更新Sprint Backlog/看板&lt;/strong&gt; - 不要成为 Scrum 警察&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;开发团队中的任何人都可以更新冲刺积压。开发团队以外的任何人都不应该更新冲刺积压——即使是你，Scrum大师也不应该更新。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Sprtint Backlog 的 owner 是开发团队, 开发团队有义务让 Sprint 足够透明, 那么就应该及时的更新 borad&lt;/p&gt;

&lt;p&gt;开发团队使冲刺积压对整个Scrum团队透明的一些原因：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;在daily scrum期间，透明的冲刺积压有助于开发团队了解他们在实现冲刺目标方面取得了多大进展。&lt;/li&gt;
  &lt;li&gt;它让Scrum团队的每个人都知道事情的发展。&lt;/li&gt;
  &lt;li&gt;它提供了一种识别完成冲刺目标的潜在障碍的方法。&lt;/li&gt;
  &lt;li&gt;对于拥有不同技能组合的开发团队成员来说，这是一种有用的方法来协调工作。&lt;/li&gt;
  &lt;li&gt;它有助于防止开发团队成员被其他开发人员和Scrum团队以外的人员的问题打断。&lt;/li&gt;
  &lt;li&gt;它在Scrum团队和组织其他成员之间建立信任。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;当您遇到一个没有更新冲刺积压的开发团队时，请扪心自问以下问题：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;您是否要求开发团队更新冲刺积压只是为了更新它？&lt;/li&gt;
  &lt;li&gt;开发团队作为一个团队是否具有凝聚力和良好的工作氛围？&lt;/li&gt;
  &lt;li&gt;您是否要求他们更新冲刺积压，因为利益相关者要求您提供有关开发团队工作的信息？&lt;/li&gt;
  &lt;li&gt;开发团队是否理解在冲刺积压中创建透明度的重要性？&lt;/li&gt;
  &lt;li&gt;开发团队是否害怕如果他们的工作太透明，每个人都能看到会发生什么？&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;每日投影仪更新&quot;&gt;每日投影仪更新&lt;/h3&gt;

&lt;p&gt;常常有这种情况, SM 或者开发 leader 每天早上打开投影仪, 调出电子看板, 询问每个开发人员的 backlog 进展情况, 并进行现场更新. 开发团队成员死气沉沉地盯着投影仪，等待轮到他们说话。很少有人主动更新冲刺积压和看板。&lt;/p&gt;

&lt;p&gt;这种情况的明显问题:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;SM 不应该是更新 Sprint backlog 的人&lt;/li&gt;
  &lt;li&gt;开发人员依赖 SM ,而丧失了责任感&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;如果投影仪更新已经发生了, 尝试&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;不用投影仪, 而改用物理看板,&lt;/li&gt;
  &lt;li&gt;让大家在更新完自己的 backlog 之后再开晨会, 如果不更新, 那就不开晨会&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;等待外部依赖&quot;&gt;等待外部依赖&lt;/h3&gt;

&lt;p&gt;一个案例: 一个 Scrum 团队的代码review 需要外部的架构团队帮助完成, 但这成为了一个瓶颈和不可控因素&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;无法准确预测工作的完成时间&lt;/li&gt;
  &lt;li&gt;降低 透明度&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;要解决这个问题的方法是:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;把Sprint 过程中的依赖步骤都画在看板上, 增加依赖步骤的透明度 &lt;img src=&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gxuxu7i742j31t30u0dj7.jpg&quot; style=&quot;zoom:25%;&quot; /&gt;&lt;/li&gt;
  &lt;li&gt;和组织讨论, 如何将外部依赖的能力变成团队内部的能力. 因为我们 Scrum 团队应该具备所有完成 Sprtint Backlog 和实现 Increment 的能力&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;教练角-6&quot;&gt;教练角&lt;/h3&gt;

&lt;p&gt;一些重点概念的回顾&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;开发团队拥有冲刺积压。&lt;/li&gt;
  &lt;li&gt;冲刺积压需要透明，以便开发团队可以正确检查，并在必要时调整计划以实现冲刺目标。&lt;/li&gt;
  &lt;li&gt;这种透明度可能会让一些开发团队感到害怕，因为它们可能仍然习惯于Scrum前的做事方式——这可能没有涉及Scrum要求的那么多透明度。&lt;/li&gt;
  &lt;li&gt;作为Scrum的大师，我们可以通过利用透明度来促进将改善开发团队工作流程的变革，并承诺我们将与管理层合作，解决透明度提高所发现的任何障碍，从而缓解这些担忧。&lt;/li&gt;
  &lt;li&gt;让开发团队使用看板来管理他们的冲刺积压。&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;daily-scrum-每日站会每日争球&quot;&gt;Daily Scrum 每日站会/每日争球&lt;/h2&gt;

&lt;p&gt;每天的争球是开发团队计划他们未来24小时内如何共同努力，朝着冲刺目标取得进展的机会。&lt;/p&gt;

&lt;p&gt;简而言之，这是一个带有15分钟时间框的协作规划会议&lt;/p&gt;

&lt;p&gt;但现实是很多 Scrum 团队都在开会的时候引入了错误的方法, 下面是一些反面的例子&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;经理带领开会/ SM 带领开会&lt;/li&gt;
  &lt;li&gt;进行问答式对话&lt;/li&gt;
  &lt;li&gt;批评式对话&lt;/li&gt;
  &lt;li&gt;讨论细节的对话&lt;/li&gt;
  &lt;li&gt;超过了 30 分钟&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;每日Scrum是Scrum团队健康状况最可靠的指标之一。如果你知道该寻找什么，你会发现开发团队在日常争斗中透露了很多关于自己的信息。仔细观看每日争球可以告诉你足够的答案：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;这是一支自组织起来的团队吗？&lt;/li&gt;
  &lt;li&gt;团队是否在工作中进行协作？&lt;/li&gt;
  &lt;li&gt;团队是否对工作有共同的责任感和所有权？&lt;/li&gt;
  &lt;li&gt;开发团队是专注于结果（冲刺目标）还是单个任务？&lt;/li&gt;
  &lt;li&gt;这是一家拥有冲刺积压的授权团队吗？&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;每日scrum作为状态会议&quot;&gt;每日Scrum作为状态会议&lt;/h3&gt;

&lt;p&gt;Daily Scrum 要说的三件事&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;我昨天做了什么来帮助开发团队实现冲刺目标？&lt;/li&gt;
  &lt;li&gt;我今天将怎么做来帮助开发团队实现冲刺目标？&lt;/li&gt;
  &lt;li&gt;我是否看到了阻碍我或开发团队实现冲刺目标的障碍？&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;但这些问题让团队成员专注于自己是个人，而不是团队的一部分。当重点是个人状态更新时，您已经失去了每日争球的大部分价值。&lt;/p&gt;

&lt;p&gt;在这种类型的日常争斗中，协作通常很低。问题仍然隐藏，障碍得不到解决，团队成员永远不确定它们的进展如何。您失去了透明度，并将冲刺目标置于风险之中，因为重点是个人状态，而不是开发团队在冲刺积压项目或实现冲刺目标方面的进展。&lt;/p&gt;

&lt;p&gt;要注意, 以上三点都是围绕Scrum 目标, 大家就像一个篮球队 , 每个队员在讲的的是如何为争取胜利各自所做的努力, 而不是个人的表现和汇报.&lt;/p&gt;

&lt;p&gt;每天的争球让每个人都有机会就需要做些什么来提高成功的可能性达成一致。&lt;/p&gt;

&lt;p&gt;上面的是哪个问题并不是必须的, 我们有事可以尝试换一批问题&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;有什么卡住了吗？&lt;/li&gt;
  &lt;li&gt;如果有什么问题卡住了，我们如何共同努力来完成这项工作？&lt;/li&gt;
  &lt;li&gt;谁需要帮助？&lt;/li&gt;
  &lt;li&gt;我们今天需要完成的最重要的事情是什么？&lt;/li&gt;
  &lt;li&gt;我们如何增加最重要的事情完成的几率？&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;另外, 建议大家使用物理看板来开 Daily Scrum, 下面这些点可以帮助我们&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;专注于工作。使用您的团队板来指导对话。对于每个产品积压项目，讨论障碍、进度和团队今天将处理的任务。向多个团队成员寻求见解。这样做将使每个人都能共同了解正在进行的工作，依赖性在哪里，以及如何减轻任何风险。&lt;/li&gt;
  &lt;li&gt;让看板保持最新状态。您的组织中有人想要真正的状态报告。通过鼓励开发团队保持看板的最新状态，您帮助创建一个可以向他人提供宝贵信息的工具。管理层可以走过看板，一目了然地看到事情的进展。这种工作的透明度是与利益相关者建立信任的绝佳方式。&lt;/li&gt;
  &lt;li&gt;让团队自己主持(找个团队的开心果主持, 不用 leader 主持)。如果开发团队以外的人影响了日常的争球，请让他们离开，让开发团队的一名成员为讨论提供主持。你会惊讶于一个新声音可以帮助揭示什么。如果问题在于&lt;em&gt;你&lt;/em&gt;，那么要么强迫自己保持沉默，要么干脆不参加。（我们在下一节中会详细讨论这个问题。）&lt;/li&gt;
  &lt;li&gt;让开发团队关注冲刺目标。冲刺目标的目的是提醒团队他们为什么要构建当前的软件增量。随着日常争吵中出现新的工作、想法或决定，请使用冲刺目标作为指南，以过滤噪音，并让团队专注于高度优先的工作。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Scrum大师不是日常Scrum的焦点。事实上，他们甚至不必参加活动。但是，如果你每天的争球变成了状态会议，你可能会发现自己处于活动的中心。如果您注意到开发团队正在与您交谈，而不是相互交谈，是时候做出调整了。&lt;/p&gt;

&lt;h3 id=&quot;每周两次状态会议&quot;&gt;每周两次状态会议?&lt;/h3&gt;

&lt;p&gt;一些团队成员可能会抱怨日常变化不大，他们宁愿有15分钟回来。其他人可能会感到尽可能多的功能交付压力太大，以至于他们会声称自己太忙了，无法参加另一次会议。许多Scrum团队希望每隔一天甚至更少频繁地举行一次。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;请记住，&lt;em&gt;每天的争球是为开发团队成员准备的。&lt;/em&gt;这是他们的活动，他们需要它。在为期两周的冲刺过程中，事情可以而且确实会迅速改变。如果开发团队不频繁停下来检查他们的进度，他们可能会错过及时调整工作以实现冲刺目标的机会。&lt;/li&gt;
  &lt;li&gt;每日的争球是一个拐点。这是一个动态的重新规划会议，团队会考虑整个团队的进展、变化、障碍和新见解，并决定下一步该怎么做。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;如果团队不希望开每日 Scrum , 那么&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;请问他们需要改变什么才能让它有价值。使用这些想法来提出团队可以进行的实验，以尝试改善他们的日常混战促进和实践。&lt;/li&gt;
  &lt;li&gt;首先重申日常争声的目的。提醒团队成员，他们的部分承诺是遵循Scrum框架。&lt;/li&gt;
  &lt;li&gt;然后征求团队成员的意见，如果他们不每天见面以协调工作，会发生什么。这是一个探索团队经历的绝佳机会，看看他们能否找到解决根本问题的方法。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;并非所有的声音都被听到了&quot;&gt;并非所有的声音都被听到了&lt;/h3&gt;

&lt;p&gt;在每日晨会上, 只有部分人参与到交流当中, 其他一些人总是沉默&lt;/p&gt;

&lt;p&gt;作为Scrum大师，您应该确保听到每个声音并考虑多种观点的方式促进日常Scrum。特别是在您与新团队合作时，您需要根据各种观点来模拟这种倾听和接受能力。&lt;/p&gt;

&lt;p&gt;例如，假设您有一个团队成员主导了日常的争球。如果这种情况经常发生，请向其他团队成员询问他们的观点，并保持空间&lt;/p&gt;

&lt;p&gt;使用1-2-4-All  来进行您的日常争球，以便听到所有声音。工作原理如下：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;让开发团队成员花一分钟默默地思考以下问题：“您认为有什么事情可以让我们在团队冲刺目标上取得了进展？”&lt;/li&gt;
  &lt;li&gt;接下来，让他们花两分钟的时间找另一个伙伴一起讨论，并从第1步中的自我反思中汲取见解。&lt;/li&gt;
  &lt;li&gt;一旦他们和伙伴一起探索了这些想法，让这对伙伴再形成四人行，并花四分钟进一步分享和发展这些想法，特别注意他们在讨论中注意到的相似之处、差异和模式。&lt;/li&gt;
  &lt;li&gt;最后，问团队“在谈话中，有什么想法真正脱颖而出？”让每个小组与整个Scrum团队分享一个想法。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;在 1-2-4-all 中, 每个人都有机会分享他们的观点，让别人听到他们的声音，同时感到安全地分享他们的想法和他们在日常争斗中学到的东西。&lt;/p&gt;

&lt;p&gt;手指(5 指)投票 - 是对某一个想法有多赞成的方法.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;你可能会问团队：“你对我们有望实现冲刺目标有多大信心？”告诉他们思考这个问题，并提出1到5级的答案。然后让每个人都显示代表他们反应的手指数量。&lt;/li&gt;
  &lt;li&gt;五根手指：是的！我100%与价值陈述保持一致。&lt;/li&gt;
  &lt;li&gt;四指：我强烈支持价值陈述。&lt;/li&gt;
  &lt;li&gt;三根手指：在提供支持之前，我想讨论一下价值陈述。&lt;/li&gt;
  &lt;li&gt;两根手指：我反对价值陈述。&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;一根手指：不！绝对不是！值语句是错误的。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;接下来，让1和2s谈谈为什么他们的信心很低。问他们：“是什么阻止了你投票支持？”经过初步讨论，Scrum团队成员可以再次投票，看看他们是否比以前更一致。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;这项技术有几个好处：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;低级仪式：做起来很简单——你只需要一个问题和一个拳头。之后，由团队成员来讨论他们的分数，并努力实现对齐。&lt;/li&gt;
  &lt;li&gt;鼓励参与：没有参与的人没有承诺加入Scrum团队。五拳让所有团队成员都参与对话。1和2s有一个非对抗性的机会来表达他们的担忧，让团队一起学习。&lt;/li&gt;
  &lt;li&gt;让“不”变得更容易：“不”是一个令人难以置信的难说词，特别是当你不得不对队友说的时候。五拳让Scrum团队成员有机会不同意被问的问题，而不会令人不快。这是创建开放和诚实对话的关键。&lt;/li&gt;
  &lt;li&gt;创建对齐：对齐的团队是一个强大的团队。投票的目标是让团队合作并收敛商定的数字。花时间解决1和2s让每个人都参与其中。&lt;/li&gt;
  &lt;li&gt;引导行动：对齐过程往往会找出Scrum团队成员缺乏信心的原因。例如，也许自动化构建不那么自动化，或者架构中可能存在一个重大缺陷，使冲刺目标变得困难。了解这些障碍为团队提供了一份清晰的行动项目清单。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;五拳是一种技术，你可以在感觉到球队缺乏信心时使用它。当前冲刺的状态、实现冲刺目标的可能性，甚至冲刺积压的状态，都是它的绝佳话题。希望你会发现这些数字真的比你的Scrum团队参与的丰富对话和他们最终采取的行动要。&lt;/p&gt;

&lt;h3 id=&quot;毫无进展的任务pbi&quot;&gt;毫无进展的任务(PBI)&lt;/h3&gt;

&lt;p&gt;当观看开发团队每天进行争球时，您通常会注意到被阻止的任务——这些任务是团队没有取得任何进展的任务。有时，这些任务似乎粘在团队董事会上：它们只是不会移动。更糟糕的是，日常争球的结果可能无法解决被阻止的任务。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;日常争斗的全部意义在于他们讨论任何障碍，并作为一个团队制定克服这些障碍的计划。&lt;/li&gt;
  &lt;li&gt;当任务和故事似乎卡住了，没有人说话时，是时候担心团队为什么不直言不讳了。&lt;/li&gt;
  &lt;li&gt;开发团队对其进展负责，其中的一个重要部分是尽快作为一个团队指出和解决障碍和障碍。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;一个比较好的方法就是跟踪 PBI 的年龄&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;从 Sprint 开始后的第一个晨会结束后, 给每一个任务点一个点&lt;/li&gt;
  &lt;li&gt;之后的每天晨会后, 对没有状态变化的 PBI 再点一个点, 有状态变化的不需要点点.&lt;/li&gt;
  &lt;li&gt;关注点最多的 PBI, 和团队讨论如何能够加速被卡主的 PBI&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;当任务或故事卡住，而做这项工作的人没有寻求帮助时，你可以打赌团队没有践行Scrum价值观。尝试与您的团队讨论Scrum价值观。当团队成员停止提供和寻求帮助时，询问他们缺少哪些价值观。使用此值列表开始对话：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Commitment: The members of the development team are committed to following the rules of Scrum, and to helping one another deliver a high-quality increment of valuable software.&lt;/li&gt;
  &lt;li&gt;Focus: The sprint goal creates focus for the development team. It’s a guidepost that the team can use to make rapid decisions. For example, the team may have to decide whether to accept additional work during the sprint. If the new work puts the sprint goal in jeopardy, the answer is a clear no.&lt;/li&gt;
  &lt;li&gt;Courage: It takes courage to raise an impediment to the team, to ask for help with a story that has you stumped, or to raise a concern about the direction the team is going. Development team members must show courage and act transparently for the betterment of the team, especially when they realize that they’re wrong and need to pivot quickly to realign to the sprint goal.&lt;/li&gt;
  &lt;li&gt;Openness: The team members need to be open with one another to keep their progress toward the sprint goal transparent. Otherwise, the team won’t be able to inspect and adapt. Openness allows team members to both offer and ask for help. Openness also helps us listen to all voices and opinions so that the team has ownership of its decisions.&lt;/li&gt;
  &lt;li&gt;Respect: The daily scrum is intense. All the work is out in the open so the team can inspect and adapt. Team members may need to ask for help or have differing opinions. Without respect for each other and for everyone’s abilities, empiricism and self-organization just aren’t possible.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;惩罚迟到&quot;&gt;惩罚迟到&lt;/h3&gt;

&lt;p&gt;一旦日常的Scrum开始，一些Scrum大师就会锁上会议室的门。似乎通过为迟到创造后果，你正在帮助团队成员按时出现。但关门、晚点罐子和让人们迟到时唱歌或跳舞等惩罚都是嘲笑行为。公开羞辱不是Scrum大师的工具之一。&lt;/p&gt;

&lt;p&gt;一个愚蠢的舞蹈无法解决问题。您需要更深入地挖掘，并与团队合作，以了解正在发生的事情。&lt;/p&gt;

&lt;p&gt;团队是否能够决定何时何地举行每日争球？这是他们的活动——让他们选择如何举办&lt;/p&gt;

&lt;p&gt;参加每日 Scrum 对于开发团队的一些成员来说，这可能感觉效率低下，但日常争球产生的结果——对齐、专注、承诺和目的——对高性能团队至关重要。&lt;/p&gt;

&lt;h3 id=&quot;45分钟的scrum&quot;&gt;45分钟的Scrum&lt;/h3&gt;

&lt;p&gt;每日争球的时间框是15分钟。如果您的开发团队花费的时间超过此限制, 那么要考虑的第一个问题是：有什么问题？&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;团队成员太多了吗？&lt;/li&gt;
  &lt;li&gt;团队是否在日常争斗中试图解决开发问题？&lt;/li&gt;
  &lt;li&gt;产品所有者是否利用这段时间提供有关产品积压项目的详细信息？等等……为什么产品所有者会参与日常争球？&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;一旦你掌握了时间的流向，你就可以开始做一些更正了。我们已经讨论了使用物理团队板的问题。仅凭这项技术就可以让你的日常争光重新集中注意力。&lt;/p&gt;

&lt;p&gt;保持话题的方法:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;如果团队偏离了话题或试图解决问题，请尝试使用停车场(Parking lot)：每日争球&lt;em&gt;后&lt;/em&gt;可能讨论的事项列表, 然后，开发团队的成员可以决定如何清除停车场的物品（自我组织），并继续他们的一天。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;如果您还没有团队看板顶部的冲刺目标，现在是发布它的绝佳时机。&lt;/li&gt;
  &lt;li&gt;每当球队偏离话题时，团队成员都可以指出冲刺目标，以提醒他们保持正轨。&lt;/li&gt;
  &lt;li&gt;当团队在日常争球中偏离话题时，一个很好的问题是：“这次对话如何有助于我们朝着冲刺目标取得进展的计划？”&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;教练角-7&quot;&gt;教练角&lt;/h3&gt;

&lt;p&gt;您可以在下一次Daily Scrum中尝试以下几点：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;在你下一次每日争球开始时，花几分钟提醒团队它的目的。&lt;/li&gt;
  &lt;li&gt;将自己从开发团队成员圈子中移除，专注于冲刺目标，并帮助避免Daily Scrum 转移到状态会议。&lt;/li&gt;
  &lt;li&gt;如果您需要在日常争球中参与，特别是与新团队一起参与，请尝试将自己限制在开放式问题上，以促进透明度，鼓励检查冲刺目标，并通过为当天制定新的计划来促进适应。&lt;/li&gt;
  &lt;li&gt;偶尔跳过参加每日争球，看看会发生什么。希望开发团队仍将举办活动，协调他们的工作，并制定当天的计划，帮助他们实现冲刺目标。&lt;/li&gt;
  &lt;li&gt;如果开发团队成员以外的人参加日常争球，请让他们停下来练习积极的倾听技能。日常争斗&lt;em&gt;是为了开发团队&lt;/em&gt;。&lt;/li&gt;
  &lt;li&gt;通过设定时间、确定地点和决定如何最好地衡量他们在冲刺目标方面取得的进展，指导开发团队拥有日常的争球。提醒开发团队，他们拥有团队看板、冲刺积压，以及他们如何监控进度。鼓励他们保持进展透明。&lt;/li&gt;
  &lt;li&gt;提醒您的团队接受帮助。我们都陷入了困境。不要呆滞不上。勇敢点。他们的队友在那里互相帮助。&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;product-increment-产品增量scrum-完成了的交付物&quot;&gt;Product Increment 产品增量(Scrum 完成了的交付物)&lt;/h2&gt;

&lt;p&gt;Product increment&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Scrum 结束后, 完成了的交付物, 是PO 和开发团队在 Scrum 启动之前就一起确定了的产品增量&lt;/li&gt;
  &lt;li&gt;增量是在冲刺中完成的所有PBI的总和&lt;/li&gt;
  &lt;li&gt;是经过测试的, 有足够的健壮性的&lt;/li&gt;
  &lt;li&gt;每次冲刺都有完成产品增量是开发团队所需的核心任务之一,  开发团队致力于创建优质产品并交付已完成的增量&lt;/li&gt;
  &lt;li&gt;开发团队还专注于向产品所有者交付和服务。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;造成没有办法完成增量的原因很多&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;新团队成员加入&lt;/li&gt;
  &lt;li&gt;其他人离开公司&lt;/li&gt;
  &lt;li&gt;开发人员被分配到多个项目&lt;/li&gt;
  &lt;li&gt;没有冲刺目标&lt;/li&gt;
  &lt;li&gt;冲刺计划很差&lt;/li&gt;
  &lt;li&gt;冲刺期间没有改进会议&lt;/li&gt;
  &lt;li&gt;产品积压项目要么太大，要么不清楚&lt;/li&gt;
  &lt;li&gt;产品所有者缺席&lt;/li&gt;
  &lt;li&gt;障碍堆积如山&lt;/li&gt;
  &lt;li&gt;技术债务正在减缓团队的速度&lt;/li&gt;
  &lt;li&gt;开发团队并不具备交付已完成增量所需的所有技能&lt;/li&gt;
  &lt;li&gt;团队成员不一起工作&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;您的Scrum团队需要随时提供经过测试、集成、可部署和可用的产品版本。目标是每隔几天提高一次增量，同时保持其随时可用且可能可release的状态。如果产品所有者想在接到通知后立即发布最新增量，那应该是一项低风险和简单的任务。&lt;/p&gt;

&lt;h3 id=&quot;我们尚未定义完成&quot;&gt;我们尚未定义“完成”&lt;/h3&gt;

&lt;p&gt;Scrum要求每个增量都是可Release (发布/释放)的&lt;/p&gt;

&lt;p&gt;每个人对完成的定义可能都不一样&lt;/p&gt;

&lt;p&gt;PO 定义的完成可能是上线, 并可以让客户正常使用, 开发者的完成是开发完成,  测试的完成时测试完成….&lt;/p&gt;

&lt;p&gt;下面是一个定义”完成”的例子: (使用它。修改它。更好的是，与您的团队集思广益，创建您自己的完成定义！)&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;所有代码都已开发完毕。&lt;/li&gt;
  &lt;li&gt;它符合团队的编码标准。&lt;/li&gt;
  &lt;li&gt;单元测试是书面和通过的。&lt;/li&gt;
  &lt;li&gt;代码已签入源代码控制存储库。&lt;/li&gt;
  &lt;li&gt;没有编写代码的开发团队成员已经满足并确认了验收标准。&lt;/li&gt;
  &lt;li&gt;持续集成构建正在通过。&lt;/li&gt;
  &lt;li&gt;产品所有者看到了产品（增量）。&lt;/li&gt;
  &lt;li&gt;所有代码都已部署到Stage 环境。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;只要 PO 希望, 随时都可以向生产发布新功能&lt;/p&gt;

&lt;p&gt;当开发团队说他们“完成了”时，产品所有者清楚地知道已完成的工作处于什么状态。&lt;/p&gt;

&lt;p&gt;将代码始终处于可释放状态，使产品所有者在选择何时发布时具有很大的灵活性&lt;/p&gt;

&lt;p&gt;在许多组织中，在团队按需发布产品之前，必须消除许多障碍。作为Scrum大师，消除这些障碍是你的工作。&lt;/p&gt;

&lt;h3 id=&quot;舍弃质量来满足上线日期&quot;&gt;舍弃质量来满足上线日期&lt;/h3&gt;

&lt;p&gt;有的时候在组织的压力下, 团队被要求提交尚未”完成”的增量到生产, 这是有巨大风险的&lt;/p&gt;

&lt;p&gt;因为未完成的工作——开发团队&lt;em&gt;声称&lt;/em&gt;已经完成，但还剩下更多工作——从来都不是增量的一部分。&lt;/p&gt;

&lt;p&gt;未完成的工作永远不应该投入生产。在我们的示例场景中，如果团队将未完成的工作投入生产，可能会对组织的运输和接收系统产生可怕的后果。&lt;/p&gt;

&lt;p&gt;为什么我们不能发布未完成的工作？&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;每个增量都会添加到所有之前的增量中，并经过彻底测试，确保所有增量一起工作。这条规则直接来自《Scrum Guide》。未完成的工作不符合该标准，因此它永远不会发布。&lt;/li&gt;
  &lt;li&gt;考虑一下，如果你破例了这条规则会发生什么。如果您忽视质量并允许将工作发布到生产中，您如何知道您的软件对客户的影响？您不会——直到为时已晚，客户报告您的产品质量下降。发布未完成工作的短视决定增加了团队失败的风险。这将成为一个习惯，质量会下降，您的客户会注意到。这根本不值得冒险。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;如果非要迎合上线日期&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;在截止日期前，请与产品所有者一起重新查看您的产品积压项目。努力与他们合作，试图了解什么是真正必要和可能的。与团队合作，您可以尝试找到将PBI切成更小的部分的方法，这些碎片仍然有价值，可以在冲刺中发货。&lt;/li&gt;
  &lt;li&gt;可以谈判的是在范围上的变化, 砍掉一些不是真正对上线日期有价值的 PBI, 或者将PBI 分解后上线部分. 不要尝试讨论降低质量.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;教练角-8&quot;&gt;教练角&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;如果还没有”完成”的定义, 请使用我们在本章中讨论的练习来捕获并发布您的第一个定义，供每个人查看。&lt;/li&gt;
  &lt;li&gt;无论您是自检查和调整了完成的定义以来的一次冲刺还是十次冲刺，请使用您的下一次回顾围绕开发团队对质量的承诺开始对话，并利用这段时间确保完成的当前定义支持该承诺。&lt;/li&gt;
  &lt;li&gt;如果在交付团队无法单独解决的高质量产品增量方面存在障碍，请立即将这些问题提交管理层。您需要列出障碍清单，并计划如何尽快解决这些障碍。&lt;/li&gt;
  &lt;li&gt;开发团队成员拥有他们的工作方式。已完成的定义反映了这种所有权。在下一次冲刺审查会议上，花点时间向您的利益相关者介绍已完成的定义。向他们展示质量很重要。这可以使未来的权衡讨论更顺利。&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;sprint-review&quot;&gt;Sprint Review&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Sprint Review 是开发团队向利益相关者展示 increment 的会议. 被邀请的人员不仅仅是 PO, 还包括其他和 increment 有利益关系的人员.&lt;/li&gt;
  &lt;li&gt;Sprint Review 增加了产品的透明度, 受众狭窄的 Sprint Review 可能导致该公司浪费了大量资金，无法解决该项目旨在解决的问题。&lt;/li&gt;
  &lt;li&gt;Scrum团队Review 增量并调整产品backlog。Scrum团队与利益相关者合作，review发生了什么，并决定下一步该怎么做。&lt;/li&gt;
  &lt;li&gt;如果只是邀请了 PO, 可能在产品战略和目标等某些方面没有办法得到及时和直接的反馈&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;利益相关者不参与&quot;&gt;利益相关者不参与&lt;/h3&gt;

&lt;p&gt;将利益相关者排除在冲刺审查之外是该项目失败的关键。您的产品所有者可能&lt;em&gt;希望&lt;/em&gt;推迟有关项目范围以及利益相关者愿望和需求的对话，但这不是正确的做法。这种缺乏透明度可能会杀死产品。&lt;/p&gt;

&lt;p&gt;我的利益相关者是谁？&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;利益相关者是指对产品开发工作的结果有既得利益的任何人。从因项目而改变工作的员工到批准为项目提供资金的人，利益相关者可以来自组织的各个角落。他们是谁取决于产品的性质。&lt;/li&gt;
  &lt;li&gt;产品所有者应该了解他们的利益相关者是谁，并搜索了组织的每一个角落，以确保他们适当定义并包括了每个人。此外，请记住，利益相关者可能会在发展努力的整个生命周期内发生变化。产品所有者偶尔应该重新查看他们的利益相关者名单，并检查是否有人应该添加到该列表中或从中删除。&lt;/li&gt;
  &lt;li&gt;产品所有者在任何特定时刻都必须知道谁是利益相关者。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;作为Scrum大师，请与您的产品所有者合作，确保他们已经从组织的每个角落识别出利益相关者&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;产品所有者应该对冲刺审查期间&lt;em&gt;没有足够的&lt;/em&gt;利益相关者代表在房间里保持警惕，就像他们拥有太多一样谨慎。&lt;/li&gt;
  &lt;li&gt;Scrum的一个重要组成部分是在组织与Scrum团队之间建立信任。让利益相关者参加冲刺审查有助于建立信任, 特别是在产品开发工作的早期&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;如果您的产品所有者在识别利益相关者时遇到问题，请尝试以下练习：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;与您的产品所有者——也许还有他们已经确定的一些利益相关者——坐在一起，并尝试想想组织中对您正在构建的结果有既得利益的每个人。在单独的便签上写下每个人的名字。如果您陷入困境，请考虑以下问题：
    &lt;ul&gt;
      &lt;li&gt;钱来自哪里？&lt;/li&gt;
      &lt;li&gt;谁的工作会因为这个产品而改变？&lt;/li&gt;
      &lt;li&gt;由于我们正在构建的东西，谁可能会与客户进行不同的互动？&lt;/li&gt;
      &lt;li&gt;如果他们不知道这个项目发生了什么，谁可能会生气？&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;一旦你的头脑风暴减慢，休息一下。&lt;/li&gt;
  &lt;li&gt;重新召集时，在白板或活动挂图上创建以下三个类别，然后将每个便签放在适当的类别中：
    &lt;ul&gt;
      &lt;li&gt;Sprint Review需要的人：这些人最需要有关产品的信息。如果这些人不检查增量并提供反馈，Scrum团队将无法对积压的产品进行明智的更改。&lt;/li&gt;
      &lt;li&gt;随时了解进展的人：这些人不需要每次冲刺都检查增量，但他们确实需要随时了解团队的进展。&lt;/li&gt;
      &lt;li&gt;监视这：这些人不需要频繁更新，但应该定期收到有关项目的更新。最好与他们核实，看看他们希望多久收到一次这些更新。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;产品所有者作为评委&quot;&gt;产品所有者作为评委&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;冲刺审查不是产品所有者应该像拿着小木槌的法官一样行事的事件&lt;/li&gt;
  &lt;li&gt;这种行为是开发团队和产品所有者之间缺乏沟通的症状，并在开发团队内部滋生蔑视。如果您看到这种反模式的发展，是时候找到改善沟通的方法了。&lt;/li&gt;
  &lt;li&gt;开发团队和产品所有者应在整个冲刺过程中进行沟通，以便开发团队的工作透明，PO可以在当前冲刺中提供有关PBI的清晰度。没有这种对话，产品所有者最终可能会在冲刺审查中感到惊讶，利益相关者可能会同样甚至更惊讶&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;如何解决:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;如果你发现 PO 在Sprint 进行阶段没有出现过, 那么需要让开发团队找 PO 聊聊, 确保PO 意识到这点&lt;/li&gt;
  &lt;li&gt;如果你发现开PO 在在 Product Review 的时候对开发团队说的一些事情感到意外, 那么 SM 要和开发团队聊聊, 确保他们在整个冲刺过程中随时向产品所有者通报团队的进度。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;你的工作是在开发团队和产品所有者之间建立积极的关系。如果这两个角色不能有效协作，Scrum就无法很好地工作。频繁的沟通让每个人都很开心，意见一致。&lt;/p&gt;

&lt;h3 id=&quot;展示未完成的工作&quot;&gt;展示未完成的工作&lt;/h3&gt;

&lt;p&gt;PO 和开发团队不要为了取悦他人而试图夸大他们的进步, 没有完成的工作, 就算可以展示也尽量不要展示, 留到下次完成了所有的测试和部署再进行展示, 否则只能给利益相关者带来过高的期望和失望&lt;/p&gt;

&lt;p&gt;避免在冲刺审查中展示未完成的工作的诱惑，否则您可能会设定错误的预期。&lt;/p&gt;

&lt;p&gt;展示未完成的工作，使其听起来团队取得了比实际成就更多的成就，这不值得潜在地削弱利益相关者对团队的信任。&lt;/p&gt;

&lt;p&gt;诚实确实&lt;em&gt;是&lt;/em&gt;最好的政策, 如果团队在冲刺期间遇到问题，请直截了当，并与利益相关者合作，试图消除任何障碍。&lt;/p&gt;

&lt;h3 id=&quot;只演示功能-不讲背后的原因以及项目的方向&quot;&gt;只演示功能, 不讲背后的原因以及项目的方向&lt;/h3&gt;

&lt;p&gt;利益相关者应该知道团队实现的冲刺目标背后的原因以及项目的方向。增量检查不应仅涉及演示团队自上次冲刺审查以来构建的功能。&lt;/p&gt;

&lt;p&gt;为了让Scrum团队收到有价值的反馈，帮助他们以知情的方式调整产品积压，并确保每个人（利益相关者和团队成员）都真正了解项目方向，团队需要在冲刺审查中创造更大的透明度。例如，这里有一个agenda 可以帮助冲刺审查成为真正的协作会议：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;产品所有者对产品的愿景的解释&lt;/li&gt;
  &lt;li&gt;审查发布计划和预算&lt;/li&gt;
  &lt;li&gt;这次冲刺目标的说明&lt;/li&gt;
  &lt;li&gt;回顾团队构建的工作和产品增量&lt;/li&gt;
  &lt;li&gt;评估当前的客户分析和数据&lt;/li&gt;
  &lt;li&gt;讨论团队目前面临的障碍&lt;/li&gt;
  &lt;li&gt;与利益相关者合作，完善积压的产品&lt;/li&gt;
  &lt;li&gt;总结我们下一步要去哪里，以及我们在这次活动中发现了什么&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gxw1e3leu8j30hi0cwdgy.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;一个团队什么时候应该准备冲刺审查？&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Scrum指南没有回答这个问题，但团队可以通过多种方式为冲刺审查做准备。理想情况下，冲刺审查议程在整个冲刺过程中都会出现。您的团队可能会决定在冲刺审查之前举行一次简短的会议，以点头和交叉点头。产品所有者可能想调整议程，因为他们非常了解利益相关者。您，Scrum大师，可以建议新的方法来促进活动，使其尽可能有更多的互动。无论您的团队如何决定制定议程，重要的是要做好&lt;em&gt;一些&lt;/em&gt;准备，以使活动井然有序和富有成效。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;团队中有一个英雄&quot;&gt;团队中有一个”英雄”&lt;/h3&gt;

&lt;p&gt;另一个场景：在冲刺审查期间，每个开发人员轮流展示他或她在冲刺期间单独工作的内容。利益相关者被更外向的开发人员所吸引，并将他们视为团队的英雄。更内向的开发人员很难解释他们的工作，也很难快速说话，这样他们就可以“下台”。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;在冲刺审查中听到“我”一词表明开发团队的自我组织能力功能失调，团队是作为一个个人集合而不是一个真正的团队运作的。&lt;/li&gt;
  &lt;li&gt;“我”心态在团队中创造了英雄，并让利益相关者认为一名团队成员的贡献比其他团队成员更大。&lt;/li&gt;
  &lt;li&gt;利益相关者将把特定任务的责任分配给单个开发团队成员，而不是整个Scrum团队。&lt;/li&gt;
  &lt;li&gt;创建集体所有权需要“我们”心态。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;在冲刺审查期间，谁应该谈谈？&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Scrum团队中的每个人都应该有机会发言，以确保Scrum的每个角色都有足够的代表性。重要的是，做这项工作的人有机会展示它。作为一名Scrum大师，这可能是一个很好的机会，可以指导和指导那些在观众面前说话不舒服的团队成员。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;开发团队可以做很多事情来帮助促进团队成员之间的合作和协作。以下是一些你可以尝试的：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;在冲刺期间限制冲刺积压项目的WIP（进行中）。&lt;/li&gt;
  &lt;li&gt;确保团队成员有一个清晰简洁的冲刺目标来自我组织。&lt;/li&gt;
  &lt;li&gt;尝试配对编程。&lt;/li&gt;
  &lt;li&gt;尝试暴徒编程，这是一种整个团队同时处理同一事物的技术。&lt;/li&gt;
  &lt;li&gt;禁止团队使用“我”一词。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;不景气的-sprint-review&quot;&gt;不景气的 Sprint Review&lt;/h3&gt;

&lt;p&gt;这种反模式的一些表象:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;利益相关者在 Review 期间做其他的工作, 直到团队讨论他们感兴趣的事情&lt;/li&gt;
  &lt;li&gt;另一些利益相关者根据他们认为团队何时会讨论与他们相关的信息而进入房间&lt;/li&gt;
  &lt;li&gt;还有一些人完全停止参加&lt;/li&gt;
  &lt;li&gt;利益相关者称该活动为“无聊”。&lt;/li&gt;
  &lt;li&gt;利益相关者不愿表达他们的意见&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;如果利益相关者感到无聊或不感兴趣，他们缺乏参与将导致遗漏意见或想法。然后，该项目可能会面临风险，因为团队尚未收到决策所需的反馈, 客户可能会发现产品在生产中存在问题，他们可能会发现产品缺少重要功能&lt;/p&gt;

&lt;p&gt;协作冲刺审查意味着Scrum团队从利益相关者那里获得想法和建议，以便团队可以改变产品方向，利益相关者能够尽早提出任何问题。&lt;/p&gt;

&lt;p&gt;你如何避免这种情况呢？&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;冲刺审查议程应该改变，以反映Scrum团队的当前情况，这种情况经常变化&lt;/li&gt;
  &lt;li&gt;产品所有者应以吸引所有人参与的协作方式促进冲刺审查。&lt;/li&gt;
  &lt;li&gt;作为Scrum大师，您必须与产品所有者合作，并教他们如何领导讨论，以充分利用冲刺评论&lt;/li&gt;
  &lt;li&gt;留意安静的参与者，并以非侵入性、协作的方式让他们参与进来。&lt;/li&gt;
  &lt;li&gt;尽最大努力征求所有与会者的意见，这样就不会有人的想法被忽视。尝试促进技术和议程，让团队成员和利益相关者参与每次冲刺审查。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;谁在冲刺审查中记笔记？&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;我们经常看到Scrum团队在没有记录活动期间发生的事情和大家发表的冲刺评论。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;产品所有者负责更新和调整积压的产品，但这并不是说产品所有者是唯一应该做笔记的人。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;事实上，&lt;em&gt;每个人都&lt;/em&gt;应该在冲刺审查中记笔记。我们合作过的一些最好的Scrum团队在冲刺审查后不久就坐下来比较笔记。这可能会在短跑规划中临时发生，也可能在审查结束后，在回顾之前发生。在收集了每个人的观点后，产品所有者可以相应地调整产品积压。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;跳过它&quot;&gt;跳过它&lt;/h3&gt;

&lt;p&gt;当Scrum团队没有实现冲刺目标时，一些团队选择取消冲刺审查，以避免尴尬或惩罚。&lt;/p&gt;

&lt;p&gt;取消冲刺审查以避免不良情绪是对组织缺乏信任的迹象。推迟坏消息只会在最终报道时使新闻变得更糟。&lt;/p&gt;

&lt;p&gt;进行冲刺审查&lt;em&gt;正是&lt;/em&gt;Scrum团队在出现问题时需要做的事情，因为这将有助于他们在组织中建立信任&lt;/p&gt;

&lt;p&gt;Scrum团队出于多种原因跳过冲刺评论：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;他们没有实现冲刺目标。&lt;/li&gt;
  &lt;li&gt;他们只需要多一点时间就能实现冲刺目标，并将在下一次冲刺后举办活动。&lt;/li&gt;
  &lt;li&gt;只有一两个利益相关者可以参加。&lt;/li&gt;
  &lt;li&gt;一些团队成员不在办公室。&lt;/li&gt;
  &lt;li&gt;该组织有“清洁板块”的心态（有关此反模式的更多信息，请参阅第10章，&lt;a href=&quot;https://learning.oreilly.com/library/view/fixing-your-scrum/9781680507447/f_0072.xhtml#chapter.sprintplanning&quot;&gt;&lt;em&gt;冲刺规划&lt;/em&gt;&lt;/a&gt;），团队没有完成整个冲刺积压。&lt;/li&gt;
  &lt;li&gt;有一个障碍减缓了团队的速度，他们没有什么可展示的。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;无论取消的原因是什么，重要的是要记住，没有失败的冲刺。&lt;/p&gt;

&lt;p&gt;每次冲刺都是一个了解产品、您的组织和您所做工作的复杂性的机会。&lt;/p&gt;

&lt;p&gt;正如我们在本章前面所讨论的，冲刺回顾不仅仅是一个演示。Scrum团队应与利益相关者一起评估市场状况的变化、产品积压状态以及他们遇到的任何问题。&lt;/p&gt;

&lt;p&gt;跳过冲刺审查会降低产品开发工作的透明度。您失去了与利益相关者一起检查增量的机会，&lt;/p&gt;

&lt;p&gt;无论其完整性如何。放弃这个检查点会给项目增加风险。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;不要取消冲刺审查&lt;/strong&gt;，无论你认为它可能为Scrum团队带来多大的容易。无论多么困难，都要举办活动。&lt;/p&gt;

&lt;p&gt;作为Scrum大师，由您来确保此事件发生。如果您和您的团队最终担心冲刺审查会不舒服，请尝试将以下内容添加到您的议程中：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;这些活动发生在冲刺期间：…&lt;/li&gt;
  &lt;li&gt;这些障碍阻碍了我们：…&lt;/li&gt;
  &lt;li&gt;我们面临的复杂性是……&lt;/li&gt;
  &lt;li&gt;目前，我们的产品积压包含…&lt;/li&gt;
  &lt;li&gt;发生的事情是否改变了产品的未来？&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;现在在令人不舒服的冲刺审查中面对音乐远比跳过音乐并冒着团队可能朝着错误方向前进的风险要好得多，这会导致未来更糟糕的冲刺审查。体验勇气的Scrum价值，并进行每次冲刺审查，以便您可以与利益相关者合作，克服团队遇到的任何问题。&lt;/p&gt;

&lt;h3 id=&quot;站立的鼓掌&quot;&gt;站立的鼓掌&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;我们需要保持冷静, 不要被一次成功的 Sprint Review 冲昏了头脑&lt;/li&gt;
  &lt;li&gt;Sprint Review 不是旨在惩罚或奖励Scrum团队的活动。相反，这是一个利益相关者检查发生了什么、提供反馈和决定下一步该怎么做的机会。&lt;/li&gt;
  &lt;li&gt;如果利益相关者确实在冲刺审查期间奖励或惩罚Scrum团队，那么您，Scrum大师，必须立即提醒利益相关者他们为什么参与冲刺审查，并将注意力重新集中在增量和团队下一步应该做什么上。&lt;/li&gt;
  &lt;li&gt;如果团队专注于获得奖励，这将让Scrum团队和利益相关者之间为了项目的利益在冲刺审查中进行艰难的对话。一旦养成获得额外奖励的习惯, 会严重影响 Scrum 的 value&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;教练角-9&quot;&gt;教练角&lt;/h3&gt;

&lt;p&gt;冲刺review是Scrum团队和利益相关者的合作活动。&lt;/p&gt;

&lt;p&gt;这是一个与团队外的人挤在一起评估增量状态的机会。&lt;/p&gt;

&lt;p&gt;作为Scrum的大师，我们必须不断找到新的方法来提高人们对正在发生的事情的透明度，以便我们让Scrum团队有机会就接下来会发生什么做出明智的决定。&lt;/p&gt;

&lt;p&gt;为了确保您的冲刺Review 尽可能有价值，在下次冲刺review之前，请问自己以下问题：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;合适的人是否参与了冲刺审查，以便以知情的方式调整积压的产品？&lt;/li&gt;
  &lt;li&gt;清楚我们为什么要像这次冲刺一样吗？&lt;/li&gt;
  &lt;li&gt;参加冲刺审查的每个人都知道Scrum团队为什么要构建此产品吗？&lt;/li&gt;
  &lt;li&gt;我们是否会让利益相关者对我们的真实处境有任何误解？&lt;/li&gt;
  &lt;li&gt;整个Scrum团队是否对冲刺期间发生的事情保持一致？&lt;/li&gt;
  &lt;li&gt;我们review的议程和上次一样吗？&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;sprint-retrospective---持续改进的经验总结会&quot;&gt;Sprint Retrospective - 持续改进的经验总结会&lt;/h2&gt;

&lt;p&gt;每次冲刺回顾都是Scrum团队重申其持续改进承诺的机会。&lt;/p&gt;

&lt;p&gt;团队利用时间反思&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;团队合作方式&lt;/li&gt;
  &lt;li&gt;质量&lt;/li&gt;
  &lt;li&gt;定义“完成”&lt;/li&gt;
  &lt;li&gt;并寻求方法来改进我们每次冲刺潜在可发布产品的方式/工具/技术实践。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;如果不公开参加这个活动，也没有找到改善每次冲刺的方法，你的产品、质量和合作的人将受到影响。&lt;/p&gt;

&lt;p&gt;如果我们作为一个团队不合作、帮助、支持和挑战自己来改进，我们将错过一个改善客户服务方式的关键机会。&lt;/p&gt;

&lt;h3 id=&quot;大家都不愿意来&quot;&gt;大家都不愿意来&lt;/h3&gt;

&lt;p&gt;有的时候大家觉得做的不错, 不用来 ; 或者觉得做的很差, 不好意思来 ; 或者就是觉得浪费时间&lt;/p&gt;

&lt;p&gt;冲刺回顾是&lt;em&gt;整个&lt;/em&gt;Scrum团队的一项活动。它应该包括&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;所有开发团队成员&lt;/li&gt;
  &lt;li&gt;产品所有者和&lt;/li&gt;
  &lt;li&gt;Scrum大师&lt;/li&gt;
  &lt;li&gt;请记住，此活动仅适用于Scrum团队 - 当团队以外的利益相关者或经理参加时，这使团队更难有效协作。让一群来自不同背景、文化和经验的人合作已经够难的了。添加另一层困难无济於事。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;每次。团队可以改进的唯一方法是整个团队参与这项活动。&lt;/p&gt;

&lt;p&gt;冲刺 retrospective 什么时候应该发生？&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;它应该总是在冲刺review 之后，但在下一次冲刺计划之前发生。这是因为，如果您尚未review 增量以及您如何与利益相关者合作，那么您尚未完全review 冲刺。这可能会导致不适合您情况的适应。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;就持续时间而言，《Scrum指南》指出，冲刺回顾性时间箱最多三个小时，为期一个月。根据您的冲刺长度相应调整该时间框。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;肤浅的承诺&quot;&gt;肤浅的承诺&lt;/h3&gt;

&lt;p&gt;有的团队在 retrospective 中做出了改进的建议和计划, 但是却在后面的 Sprint 中忽视这些改进的建议&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;团队成员必须真正致力于团队在回顾中确定的改进。&lt;/li&gt;
  &lt;li&gt;团队成员必须相互承诺进行改进。&lt;/li&gt;
  &lt;li&gt;忽视这些承诺清楚地表明，团队没有接受持续改进的心态。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;如果您的团队陷入了创建肤浅承诺但没有完成这些承诺的陷阱，您可以使用一些技巧来尝试解决这个问题&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;在下一次回顾中，首先询问成员团队是如何处理上一次 restropectrive 中承诺的的改进的。&lt;/li&gt;
  &lt;li&gt;如果团队没有取得进展，那么你需要谈谈原因。团队是否忘记了在冲刺规划期间预留完成改进项目所需的时间.&lt;/li&gt;
  &lt;li&gt;可以考虑把改进作为一个 PBI 放在下个 Sprint 中 来进行跟踪&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;无论如何，团队需要进行公开和相互尊重的讨论，以帮助团队成员在下一次冲刺中致力于改进。&lt;/p&gt;

&lt;p&gt;多少个改进是合理的？&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;一个雄心勃勃的团队可能会发现他们希望在下一次冲刺中进行的许多改进，但承诺过多可能意味着没有一个真正实现。请记住，在冲刺期间，改进会影响团队的能力。承担一两个以上的改进项目可能不会导致产品所有者和利益相关者期望的业务结果。Scrum团队应该只选择一些他们认为可以在下一次冲刺中实施的关键改进。作为一个团队，为每次冲刺确定正确的改进数量。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;毫无意义的改进&quot;&gt;毫无意义的改进&lt;/h3&gt;

&lt;p&gt;团队在 Retrospective 中提出了一些改进建议&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;玩得开心&lt;/li&gt;
  &lt;li&gt;每周去吃一次午饭&lt;/li&gt;
  &lt;li&gt;写更好的代码&lt;/li&gt;
  &lt;li&gt;更准确地估算&lt;/li&gt;
  &lt;li&gt;协作协作&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;我们要思考一下这些建议是可行的吗? 实现他们会让下一个 Sprint 变得更好吗?&lt;/p&gt;

&lt;p&gt;Retrospective 是关于检查&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;阻碍团队的人、&lt;/li&gt;
  &lt;li&gt;关系和&lt;/li&gt;
  &lt;li&gt;技术实践。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;让我们回顾一下团队提出的项目，并添加一些您可能提出的后续问题，以深入研究这些问题：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;玩得开心
    &lt;ul&gt;
      &lt;li&gt;有人在扼杀所有乐趣吗？&lt;/li&gt;
      &lt;li&gt;是什么阻止了这个团队认为工作很有趣？&lt;/li&gt;
      &lt;li&gt;上一次在冲刺回顾中，球队被感谢是什么时候？&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;每周去吃一次午饭
    &lt;ul&gt;
      &lt;li&gt;大家都相处得很好吗？&lt;/li&gt;
      &lt;li&gt;我们吃午饭要解决什么？&lt;/li&gt;
      &lt;li&gt;我们沟通得不够好吗？&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;写更好的代码
    &lt;ul&gt;
      &lt;li&gt;我们对质量的定义是什么？&lt;/li&gt;
      &lt;li&gt;我们在写糟糕的代码吗？&lt;/li&gt;
      &lt;li&gt;考虑到我们现在所知，架构仍然合适吗？&lt;/li&gt;
      &lt;li&gt;我们应该重新审视我们对“完成”的定义吗？&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;更准确地估算
    &lt;ul&gt;
      &lt;li&gt;我们为什么要估算？&lt;/li&gt;
      &lt;li&gt;我们错误地估计了什么？&lt;/li&gt;
      &lt;li&gt;我们的错误估计是否设定了不切实际的期望？&lt;/li&gt;
      &lt;li&gt;是否有障碍或不良做法影响我们的估计能力？&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;协作协作
    &lt;ul&gt;
      &lt;li&gt;我们在互相帮助吗？&lt;/li&gt;
      &lt;li&gt;开发团队和产品所有者之间发生了什么？&lt;/li&gt;
      &lt;li&gt;我们错过了合作的机会吗？&lt;/li&gt;
      &lt;li&gt;我们正在适当地完善积压的产品？&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;团队必须深入研究关系和/或技术问题，以发挥其最大潜力。&lt;/p&gt;

&lt;p&gt;回顾应该像冲刺审查一样严肃和专业&lt;/p&gt;

&lt;h3 id=&quot;只有50的人参与讨论&quot;&gt;只有50%的人参与讨论&lt;/h3&gt;

&lt;p&gt;谈论和分享意见对某些人来说可能很容易, 对于另一些人可能很难&lt;/p&gt;

&lt;p&gt;讨论主题像“我们能做些什么来变得更好？”这样敏感时，一些参与者可能会非常不舒服。&lt;/p&gt;

&lt;p&gt;然后，会议只能由少数人主导，让会议室其余部分的想法和意见保持沉默。如果房间里有强烈的声音或个性造成冲突，与会者可能会进一步”闭嘴”。&lt;/p&gt;

&lt;p&gt;SM 需要帮助团队成员找到自在的方式来分享坦诚的意见和接收关键反馈&lt;/p&gt;

&lt;p&gt;请务必尝试不同的方法，以确保每个团队成员都能被听到。&lt;/p&gt;

&lt;p&gt;例如，您可以通过发布调查然后共享结果来匿名获得团队的建议并保持团队安全&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;海星回顾&lt;/strong&gt;，是了解Scrum团队在冲刺期间可以改变工作方式的好方法。以下是你的工作：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;在白板或活动挂图上画一颗星星，并标记五个部分：开始、“停止”、“更多”、“更少”和“保持”向您的团队解释，各个部分应该包含以下问题的答案：
    &lt;ol&gt;
      &lt;li&gt;开始：团队希望在下一次冲刺中开始做什么，以改善他们合作和交付产品的方式？&lt;/li&gt;
      &lt;li&gt;停止：哪些事情没有给团队带来价值，应该在下一次冲刺之前停止？&lt;/li&gt;
      &lt;li&gt;更多：我们做得好，我们团队需要更多的事情？&lt;/li&gt;
      &lt;li&gt;更少：哪些活动消耗的时间和精力比它们创造的价值还要多？&lt;/li&gt;
      &lt;li&gt;保留：我们需要保留哪些实践、实验或想法，因为我们已经看到它们会产生我们希望保留的积极变化？&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;请参与者为每个领域产生尽可能多的想法。给每个参与者几分钟时间将他们的评论放在黑板上，并大声朗读出来。&lt;/li&gt;
  &lt;li&gt;当所有领域都已填补后，请就团队共享的内容进行简短的讨论。指出趋势和模式。&lt;/li&gt;
  &lt;li&gt;让每个人都投票给一个开始项目和一个与他们产生最大共鸣的停止项目。&lt;/li&gt;
  &lt;li&gt;探索获得最多选票的开始和停止项目，然后生成可测量的更改或实验，以便在下一次冲刺中尝试。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;冲刺Retrospective 讨论的结果应该在哪里显示？&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;在这个问题上没有明确的共识。一些团队将结果作为产品积压项目进行跟进，因为这些改进增加了增量的价值。其他团队将他们展示在团队室，在那里他们每天进行争球。无论您的团队做出什么决定，请确保您的改进显示在团队被提醒并可以采取行动的地方。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;谨慎地将追溯结果存储在管理层可以看到的公共工具中。根据对组织的信任程度，这可能会降低团队对他们遇到的问题持开放和诚实的意愿。另一方面，公开分享这些结果可以帮助其他正在与类似问题作斗争的团队。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;跳过它-1&quot;&gt;跳过它&lt;/h3&gt;

&lt;p&gt;当面临外部压力或关键截止日期时，一些Scrum团队将取消冲刺Retrospective。因为团队需要时间工作而取消回顾是功能障碍的症状。在这些情况下，回顾正是团队所需要的。&lt;/p&gt;

&lt;p&gt;你如何说服你的团队举行回顾，即使他们觉得没有时间进行回顾？以下是团队试图跳过回顾时可以问的一些问题：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;我们感受到的压力来自哪里？&lt;/li&gt;
  &lt;li&gt;我们取消回顾换回来的时间——这是成功和失败的区别吗？&lt;/li&gt;
  &lt;li&gt;我们面临的最后期限是怎么来的？&lt;/li&gt;
  &lt;li&gt;我们的架构是否稳定且适合产品？&lt;/li&gt;
  &lt;li&gt;技术债务在我们建设的东西中显而易见吗？&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;有时你必须偷偷摸摸地回顾&lt;/p&gt;

&lt;p&gt;不得已的 mini Sprint Retrospective, 如果团队没时间开会, 那就和团队成员进行简单的交流, 获取需要赶紧的地方.&lt;/p&gt;

&lt;p&gt;以下是我从这种情况中学到的东西：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;这次交流花了五分钟，球队在下一次冲刺中有所改进。&lt;/li&gt;
  &lt;li&gt;有时，我们必须聪明地与不成熟的Scrum团队合作。&lt;/li&gt;
  &lt;li&gt;牢记冲刺回顾的目的。在这个简短的互动中，我们很快得到了一个很好的改进想法。认领胜利，继续前进。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;总结:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;因为没有足够的时间进行冲刺 Retrospective 永远不是借口, 回顾永远不应该取消&lt;/li&gt;
  &lt;li&gt;这是Scrum团队检查他们&lt;em&gt;为什么&lt;/em&gt;没有时间和适应的机会，这样他们就不会再有这种感觉了。&lt;/li&gt;
  &lt;li&gt;取消回顾就是在伤口上撒盐，随着时间的推移只会变得更糟&lt;/li&gt;
  &lt;li&gt;根据《Scrum Guide》，回顾的时间表是为期四周的冲刺需要三个小时，&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;投诉会议&quot;&gt;投诉会议&lt;/h3&gt;

&lt;p&gt;例如，Scrum团队通常抱怨管理层以及他们如何“得不到管理”。这不是对组织中人们的感同身受的观点。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Scrum 团队有的时候会感觉到 外部世界可能看起来很奇怪、荒谬，甚至落后于时代。&lt;/li&gt;
  &lt;li&gt;从而产生一种“我们对他们”的心态。出于这些和其他原因，冲刺回顾可能会螺旋式地演变成投诉会议。&lt;/li&gt;
  &lt;li&gt;不要让团队在回顾期间发泄管理问题，而是问问他们可能对经理的行为有什么贡献。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;建议:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;和影响 Scrum 的外部组织进行沟通, 了解到底发生了什么导致抱怨, 并试图去建立同理心和理解, 并视图解决问题&lt;/li&gt;
  &lt;li&gt;继续抱怨而不采取行动，会加剧紧张局势，并阻碍该组织成功采用Scrum的能力。&lt;/li&gt;
  &lt;li&gt;我希望我能在回顾期间提供便利，而不是抱怨。&lt;/li&gt;
  &lt;li&gt;作为一名Scrum大师，你应该将抱怨和指责视为危险信号。&lt;/li&gt;
  &lt;li&gt;你需要意识到抱怨的危险。它营造了一种消极和无助的文化，问题没有得到解决，而只是讨论。&lt;/li&gt;
  &lt;li&gt;引导对话回到Scrum团队如何拥有他们正在讨论的障碍或问题。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;教练角-10&quot;&gt;教练角&lt;/h3&gt;

&lt;p&gt;为了让 Retrospective 更有意义, 尝试和团队定期讨论下面这些问题&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Is our quality getting better?&lt;/li&gt;
  &lt;li&gt;Do we feel like a team?&lt;/li&gt;
  &lt;li&gt;Are we living the Scrum values?&lt;/li&gt;
  &lt;li&gt;Has our definition of done become more strict?&lt;/li&gt;
  &lt;li&gt;What’s slowing us down, both technically and organizationally?&lt;/li&gt;
  &lt;li&gt;How is the product owner/development team relationship?&lt;/li&gt;
  &lt;li&gt;How are our relationships with people outside the Scrum team?&lt;/li&gt;
  &lt;li&gt;Are we proud of the work we’re doing?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;如果使用正确，冲刺回顾是帮助您的团队以积极的方式前进的绝佳工具。至关重要的是，它们要发生，并在结果上富有成效，为团队带来坚实的改进&lt;/p&gt;
</description>
        <pubDate>Fri, 03 Jun 2022 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/Agile-Project-Management-and-Agile-Delivery/</link>
        <guid isPermaLink="true">http://localhost:4000/Agile-Project-Management-and-Agile-Delivery/</guid>
        
        
        <category>Agile</category>
        
        <category>Scrum</category>
        
        <category>Design Thinking</category>
        
      </item>
    
  </channel>
</rss>
